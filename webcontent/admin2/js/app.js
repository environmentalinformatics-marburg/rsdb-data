(function(e){function t(t){for(var a,o,n=t[0],c=t[1],l=t[2],u=0,v=[];u<n.length;u++)o=n[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&v.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(v.length)v.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],a=!0,n=1;n<s.length;n++){var c=s[n];0!==i[c]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=s[0]))}return e}var a={},i={app:0},r=[];function o(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=a,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(s,a,function(t){return e[t]}.bind(null,a));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=t,n=n.slice();for(var l=0;l<n.length;l++)t(n[l]);var d=c;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"01ae":function(e,t,s){"use strict";s("a3ae")},"034f":function(e,t,s){"use strict";s("85ec")},"0598":function(e,t,s){},"062d":function(e,t,s){},"0d14":function(e,t,s){},"0dc9":function(e,t,s){"use strict";s("38ec")},"0e36":function(e,t,s){"use strict";s("e673")},1418:function(e,t,s){"use strict";s("9788")},1537:function(e,t,s){"use strict";s("062d")},1575:function(e,t,s){"use strict";s("a89d")},1748:function(e,t,s){"use strict";s("abea")},"1ea8":function(e,t,s){"use strict";s("bf13")},2195:function(e,t,s){},"22ec":function(e,t,s){},2505:function(e,t,s){},"25ee":function(e,t,s){"use strict";s("84f2")},"27cf":function(e,t,s){},"2a61":function(e,t,s){"use strict";s("8c49")},"2b55":function(e,t,s){},"2f00":function(e,t,s){"use strict";s("5479")},3179:function(e,t,s){"use strict";s("7f12")},3806:function(e,t,s){},"38ec":function(e,t,s){},"398d":function(e,t,s){},"3a26":function(e,t,s){},"3a90":function(e,t,s){},"3d53":function(e,t,s){},"3dd8":function(e,t,s){"use strict";s("adf7")},"402f":function(e,t,s){},4142:function(e,t,s){"use strict";s("dc84")},"42b2":function(e,t,s){},4485:function(e,t,s){"use strict";s("3806")},"4c5a":function(e,t,s){},5479:function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("e792");var a=s("2b0e"),i=s("ce5b"),r=s.n(i);s("bf40");a["default"].use(r.a,{});var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",{attrs:{light:""}},[s("div",{staticClass:"grid-container"},[s("div",{staticClass:"grid-item-head"},[s("v-tabs",{staticStyle:{position:"relative"},attrs:{dark:"",color:"blue-grey lighten-1","slider-color":"yellow"}},[e._l(e.tabs,(function(t){return s("v-tab",{key:t.name,attrs:{to:"/"+(void 0===t.target?t.name:t.target),ripple:"",replace:""}},[void 0!==t.icon?s("v-icon",[e._v(e._s(t.icon))]):e._e(),e._v(" "+e._s(t.title)+" ")],1)})),void 0===e.identity||"login"!==e.identity.auth_method&&"jws"!==e.identity.auth_method?e._e():s("span",{staticStyle:{position:"absolute",right:"5px",top:"5px"}},[s("a",{on:{click:e.local_logout}},[s("v-icon",[e._v("meeting_room")]),e._v(" logout ")],1)])],2)],1),s("router-view",{staticClass:"grid-item-content"}),s("div",{staticClass:"grid-item-foot"},[s("span",{attrs:{id:"foot-start-1"}},[e._v("?")]),s("span",{attrs:{id:"foot-end-1"}},[e._v("?")])])],1),e.isInternetExplorer?s("div",{staticClass:"internet-explorer"},[s("h3",{staticStyle:{color:"rgba(197, 32, 32, 1)"}},[e._v("Microsoft Internet Explorer is not usable for this site.")]),e._v(" Use a browser that conforms to current web standards: "),s("br"),e._v("Mozilla Firefox "),s("br"),e._v("Google Chrome "),s("br"),e._v("Microsoft Edge ")]):e._e()])},n=[],c=s("2f62");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var v={name:"App",data:function(){return{}},methods:{local_logout:function(){window.location.href="/logout?ref="+encodeURIComponent(window.location.href)}},computed:d(d({},Object(c["b"])({isAdmin:"identity/isAdmin"})),{},{identity:function(){return this.$store.state.identity.data},tabs:function(){var e=[];return e.push({name:"overview",title:"Overview",target:"",icon:"home"}),e.push({name:"layers",title:"Layers",icon:"photo_library"}),e.push({name:"explorer",title:"Explorer",icon:"explore"}),e.push({name:"viewer",title:"Viewer",icon:"zoom_in"}),e.push({name:"files",title:"Files",icon:"source"}),e.push({name:"tools",title:"Tools",icon:"build"}),e},isInternetExplorer:function(){return void 0!==window.document.documentMode}}),mounted:function(){this.$store.dispatch("init")}},m=v,p=(s("034f"),s("2877")),_=Object(p["a"])(m,o,n,!1,null,null,null),f=_.exports,h=s("8c4f"),b=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"innergrid-container"},[s("div",{staticClass:"innergrid-item-main"},[s("v-layout",[s("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[s("v-card",[s("h1",{staticClass:"headline mb-0"},[e._v("Remote Sensing Database")]),s("v-divider"),s("v-card-title",[s("span",{staticClass:"component"},[s("a",{attrs:{href:"#/layers"}},[s("div",[s("img",{attrs:{src:"images/layers.png"}})]),s("div",{staticClass:"component-text"},[e._v("Layers")])])]),s("span",{staticClass:"component"},[s("a",{attrs:{href:"#/explorer"}},[s("div",[s("img",{attrs:{src:"images/catalog2.png"}})]),s("div",{staticClass:"component-text"},[e._v("Map Explorer")])])]),s("span",{staticClass:"component"},[s("a",{attrs:{href:"#/viewer"}},[s("div",[s("img",{attrs:{src:"images/rasterdb_image.png"}})]),s("div",{staticClass:"component-text"},[e._v("Layer Viewer")])])]),s("span",{staticClass:"component"},[s("a",{attrs:{href:e.old_interface_url,target:"_blank"}},[s("div",[s("img",{attrs:{src:"images/old_interface.png"}})]),s("div",{staticClass:"component-text"},[e._v("old web interface")])])])]),s("v-divider"),s("v-card-title",[s("span",{staticClass:"component"},[s("a",{attrs:{href:e.indices_processing_url,target:"_blank"}},[s("div",[s("img",{attrs:{src:"images/lidar_indices_processing.png"}})]),s("div",{staticClass:"component-text"},[e._v("LiDAR indices processing")])])]),s("span",{staticClass:"component"},[s("a",{attrs:{href:e.indices_documentation_url,target:"_blank"}},[s("div",[s("img",{attrs:{src:"images/lidar_indices_documentation.png"}})]),s("div",{staticClass:"component-text"},[e._v("LiDAR indices documentation")])])]),s("span",{staticClass:"component"},[s("a",{attrs:{href:"https://environmentalinformatics-marburg.github.io/rsdb",target:"_blank"}},[s("div",[s("img",{attrs:{src:"images/rsdb_documentation.png"}})]),s("div",{staticClass:"component-text"},[e._v("RSDB documentation")])])]),s("span",{staticClass:"component"},[s("a",{attrs:{href:"https://github.com/environmentalinformatics-marburg/rsdb/wiki",target:"_blank"}},[s("div",[s("img",{attrs:{src:"images/rsdb_wiki.png"}})]),s("div",{staticClass:"component-text"},[e._v("RSDB wiki")])])])])],1)],1)],1)],1)])},g=[],y={name:"admin-overview",data:function(){return{}},methods:{},computed:{old_interface_url:function(){return this.$store.getters.apiUrl("web")},indices_processing_url:function(){return this.$store.getters.apiUrl("web/lidar_indices/lidar_indices.html")},indices_documentation_url:function(){return this.$store.getters.apiUrl("web/lidar_indices_description/lidar_indices_description.html")}},mounted:function(){}},x=y,w=(s("ea1d"),Object(p["a"])(x,b,g,!1,null,"9103dfd4",null)),k=w.exports,E=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("splitpanes",{staticClass:"rsdb-theme"},[s("pane",{staticClass:"split-nav",attrs:{"min-size":"10",size:"20"}},[s("v-list",{staticClass:"split-nav-list",attrs:{dense:""}},[e._l(e.items,(function(t){return s("v-list-tile",{key:t.name,class:{activeNavigation:e.navigation===t.name},attrs:{to:"/layers/"+t.name,replace:""},on:{click:function(s){e.navigation=t.name}}},[s("v-list-tile-action",[s("v-icon",[e._v(e._s(t.icon))])],1),s("v-list-tile-content",[s("v-list-tile-title",[e._v(e._s(t.title))])],1)],1)})),s("v-divider"),s("v-list-tile",[s("v-btn",{attrs:{flat:"",icon:"",color:"green",title:"refresh layers"},on:{click:function(t){return e.refreshLayers()}}},[s("v-icon",[e._v("refresh")])],1),e._v(" Layers ")],1),void 0!==e.layer_tags?s("multiselect",{attrs:{options:e.layer_tags,"show-labels":!1,placeholder:"filter by tag",multiple:!0},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}}):e._e(),s("v-text-field",{attrs:{label:"search",clearable:"","append-icon":"search"},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),0===e.filteredRasterdbs.length&&0===e.filteredPointdbs.length&&0===e.filteredPointclouds.length&&0===e.filteredVoxeldbs.length&&0===e.filteredPoi_groups.length&&0===e.filteredRoi_groups.length?s("div",[e._v(" no layers ")]):e._e(),0!==e.filteredRasterdbs.length?s("v-list-group",[s("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[s("v-list-tile-content",[s("v-list-tile-title",[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("collections")]),e._v(" "),s("b",[e._v("RasterDBs")]),e._v(" ("+e._s(e.filteredRasterdbs.length)+")")],1)],1)],1),e._l(e.filteredRasterdbs,(function(t){return s("v-list-tile",{key:t.name,class:{activeNavigation:e.navigation==="rasterdbs/"+t.name},attrs:{to:"/layers/rasterdbs/"+t.name,replace:""},on:{click:function(s){e.navigation="rasterdbs/"+t.name}}},[s("v-list-tile-action",[s("v-icon",[e._v("collections")])],1),s("v-list-tile-content",[s("v-list-tile-title",[e._v(e._s(void 0!==t.title?t.title:t.name))])],1)],1)}))],2):e._e(),0!==e.filteredPointclouds.length?s("v-list-group",[s("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[s("v-list-tile-content",[s("v-list-tile-title",[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("grain")]),e._v(" "),s("b",[e._v("Pointclouds")]),e._v(" ("+e._s(e.filteredPointclouds.length)+")")],1)],1)],1),e._l(e.filteredPointclouds,(function(t){return s("v-list-tile",{key:t.name,class:{activeNavigation:e.navigation==="pointclouds/"+t.name},attrs:{to:"/layers/pointclouds/"+t.name,replace:""},on:{click:function(s){e.navigation="pointclouds/"+t.name}}},[s("v-list-tile-action",[s("v-icon",[e._v("grain")])],1),s("v-list-tile-content",[s("v-list-tile-title",[e._v(e._s(void 0!==t.title?t.title:t.name))])],1)],1)}))],2):e._e(),0!==e.filteredVoxeldbs.length?s("v-list-group",[s("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[s("v-list-tile-content",[s("v-list-tile-title",[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("view_module")]),e._v(" "),s("b",[e._v("Voxeldbs")]),e._v(" ("+e._s(e.filteredVoxeldbs.length)+")")],1)],1)],1),e._l(e.filteredVoxeldbs,(function(t){return s("v-list-tile",{key:t.name,class:{activeNavigation:e.navigation==="voxeldbs/"+t.name},attrs:{to:"/layers/voxeldbs/"+t.name,replace:""},on:{click:function(s){e.navigation="voxeldbs/"+t.name}}},[s("v-list-tile-action",[s("v-icon",[e._v("view_module")])],1),s("v-list-tile-content",[s("v-list-tile-title",[e._v(e._s(void 0!==t.title?t.title:t.name))])],1)],1)}))],2):e._e(),0!==e.filteredVectordbs.length?s("v-list-group",[s("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[s("v-list-tile-content",[s("v-list-tile-title",[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("category")]),e._v(" "),s("b",[e._v("Vectordbs")]),e._v(" ("+e._s(e.filteredVectordbs.length)+")")],1)],1)],1),e._l(e.filteredVectordbs,(function(t){return s("v-list-tile",{key:t.name,class:{activeNavigation:e.navigation==="vectordbs/"+t.name},attrs:{to:"/layers/vectordbs/"+t.name,replace:""},on:{click:function(s){e.navigation="vectordbs/"+t.name}}},[s("v-list-tile-action",[s("v-icon",[e._v("category")])],1),s("v-list-tile-content",[s("v-list-tile-title",[e._v(e._s(void 0!==t.title?t.title:t.name))])],1)],1)}))],2):e._e(),0!==e.filteredPoi_groups.length?s("v-list-group",[s("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[s("v-list-tile-content",[s("v-list-tile-title",[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("scatter_plot")]),e._v(" "),s("b",[e._v("POI groups")]),e._v(" ("+e._s(e.filteredPoi_groups.length)+")")],1)],1)],1),e._l(e.filteredPoi_groups,(function(t){return s("v-list-tile",{key:t.name,class:{activeNavigation:e.navigation==="poi_groups/"+t.name},attrs:{to:"/layers/poi_groups/"+t.name,replace:""},on:{click:function(s){e.navigation="poi_groups/"+t.name}}},[s("v-list-tile-action",[s("v-icon",[e._v("scatter_plot")])],1),s("v-list-tile-content",[s("v-list-tile-title",[e._v(e._s(void 0!==t.title&&""!==t.title?t.title:t.name))])],1)],1)}))],2):e._e(),0!==e.filteredRoi_groups.length?s("v-list-group",[s("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[s("v-list-tile-content",[s("v-list-tile-title",[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("widgets")]),e._v(" "),s("b",[e._v("ROI groups")]),e._v(" ("+e._s(e.filteredRoi_groups.length)+")")],1)],1)],1),e._l(e.filteredRoi_groups,(function(t){return s("v-list-tile",{key:t.name,class:{activeNavigation:e.navigation==="roi_groups/"+t.name},attrs:{to:"/layers/roi_groups/"+t.name,replace:""},on:{click:function(s){e.navigation="roi_groups/"+t.name}}},[s("v-list-tile-action",[s("v-icon",[e._v("widgets")])],1),s("v-list-tile-content",[s("v-list-tile-title",[e._v(e._s(void 0!==t.title&&""!==t.title?t.title:t.name))])],1)],1)}))],2):e._e(),0!==e.filteredPointdbs.length?s("v-list-group",[s("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[s("v-list-tile-content",[s("v-list-tile-title",[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("blur_on")]),e._v(" "),s("b",[e._v("PointDBs")]),e._v(" ("+e._s(e.filteredPointdbs.length)+")")],1)],1)],1),e._l(e.filteredPointdbs,(function(t){return s("v-list-tile",{key:t.name,class:{activeNavigation:e.navigation==="pointdbs/"+t.name},attrs:{to:"/layers/pointdbs/"+t.name,replace:""},on:{click:function(s){e.navigation="pointdbs/"+t.name}}},[s("v-list-tile-action",[s("v-icon",[e._v("blur_on")])],1),s("v-list-tile-content",[s("v-list-tile-title",[e._v(e._s(void 0!==t.title?t.title:t.name))])],1)],1)}))],2):e._e(),"init"===e.rasterdbsMode||"load"===e.rasterdbsMode?s("v-list-tile",[s("ring-loader",{attrs:{color:"#000000",size:"20px"}}),e._v(" loading rasterdbs... ")],1):e._e(),"error"===e.rasterdbsMode?s("v-list-tile",[s("v-icon",[e._v("error")]),e._v(" Could not load rasterdbs. ")],1):e._e(),"init"===e.pointcloudsMode||"load"===e.pointcloudsMode?s("v-list-tile",[s("ring-loader",{attrs:{color:"#000000",size:"20px"}}),e._v(" loading pointclouds... ")],1):e._e(),"error"===e.pointcloudsMode?s("v-list-tile",[s("v-icon",[e._v("error")]),e._v(" Could not load pointclouds. ")],1):e._e(),"init"===e.voxeldbsMode||"load"===e.voxeldbsMode?s("v-list-tile",[s("ring-loader",{attrs:{color:"#000000",size:"20px"}}),e._v(" loading voxeldbs... ")],1):e._e(),"error"===e.voxeldbsMode?s("v-list-tile",[s("v-icon",[e._v("error")]),e._v(" Could not load voxeldbs. ")],1):e._e(),"init"===e.vectordbsMode||"load"===e.vectordbsMode?s("v-list-tile",[s("ring-loader",{attrs:{color:"#000000",size:"20px"}}),e._v(" loading vectordbs... ")],1):e._e(),"error"===e.vectordbsMode?s("v-list-tile",[s("v-icon",[e._v("error")]),e._v(" Could not load vectordbs. ")],1):e._e(),"init"===e.poi_groupsMode||"load"===e.poi_groupsMode?s("v-list-tile",[s("ring-loader",{attrs:{color:"#000000",size:"20px"}}),e._v(" loading poi groups... ")],1):e._e(),"error"===e.poi_groupsMode?s("v-list-tile",[s("v-icon",[e._v("error")]),e._v(" Could not load poi groups. ")],1):e._e(),"init"===e.roi_groupsMode||"load"===e.roi_groupsMode?s("v-list-tile",[s("ring-loader",{attrs:{color:"#000000",size:"20px"}}),e._v(" loading roi groups... ")],1):e._e(),"error"===e.roi_groupsMode?s("v-list-tile",[s("v-icon",[e._v("error")]),e._v(" Could not load roi groups. ")],1):e._e(),"init"===e.pointdbsMode||"load"===e.pointdbsMode?s("v-list-tile",[s("ring-loader",{attrs:{color:"#000000",size:"20px"}}),e._v(" loading pointdbs... ")],1):e._e(),"error"===e.pointdbsMode?s("v-list-tile",[s("v-icon",[e._v("error")]),e._v(" Could not load pointdbs. ")],1):e._e()],2)],1),s("pane",{staticClass:"split-main",attrs:{"min-size":"10"}},[s("router-view")],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.rasterdbsError,callback:function(t){e.rasterdbsError=t},expression:"rasterdbsError"}},[e._v(" "+e._s(e.rasterdbsErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.rasterdbsError=!1}}},[e._v("Close")])],1)],1)},S=[],O=s("512e"),P=(s("c1ea"),s("8e5f")),C=s.n(P),T=(s("e607"),s("c0e3")),M=function(){var e=new Intl.Collator(void 0,{numeric:!0}).compare;return function(t,s){return e(void 0===t.title||""===t.title?t.name:t.title,void 0===s.title||""===s.title?s.name:s.title)}}(),R={name:"admin-splitlayers",components:{Splitpanes:O["Splitpanes"],Pane:O["Pane"],RingLoader:T["a"],Multiselect:C.a},data:function(){return{navigation:"overview",selectedTags:[],searchText:void 0}},methods:{refreshLayers:function(){this.$store.dispatch("rasterdbs/refresh"),this.$store.dispatch("pointdbs/refresh"),this.$store.dispatch("pointclouds/refresh"),this.$store.dispatch("voxeldbs/refresh"),this.$store.dispatch("vectordbs/refresh"),this.$store.dispatch("poi_groups/refresh"),this.$store.dispatch("roi_groups/refresh"),this.$store.dispatch("layer_tags/refresh")}},computed:{items:function(){var e=[];return e.push({name:"overview",title:"overview",icon:"apps"}),e},layer_tags:function(){return this.$store.state.layer_tags.data},filterFun:function(){var e=this.tagFilterFun,t=this.searchFilterFun;return function(s){return e(s)&&t(s)}},tagFilterFun:function(){if(0===this.selectedTags.length)return function(){return!0};if(1===this.selectedTags.length){var e=this.selectedTags[0];return function(t){var s=t.tags;return void 0!==s&&s.indexOf(e)>=0}}var t=this.selectedTags;return function(e){var s=e.tags;return void 0!==s&&t.every((function(e){return s.indexOf(e)>=0}))}},searchFilterFun:function(){var e=this.searchText;return void 0===e||null===e||0===e.length?function(){return!0}:(e=e.trim().toLowerCase(),""==e?function(){return!0}:function(t){return t.name.toLowerCase().indexOf(e)>=0||void 0!==t.title&&t.title.toLowerCase().indexOf(e)>=0})},filteredRasterdbs:function(){return void 0===this.rasterdbs?[]:this.rasterdbs.filter(this.filterFun).sort(M)},rasterdbs:function(){return this.$store.state.rasterdbs.data},rasterdbsMode:function(){return this.$store.state.rasterdbs.mode},rasterdbsError:{get:function(){return"error"===this.$store.state.rasterdbs.mode&&this.$store.state.rasterdbs.messageActive},set:function(e){0==e&&this.$store.commit("rasterdbs/closeMessage")}},rasterdbsErrorMessage:function(){return this.$store.state.rasterdbs.message},filteredPointdbs:function(){return void 0===this.pointdbs?[]:this.pointdbs.filter(this.filterFun).sort(M)},pointdbs:function(){return this.$store.state.pointdbs.data},pointdbsMode:function(){return this.$store.state.pointdbs.mode},pointdbsError:{get:function(){return"error"===this.$store.state.pointdbs.mode&&this.$store.state.pointdbs.messageActive},set:function(e){0==e&&this.$store.commit("pointdbs/closeMessage")}},pointdbsErrorMessage:function(){return this.$store.state.pointdbs.message},filteredPointclouds:function(){return void 0===this.pointclouds?[]:this.pointclouds.filter(this.filterFun).sort(M)},pointclouds:function(){return this.$store.state.pointclouds.data},pointcloudsMode:function(){return this.$store.state.pointclouds.mode},pointcloudsError:{get:function(){return"error"===this.$store.state.pointclouds.mode&&this.$store.state.pointclouds.messageActive},set:function(e){0==e&&this.$store.commit("pointclouds/closeMessage")}},pointcloudsErrorMessage:function(){return this.$store.state.pointclouds.message},filteredVoxeldbs:function(){return void 0===this.voxeldbs?[]:this.voxeldbs.filter(this.filterFun).sort(M)},voxeldbs:function(){return this.$store.state.voxeldbs.data},voxeldbsMode:function(){return this.$store.state.voxeldbs.mode},voxeldbsError:{get:function(){return"error"===this.$store.state.voxeldbs.mode&&this.$store.state.voxeldbs.messageActive},set:function(e){0==e&&this.$store.commit("voxeldbs/closeMessage")}},voxeldbsErrorMessage:function(){return this.$store.state.voxeldbs.message},filteredVectordbs:function(){return void 0===this.vectordbs?[]:this.vectordbs.filter(this.filterFun).sort(M)},vectordbs:function(){return this.$store.state.vectordbs.data},vectordbsMode:function(){return this.$store.state.vectordbs.mode},vectordbsError:{get:function(){return"error"===this.$store.state.vectordbs.mode&&this.$store.state.vectordbs.messageActive},set:function(e){0==e&&this.$store.commit("vectordbs/closeMessage")}},vectordbsErrorMessage:function(){return this.$store.state.vectordbs.message},filteredPoi_groups:function(){return void 0===this.poi_groups?[]:this.poi_groups.filter(this.filterFun).sort(M)},poi_groups:function(){return this.$store.state.poi_groups.data},poi_groupsMode:function(){return this.$store.state.poi_groups.mode},poi_groupsError:{get:function(){return"error"===this.$store.state.poi_groups.mode&&this.$store.state.poi_groups.messageActive},set:function(e){0==e&&this.$store.commit("poi_groups/closeMessage")}},poi_groupsErrorMessage:function(){return this.$store.state.poi_groups.message},filteredRoi_groups:function(){return void 0===this.roi_groups?[]:this.roi_groups.filter(this.filterFun).sort(M)},roi_groups:function(){return this.$store.state.roi_groups.data},roi_groupsMode:function(){return this.$store.state.roi_groups.mode},roi_groupsError:{get:function(){return"error"===this.$store.state.roi_groups.mode&&this.$store.state.roi_groups.messageActive},set:function(e){0==e&&this.$store.commit("roi_groups/closeMessage")}},roi_groupsErrorMessage:function(){return this.$store.state.roi_groups.message}},mounted:function(){this.$store.dispatch("rasterdbs/init"),this.$store.dispatch("pointdbs/init"),this.$store.dispatch("pointclouds/init"),this.$store.dispatch("voxeldbs/init"),this.$store.dispatch("vectordbs/init"),this.$store.dispatch("poi_groups/init"),this.$store.dispatch("roi_groups/init"),this.$store.dispatch("layer_tags/init")}},j=R,$=(s("5da2"),Object(p["a"])(j,E,S,!1,null,"2f608882",null)),A=$.exports,D=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h3",{staticClass:"headline mb-0",staticStyle:{"text-align":"center"}},[e._v(" Layers overview ")]),s("v-divider",{staticClass:"meta-divider"}),s("v-container",{attrs:{fluid:"","grid-list-lg":""}},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-card",[s("v-card-title",{attrs:{"primary-title":""}},[s("h3",{staticClass:"headline mb-0"},[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("collections")]),e._v(" RasterDB")],1)]),s("v-card-text",[e._v(" Layers of this type store spatial "),s("b",[e._v("pixel data")]),e._v(" as rasters that are organised in points in time and in bands. ")]),s("v-btn",{on:{click:function(t){return e.$router.push({path:"/upload"})}}},[s("v-icon",[e._v("cloud_upload")]),e._v("upload")],1),e._v(" Insert raster-file data (e.g. GeoTIFF) into new or existing RasterDB-layers. ")],1)],1),s("v-flex",{attrs:{xs12:""}},[s("v-card",[s("v-card-title",{attrs:{"primary-title":""}},[s("h3",{staticClass:"headline mb-0"},[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("grain")]),e._v(" Pointcloud")],1)]),s("v-card-text",[e._v(" Layers of this type store spatial "),s("b",[e._v("point cloud points")]),e._v(". Points may contain a variety of attribues such as RGB color values. ")])],1)],1),s("v-flex",{attrs:{xs12:""}},[s("v-card",[s("v-card-title",{attrs:{"primary-title":""}},[s("h3",{staticClass:"headline mb-0"},[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("view_module")]),e._v(" VoxelDB")],1)]),s("v-card-text",[e._v(" Layers of this type store "),s("b",[e._v("voxels")]),e._v(". ")])],1)],1),s("v-flex",{attrs:{xs12:""}},[s("v-card",[s("v-card-title",{attrs:{"primary-title":""}},[s("h3",{staticClass:"headline mb-0"},[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("category")]),e._v(" VectorDB")],1)]),s("v-card-text",[e._v(" Layers of this type store spatial "),s("b",[e._v("general vector data")]),e._v(". ")]),s("admin-vectordb-create",{on:{created_vectordb:function(t){return e.$router.push({path:"/layers/vectordbs/"+t})}}}),e._v(" Add an empty VectorDB-layer and upload vector data. ")],1)],1),s("v-flex",{attrs:{xs12:""}},[s("v-card",[s("v-card-title",{attrs:{"primary-title":""}},[s("h3",{staticClass:"headline mb-0"},[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("scatter_plot")]),e._v(" POI group")],1)]),s("v-card-text",[e._v(" Groups of this type store vector data: spatial "),s("b",[e._v("Points")]),e._v(" with name. "),s("br"),e._v("From a vectordb-layer a POI-group of same name can be autogenerated by extracting point-features from vector-data. ")])],1)],1),s("v-flex",{attrs:{xs12:""}},[s("v-card",[s("v-card-title",{attrs:{"primary-title":""}},[s("h3",{staticClass:"headline mb-0"},[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("widgets")]),e._v(" ROI group")],1)]),s("v-card-text",[e._v(" Groups of this type store vector data: "),s("b",[e._v("Polygons")]),e._v(" with name and spatial vertex points. "),s("br"),e._v("From a vectordb-layer a ROI-group of same name can be autogenerated by extracting polygon-features from vector-data. ")])],1)],1),s("v-flex",{attrs:{xs12:""}},[s("v-card",[s("v-card-title",{attrs:{"primary-title":""}},[s("h3",{staticClass:"headline mb-0"},[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("blur_on")]),e._v(" PointDB")],1)]),s("v-card-text",[e._v(" (obsolete, use Pointcloud instead) "),s("br"),e._v("Layers of this type store spatial point cloud points. Especially suitable for "),s("b",[e._v("LiDAR data")]),e._v(". ")])],1)],1)],1)],1)],1)},z=[],N=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"create new VectorDB layer"},slot:"activator"},[s("v-icon",[e._v("add")]),e._v(" create ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("create new VectorDB layer")])]),s("v-card-text",[e._v(" On the newly created vector layer you can upload vecor data at the then shown "),s("i",[e._v('"vector layer details page"')]),e._v(" - section "),s("i",[e._v('"Actions"')]),e._v(" - button "),s("i",[e._v('"Files"')]),e._v(". ")]),s("v-card-text",[s("v-text-field",{attrs:{label:"name of the new vector layer"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),s("i",[e._v("Space, not latin chars and other special chars are not allowed. You may replace space chars by underscore. "),s("br"),e._v("Allowed chars: 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_")])],1),s("v-card-text",[void 0!==e.identity?s("span",[e._v("Your roles: "),e._l(e.identity.roles,(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))]),e._v("   ")])}))],2):e._e(),e.isAdmin?s("div",[e._v("Your are "),s("b",[e._v("admin")]),e._v(", so you are able read/modify layers independent of specified roles!")]):e._e(),s("br"),s("br"),e._v("Specified roles can "),s("b",[e._v("read")]),e._v(" layer data. "),s("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclRole},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}}),s("br"),e._v("Specified roles can "),s("b",[e._v("modify")]),e._v(" layer data. "),s("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclModRole},model:{value:e.selectedRolesMod,callback:function(t){e.selectedRolesMod=t},expression:"selectedRolesMod"}}),s("br"),s("i",[e._v("Note: Only users that have one of the the read/modify roles are able to view/change created vector layer!")]),s("br"),e.name?e._e():s("span",{staticStyle:{color:"red"}},[e._v("ERROR: You need to specify a name for the new layer.")]),s("br"),0==e.selectedRoles.length||0==e.selectedRolesMod.length?s("span",{staticStyle:{color:"red"}},[e._v("ERROR: You need to specify at least one role for read and for modify.")]):e._e()],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"grey--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat",disabled:!e.name||0==e.selectedRoles.length||0==e.selectedRolesMod.length},nativeOn:{click:function(t){return e.execute()}}},[e._v("Create")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},L=[],I=s("bc3a"),B=s.n(I);function F(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function V(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?F(Object(s),!0).forEach((function(t){U(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):F(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function U(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var W={name:"admin-vectordb-create",props:[],components:{Multiselect:C.a},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,name:"",selectedRoles:[],selectedRolesMod:[],createdAclRoles:[]}},methods:{refresh:function(){this.$store.dispatch("acl_roles/refresh")},execute:function(){var e=this,t=this.$store.getters.apiUrl("vectordbs");B.a.post(t,{create_vectordb:{name:e.name,acl:this.selectedRoles,acl_mod:this.selectedRolesMod}}).then((function(t){console.log(t),e.dialog=!1,e.$store.dispatch("vectordbs/refresh"),e.$emit("created_vectordb",e.name)})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t),e.dialog=!1,e.$store.dispatch("vectordbs/refresh")}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)},createAclRole:function(e){this.createdAclRoles.push(e),this.selectedRoles.push(e)},createAclModRole:function(e){this.createdAclRoles.push(e),this.selectedRolesMod.push(e)}},computed:V(V({},Object(c["b"])({isAdmin:"identity/isAdmin"})),{},{identity:function(){return this.$store.state.identity.data},acl_roles:function(){return void 0===this.availableRoles?this.createdAclRoles:this.availableRoles.concat(this.createdAclRoles)},availableRoles:function(){var e=void 0===this.$store.state.acl_roles?[]:this.$store.state.acl_roles.data;return void 0===this.identity?e:this.identity.roles.concat(e)}}),watch:{dialog:function(){this.dialog&&(this.selectedRoles=void 0===this.identity||0==this.identity.roles.length?[]:this.identity.roles[0],this.selectedRolesMod=void 0===this.identity||0==this.identity.roles.length?[]:this.identity.roles[0],this.refresh())},identity:function(){0==this.selectedRoles.length&&(this.selectedRoles=void 0===this.identity||0==this.identity.roles.length?[]:this.identity.roles[0]),0==this.selectedRolesMod.length&&(this.selectedRolesMod=void 0===this.identity||0==this.identity.roles.length?[]:this.identity.roles[0])}},mounted:function(){this.refresh()}},G=W,q=(s("a468"),Object(p["a"])(G,N,L,!1,null,"08e7c103",null)),H=q.exports;function J(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Q(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?J(Object(s),!0).forEach((function(t){Y(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):J(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Y(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var K={name:"admin-layers-overview",components:{"admin-vectordb-create":H},data:function(){return{}},methods:{},computed:Q(Q({},Object(c["b"])({isAdmin:"identity/isAdmin"})),{},{rasterdbs:function(){return this.$store.state.rasterdbs.data}}),mounted:function(){this.$store.dispatch("rasterdbs/init")}},X=K,Z=(s("1ea8"),Object(p["a"])(X,D,z,!1,null,"13d4f39e",null)),ee=Z.exports,te=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main"},[s("transition",{attrs:{name:"fade"}},[e.busy?s("div",{staticClass:"div-busy"},[s("pulse-loader"),e._v(e._s(e.busyMessage)+" ")],1):e._e()]),s("div",{staticStyle:{"text-align":"center","padding-right":"400px"}},[s("h3",{staticClass:"headline mb-0"},[e._v(" "+e._s(void 0===e.meta||void 0===e.meta.title||""===e.meta.title?e.rasterdb:e.meta.title)+" "),s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/viewer/"+e.rasterdb,target:"_blank",title:"open layer in viewer on new tab"}},[s("v-icon",[e._v("zoom_in")])],1)],1),void 0!==e.meta&&void 0!==e.meta.title&&""!==e.meta.title?s("span",[s("span",{staticStyle:{"user-select":"none"}},[e._v("Identifier: ")]),s("b",[e._v(e._s(e.rasterdb))])]):e._e()]),e.metaError?s("div",[s("b",[e._v("ERROR")]),e._v(" "+e._s(e.metaErrorMessage)+" ")]):e._e(),void 0!=e.meta?s("div",[s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.modify?s("dialog-set-info",{attrs:{meta:e.meta,url:e.$store.getters.apiUrl("rasterdb/"+e.meta.name+"/set"),data_name:"meta"},on:{changed:e.refresh}}):e._e(),e._v(" Info ")],1),s("div",{staticClass:"meta-content",staticStyle:{poisition:"relative"}},[s("a",{attrs:{href:"#/viewer/"+e.rasterdb,target:"_blank",title:"open layer in viewer on new tab"}},[s("img",{key:e.meta.name,staticClass:"thumbnail",attrs:{src:e.$store.getters.apiUrl("rasterdb/"+e.meta.name+"/raster.png?width=200"),alt:""}})]),s("box-info",{attrs:{meta:e.meta}})],1),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.modify?s("admin-rasterdb-dialog-set-projection",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Projection ")],1),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(0),s("td",[void 0===e.meta.ref.code||0===e.meta.ref.code.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.ref.code))])])]),s("tr",[e._m(1),s("td",[void 0===e.meta.ref.proj4||0===e.meta.ref.proj4.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.ref.proj4))])])])])]),s("div",[s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.modify?s("admin-rasterdb-dialog-set-associated",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Associated ")],1),s("div",{staticClass:"meta-content"},[s("table",e._l(e.meta.associated,(function(t,a){return s("tr",{key:a},[s("td",[s("b",[e._v(e._s(a)+":")])]),s("td",e._l(e.optArray(t),(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))]),"PointDB"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/pointdbs/"+t,title:"go to pointdb layer info"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"pointcloud"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/pointclouds/"+t,title:"go to pointcloud layer info"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"voxeldb"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/voxeldbs/"+t,title:"go to voxeldb"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"poi_groups"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/poi_groups/"+t,title:"go to POI group layer info"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"roi_groups"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/roi_groups/"+t,title:"go to ROI group layer info"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),e._v("     ")],1)})),0)])})),0)])],1),e.meta.bands.length>0?s("div",[s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Bands ("+e._s(e.meta.bands.length)+") ")]),s("v-data-table",{staticClass:"meta-content",attrs:{headers:e.bandsTableHeaders,items:e.meta.bands,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[s("td",[e._v(e._s(t.item.index))]),s("td",[e._v(e._s(t.item.title))]),s("td",[e._v(e._s(t.item.wavelength))]),s("td",[e._v(e._s(t.item.fwhm))]),s("td",[e._v(e._s(t.item.visualisation))])]}}],null,!1,1755220808)})],1):e._e(),e.meta.time_slices.length>0?s("div",[s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Time slices ("+e._s(e.meta.time_slices.length)+") ")]),s("v-data-table",{staticClass:"meta-content",attrs:{headers:e.timeSliceTableHeaders,items:e.meta.time_slices,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[s("td",[e._v(e._s(t.item.id))]),s("td",[e._v(e._s(t.item.name))])]}}],null,!1,2870960023)})],1):e._e(),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Details ")]),void 0!==e.meta.ref?s("div",{staticClass:"meta-content"},[s("table",{staticClass:"table-details",staticStyle:{display:"inline-block"}},[s("thead",[s("tr",[s("th",[e._v("Pixel size "),s("div",{staticClass:"header-unit"},[e._v(e._s(e.projection_units))])]),e._m(2),s("th",[e._v("Extent "),s("div",{staticClass:"header-unit"},[e._v(e._s(e.projection_units))])]),e._m(3)])]),s("tbody",[s("tr",[s("td",[e._v(e._s(e.pixelSizeText))]),void 0!==e.meta.ref.internal_rasterdb_extent?s("td",[e._v(e._s(e.meta.ref.internal_rasterdb_extent[2]-e.meta.ref.internal_rasterdb_extent[0]+1)+" "),s("b",[e._v("x")]),e._v(" "+e._s(e.meta.ref.internal_rasterdb_extent[3]-e.meta.ref.internal_rasterdb_extent[1]+1))]):s("td",[e._v("none")]),void 0!==e.meta.ref.internal_rasterdb_extent&&void 0!==e.meta.ref.pixel_size?s("td",[e._v(e._s(((e.meta.ref.internal_rasterdb_extent[2]-e.meta.ref.internal_rasterdb_extent[0]+1)*e.meta.ref.pixel_size.x).toPrecision(8))+" "),s("b",[e._v("x")]),e._v(" "+e._s(((e.meta.ref.internal_rasterdb_extent[3]-e.meta.ref.internal_rasterdb_extent[1]+1)*e.meta.ref.pixel_size.y).toPrecision(8)))]):s("td",[e._v("none")]),void 0!==e.meta.ref.extent?s("td",[e._v(e._s(e.meta.ref.extent[0].toPrecision(8))),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.ref.extent[1].toPrecision(8))+" "),s("b",[e._v("-")]),e._v(" "+e._s(e.meta.ref.extent[2].toPrecision(8))),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.ref.extent[3].toPrecision(8)))]):s("td",[e._v("none")])])])]),void 0===e.meta.tile_count?s("v-btn",{staticStyle:{"vertical-align":"top"},on:{click:function(t){return e.refresh(!0)}}},[s("v-icon",[e._v("arrow_drop_down")]),e._v(" more")],1):e._e(),void 0!==e.meta.tile_count?s("div",[s("table",{staticClass:"table-details",staticStyle:{display:"inline-block"}},[e._m(4),s("tbody",[s("tr",[void 0!==e.meta.ref.internal_rasterdb_offset?s("td",[e._v(e._s(e.meta.ref.internal_rasterdb_offset.x.toPrecision(8))),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.ref.internal_rasterdb_offset.y.toPrecision(8)))]):s("td",[e._v("none")]),void 0!==e.meta.tile_count?s("td",[e._v(e._s(e.meta.tile_count))]):s("td",[e._v("none")]),void 0!==e.meta.tile_pixel_len?s("td",[e._v(e._s(e.meta.tile_pixel_len)+" "),s("b",[e._v("x")]),e._v(" "+e._s(e.meta.tile_pixel_len))]):s("td",[e._v("none")]),void 0!==e.meta.ref.internal_rasterdb_extent?s("td",[e._v(e._s(e.meta.ref.internal_rasterdb_extent[0])),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.ref.internal_rasterdb_extent[1])+" "),s("b",[e._v("-")]),e._v(" "+e._s(e.meta.ref.internal_rasterdb_extent[2])),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.ref.internal_rasterdb_extent[3]))]):s("td",[e._v("none")])])])]),s("table",{staticClass:"table-details"},[e._m(5),s("tbody",[s("tr",[void 0!==e.meta.storage_size?s("td",[e._v(e._s(e.meta.storage_size))]):s("td",[e._v("none")]),void 0!==e.meta.storage_internal_free_size?s("td",[e._v(e._s(e.meta.storage_internal_free_size))]):s("td",[e._v("none")]),void 0!==e.meta.tile_size_stats?s("td",[e._v("min: "+e._s(e.meta.tile_size_stats.min)+"    mean: "+e._s(e.meta.tile_size_stats.mean)+"    max: "+e._s(e.meta.tile_size_stats.max))]):s("td",[e._v("none")])])])])]):e._e()],1):e._e(),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.isAdmin?s("admin-rasterdb-dialog-set-acl",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Access control ")],1),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(6),s("td",[e._l(e.meta.acl,(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))]),e._v("   ")])})),0===e.meta.acl.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)]),s("tr",[e._m(7),s("td",[e._l(e.meta.acl_mod,(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))]),e._v("   ")])})),0===e.meta.acl_mod.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Applications ")]),s("div",{staticClass:"meta-content"},[s("admin-rasterdb-dialog-wms",{attrs:{meta:e.meta},on:{changed:e.refresh}}),s("admin-rasterdb-dialog-wcs",{attrs:{meta:e.meta},on:{changed:e.refresh}})],1),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Actions ")]),e.modify?s("div",{staticClass:"meta-content"},[s("b",[e._v("Manage:")]),s("admin-rasterdb-bands",{attrs:{meta:e.meta},on:{changed:e.refresh}}),s("admin-rasterdb-dialog-remove-timestamps",{attrs:{meta:e.meta},on:{changed:e.refresh}}),s("admin-rasterdb-dialog-custom_wms",{attrs:{meta:e.meta},on:{changed:e.refresh}}),s("br"),s("br"),e._m(8),s("br"),s("br"),s("admin-rasterdb-dialog-delete",{attrs:{meta:e.meta},on:{changed:e.refresh}})],1):e._e()],1):e._e()],1)},se=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("geo code:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("proj4:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("th",[e._v("Extent "),s("div",{staticClass:"header-unit"},[e._v("pixel")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("th",[e._v("Extent "),s("div",{staticClass:"header-unit"},[e._v("coordinates")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("Origin "),s("div",{staticClass:"header-unit"},[e._v("coordinates")])]),s("th",[e._v("Tiles "),s("div",{staticClass:"header-unit"},[e._v("count")])]),s("th",[e._v("Tile size "),s("div",{staticClass:"header-unit"},[e._v("pixel")])]),s("th",[e._v("Internal extent "),s("div",{staticClass:"header-unit"},[e._v("pixel")])])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("Storage size "),s("div",{staticClass:"header-unit"},[e._v("bytes")])]),s("th",[e._v("Storage internal free size "),s("div",{staticClass:"header-unit"},[e._v("bytes")])]),s("th",[e._v("Tile size "),s("div",{staticClass:"header-unit"},[e._v("bytes")])])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("access roles:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("modify roles:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{attrs:{href:"#/tools/task"}},[e._v("more available as "),s("i",[e._v("tasks")]),e._v(" at 'tools'-tab - 'task creation' (e.g. "),s("b",[e._v("layer renaming")]),e._v(")")])}],ae=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[s("v-icon",[e._v("create")])],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set Infos of layer    "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-card-text",[s("ul",[s("li",[e._v("Scroll down to commit changes by "),s("b",[e._v("'save'-button.")])]),s("li",[s("b",[e._v("Mouse hover")]),e._v(" over edit-lines to show field definitions at tooltip.")]),s("li",[e._v("Fields comply with "),s("a",{attrs:{href:"https://www.dublincore.org",target:"_blank"}},[e._v("Dublin Core")]),e._v(" metadata standard.")])])]),s("v-divider"),s("v-card-text",[s("v-textarea",{attrs:{label:"title","auto-grow":"",rows:"1",title:"The name of the layer. If left empty defaults to the layer ID (Idetifier-field)."},model:{value:e.newTitle,callback:function(t){e.newTitle=t},expression:"newTitle"}}),s("div",{staticStyle:{"margin-bottom":"15px"},attrs:{title:"Keywords describing the layer."}},[s("span",{staticStyle:{color:"grey"}},[e._v("subject")]),s("multiselect",{attrs:{options:e.layer_tags,multiple:"",taggable:!0,placeholder:"select or type subjects",tagPlaceholder:"Press enter to create a tag"},on:{tag:e.createTag},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1),s("v-textarea",{attrs:{label:"description.abstract","auto-grow":"",rows:"1",title:"Concise layer description. For extensive details, use field 'description'."},model:{value:e.newDescription,callback:function(t){e.newDescription=t},expression:"newDescription"}}),s("v-textarea",{attrs:{label:"date.created","auto-grow":"",rows:"1",title:"Creation or processing date of the layer."},model:{value:e.newAcquisition_date,callback:function(t){e.newAcquisition_date=t},expression:"newAcquisition_date"}}),s("v-textarea",{attrs:{label:"publisher","auto-grow":"",rows:"1",title:"Person or group that provides the layer."},model:{value:e.new_corresponding_contact,callback:function(t){e.new_corresponding_contact=t},expression:"new_corresponding_contact"}}),e._l(e.newProperties,(function(t,a){return e._l(t,(function(t,i){return s("v-textarea",{key:a+":"+i,attrs:{label:a,title:a+" field","auto-grow":"",rows:"1","append-outer-icon":"remove_circle"},on:{"click:append-outer":function(t){return e.removeField(a,i)}},model:{value:e.newProperties[a][i],callback:function(t){e.$set(e.newProperties[a],i,t)},expression:"newProperties[tag][index]"}})}))}))],2),s("v-divider"),s("v-card-actions",[s("v-menu",{attrs:{bottom:"",origin:"center center",transition:"scale-transition","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[s("v-btn",e._g({staticClass:"indigo--text",attrs:{slot:"activator",title:"edit"},slot:"activator"},a),[s("v-icon",[e._v("add")]),e._v(" Add Field ")],1)]}}]),model:{value:e.addFieldMenuVisible,callback:function(t){e.addFieldMenuVisible=t},expression:"addFieldMenuVisible"}},[s("v-card",[s("v-card-title",[s("v-select",{attrs:{items:e.propertyTags,label:"Field",solo:""},scopedSlots:e._u([{key:"append-outer",fn:function(){return[s("v-btn",{staticClass:"indigo--text",attrs:{disabled:void 0===e.selectedPropertyTag,title:"Append Field to list of properties"},on:{click:function(t){return e.appendField(e.selectedPropertyTag)}}},[s("v-icon",[e._v("add")]),e._v(" Add Field ")],1)]},proxy:!0}]),model:{value:e.selectedPropertyTag,callback:function(t){e.selectedPropertyTag=t},expression:"selectedPropertyTag"}})],1)],1)],1),s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set.apply(null,arguments)}}},[e._v("Save")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},ie=[],re=s("a34a"),oe=s.n(re);function ne(e,t,s,a,i,r,o){try{var n=e[r](o),c=n.value}catch(l){return void s(l)}n.done?t(c):Promise.resolve(c).then(a,i)}function ce(e){return function(){var t=this,s=arguments;return new Promise((function(a,i){var r=e.apply(t,s);function o(e){ne(r,a,i,o,n,"next",e)}function n(e){ne(r,a,i,o,n,"throw",e)}o(void 0)}))}}function le(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function de(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?le(Object(s),!0).forEach((function(t){ue(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):le(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ue(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ve(e){return void 0===e?[]:Array.isArray(e)?e:[e]}var me={name:"admin-rasterdb-dialog-set-info",props:["meta","url","data_name"],components:{Multiselect:C.a},data:function(){return{dialog:!1,newTitle:"",newDescription:"",newAcquisition_date:"",new_corresponding_contact:"",setError:!1,setErrorMessage:void 0,selectedTags:[],createdTags:[],newProperties:{},propertyTags:["accrualMethod","accrualPeriodicity","accrualPolicy","audience","audience.educationLevel","audience.mediator","contributor","contributor.creator","coverage","coverage.spatial","coverage.temporal","creator","date","date.available","date.dateAccepted","date.dateCopyrighted","date.dateSubmitted","date.issued","date.modified","date.valid","description","description.tableOfContents","format","format.extent","format.medium","identifier","identifier.bibliographicCitation","instructionalMethod","language","provenance","relation","relation.conformsTo","relation.hasFormat","relation.hasPart","relation.hasVersion","relation.isFormatOf","relation.isPartOf","relation.isReferencedBy","relation.isReplacedBy","relation.isRequiredBy","relation.isVersionOf","relation.references","relation.replaces","relation.requires","relation.source","rights","rights.accessRights","rights.license","rightsHolder","source","title.alternative","type"],addFieldMenuVisible:!1,selectedPropertyTag:void 0}},computed:de(de({},Object(c["c"])({availableTags:function(e){return e.layer_tags.data}})),{},{layer_tags:function(){return void 0===this.availableTags?this.createdTags:this.availableTags.concat(this.createdTags)}}),methods:{createTag:function(e){this.createdTags.push(e),this.selectedTags.push(e)},refresh:function(){this.newTitle=this.meta.title,this.newDescription=this.meta.description,this.newAcquisition_date=void 0===this.meta.acquisition_date?"":this.meta.acquisition_date,this.new_corresponding_contact=void 0===this.meta.corresponding_contact?"":this.meta.corresponding_contact,this.selectedTags=ve(this.meta.tags),this.newProperties=JSON.parse(JSON.stringify(this.meta.properties)),this.$store.dispatch("layer_tags/refresh")},set:function(){var e=this;return ce(oe.a.mark((function t(){var s,a,i;return oe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,s={title:e.newTitle,description:e.newDescription,acquisition_date:e.newAcquisition_date,corresponding_contact:e.new_corresponding_contact,tags:e.selectedTags,properties:e.newProperties},a=void 0===e.data_name?s:ue({},e.data_name,s),t.next=5,B.a.post(e.url,a);case 5:i=t.sent,console.log(i),e.$emit("changed"),e.dialog=!1,t.next=18;break;case 11:t.prev=11,t.t0=t["catch"](0),e.setError=!0,e.setErrorMessage="Error setting property",console.log(t.t0),e.$emit("changed"),e.dialog=!1;case 18:case"end":return t.stop()}}),t,null,[[0,11]])})))()},appendField:function(e){void 0!==e&&null!==e&&(void 0===this.newProperties[e]?this.$set(this.newProperties,e,[""]):this.newProperties[e].push(""),this.addFieldMenuVisible=!1)},removeField:function(e,t){void 0!==this.newProperties[e]&&(1===this.newProperties[e].length?this.$set(this.newProperties,e,void 0):this.newProperties[e].splice(t,1))}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},pe=me,_e=Object(p["a"])(pe,ae,ie,!1,null,null,null),fe=_e.exports,he=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("table",{staticStyle:{"padding-right":"420px"}},[0!==e.meta.description.length?s("tr",[e._m(0),s("td",[0===e.meta.description.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.description))])])]):e._e(),void 0!==e.meta.acquisition_date?s("tr",[e._m(1),s("td",[void 0===e.meta.acquisition_date?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.acquisition_date))])])]):e._e(),void 0!==e.meta.corresponding_contact?s("tr",[e._m(2),s("td",[void 0===e.meta.corresponding_contact?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.corresponding_contact))])])]):e._e(),e.optArray(e.meta.tags).length>0?s("tr",[e._m(3),s("td",[e._l(e.optArray(e.meta.tags),(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))]),e._v("   ")])})),0===e.optArray(e.meta.tags).length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)]):e._e(),e._l(e.meta.properties,(function(t,a){return e._l(t,(function(t,i){return s("tr",{key:a+":"+i},[s("td",[s("b",[e._v(e._s(a)+":")])]),s("td",[s("span",[e._v(e._s(t))])])])}))}))],2)},be=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("description.abstract:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("date.created:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("publisher:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("subject:")])])}],ge={props:["meta"],components:{},data:function(){return{}},computed:{},methods:{optArray:function(e){return void 0===e?[]:Array.isArray(e)?e:[e]}},watch:{},mounted:function(){}},ye=ge,xe=(s("0dc9"),Object(p["a"])(ye,he,be,!1,null,"0497bb65",null)),we=xe.exports,ke=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[s("v-icon",[e._v("create")])],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set projection of "),s("i",[e._v("RasterDB")]),e._v("   "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-card-text",[void 0==e.newCode||null==e.newCode||e.newCode.startsWith("EPSG:")?e._e():s("span",{staticStyle:{color:"red"}},[s("v-icon",{attrs:{color:"red"}},[e._v("warning")]),e._v(" Projection code SHOULD start with "),s("b",[e._v("EPSG:")])],1),s("v-text-field",{attrs:{label:"projection code"},model:{value:e.newCode,callback:function(t){e.newCode=t},expression:"newCode"}}),e._v(" Code may be an "),s("a",{attrs:{href:"https://epsg.io",target:"_blank",rel:"noopener noreferrer"}},[e._v("EPSG")]),e._v(" identifier (e.g. 'EPSG:4326') ")],1),s("v-card-text",[s("v-text-field",{attrs:{label:"PROJ.4"},model:{value:e.newProj4,callback:function(t){e.newProj4=t},expression:"newProj4"}}),s("a",{attrs:{href:"http://proj4.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("PROJ.4")]),e._v(" description (e.g. '+proj=longlat +datum=WGS84 +no_defs ') ")],1),s("v-card-text",[e._v(" Ensure same projection for projection code and proj4 ! ")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set.apply(null,arguments)}}},[e._v("Set")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},Ee=[],Se={name:"admin-rasterdb-dialog-set-projection",props:["meta"],data:function(){return{dialog:!1,newCode:"",newProj4:"",setError:!1,setErrorMessage:void 0}},methods:{refresh:function(){this.newCode=this.meta.ref.code,this.newProj4=this.meta.ref.proj4},set:function(){var e=this,t=this.$store.getters.apiUrl("rasterdb/"+e.meta.name+"/set");B.a.post(t,{meta:{code:e.newCode,proj4:e.newProj4}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error setting property: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},Oe=Se,Pe=Object(p["a"])(Oe,ke,Ee,!1,null,null,null),Ce=Pe.exports,Te=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[s("v-icon",[e._v("create")])],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set Associated layers of "),s("i",[e._v("RasterDB")]),e._v("   "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-card-text",{staticStyle:{"min-height":"400px"}},[e._v(" PointDB-layer: This RasterDB layer is visualisation of that PointDB. "),s("multiselect",{attrs:{options:e.pointdbs,placeholder:"select pointdb-layer","allow-empty":!0},model:{value:e.selectedPointdb,callback:function(t){e.selectedPointdb=t},expression:"selectedPointdb"}}),s("br"),e._v(" PointCloud-layer: This RasterDB layer is visualisation of that PointCloud. "),s("multiselect",{attrs:{options:e.pointclouds,placeholder:"select pointcloud-layer","allow-empty":!0},model:{value:e.selectedPointcloud,callback:function(t){e.selectedPointcloud=t},expression:"selectedPointcloud"}}),s("br"),e._v(" VoxelDB-layer: This RasterDB layer is visualisation of that VoxelDB. "),s("multiselect",{attrs:{options:e.voxeldbs,placeholder:"select voxeldb-layer","allow-empty":!0},model:{value:e.selectedVoxeldb,callback:function(t){e.selectedVoxeldb=t},expression:"selectedVoxeldb"}}),s("br"),e._v(" POI-groups: Groups of named geo-points that can be used for processing. "),s("multiselect",{attrs:{options:e.poi_groups,placeholder:"select poi-groups","allow-empty":!0,multiple:!0},model:{value:e.selectedPoi_groups,callback:function(t){e.selectedPoi_groups=t},expression:"selectedPoi_groups"}}),s("br"),e._v(" ROI-groups: Groups of named polygons that can be used for processing. "),s("multiselect",{attrs:{options:e.roi_groups,placeholder:"select roi-groups","allow-empty":!0,multiple:!0},model:{value:e.selectedRoi_groups,callback:function(t){e.selectedRoi_groups=t},expression:"selectedRoi_groups"}})],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set.apply(null,arguments)}}},[e._v("Set")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},Me=[];function Re(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function je(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(s),!0).forEach((function(t){$e(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Re(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function $e(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Ae={name:"admin-rasterdb-dialog-set-associated",props:["meta"],components:{Multiselect:C.a},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,selectedPointdb:void 0,selectedPointcloud:void 0,selectedVoxeldb:void 0,selectedPoi_groups:[],selectedRoi_groups:[]}},computed:je({},Object(c["b"])({pointdbs:"pointdbs/names",pointclouds:"pointclouds/names",voxeldbs:"voxeldbs/names",poi_groups:"poi_groups/names",roi_groups:"roi_groups/names"})),methods:{refresh:function(){this.selectedPointdb=this.meta.associated.PointDB,this.selectedPointcloud=this.meta.associated.pointcloud,this.selectedVoxeldb=this.meta.associated.voxeldb,this.selectedPoi_groups=this.meta.associated.poi_groups,this.selectedRoi_groups=this.meta.associated.roi_groups,this.$store.dispatch("pointdbs/refresh"),this.$store.dispatch("pointclouds/refresh"),this.$store.dispatch("poi_groups/refresh"),this.$store.dispatch("roi_groups/refresh")},set:function(){var e=this,t=this.$store.getters.apiUrl("rasterdb/"+e.meta.name+"/set"),s={};void 0!==this.selectedPointdb&&(s.PointDB=this.selectedPointdb),void 0!==this.selectedPointcloud&&(s.pointcloud=this.selectedPointcloud),void 0!==this.selectedVoxeldb&&(s.voxeldb=this.selectedVoxeldb),s.poi_groups=this.selectedPoi_groups,s.roi_groups=this.selectedRoi_groups,B.a.post(t,{meta:{associated:s}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){e.setError=!0,e.setErrorMessage="Error setting property",console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},De=Ae,ze=Object(p["a"])(De,Te,Me,!1,null,null,null),Ne=ze.exports,Le=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[s("v-icon",[e._v("create")])],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set access control of "),s("i",[e._v("RasterDB")]),e._v("   "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-divider"),s("v-card-text",[e._v(" Specified roles can "),s("b",[e._v("read")]),e._v(" layer data. "),s("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclRole},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}})],1),s("v-card-text",[e._v(" Specified roles can "),s("b",[e._v("modify")]),e._v(" layer data. "),s("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclModRole},model:{value:e.selectedRolesMod,callback:function(t){e.selectedRolesMod=t},expression:"selectedRolesMod"}})],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set.apply(null,arguments)}}},[e._v("Set")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},Ie=[];function Be(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Fe(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(s),!0).forEach((function(t){Ve(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Be(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ve(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Ue={name:"admin-rasterdb-dialog-set-acl",props:["meta"],components:{Multiselect:C.a},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,selectedRoles:[],selectedRolesMod:[],availableRoles:[],createdAclRoles:[]}},computed:Fe(Fe({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}})),{},{acl_roles:function(){return this.availableRoles.concat(this.createdAclRoles)}}),methods:{createAclRole:function(e){this.createdAclRoles.push(e),this.selectedRoles.push(e)},createAclModRole:function(e){this.createdAclRoles.push(e),this.selectedRolesMod.push(e)},refresh:function(){var e=this;this.selectedRoles=this.meta.acl,this.selectedRolesMod=this.meta.acl_mod,B.a.get(this.$store.getters.apiUrl("api/roles")).then((function(t){e.availableRoles=t.data.roles})).catch((function(e){console.log(e)}))},set:function(){var e=this,t=this.$store.getters.apiUrl("rasterdb/"+e.meta.name+"/set");B.a.post(t,{meta:{acl:e.selectedRoles,acl_mod:e.selectedRolesMod}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error setting property: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},We=Ue,Ge=Object(p["a"])(We,Le,Ie,!1,null,null,null),qe=Ge.exports,He=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"Delete this raster layer. This can not be undone."},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("delete_forever")]),e._v("delete entire layer ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("DELETE "),s("i",[e._v("RasterDB")]),e._v("   "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-card-text",[e._v(" Delete this raster layer. "),s("b",[e._v("This can not be undone.")])]),s("v-card-text",[e._v(" Are you sure? ")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"red--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.delete_layer()}}},[e._v("Delete")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},Je=[],Qe={name:"admin-rasterdb-dialog-delete",props:["meta"],data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0}},methods:{refresh:function(){},delete_layer:function(){var e=this,t=this.$store.getters.apiUrl("rasterdb/"+e.meta.name+"/delete");B.a.post(t,{action:{delete_rasterdb:e.meta.name}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},Ye=Qe,Ke=Object(p["a"])(Ye,He,Je,!1,null,null,null),Xe=Ke.exports,Ze=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticStyle:{display:"inline-block"}},[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"open dialog to edit / remove time slices"},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("Time slices ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Manage time slices of layer:    "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-data-table",{staticClass:"meta-content",attrs:{headers:e.timeSliceTableHeaders,items:e.timeSlices,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.item.remove,expression:"props.item.remove"}],staticStyle:{width:"40px"},attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(t.item.remove)?e._i(t.item.remove,null)>-1:t.item.remove},on:{change:function(s){var a=t.item.remove,i=s.target,r=!!i.checked;if(Array.isArray(a)){var o=null,n=e._i(a,o);i.checked?n<0&&e.$set(t.item,"remove",a.concat([o])):n>-1&&e.$set(t.item,"remove",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(t.item,"remove",r)}}}),e._v("remove time slice")]),s("td",[e._v(e._s(t.item.id))]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.item.name,expression:"props.item.name"}],attrs:{placeholder:"name"},domProps:{value:t.item.name},on:{input:function(s){s.target.composing||e.$set(t.item,"name",s.target.value)}}})]),s("td",{class:{remove:t.item.remove}},[e._v(e._s(t.item.remove?"remove time slice":"(keep time slice)"))])]}}])}),s("v-card-text",[s("b",[e._v("Edit")]),e._v(" time slice names by click on that name-entry. "),s("br"),e._v("Raster data is fixed stored at time slices IDs. So, take care to not confuse them at multi time slices rename edits. "),s("br"),s("b",[e._v("Remove")]),e._v(" time slices by checkbox selection, all data of that time slices will be removed. ")]),s("br"),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"red--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.execute()}}},[e._v("Execute")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1),s("admin-task-console",{attrs:{id:e.remote_task_id,closeOnDone:""},on:{done:function(t){return e.$emit("changed")},error:function(t){return e.$emit("changed")}}})],1)},et=[],tt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Task Console")])]),"READY"===e.remote_task.status?s("v-icon",{attrs:{color:"yellow"}},[e._v("directions_walk")]):e._e(),"RUNNING"===e.remote_task.status?s("v-icon",{attrs:{color:"black"}},[e._v("directions_run")]):e._e(),"DONE"===e.remote_task.status?s("v-icon",{attrs:{color:"green"}},[e._v("done")]):e._e(),"ERROR"===e.remote_task.status?s("v-icon",{attrs:{color:"red"}},[e._v("error")]):e._e(),e._v(" "+e._s(e.remote_task.status)+" "),s("span",{staticStyle:{"padding-left":"50px"}},["READY"!==e.remote_task.status&&"RUNNING"!==e.remote_task.status||e.remote_task.canceled||!e.remote_task.cancelable?e._e():s("span",[s("v-btn",{attrs:{icon:""},on:{click:function(t){return e.cancel(e.remote_task.id)}}},[s("v-icon",[e._v("cancel")]),e._v(" cancel")],1)],1),e.remote_task.canceled||e.remote_task.cancelable?e._e():s("span",[e._v("---")]),e.remote_task.canceled?s("span",[e._v("cancel requested")]):e._e()]),s("br"),e._v(" id: "+e._s(e.id)+", time "+e._s((e.remote_task.runtime/1e3).toFixed())+" s "),s("br"),e._v(" "+e._s(e.remote_task.message)+" "),s("v-card-actions",[s("v-spacer"),"error"===e.status?s("span",[e._v("error "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Close")])],1):e._e()],1),s("span",{staticStyle:{color:"grey"}},[s("v-icon",[e._v("event_note")]),e._v(" Click outside of this box to close it. "),s("br"),e._v("Task continues to run and can be viewed on status view.")],1),e.remote_task.task?s("div",[s("hr"),s("b",[e._v("Task")]),s("pre",[e._v(e._s(JSON.stringify(e.remote_task.task,null,2))+"\n                    ")])]):e._e(),e.remote_task.identity?s("div",[s("hr"),s("b",[e._v("Identity:")]),e._v(" "+e._s(e.remote_task.identity)+" ")]):e._e(),s("hr"),s("b",[e._v("Log Messages")]),e._l(e.log,(function(t,a){return s("div",{key:a},[e._v(e._s(t))])}))],2)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},st=[];function at(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function it(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?at(Object(s),!0).forEach((function(t){rt(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):at(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function rt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ot(e,t,s,a,i,r,o){try{var n=e[r](o),c=n.value}catch(l){return void s(l)}n.done?t(c):Promise.resolve(c).then(a,i)}function nt(e){return function(){var t=this,s=arguments;return new Promise((function(a,i){var r=e.apply(t,s);function o(e){ot(r,a,i,o,n,"next",e)}function n(e){ot(r,a,i,o,n,"throw",e)}o(void 0)}))}}var ct={name:"admin-task-console",props:{id:Number,closeOnDone:Boolean},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,remote_task:{},status:"init",log:[]}},methods:{refresh:function(){},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)},query_remote_task:function(){this.queryLog(this.id);var e=this;B.a.get(this.urlPrefix+"../../api/remote_tasks/"+this.id+"?task&identity").then((function(t){console.log(t.data.remote_task),e.remote_task=t.data.remote_task,e.remote_task.active?(e.status="running",window.setTimeout((function(){e.query_remote_task()}),1e3)):("DONE"===e.remote_task.status?(e.status="done",e.closeOnDone&&(e.dialog=!1),e.$emit("done")):(e.status="error",console.log("error"),e.$emit("error")),console.log(t))})).catch((function(t){e.setErrorMessage=e.errorToText(t),e.status="error",e.dialog&&window.setTimeout((function(){e.query_remote_task()}),1e3)}))},cancel:function(e){var t=this;return nt(oe.a.mark((function s(){var a;return oe.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,console.log(e),a=t.$store.getters.apiUrl("api/remote_tasks/"+e+"/cancel"),s.next=5,B.a.post(a);case 5:t.refresh(),s.next=11;break;case 8:s.prev=8,s.t0=s["catch"](0),console.log(s.t0);case 11:return s.prev=11,s.finish(11);case 13:case"end":return s.stop()}}),s,null,[[0,8,11,13]])})))()},queryLog:function(e){var t=this;return nt(oe.a.mark((function s(){var a,i;return oe.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,console.log(e),a=t.$store.getters.apiUrl("api/remote_tasks/"+e+"/log"),s.next=5,B.a.get(a);case 5:i=s.sent,t.log=i.data.split("\n"),s.next=12;break;case 9:s.prev=9,s.t0=s["catch"](0),console.log(s.t0);case 12:return s.prev=12,s.finish(12);case 14:case"end":return s.stop()}}),s,null,[[0,9,12,14]])})))()}},computed:it({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}})),watch:{meta:function(){this.refresh()},dialog:function(){this.dialog?this.refresh():this.$emit("close")},id:function(){this.setErrorMessage=void 0,void 0===this.id?(this.status="init",this.dialog=!1,this.remote_task={}):(this.status="init",this.dialog=!0,this.query_remote_task())}},mounted:function(){this.refresh()}},lt=ct,dt=Object(p["a"])(lt,tt,st,!1,null,null,null),ut=dt.exports;function vt(e,t,s,a,i,r,o){try{var n=e[r](o),c=n.value}catch(l){return void s(l)}n.done?t(c):Promise.resolve(c).then(a,i)}function mt(e){return function(){var t=this,s=arguments;return new Promise((function(a,i){var r=e.apply(t,s);function o(e){vt(r,a,i,o,n,"next",e)}function n(e){vt(r,a,i,o,n,"throw",e)}o(void 0)}))}}var pt={name:"admin-rasterdb-dialog-remove-timestamps",props:["meta"],components:{"admin-task-console":ut},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,timeSliceTableHeaders:[{text:"",align:"left",sortable:!1},{text:"Id",align:"left",value:"id"},{text:"Name",align:"left",value:"name"},{text:"action",align:"left",value:"remove"}],timeSlices:[],remote_task_id:void 0}},methods:{refresh:function(){this.timeSlices=this.meta.time_slices.map((function(e){return{id:e.id,name:e.name}}))},execute:function(){var e=this;return mt(oe.a.mark((function t(){var s,a;return oe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.$store.getters.apiUrl("rasterdb/"+e.meta.name+"/set"),t.prev=1,t.next=4,B.a.post(s,{meta:{time_slices:e.timeSlices}});case 4:a=t.sent,console.log(a),e.timeSlices.filter((function(e){return e.remove})).length>0?e.execute_time_slices_remove():(e.$emit("changed"),e.dialog=!1),t.next=16;break;case 9:t.prev=9,t.t0=t["catch"](1),e.setError=!0,e.setErrorMessage="Error setting property",console.log(t.t0),e.$emit("changed"),e.dialog=!1;case 16:case"end":return t.stop()}}),t,null,[[1,9]])})))()},execute_time_slices_remove:function(){var e=this;return mt(oe.a.mark((function t(){var s,a,i,r;return oe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.$store.getters.apiUrl("api/remote_tasks"),a=e.timeSlices.filter((function(e){return e.remove})).map((function(e){return e.id})),t.prev=2,t.next=5,B.a.post(s,{remote_task:{task_rasterdb:"remove_timestamps",rasterdb:e.meta.name,timestamps:a}});case 5:i=t.sent,console.log(i),e.$emit("changed"),e.dialog=!1,r=i.data.remote_task,e.remote_task_id=r.id,t.next=22;break;case 13:t.prev=13,t.t0=t["catch"](2),console.log(t.t0),console.log(e.errorToText(t.t0)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t.t0),console.log(t.t0),e.$emit("changed"),e.dialog=!1;case 22:case"end":return t.stop()}}),t,null,[[2,13]])})))()},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},_t=pt,ft=(s("951c"),Object(p["a"])(_t,Ze,et,!1,null,"3e6492ae",null)),ht=ft.exports,bt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticStyle:{display:"inline-block"}},[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"open dialog to manage custom WMS entries"},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("Custom WMS ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Manage custom WMS entries of layer:    "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-card-text",[s("b",[e._v("Add ("),s("v-icon",[e._v("add")]),e._v(") / edit ("),s("v-icon",[e._v("edit")]),e._v(") / remove ("),s("v-icon",[e._v("delete_forever")]),e._v(")")],1),e._v(" custom WMS entries, copy WMS URL to clipboard ("),s("v-icon",[e._v("content_copy")]),e._v("). ")],1),s("hr"),s("v-card-text",[s("table",[s("thead",[s("tr",[s("th"),s("th"),s("th",[e._v("ID")]),s("th",[e._v("URL")])])]),s("tbody",e._l(e.custom_wms,(function(t,a){return s("tr",{key:a},[s("td",[s("v-btn",{attrs:{flat:"",icon:"",title:"Remove custom WMS entry."},on:{click:function(t){return e.removeEntry(a)}}},[s("v-icon",[e._v("delete_forever")])],1)],1),s("td",[s("admin-rasterdb-dialog-custom_wms-edit",{ref:"entry_"+a,refInFor:!0,attrs:{entry:t,id:a}})],1),s("td",[s("b",[e._v(e._s(a))])]),s("td",[s("v-btn",{attrs:{flat:"",icon:"",title:"copy WMS URL of this custom WMS entry to clipboard"},on:{click:function(t){e.onUrlCopy(e.wmsUrl(a))}}},[s("v-icon",[e._v("content_copy")])],1)],1),s("td",[e._v(e._s(e.wmsUrl(a)))])])})),0)])]),s("hr"),s("v-card-actions",[s("v-menu",{attrs:{bottom:"",origin:"center center",transition:"scale-transition","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[s("v-btn",e._g({staticClass:"indigo--text",attrs:{slot:"activator",title:"Add a new custom WMS entry"},slot:"activator"},a),[s("v-icon",[e._v("add")]),e._v(" Add entry")],1)]}}]),model:{value:e.addEntryVisible,callback:function(t){e.addEntryVisible=t},expression:"addEntryVisible"}},[s("v-card",[s("v-card-title",[s("v-textarea",{attrs:{label:"entry ID","auto-grow":"",rows:"1",title:"Add a new custom WMS entry."},scopedSlots:e._u([{key:"append-outer",fn:function(){return[s("v-btn",{staticClass:"indigo--text",attrs:{disabled:void 0===e.new_entry||null===e.new_entry||""===e.new_entry||void 0!==e.custom_wms[e.new_entry],title:"Add a new custom WMS entry."},on:{click:function(t){return e.addEntry(e.new_entry,{},!0)}}},[s("v-icon",[e._v("add")]),e._v(" Add entry ")],1)]},proxy:!0}]),model:{value:e.new_entry,callback:function(t){e.new_entry=t},expression:"new_entry"}})],1)],1)],1),s("v-spacer"),s("v-btn",{staticClass:"red--text darken-1",nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",nativeOn:{click:function(t){return e.execute()}}},[e._v("Commit")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1),s("v-snackbar",{attrs:{top:"",timeout:2e3},model:{value:e.snackbarCopiedToClipboard,callback:function(t){e.snackbarCopiedToClipboard=t},expression:"snackbarCopiedToClipboard"}},[e._v(" URL copied to clipboard "),s("v-btn",{attrs:{color:"pink",flat:""},on:{click:function(t){e.snackbarCopiedToClipboard=!1}}},[e._v("Close")])],1)],1)},gt=[],yt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-menu",{attrs:{transition:"scale-transition","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[s("v-btn",e._g({attrs:{slot:"activator",flat:"",icon:"",title:"Change settings of custom WMS entry."},slot:"activator"},a),[s("v-icon",[e._v("edit")])],1)]}}]),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[s("v-card",[s("v-card-title",[e._v(" Custom WMS entry: "),s("b",[e._v(" "+e._s(e.id))])]),s("hr"),s("v-card-text",[s("b",[e._v("Value range")]),e._v(" (mapped value interval) "),s("v-select",{attrs:{items:e.value_range,"show-labels":!1,allowEmpty:!1,solo:"","hide-details":""},model:{value:e.entry.value_range,callback:function(t){e.$set(e.entry,"value_range",t)},expression:"entry.value_range"}}),s("span",{class:{disabled:"static"!==e.entry.value_range}},[e._v(" Static range min: "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.entry.value_range_static_min,expression:"entry.value_range_static_min"}],staticClass:"text-input",class:{"text-input-invalid":"static"===e.entry.value_range&&isNaN(e.entry.value_range_static_min)},attrs:{type:"text",id:"name",name:"name",maxlength:"8",size:"10",disabled:"static"!==e.entry.value_range,placeholder:"minimum"},domProps:{value:e.entry.value_range_static_min},on:{input:function(t){t.target.composing||e.$set(e.entry,"value_range_static_min",t.target.value)}}}),e._v(" max: "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.entry.value_range_static_max,expression:"entry.value_range_static_max"}],staticClass:"text-input",class:{"text-input-invalid":"static"===e.entry.value_range&&isNaN(e.entry.value_range_static_max)},attrs:{type:"text",id:"name",name:"name",maxlength:"8",size:"10",disabled:"static"!==e.entry.value_range,placeholder:"maximum"},domProps:{value:e.entry.value_range_static_max},on:{input:function(t){t.target.composing||e.$set(e.entry,"value_range_static_max",t.target.value)}}})])],1),s("v-card-text",[s("b",[e._v("Gamma")]),e._v(" (non-linear value transformation) "),s("div",{staticStyle:{"font-size":"0.8em","padding-left":"50px"}},[e._v(" auto --\x3e Equalized value distribution "),s("br"),e._v("γ < 1 --\x3e Emphasis on low values "),s("br"),e._v("γ = 1 --\x3e Linear values "),s("br"),e._v("γ > 1 --\x3e Emphasis on high values ")]),s("v-select",{attrs:{items:e.gammas,"show-labels":!1,allowEmpty:!1,solo:"","hide-details":""},model:{value:e.entry.gamma,callback:function(t){e.$set(e.entry,"gamma",t)},expression:"entry.gamma"}}),s("v-checkbox",{attrs:{label:"Same gamma for multiple bands","hide-details":"",disabled:"auto"!==e.entry.gamma},model:{value:e.entry.gamma_auto_sync,callback:function(t){e.$set(e.entry,"gamma_auto_sync",t)},expression:"entry.gamma_auto_sync"}})],1),s("v-card-text",[s("b",[e._v("Single band mapping")]),e._v(" (value to color pixel mapping of one band) "),s("v-select",{attrs:{items:e.oneBandMappings,"show-labels":!1,allowEmpty:!1,solo:"","hide-details":""},model:{value:e.entry.palette,callback:function(t){e.$set(e.entry,"palette",t)},expression:"entry.palette"}})],1),s("v-card-text",[s("b",[e._v("Format")]),e._v(" (image type) "),s("v-select",{attrs:{items:e.formats,"show-labels":!1,allowEmpty:!1,solo:"","hide-details":""},model:{value:e.entry.format,callback:function(t){e.$set(e.entry,"format",t)},expression:"entry.format"}})],1)],1)],1)},xt=[],wt={name:"admin-rasterdb-dialog-custom_wms-edit",props:["entry","id"],components:{},data:function(){return{visible:!1,value_range:["auto","static"],gammas:["auto","0.1","0.2","0.5","1.0","1.5","2.0","2.5","3.0"],oneBandMappings:["grey","inferno","viridis","jet","cividis"],formats:["png:compressed","png:uncompressed","jpg","jpg:small"]}},methods:{},watch:{},mounted:function(){}},kt=wt,Et=(s("25ee"),Object(p["a"])(kt,yt,xt,!1,null,"36b8943d",null)),St=Et.exports;function Ot(e,t,s,a,i,r,o){try{var n=e[r](o),c=n.value}catch(l){return void s(l)}n.done?t(c):Promise.resolve(c).then(a,i)}function Pt(e){return function(){var t=this,s=arguments;return new Promise((function(a,i){var r=e.apply(t,s);function o(e){Ot(r,a,i,o,n,"next",e)}function n(e){Ot(r,a,i,o,n,"throw",e)}o(void 0)}))}}var Ct={name:"admin-rasterdb-dialog-custom_wms",props:["meta"],components:{"admin-rasterdb-dialog-custom_wms-edit":St},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,custom_wms:{},addEntryVisible:!1,new_entry:"",snackbarCopiedToClipboard:!1}},computed:{identity:function(){return this.$store.state.identity.data}},methods:{refresh:function(){for(var e in this.custom_wms={},this.meta.custom_wms)console.log(e),this.addEntry(e,this.meta.custom_wms[e])},execute:function(){var e=this;return Pt(oe.a.mark((function t(){var s,a;return oe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.$store.getters.apiUrl("rasterdb/"+e.meta.name+"/set"),t.prev=1,t.next=4,B.a.post(s,{meta:{custom_wms:e.custom_wms}});case 4:a=t.sent,console.log(a),e.$emit("changed"),e.dialog=!1,t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](1),e.setError=!0,e.setErrorMessage="Error setting custom_wms",console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,10]])})))()},addEntry:function(e,t,s){var a=this,i={};i.value_range=void 0!==t.value_range?t.value_range:"auto",i.value_range_static_min=void 0!==t.value_range_static_min?t.value_range_static_min:"0",i.value_range_static_max=void 0!==t.value_range_static_max?t.value_range_static_max:"255",i.gamma=void 0!==t.gamma?t.gamma:"auto",i.gamma_auto_sync=void 0!==t.gamma_auto_sync&&t.gamma_auto_sync,i.palette=void 0!==t.palette?t.palette:"grey",i.format=void 0!==t.format?t.format:"png:compressed",this.$set(this.custom_wms,e,i),this.addEntryVisible=!1,s&&this.$nextTick((function(){console.log(a.$refs),console.log(a.$refs["entry_"+e]),a.$refs["entry_"+e][0].visible=!0}))},removeEntry:function(e){this.$delete(this.custom_wms,e)},wmsUrl:function(e){return void 0===this.identity||void 0===this.meta?"[unknown]":this.identity.url_base+"/rasterdb/"+this.meta.name+"/wms/"+e},onUrlCopy:function(e){Tt(e),this.snackbarCopiedToClipboard=!0}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}};function Tt(e){var t=document.createElement("textarea");t.style.position="fixed",t.style.top=0,t.style.left=0,t.style.width="2em",t.style.height="2em",t.style.padding=0,t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.select();try{var s=document.execCommand("copy"),a=s?"successful":"unsuccessful";console.log("copying text command was "+a)}catch(i){console.log("ERROR unable to copy: "+i)}document.body.removeChild(t)}var Mt=Ct,Rt=Object(p["a"])(Mt,bt,gt,!1,null,"88cc968c",null),jt=Rt.exports,$t=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticStyle:{display:"inline-block"}},[s("v-dialog",{attrs:{lazy:"",absolute:"","min-width":"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"open dialog to edit / remove bands"},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("bands ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Manage bands of layer:    "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-data-table",{staticClass:"meta-content",attrs:{headers:e.bandTableHeaders,items:e.bands,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.item.remove,expression:"props.item.remove"}],staticStyle:{width:"40px"},attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(t.item.remove)?e._i(t.item.remove,null)>-1:t.item.remove},on:{change:function(s){var a=t.item.remove,i=s.target,r=!!i.checked;if(Array.isArray(a)){var o=null,n=e._i(a,o);i.checked?n<0&&e.$set(t.item,"remove",a.concat([o])):n>-1&&e.$set(t.item,"remove",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(t.item,"remove",r)}}}),e._v("remove band")]),s("td",[e._v(e._s(t.item.index))]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.item.title,expression:"props.item.title"}],attrs:{placeholder:"title"},domProps:{value:t.item.title},on:{input:function(s){s.target.composing||e.$set(t.item,"title",s.target.value)}}})]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.item.visualisation,expression:"props.item.visualisation"}],attrs:{placeholder:"visualisation"},domProps:{value:t.item.visualisation},on:{input:function(s){s.target.composing||e.$set(t.item,"visualisation",s.target.value)}}})]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.item.vis_min,expression:"props.item.vis_min"}],attrs:{placeholder:"vis_min"},domProps:{value:t.item.vis_min},on:{input:function(s){s.target.composing||e.$set(t.item,"vis_min",s.target.value)}}})]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.item.vis_max,expression:"props.item.vis_max"}],attrs:{placeholder:"vis_max"},domProps:{value:t.item.vis_max},on:{input:function(s){s.target.composing||e.$set(t.item,"vis_max",s.target.value)}}})]),s("td",{class:{remove:t.item.remove}},[e._v(e._s(t.item.remove?"remove band":"(keep band)"))])]}}])}),s("v-card-text",[s("b",[e._v("Edit")]),e._v(" band properties by click on that entry. "),s("br"),s("b",[e._v("Remove")]),e._v(" bands by checkbox selection, all data of that bands will be removed. ")]),s("br"),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"red--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.execute()}}},[e._v("Execute")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1),s("admin-task-console",{attrs:{id:e.remote_task_id,closeOnDone:""},on:{done:function(t){return e.$emit("changed")},error:function(t){return e.$emit("changed")}}})],1)},At=[];function Dt(e,t,s,a,i,r,o){try{var n=e[r](o),c=n.value}catch(l){return void s(l)}n.done?t(c):Promise.resolve(c).then(a,i)}function zt(e){return function(){var t=this,s=arguments;return new Promise((function(a,i){var r=e.apply(t,s);function o(e){Dt(r,a,i,o,n,"next",e)}function n(e){Dt(r,a,i,o,n,"throw",e)}o(void 0)}))}}var Nt={name:"admin-rasterdb-dialog-bands",props:["meta"],components:{"admin-task-console":ut},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,bandTableHeaders:[{text:"",align:"left",sortable:!1},{text:"index",align:"left",value:"index"},{text:"title",align:"left",value:"title"},{text:"visualisation",align:"left",value:"visualisation"},{text:"vis_min",align:"left",value:"vis_min"},{text:"vis_max",align:"left",value:"vis_max"},{text:"action",align:"left",value:"remove"}],bands:[],remote_task_id:void 0}},methods:{refresh:function(){this.bands=this.meta.bands.map((function(e){return{index:e.index,title:e.title,visualisation:e.visualisation,vis_min:e.vis_min,vis_max:e.vis_max}}))},execute:function(){var e=this;return zt(oe.a.mark((function t(){var s,a;return oe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.$store.getters.apiUrl("rasterdb/"+e.meta.name+"/set"),t.prev=1,t.next=4,B.a.post(s,{meta:{bands:e.bands}});case 4:a=t.sent,console.log(a),e.bands.filter((function(e){return e.remove})).length>0?e.execute_bands_remove():(e.$emit("changed"),e.dialog=!1),t.next=16;break;case 9:t.prev=9,t.t0=t["catch"](1),e.setError=!0,e.setErrorMessage="Error setting property",console.log(t.t0),e.$emit("changed"),e.dialog=!1;case 16:case"end":return t.stop()}}),t,null,[[1,9]])})))()},execute_bands_remove:function(){var e=this;return zt(oe.a.mark((function t(){var s,a,i,r;return oe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.$store.getters.apiUrl("api/remote_tasks"),a=e.bands.filter((function(e){return e.remove})).map((function(e){return e.index})),t.prev=2,t.next=5,B.a.post(s,{remote_task:{task_rasterdb:"remove_bands",rasterdb:e.meta.name,bands:a}});case 5:i=t.sent,console.log(i),e.$emit("changed"),e.dialog=!1,r=i.data.remote_task,e.remote_task_id=r.id,t.next=22;break;case 13:t.prev=13,t.t0=t["catch"](2),console.log(t.t0),console.log(e.errorToText(t.t0)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t.t0),console.log(t.t0),e.$emit("changed"),e.dialog=!1;case 22:case"end":return t.stop()}}),t,null,[[2,13]])})))()},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},Lt=Nt,It=(s("8c53"),Object(p["a"])(Lt,$t,At,!1,null,"2d92e21c",null)),Bt=It.exports,Ft=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticStyle:{display:"inline-block"}},[s("v-dialog",{attrs:{lazy:"",absolute:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"Show URL for WMS based access to this RasterDB layer."},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("WMS access ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("WMS access of "),s("i",[e._v("RasterDB")]),e._v("   "),s("b",[e._v(e._s(e.meta.name))])])]),e._v(" WMS URL: "),s("v-btn",{attrs:{title:"copy WMS URL of this RasterDB layer to clipboard"},on:{click:e.onUrlCopy}},[s("v-icon",[e._v("content_copy")]),e._v(" Copy to clipboard")],1),s("div",{staticClass:"wms-url"},[e._v(e._s(e.wmsUrl))]),s("br"),e._v(" Web Map Service (WMS) "),s("a",{attrs:{href:"https://www.ogc.org/standards/wms",target:"_blank"}},[e._v("specification")]),e._v(", "),s("a",{attrs:{href:"https://en.wikipedia.org/wiki/Web_Map_Service",target:"_blank"}},[e._v(" Wikipedia entry")]),s("br"),s("br"),s("h2",[e._v("WMS client "),s("a",{attrs:{href:"https://qgis.org/",target:"_blank"}},[e._v("Qgis 3")]),e._v(":")]),e._v(" At Qgis window "),s("i",[e._v("Browser")]),e._v("-Box rigth click on "),s("i",[e._v("WMS/WMTS")]),e._v("-list-entry, click the shown "),s("i",[e._v("New Connection...")]),e._v("-Button, the "),s("i",[e._v("Create a New WMS/WMTS Connection")]),e._v("-dialog opens, "),s("br"),e._v("at "),s("i",[e._v("Connection Details")]),e._v(" type a name in the "),s("i",[e._v("Name")]),e._v("-field (e.g. the layer name), and in the "),s("i",[e._v("URL")]),e._v("-field type or paste the above WMS URL for this layer, "),s("br"),e._v("if the RSDB server runs with login, at "),s("i",[e._v("Authentication")]),e._v(" select the "),s("i",[e._v("Basic")]),e._v("-tab, type your account details in the "),s("i",[e._v("User name")]),e._v("-field and the "),s("i",[e._v("Password")]),e._v("-field, Qgis does support BASIC-Authentication, but not DIGEST-Authentication, "),s("br"),e._v("click the "),s("i",[e._v("OK")]),e._v("-Button. "),s("br"),s("br"),e._v("The new layer is shown as list-entry in the sub-list of the "),s("i",[e._v("WMS/WMTS")]),e._v("-list-entry, double click on the sub-list-entry, a list of bands and visualisations is shown, "),s("br"),e._v("(optional) if the layer contains multiple points in time, exapnd the list by click on the arrow symbol on the left, "),s("br"),e._v("double click on a list-entry to view in Qgis, the layer is added to the Qgis-Layers in the "),s("i",[e._v("Layers")]),e._v("-Box. "),s("br"),s("br"),s("h2",[e._v("WMS client "),s("a",{attrs:{href:"http://openlayers.org/",target:"_blank"}},[e._v("OpenLayers")]),e._v(":")]),s("br"),s("b",[e._v("WMS GetCapabilities request:")]),s("br"),s("i",[e._v(e._s(e.wmsUrl)+"?REQUEST=GetCapabilities")]),s("br"),e._v(" or "),s("br"),s("i",[e._v(e._s(e.wmsUrl))]),s("br"),s("br"),s("b",[e._v("WMS GetMap request:")]),s("br"),s("i",[e._v(e._s(e.wmsUrl)+"?REQUEST=GetMap&modus=openlayers")]),s("br"),s("i",[e._v("&WIDTH=[WIDTH]")]),s("br"),s("i",[e._v("&HEIGHT=[HEIGHT]")]),s("br"),s("i",[e._v("&BBOX=[XMIN],[YMIN],[XMAX],[YMAX]")]),s("br"),s("i",[e._v("&LAYERS=[LAYER_NAME]")]),s("br"),s("br"),e._v(" Parameters "),s("i",[e._v("REQUEST")]),e._v(", "),s("i",[e._v("WIDTH")]),e._v(", "),s("i",[e._v("HEIGHT")]),e._v(", "),s("i",[e._v("BBOX")]),e._v(" are set by Openlayers. "),s("br"),e._v(" Parameter "),s("i",[e._v("LAYERS")]),e._v(" is set by user. "),s("br"),s("br"),s("b",[e._v("LAYERS:")]),e._v(" (optional) "),s("br"),e._v("Name of visualisation that is listed as layer in the GetCapabilities document. "),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Close")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1),s("v-snackbar",{attrs:{top:"",timeout:2e3},model:{value:e.snackbarCopiedToClipboard,callback:function(t){e.snackbarCopiedToClipboard=t},expression:"snackbarCopiedToClipboard"}},[e._v(" URL copied to clipboard "),s("v-btn",{attrs:{color:"pink",flat:""},on:{click:function(t){e.snackbarCopiedToClipboard=!1}}},[e._v("Close")])],1)],1)},Vt=[];function Ut(e){var t=document.createElement("textarea");t.style.position="fixed",t.style.top=0,t.style.left=0,t.style.width="2em",t.style.height="2em",t.style.padding=0,t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.select();try{var s=document.execCommand("copy"),a=s?"successful":"unsuccessful";console.log("copying text command was "+a)}catch(i){console.log("ERROR unable to copy: "+i)}document.body.removeChild(t)}var Wt={name:"admin-rasterdb-dialog-wms",props:["meta"],components:{},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,snackbarCopiedToClipboard:!1}},methods:{refresh:function(){},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)},onUrlCopy:function(){Ut(this.wmsUrl),this.snackbarCopiedToClipboard=!0}},computed:{identity:function(){return this.$store.state.identity.data},wmsUrl:function(){return void 0===this.identity||void 0===this.meta?"[unknown]":this.identity.url_base+"/rasterdb/"+this.meta.name+"/wms"}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},Gt=Wt,qt=(s("4485"),Object(p["a"])(Gt,Ft,Vt,!1,null,"749cfc38",null)),Ht=qt.exports,Jt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticStyle:{display:"inline-block"}},[s("v-dialog",{attrs:{lazy:"",absolute:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"Show URL for WCS based access to this RasterDB layer."},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("WCS access ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("WCS access of "),s("i",[e._v("RasterDB")]),e._v("   "),s("b",[e._v(e._s(e.meta.name))])])]),e._v(" WCS URL: "),s("v-btn",{attrs:{title:"copy WCS URL of this RasterDB layer to clipboard"},on:{click:e.onUrlCopy}},[s("v-icon",[e._v("content_copy")]),e._v(" Copy to clipboard")],1),s("div",{staticClass:"wcs-url"},[e._v(e._s(e.wcsUrl))]),s("br"),e._v(" Web Coverage Service (WCS) "),s("a",{attrs:{href:"http://www.opengeospatial.org/standards/wcs",target:"_blank"}},[e._v("specification")]),e._v(", "),s("a",{attrs:{href:"https://en.wikipedia.org/wiki/Web_Coverage_Service",target:"_blank"}},[e._v(" Wikipedia entry")]),s("br"),s("br"),s("h2",[e._v("WCS client "),s("a",{attrs:{href:"https://qgis.org/",target:"_blank"}},[e._v("Qgis 3")]),e._v(":")]),e._v(" At Qgis window "),s("i",[e._v("Browser")]),e._v("-Box rigth click on "),s("i",[e._v("WCS")]),e._v("-list-entry, click the shown "),s("i",[e._v("New Connection...")]),e._v("-Button, the "),s("i",[e._v("Create a New WCS Connection")]),e._v("-dialog opens, "),s("br"),e._v("at "),s("i",[e._v("Connection Details")]),e._v(" type a name in the "),s("i",[e._v("Name")]),e._v("-field (e.g. the layer name), and in the "),s("i",[e._v("URL")]),e._v("-field type or paste the above WCS URL for this layer, "),s("br"),e._v("if the RSDB server runs with login, at "),s("i",[e._v("Authentication")]),e._v(" select the "),s("i",[e._v("Basic")]),e._v("-tab, type your account details in the "),s("i",[e._v("User name")]),e._v("-field and the "),s("i",[e._v("Password")]),e._v("-field, Qgis does support BASIC-Authentication, but not DIGEST-Authentication, "),s("br"),e._v("click the "),s("i",[e._v("OK")]),e._v("-Button. "),s("br"),s("br"),e._v("The new layer is shown as list-entry in the sub-list of the "),s("i",[e._v("WCS")]),e._v("-list-entry, double click on the sub-list-entry, a list-entry of the layer name is shown, "),s("br"),e._v("double click on this list-entry to view in Qgis, the layer is added to the Qgis-Layers in the "),s("i",[e._v("Layers")]),e._v("-Box. "),s("br"),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Close")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1),s("v-snackbar",{attrs:{top:"",timeout:2e3},model:{value:e.snackbarCopiedToClipboard,callback:function(t){e.snackbarCopiedToClipboard=t},expression:"snackbarCopiedToClipboard"}},[e._v(" URL copied to clipboard "),s("v-btn",{attrs:{color:"pink",flat:""},on:{click:function(t){e.snackbarCopiedToClipboard=!1}}},[e._v("Close")])],1)],1)},Qt=[];function Yt(e){var t=document.createElement("textarea");t.style.position="fixed",t.style.top=0,t.style.left=0,t.style.width="2em",t.style.height="2em",t.style.padding=0,t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.select();try{var s=document.execCommand("copy"),a=s?"successful":"unsuccessful";console.log("copying text command was "+a)}catch(i){console.log("ERROR unable to copy: "+i)}document.body.removeChild(t)}var Kt={name:"admin-rasterdb-dialog-wcs",props:["meta"],components:{},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,snackbarCopiedToClipboard:!1}},methods:{refresh:function(){},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)},onUrlCopy:function(){Yt(this.wcsUrl),this.snackbarCopiedToClipboard=!0}},computed:{identity:function(){return this.$store.state.identity.data},wcsUrl:function(){return void 0===this.identity||void 0===this.meta?"[unknown]":this.identity.url_base+"/rasterdb/"+this.meta.name+"/wcs"}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},Xt=Kt,Zt=(s("8f4a"),Object(p["a"])(Xt,Jt,Qt,!1,null,"cf9160fa",null)),es=Zt.exports,ts=s("8a5d");function ss(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function as(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ss(Object(s),!0).forEach((function(t){is(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ss(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function is(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var rs={name:"admin-rasterdb-detail",components:{"dialog-set-info":fe,"box-info":we,"admin-rasterdb-dialog-set-projection":Ce,"admin-rasterdb-dialog-set-associated":Ne,"admin-rasterdb-dialog-set-acl":qe,"admin-rasterdb-dialog-delete":Xe,"admin-rasterdb-dialog-remove-timestamps":ht,"admin-rasterdb-dialog-custom_wms":jt,"admin-rasterdb-bands":Bt,"admin-rasterdb-dialog-wms":Ht,"admin-rasterdb-dialog-wcs":es,PulseLoader:ts["a"]},props:["rasterdb"],data:function(){return{meta:void 0,metaError:!1,metaErrorMessage:void 0,busy:!1,busyMessage:void 0,bandsTableHeaders:[{text:"Id",align:"right",value:"index",width:"55px"},{text:"Name",align:"left",value:"title"},{text:"Wavelength",align:"left",value:"wavelength",width:"10px"},{text:"Fwhm",align:"left",value:"fwhm",width:"10px"},{text:"Visualisation",align:"left",value:"visualisation",width:"100px"}],timeSliceTableHeaders:[{text:"Id",align:"right",value:"id",width:"55px"},{text:"Name",align:"left",value:"name"}],panel:[!0,!0]}},methods:{refresh:function(e){var t=this;this.$store.dispatch("rasterdbs/refresh");var s=this.$store.getters.apiUrl("rasterdb/"+t.rasterdb+"/meta.json"),a={};e&&(a.tile_count=!0,a.storage_size=!0,a.storage_internal_free_size=!0,a.tile_size_stats=!0),t.metaError=!1,t.metaErrorMessage=void 0,t.busy=!0,t.busyMessage="loading ...",B.a.get(s,{params:a}).then((function(e){t.meta=e.data,t.busy=!1,t.busyMessage=void 0})).catch((function(e){t.metaError=!0,t.metaErrorMessage="getting meta data: "+t.errorToText(e),t.meta=void 0,t.busy=!1,t.busyMessage=void 0}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data},optArray:function(e){return void 0===e?[]:Array.isArray(e)?e:[e]}},computed:as(as({},Object(c["b"])({isAdmin:"identity/isAdmin"})),{},{pixelSizeText:function(){return void 0===this.meta||void 0===this.meta.ref||void 0===this.meta.ref.pixel_size?"not set":this.meta.ref.pixel_size.x===this.meta.ref.pixel_size.y?+this.meta.ref.pixel_size.x.toPrecision(8)+" x "+ +this.meta.ref.pixel_size.x.toPrecision(8):+this.meta.ref.pixel_size.x.toPrecision(8)+" x "+ +this.meta.ref.pixel_size.y.toPrecision(8)},modify:function(){return void 0!==this.meta&&void 0!=this.meta.modify&&this.meta.modify},urlPrefix:function(){return this.$store.state.identity.urlPrefix},projection_units:function(){return void 0!==this.meta&&void 0!==this.meta.ref&&void 0!==this.meta.ref.unit&&void 0!==this.meta.ref.unit.name?this.meta.ref.unit.name:"projection units"}}),mounted:function(){this.refresh()},watch:{rasterdb:function(){this.refresh()}}},os=rs,ns=(s("dd15"),Object(p["a"])(os,te,se,!1,null,"7ec2ec26",null)),cs=ns.exports,ls=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main"},[s("transition",{attrs:{name:"fade"}},[e.busy?s("div",{staticClass:"div-busy"},[s("pulse-loader"),e._v(e._s(e.busyMessage)+" ")],1):e._e()]),s("div",{staticStyle:{"text-align":"center","padding-right":"400px"}},[s("h3",{staticClass:"headline mb-0"},[e._v(" "+e._s(void 0===e.meta||void 0===e.meta.title||""===e.meta.title?e.pointcloud:e.meta.title)+" "),void 0!==e.meta&&void 0!==e.meta.associated.rasterdb?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/viewer/"+e.meta.associated.rasterdb,target:"_blank",title:"open layer in viewer on new tab"}},[s("v-icon",[e._v("zoom_in")])],1):e._e()],1),void 0!==e.meta&&void 0!==e.meta.title&&""!==e.meta.title?s("span",[s("span",{staticStyle:{"user-select":"none"}},[e._v("id: ")]),s("b",[e._v(e._s(e.pointcloud))])]):e._e()]),e.metaError?s("div",[s("b",[e._v("ERROR")]),e._v(" "+e._s(e.metaErrorMessage)+" ")]):e._e(),void 0!=e.meta?s("div",[s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.modify?s("dialog-set-info",{attrs:{meta:e.meta,url:e.$store.getters.apiUrl("pointclouds/"+e.meta.name),data_name:"pointcloud"},on:{changed:e.refresh}}):e._e(),e._v(" Info ")],1),s("div",{staticClass:"meta-content"},[void 0!==e.meta.associated.rasterdb?s("a",{attrs:{href:"#/viewer/"+e.meta.associated.rasterdb,target:"_blank",title:"open layer in viewer on new tab"}},[s("img",{key:e.meta.associated.rasterdb,staticClass:"thumbnail",attrs:{src:e.$store.getters.apiUrl("rasterdb/"+e.meta.associated.rasterdb+"/raster.png?width=200"),alt:""}})]):e._e(),s("box-info",{attrs:{meta:e.meta}})],1),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.modify?s("admin-pointcloud-dialog-set-projection",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Projection ")],1),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(0),s("td",[void 0===e.meta.code||0===e.meta.code.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.code))])])]),s("tr",[e._m(1),s("td",[void 0===e.meta.proj4||0===e.meta.proj4.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.proj4))])])])])]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.modify?s("admin-pointcloud-dialog-set-associated",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Associated ")],1),s("div",{staticClass:"meta-content"},[0===Object.keys(e.meta.associated).length?s("span",{staticStyle:{color:"grey"}},[e._v(" (none) ")]):e._e(),s("table",e._l(e.meta.associated,(function(t,a){return s("tr",{key:a},[s("td",[s("b",[e._v(e._s(a)+":")])]),s("td",e._l(e.optArray(t),(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))]),"PointDB"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/pointdbs/"+t,title:"go to pointdb"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"pointcloud"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/pointclouds/"+t,title:"go to pointcloud"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"rasterdb"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/rasterdbs/"+t,title:"go to rasterdb"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"poi_groups"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/poi_groups/"+t,title:"go to POI group"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"roi_groups"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/roi_groups/"+t,title:"go to ROI group"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),e._v("     ")],1)})),0)])})),0)]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Details ")]),s("div",{staticClass:"meta-content"},[s("div",{staticStyle:{"padding-bottom":"10px"}},[s("b",[e._v("point attributes:")]),e._l(e.meta.attributes,(function(t){return s("span",{key:t},[s("span",{staticClass:"attributes"},[e._v(e._s(t))]),e._v("   ")])}))],2),s("table",{staticClass:"table-details",staticStyle:{display:"inline-block"}},[s("thead",[s("tr",[s("th",[e._v("Point precision "),s("div",{staticClass:"header-unit"},[e._v(e._s(e.projection_units))])]),s("th",[e._v("Tile size "),s("div",{staticClass:"header-unit"},[e._v(e._s(e.projection_units))])]),void 0!==e.meta.range?s("th",[e._v("Extent "),s("div",{staticClass:"header-unit"},[e._v(e._s(e.projection_units))])]):e._e(),void 0!==e.meta.extent?s("th",[e._v("Extent "),s("div",{staticClass:"header-unit"},[e._v("coordinates")])]):e._e()])]),s("tbody",[s("tr",[s("td",[e._v(e._s(1/e.meta.cell_scale))]),s("td",[e._v(e._s(e.meta.cell_size)+" "),s("b",[e._v("x")]),e._v(" "+e._s(e.meta.cell_size))]),void 0!==e.meta.range?s("td",[e._v(e._s(e.meta.range.x)+" "),s("b",[e._v("x")]),e._v(" "+e._s(e.meta.range.y))]):e._e(),void 0!==e.meta.extent?s("td",[e._v(e._s(e.meta.extent[0].toPrecision(8))),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.extent[1].toPrecision(8))+" "),s("b",[e._v("-")]),e._v(" "+e._s(e.meta.extent[2].toPrecision(8))),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.extent[3].toPrecision(8)))]):e._e()])])]),void 0===e.meta.storage_internal_free_size?s("v-btn",{staticStyle:{"vertical-align":"top"},on:{click:function(t){return e.refresh(!0)}}},[s("v-icon",[e._v("arrow_drop_down")]),e._v(" more")],1):e._e(),void 0!==e.meta.storage_internal_free_size?s("table",{staticClass:"table-details"},[s("thead",[s("tr",[void 0!==e.meta.cell_count?s("th",[e._v("Tiles "),s("div",{staticClass:"header-unit"},[e._v("count")])]):e._e(),void 0!==e.meta.cell_offset?s("th",[e._v("Tile reference point "),s("div",{staticClass:"header-unit"},[e._v("coordinates")])]):e._e(),void 0!==e.meta.cell_range?s("th",[e._v("Extent "),s("div",{staticClass:"header-unit"},[e._v("tiles")])]):e._e(),void 0!==e.meta.cell_extent?s("th",[e._v("Extent "),s("div",{staticClass:"header-unit"},[e._v("tile coordinates")])]):e._e()])]),s("tbody",[s("tr",[void 0!==e.meta.cell_count?s("td",[e._v(e._s(e.meta.cell_count))]):e._e(),void 0!==e.meta.cell_offset?s("td",[e._v(e._s(e.meta.cell_offset.x.toPrecision(8))),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.cell_offset.y.toPrecision(8)))]):e._e(),void 0!==e.meta.cell_range?s("td",[e._v(e._s(e.meta.cell_range.x)+" "),s("b",[e._v("x")]),e._v(" "+e._s(e.meta.cell_range.y))]):e._e(),void 0!==e.meta.cell_extent?s("td",[e._v(e._s(e.meta.cell_extent[0])),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.cell_extent[1])+" "),s("b",[e._v("-")]),e._v(" "+e._s(e.meta.cell_extent[2])),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.cell_extent[3]))]):e._e()])])]):e._e(),s("div",[e._v(".")]),void 0!==e.meta.storage_internal_free_size?s("table",{staticClass:"table-details"},[e._m(2),s("tbody",[s("tr",[void 0!==e.meta.storage_size?s("td",[e._v(e._s(e.meta.storage_size))]):s("td",[e._v("none")]),void 0!==e.meta.storage_internal_free_size?s("td",[e._v(e._s(e.meta.storage_internal_free_size))]):s("td",[e._v("none")]),void 0!==e.meta.cell_size_stats?s("td",[e._v("min: "+e._s(e.meta.cell_size_stats.min)+"    mean: "+e._s(e.meta.cell_size_stats.mean)+"    max: "+e._s(e.meta.cell_size_stats.max))]):s("td",[e._v("none")])])])]):e._e()],1),void 0!==e.meta&&void 0!==e.meta.time_slices&&0!==e.meta.time_slices.length?s("div",[s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Time slices ("+e._s(e.meta.time_slices.length)+") ")]),s("div",{staticClass:"meta-content"},[s("table",{staticClass:"table-details"},[e._m(3),s("tbody",e._l(e.meta.time_slices,(function(t){return s("tr",{key:t.id},[s("td",[e._v(e._s(t.id))]),s("td",[e._v(e._s(t.name))])])})),0)])])],1):e._e(),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.isAdmin?s("admin-pointcloud-dialog-set-acl",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Access control ")],1),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(4),s("td",[e._l(e.meta.acl,(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))]),e._v("   ")])})),0===e.meta.acl.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)]),s("tr",[e._m(5),s("td",[e._l(e.meta.acl_mod,(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))]),e._v("   ")])})),0===e.meta.acl_mod.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Applications ")]),s("div",{staticClass:"meta-content"},[s("v-btn",{on:{click:e.app_lidar_indices}},[s("v-icon",[e._v("folder_open")]),e._v(" LiDAR indices processing")],1),s("a",{attrs:{href:this.urlPrefix+"../../web/lidar_indices_description/lidar_indices_description.html",target:"_blank"}},[e._v("Indices Description")])],1),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Actions ")]),e.modify?s("div",{staticClass:"meta-content"},[s("b",[e._v("Manage: ")]),e._m(6),s("br"),s("br"),s("admin-pointcloud-dialog-delete",{attrs:{meta:e.meta},on:{changed:e.refresh}})],1):e._e()],1):e._e()],1)},ds=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("geo code:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("proj4:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("Storage size "),s("div",{staticClass:"header-unit"},[e._v("bytes")])]),s("th",[e._v("Storage internal free size "),s("div",{staticClass:"header-unit"},[e._v("bytes")])]),s("th",[e._v("Tile size "),s("div",{staticClass:"header-unit"},[e._v("bytes")])])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("Id")]),s("th",[e._v("Name")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("access roles:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("modify roles:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{attrs:{href:"#/tools/task"}},[e._v(" at 'tools'-tab - 'task creation' (e.g. "),s("b",[e._v("layer renaming")]),e._v(")")])}],us=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[s("v-icon",[e._v("create")])],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set projection of "),s("i",[e._v("PointCloud")]),e._v("   "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-card-text",[void 0==e.newCode||null==e.newCode||e.newCode.startsWith("EPSG:")?e._e():s("span",{staticStyle:{color:"red"}},[s("v-icon",{attrs:{color:"red"}},[e._v("warning")]),e._v(" Projection code SHOULD start with "),s("b",[e._v("EPSG:")])],1),s("v-text-field",{attrs:{label:"projection code"},model:{value:e.newCode,callback:function(t){e.newCode=t},expression:"newCode"}}),e._v(" Code may be an "),s("a",{attrs:{href:"https://epsg.io",target:"_blank",rel:"noopener noreferrer"}},[e._v("EPSG")]),e._v(" identifier (e.g. 'EPSG:4326') ")],1),s("v-card-text",[s("v-text-field",{attrs:{label:"PROJ.4"},model:{value:e.newProj4,callback:function(t){e.newProj4=t},expression:"newProj4"}}),s("a",{attrs:{href:"http://proj4.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("PROJ.4")]),e._v(" description (e.g. '+proj=longlat +datum=WGS84 +no_defs ') ")],1),s("v-card-text",[e._v(" Ensure same projection for projection code and proj4 ! ")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set.apply(null,arguments)}}},[e._v("Set")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},vs=[],ms={name:"admin-pointcloud-dialog-set-projection",props:["meta"],data:function(){return{dialog:!1,newCode:"",newProj4:"",setError:!1,setErrorMessage:void 0}},methods:{refresh:function(){this.newCode=this.meta.code,this.newProj4=this.meta.proj4},set:function(){var e=this,t=this.$store.getters.apiUrl("pointclouds/"+e.meta.name);B.a.post(t,{pointcloud:{code:e.newCode,proj4:e.newProj4}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error setting property: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},ps=ms,_s=Object(p["a"])(ps,us,vs,!1,null,null,null),fs=_s.exports,hs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[s("v-icon",[e._v("create")])],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set Associated layers of "),s("i",[e._v("PointCloud")]),e._v("   "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-card-text",{staticStyle:{"min-height":"400px"}},[e._v(" RasterDB-layer: Raster-visualisation of this pointcloud. "),s("multiselect",{attrs:{options:e.rasterdbs,placeholder:"select rasterdb-layer","allow-empty":!0},model:{value:e.selectedRasterdb,callback:function(t){e.selectedRasterdb=t},expression:"selectedRasterdb"}}),s("br"),e._v(" POI-groups: Groups of named geo-points that can be used for processing this pointcloud. "),s("multiselect",{attrs:{options:e.poi_groups,placeholder:"select poi-groups","allow-empty":!0,multiple:!0},model:{value:e.selectedPoi_groups,callback:function(t){e.selectedPoi_groups=t},expression:"selectedPoi_groups"}}),s("br"),e._v(" ROI-groups: Groups of named polygons that can be used for processing this pointcloud. "),s("multiselect",{attrs:{options:e.roi_groups,placeholder:"select roi-groups","allow-empty":!0,multiple:!0},model:{value:e.selectedRoi_groups,callback:function(t){e.selectedRoi_groups=t},expression:"selectedRoi_groups"}})],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set.apply(null,arguments)}}},[e._v("Set")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},bs=[];function gs(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function ys(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?gs(Object(s),!0).forEach((function(t){xs(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):gs(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function xs(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var ws={name:"admin-pointcloud-dialog-set-associated",props:["meta"],components:{Multiselect:C.a},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,selectedRasterdb:void 0,selectedPoi_groups:[],selectedRoi_groups:[]}},computed:ys({},Object(c["b"])({rasterdbs:"rasterdbs/names",poi_groups:"poi_groups/names",roi_groups:"roi_groups/names"})),methods:{refresh:function(){this.selectedRasterdb=this.meta.associated.rasterdb,this.selectedPoi_groups=this.meta.associated.poi_groups,this.selectedRoi_groups=this.meta.associated.roi_groups,this.$store.dispatch("rasterdbs/refresh"),this.$store.dispatch("poi_groups/refresh"),this.$store.dispatch("roi_groups/refresh")},set:function(){var e=this,t=this.$store.getters.apiUrl("pointclouds/"+e.meta.name),s={};void 0!==this.selectedRasterdb&&(s.rasterdb=this.selectedRasterdb),s.poi_groups=this.selectedPoi_groups,s.roi_groups=this.selectedRoi_groups,B.a.post(t,{pointcloud:{associated:s}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){e.setError=!0,e.setErrorMessage="Error setting property",console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},ks=ws,Es=Object(p["a"])(ks,hs,bs,!1,null,null,null),Ss=Es.exports,Os=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[s("v-icon",[e._v("create")])],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set access control of "),s("i",[e._v("PointCloud")]),e._v("   "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-divider"),s("v-card-text",[e._v(" Specified roles can "),s("b",[e._v("read")]),e._v(" layer data. "),s("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclRole},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}})],1),s("v-card-text",[e._v(" Specified roles can "),s("b",[e._v("modify")]),e._v(" layer data. "),s("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclModRole},model:{value:e.selectedRolesMod,callback:function(t){e.selectedRolesMod=t},expression:"selectedRolesMod"}})],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set.apply(null,arguments)}}},[e._v("Set")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},Ps=[];function Cs(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Ts(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Cs(Object(s),!0).forEach((function(t){Ms(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Cs(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ms(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Rs={name:"admin-pointcloud-dialog-set-projection",props:["meta"],components:{Multiselect:C.a},data:function(){return{dialog:!1,newCode:"",newProj4:"",setError:!1,setErrorMessage:void 0,selectedRoles:[],selectedRolesMod:[],availableRoles:[],createdAclRoles:[]}},computed:Ts(Ts({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}})),{},{acl_roles:function(){return this.availableRoles.concat(this.createdAclRoles)}}),methods:{createAclRole:function(e){this.createdAclRoles.push(e),this.selectedRoles.push(e)},createAclModRole:function(e){this.createdAclRoles.push(e),this.selectedRolesMod.push(e)},refresh:function(){var e=this;this.selectedRoles=this.meta.acl,this.selectedRolesMod=this.meta.acl_mod,B.a.get(this.urlPrefix+"../../api/roles").then((function(t){e.availableRoles=t.data.roles})).catch((function(e){console.log(e)}))},set:function(){var e=this,t=this.urlPrefix+"../../pointclouds/"+e.meta.name;B.a.post(t,{pointcloud:{acl:e.selectedRoles,acl_mod:e.selectedRolesMod}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error setting property: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},js=Rs,$s=Object(p["a"])(js,Os,Ps,!1,null,null,null),As=$s.exports,Ds=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"Delete this PointCloud layer. This can not be undone."},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("delete_forever")]),e._v("delete entire layer ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("DELETE "),s("i",[e._v("PointCloud")]),e._v("   "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-card-text",[e._v(" Delete this PointCloud layer. "),s("b",[e._v("This can not be undone.")])]),s("v-card-text",[e._v(" Are you sure? ")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"red--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.delete_layer()}}},[e._v("Delete")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},zs=[],Ns={name:"admin-pointcloud-dialog-delete",props:["meta"],data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0}},methods:{refresh:function(){},delete_layer:function(){var e=this,t=this.$store.getters.apiUrl("pointclouds/"+e.meta.name);B.a.post(t,{pointcloud:{delete_pointcloud:e.meta.name}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},Ls=Ns,Is=Object(p["a"])(Ls,Ds,zs,!1,null,null,null),Bs=Is.exports;function Fs(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Vs(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Fs(Object(s),!0).forEach((function(t){Us(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Fs(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Us(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Ws={name:"admin-pointcloud-detail",components:{"dialog-set-info":fe,"box-info":we,"admin-pointcloud-dialog-set-projection":fs,"admin-pointcloud-dialog-set-associated":Ss,"admin-pointcloud-dialog-set-acl":As,"admin-pointcloud-dialog-delete":Bs,PulseLoader:ts["a"]},props:["pointcloud"],data:function(){return{meta:void 0,metaError:!1,metaErrorMessage:void 0,busy:!1,busyMessage:void 0}},methods:{refresh:function(e){var t=this;this.$store.dispatch("pointclouds/refresh");var s=this.$store.getters.apiUrl("pointclouds/"+t.pointcloud),a={};e&&(a.extent=!0,a.cell_count=!0,a.storage_size=!0,a.storage_internal_free_size=!0,a.cell_size_stats=!0),t.metaError=!1,t.metaErrorMessage=void 0,t.busy=!0,t.busyMessage="loading ...",B.a.get(s,{params:a}).then((function(e){t.meta=e.data.pointcloud,t.busy=!1,t.busyMessage=void 0})).catch((function(e){console.log(e),t.metaError=!0,t.metaErrorMessage="ERROR getting meta: "+e,t.meta=void 0,t.busy=!1,t.busyMessage=void 0}))},optArray:function(e){return void 0===e?[]:Array.isArray(e)?e:[e]},app_lidar_indices:function(){var e=this.urlPrefix+"../../web/lidar_indices/lidar_indices.html";window.open(e,"_blank")}},computed:Vs(Vs({},Object(c["b"])({isAdmin:"identity/isAdmin"})),{},{modify:function(){return void 0!==this.meta&&void 0!=this.meta.modify&&this.meta.modify},urlPrefix:function(){return this.$store.state.identity.urlPrefix},projection_units:function(){return void 0!==this.meta.projection_unit&&void 0!==this.meta.projection_unit.name?this.meta.projection_unit.name:"projection units"}}),watch:{pointcloud:function(){this.refresh()}},mounted:function(){this.refresh()}},Gs=Ws,qs=(s("de3b"),Object(p["a"])(Gs,ls,ds,!1,null,"48a74528",null)),Hs=qs.exports,Js=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main"},[s("transition",{attrs:{name:"fade"}},[e.busy?s("div",{staticClass:"div-busy"},[s("pulse-loader"),e._v(e._s(e.busyMessage)+" ")],1):e._e()]),s("div",{staticStyle:{"text-align":"center","padding-right":"400px"}},[s("h3",{staticClass:"headline mb-0"},[e._v(" "+e._s(void 0===e.meta||void 0===e.meta.title||""===e.meta.title?e.voxeldb:e.meta.title)+" "),void 0!==e.meta&&void 0!==e.meta.associated.rasterdb?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/viewer/"+e.meta.associated.rasterdb,target:"_blank",title:"open layer in viewer on new tab"}},[s("v-icon",[e._v("zoom_in")])],1):e._e()],1),void 0!==e.meta&&void 0!==e.meta.title&&""!==e.meta.title?s("span",[s("span",{staticStyle:{"user-select":"none"}},[e._v("id: ")]),s("b",[e._v(e._s(e.voxeldb))])]):e._e()]),e.metaError?s("div",[s("b",[e._v("ERROR")]),e._v(" "+e._s(e.metaErrorMessage)+" ")]):e._e(),void 0!=e.meta?s("div",[s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.modify?s("dialog-set-info",{attrs:{meta:e.meta,url:e.$store.getters.apiUrl("voxeldbs/"+e.meta.name),data_name:"voxeldb"},on:{changed:e.refresh}}):e._e(),e._v(" Info ")],1),s("div",{staticClass:"meta-content"},[void 0!==e.meta.associated.rasterdb?s("a",{attrs:{href:"#/viewer/"+e.meta.associated.rasterdb,target:"_blank",title:"open layer in viewer on new tab"}},[s("img",{key:e.meta.associated.rasterdb,staticClass:"thumbnail",attrs:{src:e.$store.getters.apiUrl("rasterdb/"+e.meta.associated.rasterdb+"/raster.png?width=200"),alt:""}})]):e._e(),s("box-info",{attrs:{meta:e.meta}})],1),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.modify?s("admin-voxeldb-dialog-set-projection",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Projection ")],1),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(0),s("td",[void 0===e.meta.ref.epsg||0===e.meta.ref.epsg.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.ref.epsg))])])]),s("tr",[e._m(1),s("td",[void 0===e.meta.ref.proj4||0===e.meta.ref.proj4.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.ref.proj4))])])])])]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.modify?s("admin-voxeldb-dialog-set-associated",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Associated ")],1),s("div",{staticClass:"meta-content"},[0===Object.keys(e.meta.associated).length?s("span",{staticStyle:{color:"grey"}},[e._v(" (none) ")]):e._e(),s("table",e._l(e.meta.associated,(function(t,a){return s("tr",{key:a},[s("td",[s("b",[e._v(e._s(a)+":")])]),s("td",e._l(e.optArray(t),(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))]),"PointDB"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/pointdbs/"+t,title:"go to pointdb"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"voxeldb"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/voxeldbs/"+t,title:"go to voxeldb"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"rasterdb"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/rasterdbs/"+t,title:"go to rasterdb"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"poi_groups"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/poi_groups/"+t,title:"go to POI group"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"roi_groups"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/roi_groups/"+t,title:"go to ROI group"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),e._v("     ")],1)})),0)])})),0)]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Details ")]),s("div",{staticClass:"meta-content"},[s("div",{staticStyle:{"padding-bottom":"10px"}},[s("b",[e._v("voxel attributes:")]),e._l(e.meta.attributes,(function(t){return s("span",{key:t},[s("span",{staticClass:"attributes"},[e._v(e._s(t))]),e._v("   ")])}))],2),s("table",{staticClass:"table-details",staticStyle:{display:"inline-block"}},[s("thead",[s("tr",[s("th",[e._v("Voxel size "),s("div",{staticClass:"header-unit"},[e._v(e._s(e.projection_units))])]),e._m(2),s("th",[e._v("Cell size "),s("div",{staticClass:"header-unit"},[e._v(e._s(e.projection_units))])]),e._m(3)])]),s("tbody",[s("tr",[s("td",[e._v(e._s(e.voxelSizeText))]),s("td",[e._v(e._s(e.cellSizeText))]),s("td",[e._v(e._s(e.cellSizeProjectedText))]),s("td",[e._v(e._s(+e.meta.ref.origin.x.toPrecision(8))),s("b",[e._v(",")]),e._v(" "+e._s(+e.meta.ref.origin.y.toPrecision(8))),s("b",[e._v(",")]),e._v(" "+e._s(+e.meta.ref.origin.z.toPrecision(8)))])])])]),void 0===e.meta.storage_measures?s("v-btn",{staticStyle:{"vertical-align":"top"},on:{click:function(t){return e.refresh(!0)}}},[s("v-icon",[e._v("arrow_drop_down")]),e._v(" more")],1):e._e(),void 0!==e.meta.storage_measures?s("table",{staticClass:"table-details"},[s("thead",[s("tr",[e._m(4),e._m(5),e._m(6),s("th",[e._v("Cell range "),s("div",{staticClass:"header-unit"},[e._v(e._s(e.projection_units))])])])]),s("tbody",[s("tr",[s("td",[e._v(e._s(e.meta.storage_measures.cell_range.xmin)),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.storage_measures.cell_range.ymin)),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.storage_measures.cell_range.zmin)+" "),s("b",[e._v("-")]),e._v(" "+e._s(e.meta.storage_measures.cell_range.xmax)),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.storage_measures.cell_range.ymax)),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.storage_measures.cell_range.zmax))]),s("td",[e._v(e._s(e.cellRangeText))]),s("td",[e._v(e._s(e.cellRangeVoxelText))]),s("td",[e._v(e._s(e.cellRangeProjectedText))])])])]):e._e(),void 0!==e.meta.storage_measures?s("table",{staticClass:"table-details"},[s("thead",[s("tr",[e._m(7),s("th",[e._v("voxel range "),s("div",{staticClass:"header-unit"},[e._v(e._s(e.projection_units))])]),e._m(8)])]),s("tbody",[s("tr",[s("td",[e._v(e._s(e.voxelRangeText))]),s("td",[e._v(e._s(e.voxelRangeProjectedText))]),s("td",[s("span",{staticStyle:{color:"gray"}},[e._v("x:")]),e._v(e._s(+e.meta.storage_measures.extent.xmin.toPrecision(8))),s("b",[e._v(",")]),e._v(" "),s("span",{staticStyle:{color:"gray"}},[e._v("y:")]),e._v(e._s(+e.meta.storage_measures.extent.ymin.toPrecision(8))),s("b",[e._v(",")]),e._v(" "),s("span",{staticStyle:{color:"gray"}},[e._v("z:")]),e._v(e._s(+e.meta.storage_measures.extent.zmin.toPrecision(8))+" "),s("b",[e._v("-")]),e._v(" "),s("span",{staticStyle:{color:"gray"}},[e._v("x:")]),e._v(e._s(+e.meta.storage_measures.extent.xmax.toPrecision(8))),s("b",[e._v(",")]),e._v(" "),s("span",{staticStyle:{color:"gray"}},[e._v("y:")]),e._v(e._s(+e.meta.storage_measures.extent.ymax.toPrecision(8))),s("b",[e._v(",")]),e._v(" "),s("span",{staticStyle:{color:"gray"}},[e._v("z:")]),e._v(e._s(+e.meta.storage_measures.extent.zmax.toPrecision(8)))])])])]):e._e(),void 0!==e.meta.storage_measures?s("table",{staticClass:"table-details"},[e._m(9),s("tbody",[s("tr",[void 0!==e.meta.storage_measures.cell_count?s("td",[e._v(e._s(e.meta.storage_measures.cell_count))]):s("td",[e._v("none")]),void 0!==e.meta.storage_measures.cell_size_stats?s("td",[e._v("min: "+e._s(e.meta.storage_measures.cell_size_stats.min)+"    mean: "+e._s(e.meta.storage_measures.cell_size_stats.mean)+"    max: "+e._s(e.meta.storage_measures.cell_size_stats.max))]):s("td",[e._v("none")]),void 0!==e.meta.storage_measures.storage_size?s("td",[e._v(e._s(e.meta.storage_measures.storage_size))]):s("td",[e._v("none")]),void 0!==e.meta.storage_measures.storage_internal_free_size?s("td",[e._v(e._s(e.meta.storage_measures.storage_internal_free_size))]):s("td",[e._v("none")])])])]):e._e()],1),void 0!==e.meta&&void 0!==e.meta.time_slices?s("div",[s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Time slices ("+e._s(e.meta.time_slices.length)+") ")]),s("div",{staticClass:"meta-content"},[s("table",{staticClass:"table-details"},[e._m(10),s("tbody",e._l(e.meta.time_slices,(function(t){return s("tr",{key:t.id},[s("td",[e._v(e._s(t.id))]),s("td",[e._v(e._s(t.name))])])})),0)])])],1):e._e(),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.isAdmin?s("admin-voxeldb-dialog-set-acl",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Access control ")],1),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(11),s("td",[e._l(e.meta.acl,(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))]),e._v("   ")])})),0===e.meta.acl.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)]),s("tr",[e._m(12),s("td",[e._l(e.meta.acl_mod,(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))]),e._v("   ")])})),0===e.meta.acl_mod.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Actions ")]),e.modify?s("div",{staticClass:"meta-content"},[s("b",[e._v("Manage: ")]),e._m(13),s("br"),s("br"),s("admin-voxeldb-dialog-delete",{attrs:{meta:e.meta},on:{changed:e.refresh}})],1):e._e()],1):e._e()],1)},Qs=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("EPSG:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("proj4:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("th",[e._v("Cell size "),s("div",{staticClass:"header-unit"},[e._v("voxels")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("th",[e._v("Origin "),s("div",{staticClass:"header-unit"},[e._v("coordinates")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("th",[e._v("Cell extent "),s("div",{staticClass:"header-unit"},[e._v("cell coordinates")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("th",[e._v("Cell range "),s("div",{staticClass:"header-unit"},[e._v("cells")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("th",[e._v("Cell range "),s("div",{staticClass:"header-unit"},[e._v("voxels")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("th",[e._v("voxel range "),s("div",{staticClass:"header-unit"},[e._v("voxels")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("th",[e._v("voxel extent "),s("div",{staticClass:"header-unit"},[e._v("coordinates")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("Cells "),s("div",{staticClass:"header-unit"},[e._v("count")])]),s("th",[e._v("Cell size "),s("div",{staticClass:"header-unit"},[e._v("bytes")])]),s("th",[e._v("Storage size "),s("div",{staticClass:"header-unit"},[e._v("bytes")])]),s("th",[e._v("Storage internal free size "),s("div",{staticClass:"header-unit"},[e._v("bytes")])])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("Id")]),s("th",[e._v("Name")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("access roles:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("modify roles:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{attrs:{href:"#/tools/task"}},[e._v(" at 'tools'-tab - 'task creation' (e.g. "),s("b",[e._v("layer renaming")]),e._v(")")])}],Ys=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[s("v-icon",[e._v("create")])],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set projection of "),s("i",[e._v("VoxelDB")]),e._v("   "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-card-text",[e.isEpsg(e.newEpsg)?e._e():s("span",{staticStyle:{color:"red"}},[s("v-icon",{attrs:{color:"red"}},[e._v("warning")]),e._v(" EPSG needs to be a "),s("b",[e._v("number")]),e._v(". ")],1),s("v-text-field",{attrs:{label:"EPSG"},model:{value:e.newEpsg,callback:function(t){e.newEpsg=t},expression:"newEpsg"}}),s("a",{attrs:{href:"https://epsg.io",target:"_blank",rel:"noopener noreferrer"}},[e._v("EPSG")]),e._v(" is an identifying number (e.g. '4326'). ")],1),s("v-card-text",[s("v-text-field",{attrs:{label:"PROJ.4"},model:{value:e.newProj4,callback:function(t){e.newProj4=t},expression:"newProj4"}}),s("a",{attrs:{href:"http://proj4.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("PROJ.4")]),e._v(" description (e.g. '+proj=longlat +datum=WGS84 +no_defs ') ")],1),s("v-card-text",[e._v(" Ensure same projection for EPSG and proj4 ! ")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set.apply(null,arguments)}}},[e._v("Set")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},Ks=[],Xs={name:"admin-voxeldb-dialog-set-projection",props:["meta"],data:function(){return{dialog:!1,newEpsg:"",newProj4:"",setError:!1,setErrorMessage:void 0}},methods:{refresh:function(){this.newEpsg=this.meta.ref.epsg,this.newProj4=this.meta.ref.proj4},set:function(){var e=this,t=this.$store.getters.apiUrl("voxeldbs/"+e.meta.name),s=this.isEpsg(e.newEpsg)?this.parseEpsg(e.newEpsg):0;B.a.post(t,{voxeldb:{epsg:s,proj4:e.newProj4}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error setting property: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data},isEpsg:function(e){return void 0!==e&&""!==e&&!isNaN(e)},parseEpsg:function(e){return+e}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},Zs=Xs,ea=Object(p["a"])(Zs,Ys,Ks,!1,null,null,null),ta=ea.exports,sa=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[s("v-icon",[e._v("create")])],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set Associated layers of "),s("i",[e._v("VoxelDB")]),e._v("   "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-card-text",{staticStyle:{"min-height":"400px"}},[e._v(" RasterDB-layer: Raster-visualisation of this voxeldb. "),s("multiselect",{attrs:{options:e.rasterdbs,placeholder:"select rasterdb-layer","allow-empty":!0},model:{value:e.selectedRasterdb,callback:function(t){e.selectedRasterdb=t},expression:"selectedRasterdb"}}),s("br"),e._v(" POI-groups: Groups of named geo-points that can be used for processing this voxeldb. "),s("multiselect",{attrs:{options:e.poi_groups,placeholder:"select poi-groups","allow-empty":!0,multiple:!0},model:{value:e.selectedPoi_groups,callback:function(t){e.selectedPoi_groups=t},expression:"selectedPoi_groups"}}),s("br"),e._v(" ROI-groups: Groups of named polygons that can be used for processing this voxeldb. "),s("multiselect",{attrs:{options:e.roi_groups,placeholder:"select roi-groups","allow-empty":!0,multiple:!0},model:{value:e.selectedRoi_groups,callback:function(t){e.selectedRoi_groups=t},expression:"selectedRoi_groups"}})],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set.apply(null,arguments)}}},[e._v("Set")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},aa=[];function ia(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function ra(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ia(Object(s),!0).forEach((function(t){oa(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ia(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function oa(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var na={name:"admin-voxeldb-dialog-set-associated",props:["meta"],components:{Multiselect:C.a},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,selectedRasterdb:void 0,selectedPoi_groups:[],selectedRoi_groups:[]}},computed:ra({},Object(c["b"])({rasterdbs:"rasterdbs/names",poi_groups:"poi_groups/names",roi_groups:"roi_groups/names"})),methods:{refresh:function(){this.selectedRasterdb=this.meta.associated.rasterdb,this.selectedPoi_groups=this.meta.associated.poi_groups,this.selectedRoi_groups=this.meta.associated.roi_groups,this.$store.dispatch("rasterdbs/refresh"),this.$store.dispatch("poi_groups/refresh"),this.$store.dispatch("roi_groups/refresh")},set:function(){var e=this,t=this.$store.getters.apiUrl("voxeldbs/"+e.meta.name),s={};void 0!==this.selectedRasterdb&&(s.rasterdb=this.selectedRasterdb),s.poi_groups=this.selectedPoi_groups,s.roi_groups=this.selectedRoi_groups,B.a.post(t,{voxeldb:{associated:s}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){e.setError=!0,e.setErrorMessage="Error setting property",console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},ca=na,la=Object(p["a"])(ca,sa,aa,!1,null,null,null),da=la.exports,ua=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[s("v-icon",[e._v("create")])],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set access control of "),s("i",[e._v("VoxelDB")]),e._v("   "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-divider"),s("v-card-text",[e._v(" Specified roles can "),s("b",[e._v("read")]),e._v(" layer data. "),s("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclRole},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}})],1),s("v-card-text",[e._v(" Specified roles can "),s("b",[e._v("modify")]),e._v(" layer data. "),s("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclModRole},model:{value:e.selectedRolesMod,callback:function(t){e.selectedRolesMod=t},expression:"selectedRolesMod"}})],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set.apply(null,arguments)}}},[e._v("Set")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},va=[];function ma(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function pa(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ma(Object(s),!0).forEach((function(t){_a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ma(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function _a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var fa={name:"admin-voxeldb-dialog-set-projection",props:["meta"],components:{Multiselect:C.a},data:function(){return{dialog:!1,newCode:"",newProj4:"",setError:!1,setErrorMessage:void 0,selectedRoles:[],selectedRolesMod:[],availableRoles:[],createdAclRoles:[]}},computed:pa(pa({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}})),{},{acl_roles:function(){return this.availableRoles.concat(this.createdAclRoles)}}),methods:{createAclRole:function(e){this.createdAclRoles.push(e),this.selectedRoles.push(e)},createAclModRole:function(e){this.createdAclRoles.push(e),this.selectedRolesMod.push(e)},refresh:function(){var e=this;this.selectedRoles=this.meta.acl,this.selectedRolesMod=this.meta.acl_mod,B.a.get(this.urlPrefix+"../../api/roles").then((function(t){e.availableRoles=t.data.roles})).catch((function(e){console.log(e)}))},set:function(){var e=this,t=this.urlPrefix+"../../voxeldbs/"+e.meta.name;B.a.post(t,{voxeldb:{acl:e.selectedRoles,acl_mod:e.selectedRolesMod}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error setting property: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},ha=fa,ba=Object(p["a"])(ha,ua,va,!1,null,null,null),ga=ba.exports,ya=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"Delete this VoxelDB layer. This can not be undone."},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("delete_forever")]),e._v("delete entire layer ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("DELETE "),s("i",[e._v("VoxelDB")]),e._v("   "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-card-text",[e._v(" Delete this VoxelDB layer. "),s("b",[e._v("This can not be undone.")])]),s("v-card-text",[e._v(" Are you sure? ")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"red--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.delete_layer()}}},[e._v("Delete")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},xa=[],wa={name:"admin-voxeldb-dialog-delete",props:["meta"],data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0}},methods:{refresh:function(){},delete_layer:function(){var e=this,t=this.$store.getters.apiUrl("voxeldbs/"+e.meta.name);B.a.post(t,{voxeldb:{delete_voxeldb:e.meta.name}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},ka=wa,Ea=Object(p["a"])(ka,ya,xa,!1,null,null,null),Sa=Ea.exports;function Oa(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Pa(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Oa(Object(s),!0).forEach((function(t){Ca(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Oa(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ca(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Ta={name:"admin-voxeldb-detail",components:{"dialog-set-info":fe,"box-info":we,"admin-voxeldb-dialog-set-projection":ta,"admin-voxeldb-dialog-set-associated":da,"admin-voxeldb-dialog-set-acl":ga,"admin-voxeldb-dialog-delete":Sa,PulseLoader:ts["a"]},props:["voxeldb"],data:function(){return{meta:void 0,metaError:!1,metaErrorMessage:void 0,busy:!1,busyMessage:void 0}},methods:{refresh:function(e){var t=this;this.$store.dispatch("voxeldbs/refresh");var s=this.$store.getters.apiUrl("voxeldbs/"+t.voxeldb),a={};e&&(a.storage_measures=!0),t.metaError=!1,t.metaErrorMessage=void 0,t.busy=!0,t.busyMessage="loading ...",B.a.get(s,{params:a}).then((function(e){t.meta=e.data.voxeldb,t.busy=!1,t.busyMessage=void 0})).catch((function(e){console.log(e),t.metaError=!0,t.metaErrorMessage="ERROR getting meta: "+e,t.meta=void 0,t.busy=!1,t.busyMessage=void 0}))},optArray:function(e){return void 0===e?[]:Array.isArray(e)?e:[e]},app_lidar_indices:function(){var e=this.urlPrefix+"../../web/lidar_indices/lidar_indices.html";window.open(e,"_blank")}},computed:Pa(Pa({},Object(c["b"])({isAdmin:"identity/isAdmin"})),{},{modify:function(){return void 0!==this.meta&&void 0!=this.meta.modify&&this.meta.modify},urlPrefix:function(){return this.$store.state.identity.urlPrefix},projection_units:function(){return void 0===this.meta||void 0===this.meta.ref||void 0===this.meta.ref.projection_unit||void 0===this.meta.ref.projection_unit.name?"projection units":this.meta.ref.projection_unit.name},voxelSizeText:function(){if(void 0===this.meta||void 0===this.meta.ref||void 0===this.meta.ref.voxel_size)return"not set";var e=this.meta.ref.voxel_size;return+e.x.toPrecision(8)+" x "+ +e.y.toPrecision(8)+" x "+ +e.z.toPrecision(8)},cellSizeText:function(){if(void 0===this.meta||void 0===this.meta.ref||void 0===this.meta.cell_size)return"not set";var e=this.meta.cell_size;return+e.x.toPrecision(8)+" x "+ +e.y.toPrecision(8)+" x "+ +e.z.toPrecision(8)},cellSizeProjectedText:function(){if(void 0===this.meta||void 0===this.meta.ref||void 0===this.meta.cell_size)return"not set";var e=this.meta.ref.voxel_size,t=this.meta.cell_size;return+(t.x*e.x).toPrecision(8)+" x "+ +(t.y*e.y).toPrecision(8)+" x "+ +(t.z*e.z).toPrecision(8)},cellRangeText:function(){if(void 0===this.meta||void 0===this.meta.ref||void 0===this.meta.ref.voxel_size)return"not set";var e=this.meta.storage_measures.cell_range;return e.xmax-e.xmin+1+" x "+(e.ymax-e.ymin+1)+" x "+(e.zmax-e.zmin+1)},cellRangeVoxelText:function(){if(void 0===this.meta||void 0===this.meta.ref||void 0===this.meta.ref.voxel_size)return"not set";var e=this.meta.storage_measures.cell_range,t=this.meta.cell_size;return(e.xmax-e.xmin+1)*t.x+" x "+(e.ymax-e.ymin+1)*t.y+" x "+(e.zmax-e.zmin+1)*t.z},voxelRangeText:function(){if(void 0===this.meta||void 0===this.meta.storage_measures||void 0===this.meta.storage_measures.local_range)return"not set";var e=this.meta.storage_measures.local_range;return e.xmax-e.xmin+1+" x "+(e.ymax-e.ymin+1)+" x "+(e.zmax-e.zmin+1)},voxelRangeProjectedText:function(){if(void 0===this.meta||void 0===this.meta.storage_measures||void 0===this.meta.storage_measures.local_range||void 0===this.meta.ref||void 0===this.meta.ref.voxel_size)return"not set";var e=this.meta.storage_measures.local_range,t=this.meta.ref.voxel_size;return+((e.xmax-e.xmin+1)*t.x).toPrecision(8)+" x "+ +((e.ymax-e.ymin+1)*t.y).toPrecision(8)+" x "+ +((e.zmax-e.zmin+1)*t.z).toPrecision(8)},cellRangeProjectedText:function(){if(void 0===this.meta||void 0===this.meta.ref||void 0===this.meta.ref.voxel_size)return"not set";var e=this.meta.storage_measures.cell_range,t=this.meta.cell_size,s=this.meta.ref.voxel_size;return(e.xmax-e.xmin+1)*t.x*s.x+" x "+(e.ymax-e.ymin+1)*t.y*s.y+" x "+(e.zmax-e.zmin+1)*t.z*s.z}}),watch:{voxeldb:function(){this.refresh()}},mounted:function(){this.refresh()}},Ma=Ta,Ra=(s("8777"),Object(p["a"])(Ma,Js,Qs,!1,null,"9cc654c4",null)),ja=Ra.exports,$a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main"},[s("transition",{attrs:{name:"fade"}},[e.busy?s("div",{staticClass:"div-busy"},[s("pulse-loader"),e._v(e._s(e.busyMessage)+" ")],1):e._e()]),s("div",{staticStyle:{"text-align":"center","padding-right":"400px"}},[s("h3",{staticClass:"headline mb-0"},[e._v(" "+e._s(void 0===e.meta||void 0===e.meta.title||""===e.meta.title?e.vectordb:e.meta.title)+" "),s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/viewer?vectordb="+e.vectordb,target:"_blank",title:"open layer in viewer on new tab"}},[s("v-icon",[e._v("zoom_in")])],1)],1),void 0!==e.meta&&void 0!==e.meta.title&&""!==e.meta.title?s("span",[s("span",{staticStyle:{"user-select":"none"}},[e._v("id: ")]),s("b",[e._v(e._s(e.vectordb))])]):e._e()]),e.metaError?s("div",[s("b",[e._v("ERROR")]),e._v(" "+e._s(e.metaErrorMessage)+" ")]):e._e(),void 0!=e.meta?s("div",[s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.modify?s("dialog-set-info",{attrs:{meta:e.meta,url:e.$store.getters.apiUrl("vectordbs/"+e.meta.name)},on:{changed:e.refresh}}):e._e(),e._v(" Info ")],1),s("div",{staticClass:"meta-content",staticStyle:{poisition:"relative"}},[s("a",{attrs:{href:"#/vectorviewer/"+e.vectordb,target:"_blank",title:"open layer in viewer on new tab"}},[s("img",{key:e.meta.name,staticClass:"thumbnail",attrs:{src:e.$store.getters.apiUrl("vectordbs/"+e.meta.name+"/raster.png?width=400&height=600&datatag="+e.meta.datatag),alt:""}})]),s("box-info",{attrs:{meta:e.meta}})],1),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Content "),s("a",{directives:[{name:"show",rawName:"v-show",value:e.meta.data_filenames.length>0,expression:"meta.data_filenames.length > 0"}],staticStyle:{"font-size":"0.7em"},attrs:{href:e.urlPrefix+"../../vectordbs/"+e.meta.name+"/package.zip",download:e.meta.name+".zip",title:"download as ZIP-file"}},[s("v-icon",{attrs:{color:"blue"}},[e._v("cloud_download")]),e._v("(download)")],1)]),s("div",{staticClass:"meta-content"},[e.meta.data_filenames.length>0?s("table",e._l(e.meta.data_filenames,(function(t){return s("tr",{key:t},[s("td",{class:t===e.meta.data_filename?"data-filename-primary":"data-filename-other"},[e._v(e._s(t))]),t===e.meta.data_filename?s("td",[e._v(" <--")]):e._e()])})),0):e._e(),0===e.meta.data_filenames.length?s("div",{staticStyle:{color:"grey"}},[s("b",[e._v("no files.")]),e._v(' Click "Manage Files" to upload files. ')]):e._e()]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Details ")]),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(0),s("td",[e._v(e._s(e.meta.details.epsg))])]),s("tr",[e._m(1),s("td",[e._v(e._s(e.meta.details.proj4))])]),s("tr",[e._m(2),s("td",{staticStyle:{display:"flex","flex-wrap":"wrap"}},e._l(e.meta.details.attributes,(function(t){return s("span",{key:t},[s("span",{class:t===e.meta.name_attribute?"name-attribute":"attributes",staticStyle:{"margin-right":"10px"}},[e._v(e._s(t))])])})),0)]),s("tr",[e._m(3),e.meta.structured_access.poi||e.meta.structured_access.roi?e._e():s("td",[e._v("none")]),e.meta.structured_access.poi?s("td",[e._v("POI-group")]):e._e(),e.meta.structured_access.roi?s("td",[e._v("ROI-group")]):e._e()])]),s("admin-vectordb-dialog-data-table",{attrs:{meta:e.meta},on:{changed:e.refresh}})],1),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.isAdmin?s("admin-vectordb-dialog-set-acl",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Access control ")],1),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(4),s("td",[e._l(e.meta.acl,(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))]),e._v("   ")])})),0===e.meta.acl.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)]),s("tr",[e._m(5),s("td",[e._l(e.meta.acl_mod,(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))]),e._v("   ")])})),0===e.meta.acl_mod.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Applications ")]),s("div",{staticClass:"meta-content"},[s("admin-vectordb-dialog-wfs",{attrs:{meta:e.meta},on:{changed:e.refresh}}),s("admin-vectordb-dialog-wms",{attrs:{meta:e.meta},on:{changed:e.refresh}})],1),e.modify?s("div",[s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Actions ")]),s("div",{staticClass:"meta-content"},[s("b",[e._v("Manage:")]),e.modify?s("admin-vectordb-dialog-files",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e.modify?s("admin-vectordb-attributes",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e.modify?s("admin-vectordb-structured-access",{attrs:{meta:e.meta},on:{changed:function(t){e.refresh(),e.$store.dispatch("poi_groups/refresh"),e.$store.dispatch("roi_groups/refresh")}}}):e._e(),e._m(6),s("br"),s("br"),s("br"),e.modify?s("admin-vectordb-delete",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e()],1)],1):e._e()],1):e._e()],1)},Aa=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("EPSG:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("Proj4:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("attributes:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("structured access:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("access roles:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("modify roles:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{attrs:{href:"#/tools/task"}},[e._v(" more at 'tools'-tab - 'task creation' (e.g. "),s("b",[e._v("layer renaming")]),e._v(")")])}],Da=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"Delete this vector layer. This can not be undone."},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("delete_forever")]),e._v("delete entire layer ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("DELETE "),s("i",[e._v("VectorDB")]),e._v("   "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-card-text",[e._v(" Delete this vector layer. "),s("b",[e._v("This can not be undone.")])]),s("v-card-text",[e._v(" Are you sure? ")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"red--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.delete_layer()}}},[e._v("Delete")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},za=[],Na={name:"admin-vectordb-delete",props:["meta"],data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0}},methods:{refresh:function(){},delete_layer:function(){var e=this,t=this.$store.getters.apiUrl("vectordbs/"+e.meta.name);B.a.delete(t).then((function(t){console.log(t),e.dialog=!1,e.$store.dispatch("vectordbs/refresh"),e.$emit("changed")})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t),e.dialog=!1,e.$store.dispatch("vectordbs/refresh")}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},La=Na,Ia=Object(p["a"])(La,Da,za,!1,null,null,null),Ba=Ia.exports,Fa=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticStyle:{display:"inline-block"}},[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"Upload new files or remove existing files"},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("Files ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Upload / Remove Files")])]),s("v-card-text",[s("uploader",{ref:"uploader",staticClass:"uploader-example",attrs:{options:e.options},on:{"file-success":e.fileFinished}},[s("uploader-unsupport"),s("uploader-drop",[s("p",[s("b",[e._v("Upload")]),e._v(" (possibly multiple files at once) - Drop files here or")]),s("uploader-btn",[s("v-icon",[e._v("cloud_upload")]),e._v("select files")],1)],1),s("uploader-list")],1),s("br"),s("hr"),s("b",[e._v("Files in layer:")]),s("br"),s("br"),e.meta.data_filenames.length>0?s("table",e._l(e.meta.data_filenames,(function(t){return s("tr",{key:t},[s("td",{class:t===e.meta.data_filename?"data-filename-primary":"data-filename-other"},[e._v(e._s(t))]),t===e.meta.data_filename?s("td",[e._v(" <--")]):s("td"),t===e.meta.data_filename?s("td",[s("b",[e._v("(anchor)")])]):s("td",[s("button",{staticClass:"button-set-anchor",on:{click:function(s){return e.setAnchorFile(t)}}},[e._v("set anchor")])]),s("td",[s("button",{staticClass:"button-delete",on:{click:function(s){return e.deleteFile(t)}}},[e._v("delete file")])])])})),0):e._e(),0===e.meta.data_filenames.length?s("div",[e._v(" no data files ")]):e._e(),s("hr"),s("br"),s("i",[e._v('"anchor" should point to the vector-file that should be visualised. '),s("br"),e._v('For shapefile format anchor needs to be set to the ".shp"-file. '),s("br"),e._v('".gpkg"-files (GeoPackage) are also supported. ')])],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"grey--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Close")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1),s("admin-task-console",{attrs:{id:e.remote_task_id,closeOnDone:""},on:{done:function(t){return e.$emit("changed")},error:function(t){return e.$emit("changed")}}})],1)},Va=[],Ua=s("ef55"),Wa=s.n(Ua);a["default"].use(Wa.a);var Ga={name:"admin-vectordb-dialog-files",props:["meta"],components:{"admin-task-console":ut},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,remote_task_id:void 0,need_refresh_catalog_entry:!1,options:{target:void 0,testChunks:!1,chunkSize:10485760,simultaneousUploads:1}}},methods:{refresh:function(){this.options.target=this.$store.getters.apiUrl("vectordbs/"+this.meta.name+"/files")},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)},fileFinished:function(){this.need_refresh_catalog_entry=!0,console.log("fileFinished"),this.$emit("changed")},deleteFile:function(e){var t=this;this.need_refresh_catalog_entry=!0;var s=this.$store.getters.apiUrl("vectordbs/"+t.meta.name+"/files/"+e);B.a.delete(s).then((function(e){console.log(e),t.$emit("changed")})).catch((function(e){console.log(e),console.log(t.errorToText(e)),t.setError=!0,t.setErrorMessage="Error: "+t.errorToText(e),console.log(e),t.$emit("changed")}))},setAnchorFile:function(e){var t=this;this.need_refresh_catalog_entry=!0;var s=this.$store.getters.apiUrl("vectordbs/"+t.meta.name);B.a.post(s,{data_filename:e}).then((function(e){console.log(e),t.$emit("changed")})).catch((function(e){console.log(e),console.log(t.errorToText(e)),t.setError=!0,t.setErrorMessage="Error: "+t.errorToText(e),console.log(e),t.$emit("changed")}))},refreshCatalogEntry:function(){var e=this,t=this.$store.getters.apiUrl("api/remote_tasks");B.a.post(t,{remote_task:{task_vectordb:"refresh_catalog_entry",vectordb:e.meta.name}}).then((function(t){console.log(t);var s=t.data.remote_task;e.remote_task_id=s.id})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t)}))}},computed:{},watch:{meta:function(){this.refresh()},dialog:function(){if(this.dialog?this.refresh():this.need_refresh_catalog_entry&&(this.refreshCatalogEntry(),this.need_refresh_catalog_entry=!1),void 0!==this.$refs.uploader){var e=this.$refs.uploader.files.slice(0);for(var t in e)e[t].removeFile(e[t])}}},mounted:function(){this.refresh()}},qa=Ga,Ha=(s("6541"),Object(p["a"])(qa,Fa,Va,!1,null,null,null)),Ja=Ha.exports,Qa=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticStyle:{display:"inline-block"}},[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"Set name attibute"},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("Attributes ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set name attribute")])]),s("v-card-text",[s("br"),s("hr"),s("b",[e._v("Attributes:")]),s("br"),s("br"),s("table",e._l(e.meta.details.attributes,(function(t){return s("tr",{key:t},[s("td",{class:t===e.meta.name_attribute?"data-filename-primary":"data-filename-other"},[e._v(e._s(t))]),t===e.meta.name_attribute?s("td",[e._v(" <--")]):s("td"),t===e.meta.name_attribute?s("td",[s("b",[e._v("(name attribute)")])]):s("td",[s("button",{staticClass:"button-set-anchor",on:{click:function(s){return e.setNameAttribute(t)}}},[e._v("set name attribute")])])])})),0),0===e.meta.details.attributes.length?s("div",[e._v(" no attributes ")]):e._e(),s("hr"),s("br"),s("i",[e._v('"name attribute" denotes the attribut that should be used as name of a vector feature. ')])]),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"grey--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Close")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1),s("admin-task-console",{attrs:{id:e.remote_task_id,closeOnDone:""},on:{done:function(t){return e.$emit("changed")},error:function(t){return e.$emit("changed")}}})],1)},Ya=[];a["default"].use(Wa.a);var Ka={name:"admin-vectordb-attributes",props:["meta"],components:{"admin-task-console":ut},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,remote_task_id:void 0,need_refresh_catalog_entry:!1}},methods:{errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)},fileFinished:function(){this.need_refresh_catalog_entry=!0,console.log("fileFinished"),this.$emit("changed")},setNameAttribute:function(e){var t=this;this.need_refresh_catalog_entry=!0;var s=this.$store.getters.apiUrl("vectordbs/"+t.meta.name);B.a.post(s,{name_attribute:e}).then((function(e){console.log(e),t.$emit("changed")})).catch((function(e){console.log(e),console.log(t.errorToText(e)),t.setError=!0,t.setErrorMessage="Error: "+t.errorToText(e),console.log(e),t.$emit("changed")}))},refresh:function(){},refreshCatalogEntry:function(){var e=this,t=this.$store.getters.apiUrl("api/remote_tasks");B.a.post(t,{remote_task:{task_vectordb:"refresh_catalog_entry",vectordb:e.meta.name}}).then((function(t){console.log(t);var s=t.data.remote_task;e.remote_task_id=s.id})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t)}))}},computed:{},watch:{meta:function(){this.refresh()},dialog:function(){if(this.dialog?this.refresh():this.need_refresh_catalog_entry&&(this.refreshCatalogEntry(),this.need_refresh_catalog_entry=!1),void 0!==this.$refs.uploader){var e=this.$refs.uploader.files.slice(0);for(var t in e)e[t].removeFile(e[t])}}},mounted:function(){this.refresh()}},Xa=Ka,Za=(s("2f00"),Object(p["a"])(Xa,Qa,Ya,!1,null,null,null)),ei=Za.exports,ti=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticStyle:{display:"inline-block"}},[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px",persistent:e.blocked},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"Set name attibute"},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("Structured Access ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("set structured access")])]),s("v-card-text",[s("br"),s("hr"),s("b",[e._v("enable/disable access types:")]),s("br"),s("br"),s("table",[s("tr",[s("td",[s("v-switch",{attrs:{label:"POI-group"},model:{value:e.structured_access_poi,callback:function(t){e.structured_access_poi=t},expression:"structured_access_poi"}})],1),s("td",{staticStyle:{"padding-left":"20px"}},[s("i",[e._v("view of named "),s("b",[e._v("points")]),e._v(" (Points Of Interest)")])])]),s("tr",[s("td",[s("v-switch",{attrs:{label:"ROI-group"},model:{value:e.structured_access_roi,callback:function(t){e.structured_access_roi=t},expression:"structured_access_roi"}})],1),s("td",{staticStyle:{"padding-left":"20px"}},[s("i",[e._v("view of named "),s("b",[e._v("polygons")]),e._v(" (Regions Of Interest)")])])])]),0===e.meta.details.attributes.length?s("div",[e._v(" no attributes ")]):e._e(),s("hr"),s("br"),s("p",[s("b",[e._v("Name")]),e._v(" of POI-group / ROI-group is identical to "),s("b",[e._v("vector layer name")]),e._v(".")]),s("p",[s("b",[e._v("Names")]),e._v(' for POIs and ROIs are determined by vector layer "'),s("b",[e._v("name attribute")]),e._v('" (may be set by "manage attributes" dialog).')]),s("p",[e._v("For "),s("b",[e._v("POIs")]),e._v(" just "),s("b",[e._v("point vector features")]),e._v(" are included in resulting POI collection. (Other geometry types will be ignored.)")]),s("p",[e._v("For "),s("b",[e._v("ROIs")]),e._v(" just "),s("b",[e._v("polygon vector features")]),e._v(' are included in resulting ROI collection. Multi-polygons and "holes" are not supported. (Other geometry types will be ignored.)')]),s("p",[e._v("Projection is identical to source vector layer projection.")])]),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"grey--text darken-1",attrs:{flat:"flat",disabled:e.blocked},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat",disabled:e.blocked},nativeOn:{click:function(t){return e.apply.apply(null,arguments)}}},[e._v("Apply")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1),s("admin-task-console",{attrs:{id:e.remote_task_id,closeOnDone:""},on:{done:function(t){return e.$emit("changed")},error:function(t){return e.$emit("changed")}}})],1)},si=[];function ai(e,t,s,a,i,r,o){try{var n=e[r](o),c=n.value}catch(l){return void s(l)}n.done?t(c):Promise.resolve(c).then(a,i)}function ii(e){return function(){var t=this,s=arguments;return new Promise((function(a,i){var r=e.apply(t,s);function o(e){ai(r,a,i,o,n,"next",e)}function n(e){ai(r,a,i,o,n,"throw",e)}o(void 0)}))}}a["default"].use(Wa.a);var ri={name:"admin-vectordb-structured-access",props:["meta"],components:{"admin-task-console":ut},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,remote_task_id:void 0,need_refresh_catalog_entry:!1,structured_access_poi:!1,structured_access_roi:!1,blocked:!1}},methods:{errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)},setNameAttribute:function(e){var t=this;this.need_refresh_catalog_entry=!0;var s=this.$store.getters.apiUrl("vectordbs/"+t.meta.name);B.a.post(s,{name_attribute:e}).then((function(e){console.log(e),t.$emit("changed")})).catch((function(e){console.log(e),console.log(t.errorToText(e)),t.setError=!0,t.setErrorMessage="Error: "+t.errorToText(e),console.log(e),t.$emit("changed")}))},refresh:function(){this.structured_access_poi=this.meta.structured_access.poi,this.structured_access_roi=this.meta.structured_access.roi,this.need_refresh_catalog_entry=!1},refreshCatalogEntry:function(){var e=this,t=this.$store.getters.apiUrl("api/remote_tasks");B.a.post(t,{remote_task:{task_vectordb:"refresh_catalog_entry",vectordb:e.meta.name}}).then((function(t){console.log(t);var s=t.data.remote_task;e.remote_task_id=s.id})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t)}))},apply:function(){var e=this;return ii(oe.a.mark((function t(){var s,a;return oe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.blocked=!0,t.prev=1,s=e.$store.getters.apiUrl("vectordbs/"+e.meta.name),t.next=5,B.a.post(s,{structured_access:{poi:e.structured_access_poi,roi:e.structured_access_roi}});case 5:a=t.sent,console.log(a),e.dialog=!1,t.next=16;break;case 10:t.prev=10,t.t0=t["catch"](1),console.log(t.t0),console.log(e.errorToText(t.t0)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t.t0);case 16:return t.prev=16,e.blocked=!1,e.$emit("changed"),t.finish(16);case 20:case"end":return t.stop()}}),t,null,[[1,10,16,20]])})))()}},computed:{},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog?this.refresh():this.need_refresh_catalog_entry&&(this.refreshCatalogEntry(),this.need_refresh_catalog_entry=!1)}},mounted:function(){this.refresh()}},oi=ri,ni=(s("8890"),Object(p["a"])(oi,ti,si,!1,null,null,null)),ci=ni.exports,li=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[s("v-icon",[e._v("create")])],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set access control of "),s("i",[e._v("VectorDB")]),e._v("   "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-divider"),s("v-card-text",[e._v(" Specified roles can "),s("b",[e._v("read")]),e._v(" layer data. "),s("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclRole},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}})],1),s("v-card-text",[e._v(" Specified roles can "),s("b",[e._v("modify")]),e._v(" layer data. "),s("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclModRole},model:{value:e.selectedRolesMod,callback:function(t){e.selectedRolesMod=t},expression:"selectedRolesMod"}})],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set.apply(null,arguments)}}},[e._v("Set")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},di=[];function ui(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function vi(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ui(Object(s),!0).forEach((function(t){mi(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ui(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function mi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var pi={name:"admin-vectordb-dialog-set-acl",props:["meta"],components:{Multiselect:C.a},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,selectedRoles:[],selectedRolesMod:[],availableRoles:[],createdAclRoles:[]}},computed:vi(vi({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}})),{},{acl_roles:function(){return this.availableRoles.concat(this.createdAclRoles)}}),methods:{createAclRole:function(e){this.createdAclRoles.push(e),this.selectedRoles.push(e)},createAclModRole:function(e){this.createdAclRoles.push(e),this.selectedRolesMod.push(e)},refresh:function(){var e=this;this.selectedRoles=this.meta.acl,this.selectedRolesMod=this.meta.acl_mod,B.a.get(this.urlPrefix+"../../api/roles").then((function(t){e.availableRoles=t.data.roles})).catch((function(e){console.log(e)}))},set:function(){var e=this,t=this.urlPrefix+"../../vectordbs/"+e.meta.name;B.a.post(t,{acl:e.selectedRoles,acl_mod:e.selectedRolesMod}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error setting property: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},_i=pi,fi=Object(p["a"])(_i,li,di,!1,null,null,null),hi=fi.exports,bi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"show vector data properties as table"},slot:"activator"},[s("v-icon",[e._v("storage")]),e._v(" open data table ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Data Table")])]),s("v-data-table",{attrs:{headers:e.headers,items:e.data},scopedSlots:e._u([{key:"items",fn:function(t){return e._l(e.attributes.length,(function(a,i){return s("td",{key:i},[e._v(e._s(t.item[i]))])}))}}])}),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"grey--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Close")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},gi=[],yi={name:"admin-vectordb-dialog-data-table",props:["meta"],components:{},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,attributes:["a","b","c"],data:[]}},methods:{errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)},refresh:function(){var e=this,t=this.$store.getters.apiUrl("vectordbs/"+e.meta.name+"/table.json");B.a.get(t,{}).then((function(t){console.log(t),e.attributes=t.data.attributes,e.data=t.data.data})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t)}))}},computed:{headers:function(){return this.attributes.map((function(e){return{text:e,value:1}}))}},watch:{meta:function(){this.dialog&&this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.dialog&&this.refresh()}},xi=yi,wi=Object(p["a"])(xi,bi,gi,!1,null,"f385c2da",null),ki=wi.exports,Ei=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticStyle:{display:"inline-block"}},[s("v-dialog",{attrs:{lazy:"",absolute:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"Show URL for WFS based access to this VectorDB layer."},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("WFS access ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("WFS access of "),s("i",[e._v("VectorDB")]),e._v("   "),s("b",[e._v(e._s(e.meta.name))])])]),e._v(" WFS URL: "),s("v-btn",{attrs:{title:"copy WFS URL of this VectorDB layer to clipboard"},on:{click:e.onUrlCopy}},[s("v-icon",[e._v("content_copy")]),e._v(" Copy to clipboard")],1),s("div",{staticClass:"wfs-url"},[e._v(e._s(e.wfsUrl))]),s("br"),e._v(" Web Feature Service (WFS) "),s("a",{attrs:{href:"https://www.ogc.org/standards/wfs",target:"_blank"}},[e._v("specification")]),e._v(", "),s("a",{attrs:{href:"https://en.wikipedia.org/wiki/Web_Feature_Service",target:"_blank"}},[e._v(" Wikipedia entry")]),s("br"),s("br"),s("h2",[e._v("WFS client "),s("a",{attrs:{href:"https://qgis.org/",target:"_blank"}},[e._v("Qgis 3")]),e._v(":")]),e._v(" At Qgis window "),s("i",[e._v("Browser")]),e._v("-Box rigth click on "),s("i",[e._v("WFS")]),e._v("-list-entry, click the shown "),s("i",[e._v("New Connection...")]),e._v("-Button, the "),s("i",[e._v("Create a New WFS Connection")]),e._v("-dialog opens, "),s("br"),e._v("at "),s("i",[e._v("Connection Details")]),e._v(" type a name in the "),s("i",[e._v("Name")]),e._v("-field (e.g. the layer name), and in the "),s("i",[e._v("URL")]),e._v("-field type or paste the above WFS URL for this layer, "),s("br"),e._v("if the RSDB server runs with login, at "),s("i",[e._v("Authentication")]),e._v(" select the "),s("i",[e._v("Basic")]),e._v("-tab, type your account details in the "),s("i",[e._v("User name")]),e._v("-field and the "),s("i",[e._v("Password")]),e._v("-field, Qgis does support BASIC-Authentication, but not DIGEST-Authentication, "),s("br"),e._v("click the "),s("i",[e._v("OK")]),e._v("-Button. "),s("br"),s("br"),e._v("The new layer is shown as list-entry in the sub-list of the "),s("i",[e._v("WFS")]),e._v("-list-entry, double click on the sub-list-entry, a list-entry of the layer name is shown, "),s("br"),e._v("double click on this list-entry to view in Qgis, the layer is added to the Qgis-Layers in the "),s("i",[e._v("Layers")]),e._v("-Box. "),s("br"),s("br"),s("b",[e._v("Note")]),e._v(": Qgis does cache received network data. If you changed layer (meta-)data and if it is not reflected in Qgis, do the following: "),s("br"),e._v("Remove the relevant entries in the Qgis Layers-box. "),s("br"),e._v("At Main-menu "),s("i",[e._v("Setting")]),e._v(", click "),s("i",[e._v('Options..."')]),e._v("-entry. The "),s("i",[e._v("Options")]),e._v(" dialog-box opens. Select Page "),s("i",[e._v("Network")]),e._v(" on the left. "),s("br"),e._v("At "),s("i",[e._v("Cache Settings")]),e._v("-section, "),s("i",[e._v("Content")]),e._v("-tab click the "),s("i",[e._v("trash can")]),e._v("-symbol-button. "),s("br"),e._v("Cache is now cleared. Right click on the WFS-entry at the Browser-box, click "),s("i",[e._v("refresh")]),e._v("-button to load updated data. "),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Close")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1),s("v-snackbar",{attrs:{top:"",timeout:2e3},model:{value:e.snackbarCopiedToClipboard,callback:function(t){e.snackbarCopiedToClipboard=t},expression:"snackbarCopiedToClipboard"}},[e._v(" URL copied to clipboard "),s("v-btn",{attrs:{color:"pink",flat:""},on:{click:function(t){e.snackbarCopiedToClipboard=!1}}},[e._v("Close")])],1)],1)},Si=[];function Oi(e){var t=document.createElement("textarea");t.style.position="fixed",t.style.top=0,t.style.left=0,t.style.width="2em",t.style.height="2em",t.style.padding=0,t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.select();try{var s=document.execCommand("copy"),a=s?"successful":"unsuccessful";console.log("copying text command was "+a)}catch(i){console.log("ERROR unable to copy: "+i)}document.body.removeChild(t)}var Pi={name:"admin-vectordb-dialog-wfs",props:["meta"],components:{},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,snackbarCopiedToClipboard:!1}},methods:{refresh:function(){},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)},onUrlCopy:function(){Oi(this.wfsUrl),this.snackbarCopiedToClipboard=!0}},computed:{identity:function(){return this.$store.state.identity.data},wfsUrl:function(){return void 0===this.identity||void 0===this.meta?"[unknown]":this.identity.url_base+"/vectordbs/"+this.meta.name+"/wfs"}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},Ci=Pi,Ti=(s("1748"),Object(p["a"])(Ci,Ei,Si,!1,null,"c702b0f0",null)),Mi=Ti.exports,Ri=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticStyle:{display:"inline-block"}},[s("v-dialog",{attrs:{lazy:"",absolute:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"Show URL for WMS based access to this VectorDB layer."},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("WMS access ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("WMS access of "),s("i",[e._v("VectorDB")]),e._v("   "),s("b",[e._v(e._s(e.meta.name))])])]),e._v(" WMS URL: "),s("v-btn",{attrs:{title:"copy WMS URL of this VectorDB layer to clipboard"},on:{click:e.onUrlCopy}},[s("v-icon",[e._v("content_copy")]),e._v(" Copy to clipboard")],1),s("div",{staticClass:"wms-url"},[e._v(e._s(e.wmsUrl))]),s("br"),e._v(" Web Feature Service (WMS) "),s("a",{attrs:{href:"https://www.ogc.org/standards/wms",target:"_blank"}},[e._v("specification")]),e._v(", "),s("a",{attrs:{href:"https://en.wikipedia.org/wiki/Web_Map_Service",target:"_blank"}},[e._v(" Wikipedia entry")]),s("br"),s("br"),s("h2",[e._v("WMS client "),s("a",{attrs:{href:"https://qgis.org/",target:"_blank"}},[e._v("Qgis 3")]),e._v(":")]),e._v(" At Qgis window "),s("i",[e._v("Browser")]),e._v("-Box rigth click on "),s("i",[e._v("WMS")]),e._v("-list-entry, click the shown "),s("i",[e._v("New Connection...")]),e._v("-Button, the "),s("i",[e._v("Create a New WMS Connection")]),e._v("-dialog opens, "),s("br"),e._v("at "),s("i",[e._v("Connection Details")]),e._v(" type a name in the "),s("i",[e._v("Name")]),e._v("-field (e.g. the layer name), and in the "),s("i",[e._v("URL")]),e._v("-field type or paste the above WMS URL for this layer, "),s("br"),e._v("if the RSDB server runs with login, at "),s("i",[e._v("Authentication")]),e._v(" select the "),s("i",[e._v("Basic")]),e._v("-tab, type your account details in the "),s("i",[e._v("User name")]),e._v("-field and the "),s("i",[e._v("Password")]),e._v("-field, Qgis does support BASIC-Authentication, but not DIGEST-Authentication, "),s("br"),e._v("click the "),s("i",[e._v("OK")]),e._v("-Button. "),s("br"),s("br"),e._v("The new layer is shown as list-entry in the sub-list of the "),s("i",[e._v("WMS")]),e._v("-list-entry, double click on the sub-list-entry, a list-entry of the layer name is shown, "),s("br"),e._v("double click on this list-entry to view in Qgis, the layer is added to the Qgis-Layers in the "),s("i",[e._v("Layers")]),e._v("-Box. "),s("br"),s("br"),s("b",[e._v("Note")]),e._v(": Qgis does cache received network data. If you changed layer (meta-)data and if it is not reflected in Qgis, do the following: "),s("br"),e._v("Remove the relevant entries in the Qgis Layers-box. "),s("br"),e._v("At Main-menu "),s("i",[e._v("Setting")]),e._v(", click "),s("i",[e._v('Options..."')]),e._v("-entry. The "),s("i",[e._v("Options")]),e._v(" dialog-box opens. Select Page "),s("i",[e._v("Network")]),e._v(" on the left. "),s("br"),e._v("At "),s("i",[e._v("Cache Settings")]),e._v("-section, "),s("i",[e._v("Content")]),e._v("-tab click the "),s("i",[e._v("trash can")]),e._v("-symbol-button. "),s("br"),e._v("Cache is now cleared. Right click on the WMS-entry at the Browser-box, click "),s("i",[e._v("refresh")]),e._v("-button to load updated data. "),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Close")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1),s("v-snackbar",{attrs:{top:"",timeout:2e3},model:{value:e.snackbarCopiedToClipboard,callback:function(t){e.snackbarCopiedToClipboard=t},expression:"snackbarCopiedToClipboard"}},[e._v(" URL copied to clipboard "),s("v-btn",{attrs:{color:"pink",flat:""},on:{click:function(t){e.snackbarCopiedToClipboard=!1}}},[e._v("Close")])],1)],1)},ji=[];function $i(e){var t=document.createElement("textarea");t.style.position="fixed",t.style.top=0,t.style.left=0,t.style.width="2em",t.style.height="2em",t.style.padding=0,t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.select();try{var s=document.execCommand("copy"),a=s?"successful":"unsuccessful";console.log("copying text command was "+a)}catch(i){console.log("ERROR unable to copy: "+i)}document.body.removeChild(t)}var Ai={name:"admin-vectordb-dialog-wms",props:["meta"],components:{},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,snackbarCopiedToClipboard:!1}},methods:{refresh:function(){},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)},onUrlCopy:function(){$i(this.wmsUrl),this.snackbarCopiedToClipboard=!0}},computed:{identity:function(){return this.$store.state.identity.data},wmsUrl:function(){return void 0===this.identity||void 0===this.meta?"[unknown]":this.identity.url_base+"/vectordbs/"+this.meta.name+"/wms"}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},Di=Ai,zi=(s("3dd8"),Object(p["a"])(Di,Ri,ji,!1,null,"310ead2a",null)),Ni=zi.exports;function Li(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Ii(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Li(Object(s),!0).forEach((function(t){Bi(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Li(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Bi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Fi={name:"admin-vectordb-detail",components:{PulseLoader:ts["a"],"dialog-set-info":fe,"box-info":we,"admin-vectordb-delete":Ba,"admin-vectordb-dialog-files":Ja,"admin-vectordb-attributes":ei,"admin-vectordb-structured-access":ci,"admin-vectordb-dialog-set-acl":hi,"admin-vectordb-dialog-data-table":ki,"admin-vectordb-dialog-wfs":Mi,"admin-vectordb-dialog-wms":Ni},props:["vectordb"],data:function(){return{meta:void 0,metaError:!1,metaErrorMessage:void 0,busy:!1,busyMessage:void 0}},methods:{refresh:function(){var e=this;this.$store.dispatch("vectordbs/refresh");var t=this.urlPrefix+"../../vectordbs/"+e.vectordb;e.metaError=!1,e.metaErrorMessage=void 0,e.busy=!0,e.busyMessage="loading ...",B.a.get(t).then((function(t){e.meta=t.data.vectordb,e.busy=!1,e.busyMessage=void 0})).catch((function(t){e.metaError=!0,e.metaErrorMessage="getting meta data: "+e.errorToText(t),e.meta=void 0,e.busy=!1,e.busyMessage=void 0}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data},optArray:function(e){return void 0===e?[]:Array.isArray(e)?e:[e]}},computed:Ii(Ii(Ii({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}})),Object(c["b"])({isAdmin:"identity/isAdmin"})),{},{modify:function(){return void 0!==this.meta&&void 0!=this.meta.modify&&this.meta.modify}}),mounted:function(){this.refresh()},watch:{vectordb:function(){this.refresh()}}},Vi=Fi,Ui=(s("9ff1"),Object(p["a"])(Vi,$a,Aa,!1,null,"b20307c6",null)),Wi=Ui.exports,Gi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main"},[s("transition",{attrs:{name:"fade"}},[e.busy?s("div",{staticClass:"div-busy"},[s("pulse-loader"),e._v(e._s(e.busyMessage)+" ")],1):e._e()]),s("div",{staticStyle:{"text-align":"center","padding-right":"400px"}},[s("h3",{staticClass:"headline mb-0"},[e._v(" "+e._s(void 0===e.meta||void 0===e.meta.title||""===e.meta.title?e.pointdb:e.meta.title)+" "),void 0!==e.meta&&void 0!==e.meta.associated.rasterdb?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/viewer/"+e.meta.associated.rasterdb,target:"_blank",title:"open layer in viewer on new tab"}},[s("v-icon",[e._v("zoom_in")])],1):e._e()],1),void 0!==e.meta&&void 0!==e.meta.title&&""!==e.meta.title?s("span",[s("span",{staticStyle:{"user-select":"none"}},[e._v("id: ")]),s("b",[e._v(e._s(e.pointdb))])]):e._e()]),e.metaError?s("div",[s("b",[e._v("ERROR")]),e._v(" "+e._s(e.metaErrorMessage)+" ")]):e._e(),void 0!=e.meta?s("div",[s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Info ")]),s("div",{staticClass:"meta-content"},[void 0!==e.meta.associated.rasterdb?s("a",{attrs:{href:"#/viewer/"+e.meta.associated.rasterdb,target:"_blank",title:"open layer in viewer on new tab"}},[s("img",{key:e.meta.associated.rasterdb,staticClass:"thumbnail",attrs:{src:e.$store.getters.apiUrl("rasterdb/"+e.meta.associated.rasterdb+"/raster.png?width=200"),alt:""}})]):e._e(),s("table",{staticStyle:{"padding-right":"420px"}},[s("tr",[e._m(0),s("td",[0===e.meta.description.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.description))])])]),s("tr",[e._m(1),s("td",[void 0===e.meta.acquisition_date?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.acquisition_date))])])]),s("tr",[e._m(2),s("td",[void 0===e.meta.corresponding_contact?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.corresponding_contact))])])]),s("tr",[e._m(3),s("td",[e._l(e.optArray(e.meta.tags),(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))]),e._v("   ")])})),0===e.optArray(e.meta.tags).length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Projection ")]),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(4),s("td",[void 0===e.meta.epsg||0===e.meta.epsg.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.epsg))])])]),s("tr",[e._m(5),s("td",[void 0===e.meta.proj4||0===e.meta.proj4.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.proj4))])])])])]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Associated ")]),s("div",{staticClass:"meta-content"},[0===Object.keys(e.meta.associated).length?s("span",{staticStyle:{color:"grey"}},[e._v(" (none) ")]):e._e(),s("table",e._l(e.meta.associated,(function(t,a){return s("tr",{key:a},[s("td",[s("b",[e._v(e._s(a)+":")])]),s("td",e._l(e.optArray(t),(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))]),"PointDB"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/pointdbs/"+t,title:"go to pointdb"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"pointcloud"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/pointclouds/"+t,title:"go to pointcloud"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"rasterdb"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/rasterdbs/"+t,title:"go to rasterdb"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"poi_groups"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/poi_groups/"+t,title:"go to POI group"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"roi_groups"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/roi_groups/"+t,title:"go to ROI group"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),e._v("     ")],1)})),0)])})),0)]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Details ")]),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(6),s("td",[e._v(e._s(e.meta.classified))])]),s("tr",[e._m(7),s("td",[e._v(e._s(e.meta.classified_vegetation))])]),s("tr",[e._m(8),s("td",[e._v(e._s(e.meta.tile_size))])])])]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Access control ")]),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(9),s("td",[e._l(e.meta.acl,(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))]),e._v("   ")])})),0===e.meta.acl.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Applications ")]),s("div",{staticClass:"meta-content"},[s("v-btn",{on:{click:e.app_lidar_indices}},[s("v-icon",[e._v("folder_open")]),e._v(" LiDAR indices processing")],1),s("a",{attrs:{href:this.urlPrefix+"../../web/lidar_indices_description/lidar_indices_description.html",target:"_blank"}},[e._v("Indices Description")])],1)],1):e._e()],1)},qi=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("description:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("acquisition date:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("corresponding contact:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("tags:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("EPSG:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("proj4:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("ground classified:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("vegetation classified:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("tile size:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("access roles:")])])}];function Hi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Ji(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Hi(Object(s),!0).forEach((function(t){Qi(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Hi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Qi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Yi={name:"admin-pointdb-detail",components:{PulseLoader:ts["a"]},props:["pointdb"],data:function(){return{meta:void 0,metaError:!1,metaErrorMessage:void 0,busy:!1,busyMessage:void 0}},methods:{refresh:function(){var e=this,t=this.$store.getters.apiUrl("pointdb/info.json?db="+e.pointdb+"&statistics=false");e.metaError=!1,e.metaErrorMessage=void 0,e.busy=!0,e.busyMessage="loading ...",B.a.get(t).then((function(t){e.meta=t.data,e.busy=!1,e.busyMessage=void 0})).catch((function(t){console.log(t),e.metaError=!0,e.metaErrorMessage="ERROR getting meta: "+t,e.meta=void 0,e.busy=!1,e.busyMessage=void 0}))},optArray:function(e){return void 0===e?[]:Array.isArray(e)?e:[e]},app_lidar_indices:function(){var e=this.$store.getters.apiUrl("web/lidar_indices/lidar_indices.html");window.open(e,"_blank")}},computed:Ji(Ji({},Object(c["b"])({isAdmin:"identity/isAdmin"})),{},{modify:function(){return void 0!==this.meta&&void 0!=this.meta.modify&&this.meta.modify},urlPrefix:function(){return this.$store.state.identity.urlPrefix}}),watch:{pointdb:function(){this.refresh()}},mounted:function(){this.refresh()}},Ki=Yi,Xi=(s("c659"),Object(p["a"])(Ki,Gi,qi,!1,null,"673eda6c",null)),Zi=Xi.exports,er=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main"},[s("transition",{attrs:{name:"fade"}},[e.busy?s("div",{staticClass:"div-busy"},[s("pulse-loader"),e._v(e._s(e.busyMessage)+" ")],1):e._e()]),s("div",{staticStyle:{"text-align":"center"}},[s("h3",{staticClass:"headline mb-0"},[e._v(e._s(void 0===e.meta||void 0===e.meta.title||""===e.meta.title?e.poi_group:e.meta.title))]),void 0!==e.meta&&void 0!==e.meta.title&&""!==e.meta.title?s("span",[s("span",{staticStyle:{"user-select":"none"}},[e._v("id: ")]),s("b",[e._v(e._s(e.poi_group))])]):e._e()]),e.metaError?s("div",[s("b",[e._v("ERROR")]),e._v(" "+e._s(e.metaErrorMessage)+" ")]):e._e(),void 0!=e.meta?s("div",[s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Info ")]),s("div",{staticClass:"meta-content"},[s("box-info",{attrs:{meta:e.meta}}),s("table",[s("tr",[e._m(0),s("td",[0===e.meta.epsg.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.epsg))])])]),s("tr",[e._m(1),s("td",[0===e.meta.proj4.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.proj4))])])])])],1),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Access control ")]),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(2),s("td",[e._l(e.meta.acl,(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))]),e._v("   ")])})),0===e.meta.acl.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),s("v-divider",{staticClass:"meta-divider"}),s("v-card-title",[e._v(" "+e._s(e.meta.pois.length)+" POIs "),s("v-spacer"),s("v-spacer"),s("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),s("v-data-table",{attrs:{headers:e.headers,items:e.meta.pois,"hide-actions":"",search:e.search,"custom-filter":e.filterFunc,"custom-sort":e.sortFunc},scopedSlots:e._u([{key:"items",fn:function(t){return[s("td",[e._v(e._s(t.item.name))]),s("td",[e._v(e._s(t.item.x)+", "+e._s(t.item.y))])]}}],null,!1,947854177)})],1):e._e()],1)},tr=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("EPSG:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("Proj4:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("access roles:")])])}];function sr(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function ar(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(s),!0).forEach((function(t){ir(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):sr(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ir(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var rr={name:"admin-poi_group-detail",components:{PulseLoader:ts["a"],"box-info":we},props:["poi_group"],data:function(){return{meta:void 0,metaError:!1,metaErrorMessage:void 0,busy:!1,busyMessage:void 0,headers:[{text:"name",value:"name"},{text:"position",value:"position"}],search:void 0}},methods:{refresh:function(){var e=this,t=this.urlPrefix+"../../poi_groups/"+e.poi_group;e.metaError=!1,e.metaErrorMessage=void 0,e.busy=!0,e.busyMessage="loading ...",B.a.get(t).then((function(t){e.meta=t.data.poi_group,e.busy=!1,e.busyMessage=void 0})).catch((function(t){console.log(t),e.metaError=!0,e.metaErrorMessage="ERROR getting meta: "+t,e.meta=void 0,e.busy=!1,e.busyMessage=void 0}))},optArray:function(e){return void 0===e?[]:Array.isArray(e)?e:[e]},filterFunc:function(e,t){return e.filter((function(e){return e.name.search(new RegExp(t,"i"))>=0}))},cmpFunc:function(e,t){var s=new Intl.Collator(void 0,{numeric:!0}).compare;switch(console.log(e),e){case"position":return function(e,s){var a=e.x-s.x,i=0===a?e.y-s.y:a;return t?-i:i};default:return function(e,a){var i=s(e.name,a.name);return t?-i:i}}},sortFunc:function(e,t,s){return e.sort(this.cmpFunc(t,s))}},computed:ar(ar(ar({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}})),Object(c["b"])({isAdmin:"identity/isAdmin"})),{},{modify:function(){return void 0!==this.meta&&void 0!=this.meta.modify&&this.meta.modify}}),watch:{poi_group:function(){this.refresh()}},mounted:function(){this.refresh()}},or=rr,nr=(s("b889"),Object(p["a"])(or,er,tr,!1,null,"2a65ffdf",null)),cr=nr.exports,lr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main"},[s("transition",{attrs:{name:"fade"}},[e.busy?s("div",{staticClass:"div-busy"},[s("pulse-loader"),e._v(e._s(e.busyMessage)+" ")],1):e._e()]),s("div",{staticStyle:{"text-align":"center"}},[s("h3",{staticClass:"headline mb-0"},[e._v(e._s(void 0===e.meta||void 0===e.meta.title||""===e.meta.title?e.roi_group:e.meta.title))]),void 0!==e.meta&&void 0!==e.meta.title&&""!==e.meta.title?s("span",[s("span",{staticStyle:{"user-select":"none"}},[e._v("id: ")]),s("b",[e._v(e._s(e.roi_group))])]):e._e()]),e.metaError?s("div",[s("b",[e._v("ERROR")]),e._v(" "+e._s(e.metaErrorMessage)+" ")]):e._e(),void 0!=e.meta?s("div",[s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Info ")]),s("div",{staticClass:"meta-content"},[s("box-info",{attrs:{meta:e.meta}}),s("table",[s("tr",[e._m(0),s("td",[0===e.meta.epsg.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.epsg))])])]),s("tr",[e._m(1),s("td",[0===e.meta.proj4.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.proj4))])])])])],1),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Access control ")]),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(2),s("td",[e._l(e.meta.acl,(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))]),e._v("   ")])})),0===e.meta.acl.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),s("v-divider",{staticClass:"meta-divider"}),s("v-card-title",[e._v(" "+e._s(e.meta.rois.length)+" ROIs "),s("v-spacer"),s("v-spacer"),s("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),s("v-data-table",{attrs:{headers:e.headers,items:e.meta.rois,"hide-actions":"",search:e.search,"custom-filter":e.filterFunc},scopedSlots:e._u([{key:"items",fn:function(t){return[s("td",[e._v(e._s(t.item.name))]),s("td",[e._v(e._s(t.item.center[0])+", "+e._s(t.item.center[1]))]),s("td",[e._v(e._s(t.item.polygon.length-1))])]}}],null,!1,530476886)})],1):e._e()],1)},dr=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("EPSG:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("Proj4:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("access roles:")])])}];function ur(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function vr(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(s),!0).forEach((function(t){mr(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ur(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function mr(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var pr={name:"admin-roi_group-detail",components:{PulseLoader:ts["a"],"box-info":we},props:["roi_group"],data:function(){return{meta:void 0,metaError:!1,metaErrorMessage:void 0,busy:!1,busyMessage:void 0,headers:[{text:"name",value:"name"},{text:"center position",value:"center"},{text:"point count",value:"polygon"}],search:void 0}},methods:{refresh:function(){var e=this,t=this.$store.getters.apiUrl("roi_groups/"+e.roi_group);e.metaError=!1,e.metaErrorMessage=void 0,e.busy=!0,e.busyMessage="loading ...",B.a.get(t).then((function(t){e.meta=t.data.roi_group,e.busy=!1,e.busyMessage=void 0})).catch((function(t){console.log(t),e.metaError=!0,e.metaErrorMessage="ERROR getting meta: "+t,e.meta=void 0,e.busy=!1,e.busyMessage=void 0}))},optArray:function(e){return void 0===e?[]:Array.isArray(e)?e:[e]},filterFunc:function(e,t){return e.filter((function(e){return e.name.search(new RegExp(t,"i"))>=0}))}},computed:vr(vr({},Object(c["b"])({isAdmin:"identity/isAdmin"})),{},{modify:function(){return void 0!==this.meta&&void 0!=this.meta.modify&&this.meta.modify}}),watch:{roi_group:function(){this.refresh()}},mounted:function(){this.refresh()}},_r=pr,fr=(s("2a61"),Object(p["a"])(_r,lr,dr,!1,null,"1eb4ba5a",null)),hr=fr.exports,br=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"main"},[s("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"olmap-explorer"}}),s("div",{staticClass:"innergrid-container",class:[e.filter_focus?"innergrid-item-nav-fill":"innergrid-item-nav-compact"]},[s("v-list",{staticClass:"innergrid-item-nav"},[s("v-list-tile",[void 0!==e.layer_tags?s("multiselect",{attrs:{options:e.layer_tags,"show-labels":!1,placeholder:"filter by tag",multiple:!0},on:{open:function(t){e.filter_focus=!0},close:function(t){e.filter_focus=!1}},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}}):e._e()],1),s("v-list-tile",[s("v-text-field",{staticStyle:{display:"inline-block"},attrs:{label:"search",clearable:"","append-icon":"search"},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1),s("v-list-tile",[s("v-btn",{staticStyle:{display:"inline-block"},attrs:{title:"zoom to all (filtered) layers"},on:{click:function(t){return e.zoomToEntries()}}},[s("v-icon",[e._v("control_camera")]),e._v("zoom fit")],1),s("v-btn",{staticStyle:{display:"inline-block"},attrs:{title:"select all (filtered) layers, even layers that are not visible on the map"},on:{click:function(t){return e.selectAllLayers()}}},[s("v-icon",[e._v("select_all")]),e._v("select all")],1)],1)],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:Object.keys(e.messages).length>0,expression:"Object.keys(messages).length > 0"}],staticClass:"message_box"},e._l(e.messages,(function(t,a){return s("div",{key:a},[s("ring-loader",{staticStyle:{display:"inline-block"},attrs:{color:"#000000",size:"25px"}}),e._v(" "+e._s(t)+" ")],1)})),0),e._l(e.notifications,(function(t,a){return s("v-snackbar",{key:a,attrs:{value:"true"}},[e._v(" "+e._s(t)),s("v-btn",{attrs:{flat:"",color:"pink"},nativeOn:{click:function(t){return e.removeNotification(a)}}},[e._v("Close")])],1)})),s("div",{staticClass:"hoverEntries"},[s("b",[e._v("hovered layers")]),e._l(e.hoverEntries,(function(t){return s("div",{key:t.name},[e._v(e._s(void 0===t.title?t.name:t.title))])}))],2),s("admin-explorer-selected",{attrs:{entries:e.selectedEntries,selectedTags:e.selectedTags,searchText:e.searchText}})],2)])},gr=[],yr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.show?s("div",{staticClass:"selectedEntries"},[s("div",{attrs:{id:"container"}},[s("v-btn",{attrs:{title:"go back to layer explorer map",icon:""},on:{click:function(t){e.show=!1}}},[s("v-icon",[e._v("arrow_back")])],1),s("h3",{staticClass:"headline mb-0",staticStyle:{"text-align":"center"}},[e._v(" Selected Layers ")]),s("v-btn",{attrs:{title:"go back to layer explorer map",icon:""},on:{click:function(t){e.show=!1}}},[s("v-icon",[e._v("cancel")])],1)],1),s("v-divider",{staticClass:"meta-divider"}),e.selectedTags.length>0?s("span",[e._v("by tags "),s("b",e._l(e.selectedTags,(function(t){return s("span",{key:t},[e._v(e._s(t))])})),0)]):e._e(),void 0!==e.searchText&&e.searchText.length>0?s("span",[e._v(" of search "),s("b",[e._v(e._s(e.searchText))])]):e._e(),s("v-data-table",{staticClass:"meta-content",attrs:{headers:e.tableHeaders,items:e.entries,pagination:e.pagination,"custom-sort":e.sortFunc,"hide-actions":""},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[s("td",[s("v-icon",{staticStyle:{"user-select":"none"},attrs:{title:t.item.type}},[e._v(e._s(e.getIcon(t.item)))]),void 0!==e.getMapLink(t.item)?s("a",{attrs:{href:e.getMapLink(t.item),title:"view on map",target:"_blank"}},[s("v-icon",{staticStyle:{"user-select":"none",color:"blue"}},[e._v("zoom_in")])],1):e._e()],1),s("td",[void 0!==e.getLink(t.item)?s("a",{attrs:{href:e.getLink(t.item),title:"view details",target:"_blank"}},[e._v(e._s(t.item.name))]):e._e()]),s("td",[e._v(e._s(void 0!==t.item.title?t.item.title:""))]),s("td",[e._v(e._s(t.item.description))])]}}],null,!1,1350650275)})],1):e._e()},xr=[],wr={name:"admin-explorer-selected",props:["entries","selectedTags","searchText"],data:function(){return{show:!1,tableHeaders:[{text:"type",align:"left",value:"type"},{text:"ID",align:"left",value:"name"},{text:"Title",align:"left",value:"title"},{text:"Description",align:"left",value:"description"}],pagination:{rowsPerPage:-1,sortBy:"title"}}},methods:{onShow:function(){this.show=!0},getIcon:function(e){switch(e.type){case"RasterDB":return"collections";case"PointDB":return"blur_on";case"pointcloud":return"grain";case"vectordb":return"category";default:return"device_unknown"}},getLink:function(e){switch(e.type){case"RasterDB":return"#/layers/rasterdbs/"+e.name;case"PointDB":return"#/layers/pointdbs/"+e.name;case"pointcloud":return"#/layers/pointclouds/"+e.name;case"vectordb":return"#/layers/vectordbs/"+e.name;default:return}},getMapLink:function(e){switch(e.type){case"RasterDB":return"#/viewer/"+e.name;case"PointDB":return void 0!==e.associated&&void 0!==e.associated.rasterdb?"#/viewer/"+e.associated.rasterdb:void 0;case"pointcloud":return void 0!==e.associated&&void 0!==e.associated.rasterdb?"#/viewer/"+e.associated.rasterdb:void 0;case"vectordb":return"#/vectorviewer/"+e.name;default:return}},sortFunc:function(e,t,s){console.log("index "+t);var a=(new Intl.Collator).compare;return e.sort((function(e,i){var r=e[t],o=i[t],n=a(void 0===r?e.name:r,void 0===o?i.name:o);return s?-n:n}))}},watch:{},mounted:function(){this.$parent.$on("admin-explorer-selected-show",this.onShow)}},kr=wr,Er=(s("65e2"),Object(p["a"])(kr,yr,xr,!1,null,"d949c108",null)),Sr=Er.exports,Or=(s("5bc0"),s("5eee")),Pr=s("3e6b"),Cr=s("480c"),Tr=s("5831"),Mr=s("d0e9"),Rr=s("a2c7"),jr=s("256f"),$r=s("5bc3"),Ar=s("4cdf"),Dr=s("21bc"),zr=s("9d47"),Nr=s("020f"),Lr=s("83a6"),Ir=s("8682"),Br=s("6c77"),Fr=s("ce2c"),Vr=s("a568");function Ur(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Wr(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(s),!0).forEach((function(t){Gr(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ur(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Gr(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var qr=jr["k"]("EPSG:4326"),Hr=jr["k"]("EPSG:3857"),Jr={name:"admin-explorer",components:{RingLoader:T["a"],Multiselect:C.a,"admin-explorer-selected":Sr},data:function(){return{messages:{},messagesIndex:0,notifications:{},notificationsIndex:0,olmap:void 0,catalogLayer:void 0,catalog:[],hoverEntries:[],selectedEntries:[],selectedTags:[],searchText:"",filter_focus:!1}},methods:{addnotification:function(e){var t=this.notificationsIndex++;return a["default"].set(this.notifications,t,e),t},removeNotification:function(e){a["default"].delete(this.notifications,e)},addMessage:function(e){var t=this.messagesIndex++;return a["default"].set(this.messages,t,e),t},removeMessage:function(e){a["default"].delete(this.messages,e)},refreshCatalog:function(){var e=this,t=this.addMessage("loading catalog of layers ...");B.a.get(this.urlPrefix+"../../api/catalog.json").then((function(s){e.catalog=s.data,e.removeMessage(t)})).catch((function(){e.addnotification("ERROR loading catalog"),e.removeMessage(t)}))},refreshCatalogSource:function(e){var t=[];e.forEach((function(e){var s=e.polygon;if(void 0!==s){var a=new $r["a"]([s]);a.transform(qr,Hr),t.push(new Ar["a"]({geometry:a,entry:e}))}}));var s=new Tr["a"]({features:t});this.catalogLayer.setSource(s),this.zoomToEntries()},zoomToEntries:function(){console.log("zoomToEntries");var e=180,t=90,s=-180,a=-90;this.filteredCatalog.forEach((function(i){var r=i.polygon;void 0!==r&&r.forEach((function(i){var r=i[0],o=i[1];r<e&&(e=r),o<t&&(t=o),s<r&&(s=r),a<o&&(a=o)}))}));var i=[e,t,s,a];console.log(i);var r=jr["h"]([e,t]),o=jr["h"]([s,a]),n=[r[0],r[1],o[0],o[1]];console.log(n),this.olmap.getView().fit(n)},selectAllLayers:function(){var e=this;e.selectedEntries=this.filteredCatalog,e.$emit("admin-explorer-selected-show")}},computed:Wr(Wr({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}})),{},{layer_tags:function(){return this.$store.state.layer_tags.data},filteredCatalog:function(){return this.catalog.filter(this.filterFun)},filterFun:function(){var e=this.tagFilterFun,t=this.searchFilterFun;return function(s){return e(s)&&t(s)}},tagFilterFun:function(){if(0===this.selectedTags.length)return function(){return!0};if(1===this.selectedTags.length){var e=this.selectedTags[0];return function(t){var s=t.tags;return void 0!==s&&s.indexOf(e)>=0}}var t=this.selectedTags;return function(e){var s=e.tags;return void 0!==s&&t.every((function(e){return s.indexOf(e)>=0}))}},searchFilterFun:function(){var e=this.searchText;return void 0===e||null===e||0===e.length?function(){return!0}:(e=e.trim().toLowerCase(),""==e?function(){return!0}:function(t){return t.name.toLowerCase().indexOf(e)>=0||void 0!==t.title&&t.title.toLowerCase().indexOf(e)>=0})}}),watch:{filteredCatalog:function(){this.refreshCatalogSource(this.filteredCatalog)}},mounted:function(){var e=this;document.getElementById("foot-start-1").innerHTML="WGS 84/Pseudo-Mercator",document.getElementById("foot-end-1").innerHTML="",this.$store.dispatch("layer_tags/init");var t=new Lr["a"]({color:"rgba(255,255,255,0.0)"}),s=new Ir["a"]({color:"rgb(95, 112, 245)",width:2}),a=[new Br["c"]({image:new Fr["a"]({fill:t,stroke:s,radius:5}),fill:t,stroke:s})];this.catalogLayer=new Pr["a"]({style:a}),this.olmap=new Or["a"]({target:"olmap-explorer",layers:[new Cr["a"]({source:new Mr["b"]}),this.catalogLayer],view:new Rr["a"]({center:jr["h"]([11,20.82]),zoom:3}),controls:Dr["a"]({attributionOptions:{collapsible:!1}}).extend([new zr["a"],new Nr["a"]({projection:"EPSG:4326",target:"foot-end-1",coordinateFormat:function(e){return Object(Vr["j"])(e,4)}})])}),this.refreshCatalog(),this.olmap.on("pointermove",(function(t){var s=[],a=e.catalogLayer.getSource().getFeaturesAtCoordinate(t.coordinate);a.forEach((function(e){s.push(e.get("entry"))})),e.hoverEntries=s})),this.olmap.on("click",(function(t){console.log("click");var s=[],a=e.catalogLayer.getSource().getFeaturesAtCoordinate(t.coordinate);a.forEach((function(e){s.push(e.get("entry"))})),e.selectedEntries=s,e.$emit("admin-explorer-selected-show")}))},destroyed:function(){document.getElementById("foot-start-1").innerHTML="?",document.getElementById("foot-end-1").innerHTML="?"}},Qr=Jr,Yr=(s("bfbd"),s("cb36"),Object(p["a"])(Qr,br,gr,!1,null,"55b45b16",null)),Kr=Yr.exports,Xr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{position:"relative"}},[s("splitpanes",{staticClass:"rsdb-theme",on:{resize:e.onSplitpanesResize}},[s("pane",{staticClass:"split-nav",attrs:{"min-size":"10",size:"20"}},[s("v-list",{staticClass:"split-nav-list",attrs:{dense:""}},[s("v-toolbar",[e._v(" Mouse"),s("br"),e._v("Modus "),s("v-btn-toggle",{staticStyle:{border:"1px solid #8d8d88"},attrs:{mandatory:""},model:{value:e.mouseModusButtonState,callback:function(t){e.mouseModusButtonState=t},expression:"mouseModusButtonState"}},[s("v-btn",{attrs:{flat:"",value:"move",title:"move map by mouse (press and hold left mouse button)"}},[s("v-icon",[e._v("open_with")]),e._v("move ")],1),s("v-btn",{attrs:{flat:"",value:"select",title:"select an extent on map (press and hold left mouse button)"}},[s("v-icon",[e._v("settings_overscan")]),e._v("select ")],1)],1),s("div",{staticStyle:{"padding-right":"10px"}}),s("v-btn",{attrs:{fab:"",title:"change viewer settings"},on:{click:e.onSettingsDialog}},[s("v-icon",[e._v("settings_applications")])],1)],1),s("admin-viewer-select",{directives:[{name:"show",rawName:"v-show",value:e.selectShow,expression:"selectShow"}],attrs:{currentLayerWMS_opacity:e.layerWMS_opacity,currentRasterdb:e.rasterdb,currentTimestamp:e.timestamp,currentProduct:e.product,meta:e.meta},on:{"selected-rasterdb":function(t){e.selectedRasterdb=t},"selected-time-slice":function(t){e.selectedTimeSlice=t},"selected-product":function(t){e.selectedProduct=t},"selected-layerwms-opacity":function(t){e.layerWMS_opacity=t},close:function(t){e.selectShow=!1}}}),s("admin-viewer-tools",{attrs:{selectedExtent:e.selectedExtent,meta:e.meta,epsgCode:e.epsgCode,currentVectordb:e.vectordb,currentTimestamp:e.timestamp},on:{"tool-raster-export-show":function(t){e.toolRasterExportShow=!0},"tool-point-export-show":function(t){e.toolPointExportShow=!0},"tool-point-raster-export-show":function(t){e.toolPointRasterExportShow=!0},"selected-vectordb":function(t){e.selectedVectordb=t}}})],1)],1),s("pane",{staticClass:"split-main",class:e.selectedBackgroundClass,attrs:{"min-size":"10",id:"split-main"}},[s("div",{staticStyle:{height:"100%"},attrs:{id:"olmap-viewer"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.transactionRunCount>0,expression:"transactionRunCount > 0"}],staticClass:"busy",staticStyle:{"margin-left":"100px"}},[s("img",{attrs:{src:"images/busy.svg"}}),e._v(" Processing ... "+e._s(e.transactionRunCount>1?"("+e.transactionRunCount+" queued)":"")+" "),s("b",[e._v(e._s(e.transactionRunCount>1?"Please wait until processing finished.":""))])])])],1),s("admin-viewer-settings",{directives:[{name:"show",rawName:"v-show",value:e.settingsDialog,expression:"settingsDialog"}],ref:"settingsDialog",staticStyle:{position:"absolute",top:"0px",left:"0px"},on:{close:function(t){e.settingsDialog=!1},"selected-background":function(t){e.selectedBackground=t},"selected-format":function(t){e.selectedFormat=t},"selected-gamma":function(t){e.selectedGamma=t},"sync-bands":function(t){e.syncBands=t},"selected-mapping":function(t){e.selectedOneBandMapping=t},"show-labels":function(t){e.showLabels=t},"value-range-min":function(t){e.valueRangeMin=t},"value-range-max":function(t){e.valueRangeMax=t}}}),void 0!==e.meta?s("admin-viewer-raster-export",{directives:[{name:"show",rawName:"v-show",value:e.toolRasterExportShow,expression:"toolRasterExportShow"}],attrs:{meta:e.meta,selectedExtent:e.selectedExtent,preselectedTimeSlice:e.selectedTimeSlice},on:{close:function(t){e.toolRasterExportShow=!1},"select-full-extent":function(t){return e.selectFullExtent()}}}):e._e(),void 0!==e.meta?s("admin-viewer-point-export",{directives:[{name:"show",rawName:"v-show",value:e.toolPointExportShow,expression:"toolPointExportShow"}],attrs:{pointdb:e.meta.associated.PointDB,pointcloud:e.meta.associated.pointcloud,selectedExtent:e.selectedExtent},on:{close:function(t){e.toolPointExportShow=!1}}}):e._e(),void 0!==e.meta?s("admin-viewer-point-raster-export",{directives:[{name:"show",rawName:"v-show",value:e.toolPointRasterExportShow,expression:"toolPointRasterExportShow"}],attrs:{pointdb:e.meta.associated.PointDB,pointcloud:e.meta.associated.pointcloud,selectedExtent:e.selectedExtent},on:{close:function(t){e.toolPointRasterExportShow=!1}}}):e._e(),s("v-dialog",{attrs:{value:e.featureDetailsShow,lazy:"",persistent:"","max-width":"500px"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[e._v("Attributes")]),s("v-card-text",e._l(e.selectedFeatures,(function(t){return s("table",{key:t.getId()},e._l(e.table.attributes,(function(a,i){return s("tr",{key:i},[s("td",[s("b",[e._v(e._s(a))])]),s("td",[e._v(e._s(e.featureToTableEntry(t.getId())[i]))])])})),0)})),0),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"green darken-1",flat:"flat"},nativeOn:{click:function(t){e.featureDetailsShow=!1}}},[e._v("Close")])],1)],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:Object.keys(e.messages).length>0,expression:"Object.keys(messages).length > 0"}],staticClass:"message_box"},e._l(e.messages,(function(t,a){return s("div",{key:a},[s("ring-loader",{staticStyle:{display:"inline-block"},attrs:{color:"#000000",size:"25px"}}),e._v(" "+e._s(t)+" ")],1)})),0),e._l(e.notifications,(function(t,a){return s("v-snackbar",{key:a,attrs:{value:"true"}},[e._v(" "+e._s(t)),s("v-btn",{attrs:{flat:"",color:"pink"},nativeOn:{click:function(t){return e.removeNotification(a)}}},[e._v("Close")])],1)}))],2)},Zr=[],eo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[void 0!==e.rasterdbs?s("div",[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("collections")]),s("b",[e._v("Raster Layer")]),void 0!==e.selectedRasterdb&&null!==e.selectedRasterdb?s("div",{staticStyle:{"font-size":"0.8em",color:"grey"}},[e._v("ID: "+e._s(e.selectedRasterdb.name))]):e._e(),s("multiselect",{attrs:{options:e.rasterdbs,searchable:!0,"show-labels":!1,placeholder:"pick a layer",allowEmpty:!0},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var a=t.option;return[s("div",[s("b",[e._v(e._s(a.title))])])]}},{key:"option",fn:function(t){var s=t.option;return[e._v(" "+e._s(s.title)+" ")]}}],null,!1,2800991471),model:{value:e.selectedRasterdb,callback:function(t){e.selectedRasterdb=t},expression:"selectedRasterdb"}})],1):e._e(),void 0!==e.meta&&e.meta.time_slices.length>0?s("div",[s("b",[e._v("Time slice")]),s("div",{staticStyle:{display:"flex"}},[s("button",{class:{hidden:!e.selectedTimeSliceIndexHasPrev},attrs:{disabled:!e.selectedTimeSliceIndexHasPrev},on:{click:e.movePrevSelectedTimeSlice}},[e._v("◀")]),e.meta.time_slices.length>1?s("multiselect",{attrs:{options:e.meta.time_slices,searchable:!0,"show-labels":!1,placeholder:"pick a time slice",allowEmpty:!1,trackBy:"id"},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var s=t.option;return[e._v(" "+e._s(s.name)+" ")]}},{key:"option",fn:function(t){var s=t.option;return[e._v(" "+e._s(s.name)+" ")]}}],null,!1,418961142),model:{value:e.selectedTimeSlice,callback:function(t){e.selectedTimeSlice=t},expression:"selectedTimeSlice"}}):e._e(),s("button",{class:{hidden:!e.selectedTimeSliceIndexHasNext},attrs:{disabled:!e.selectedTimeSliceIndexHasNext},on:{click:e.moveNextSelectedTimeSlice}},[e._v("▶")])],1),1===e.meta.time_slices.length?s("div",[e._v(" "+e._s(e.meta.time_slices[0].name)+" ")]):e._e()]):e._e(),e.styles.length>0?s("div",[s("b",[e._v("Raster Visualisation")]),s("div",{staticStyle:{display:"flex"}},[s("button",{class:{hidden:!e.selectedProductIndexHasPrev},attrs:{disabled:!e.selectedProductIndexHasPrev},on:{click:e.movePrevSelectedProduct}},[e._v("◀")]),e.styles.length>1?s("multiselect",{attrs:{options:e.styles,label:"title",searchable:!0,"show-labels":!1,placeholder:"pick a band",allowEmpty:!1,trackBy:"name"},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var s=t.option;return[e._v(" "+e._s(s.name)+" - "+e._s(s.title)+" ")]}},{key:"option",fn:function(t){var s=t.option;return[e._v(" "+e._s(s.name)+" - "+e._s(s.title)+" ")]}}],null,!1,654599382),model:{value:e.selectedProduct,callback:function(t){e.selectedProduct=t},expression:"selectedProduct"}}):e._e(),s("button",{class:{hidden:!e.selectedProductIndexHasNext},attrs:{disabled:!e.selectedProductIndexHasNext},on:{click:e.moveNextSelectedProduct}},[e._v("▶")])],1),void 0!==e.selectedProduct&&null!==e.selectedProduct&&"custom"===e.selectedProduct.name?s("div",[e._v(" custom: "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.customProductText,expression:"customProductText"}],staticClass:"text-input",attrs:{type:"text",id:"name",name:"name",placeholder:"type text, e.g. [b1,b2,b3]",title:"e.g. for RGB visualisation with bands 1,3,5 type: [b1,b3,b5]"},domProps:{value:e.customProductText},on:{input:function(t){t.target.composing||(e.customProductText=t.target.value)}}})]):e._e(),1===e.styles.length?s("div",[e._v(" "+e._s(e.styles[0].name)+" - "+e._s(e.styles[0].title)+" ")]):e._e(),s("v-slider",{staticStyle:{"padding-right":"15px","margin-top":"0px"},attrs:{label:"opacity",min:"0",max:"1",step:"0","hide-details":!0},model:{value:e.selectedLayerWMS_opacity,callback:function(t){e.selectedLayerWMS_opacity=t},expression:"selectedLayerWMS_opacity"}})],1):e._e()])},to=[];function so(e,t){var s="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!s){if(Array.isArray(e)||(s=ao(e))||t&&e&&"number"===typeof e.length){s&&(e=s);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,n=!1;return{s:function(){s=s.call(e)},n:function(){var e=s.next();return o=e.done,e},e:function(e){n=!0,r=e},f:function(){try{o||null==s.return||s.return()}finally{if(n)throw r}}}}function ao(e,t){if(e){if("string"===typeof e)return io(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?io(e,t):void 0}}function io(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,a=new Array(t);s<t;s++)a[s]=e[s];return a}var ro={name:"admin-viewer-select",props:["currentRasterdb","currentTimestamp","currentProduct","meta","currentLayerWMS_opacity"],components:{Multiselect:C.a},data:function(){return{selectedRasterdb:void 0,selectedProduct:void 0,selectedTimeSlice:void 0,selectedLayerWMS_opacity:1,customProductText:void 0}},methods:{refreshSelectedRasterdb:function(){if(void 0!==this.rasterdbs)if(void 0!==this.currentRasterdb){var e,t=so(this.rasterdbs);try{for(t.s();!(e=t.n()).done;){var s=e.value;if(s.name===this.currentRasterdb)return void(this.selectedRasterdb=s)}}catch(a){t.e(a)}finally{t.f()}this.selectedRasterdb=void 0}else this.selectedRasterdb=null;else this.selectedRasterdb=void 0},refreshSelectedTimeSlice:function(){if(void 0!==this.selectedRasterdb&&null!==this.selectedRasterdb&&void 0!==this.meta&&this.meta.name===this.selectedRasterdb.name&&0!==this.meta.time_slices.length){if(void 0===this.currentTimestamp)return this.meta.time_slices.length>0?void(this.selectedTimeSlice=this.meta.time_slices[0]):void(this.selectedTimeSlice=null);var e,t=so(this.meta.time_slices);try{for(t.s();!(e=t.n()).done;){var s=e.value;if(s.id==this.currentTimestamp)return void(this.selectedTimeSlice=s)}}catch(a){t.e(a)}finally{t.f()}this.selectedTimeSlice=void 0}else this.selectedTimeSlice=void 0},refreshSelectedProduct:function(){if(void 0!==this.selectedRasterdb&&null!==this.selectedRasterdb&&void 0!==this.meta&&this.meta.name===this.selectedRasterdb.name&&0!==this.styles.length)if(void 0!==this.currentProduct){var e,t=so(this.styles);try{for(t.s();!(e=t.n()).done;){var s=e.value;if(s.name===this.currentProduct)return void(this.selectedProduct=s)}}catch(a){t.e(a)}finally{t.f()}this.selectedProduct=void 0}else this.selectedProduct=null;else this.selectedProduct=void 0},emitSelectedProduct:function(){if(void 0!==this.selectedProduct&&null!==this.selectedProduct&&"custom"===this.selectedProduct.name){var e={name:this.customProductText,title:"custom"};this.$emit("selected-product",e)}else this.$emit("selected-product",this.selectedProduct)},movePrevSelectedTimeSlice:function(){if(void 0!==this.selectedTimeSliceIndex&&this.selectedTimeSliceIndexHasPrev)return this.selectedTimeSlice=this.meta.time_slices[this.selectedTimeSliceIndex-1]},moveNextSelectedTimeSlice:function(){if(void 0!==this.selectedTimeSliceIndex&&this.selectedTimeSliceIndexHasNext)return this.selectedTimeSlice=this.meta.time_slices[this.selectedTimeSliceIndex+1]},movePrevSelectedProduct:function(){if(void 0!==this.selectedProductIndex&&this.selectedProductIndexHasPrev)return this.selectedProduct=this.styles[this.selectedProductIndex-1]},moveNextSelectedProduct:function(){if(void 0!==this.selectedProductIndex&&this.selectedProductIndexHasNext)return this.selectedProduct=this.styles[this.selectedProductIndex+1]}},computed:{rasterdbs:function(){var e=this.$store.state.rasterdbs.data;return void 0===e?[]:e.slice().sort((function(e,t){return e.title.localeCompare(t.title)}))},styles:function(){return void 0===this.meta?[]:this.meta.wms.styles.concat({name:"custom",title:"user defined"})},selectedTimeSliceIndex:function(){var e=this;if(!(void 0===this.selectedTimeSlice||null===this.selectedTimeSlice||void 0===this.meta||void 0===this.meta.time_slices||this.meta.time_slices.length<1)){var t=this.meta.time_slices.findIndex((function(t){return t.id===e.selectedTimeSlice.id}));return t>=0?t:void 0}},timeSliceIndexMax:function(){if(void 0!==this.meta&&void 0!==this.meta.time_slices)return this.meta.time_slices.length-1},selectedTimeSliceIndexHasPrev:function(){return void 0!==this.selectedTimeSliceIndex&&this.selectedTimeSliceIndex>0},selectedTimeSliceIndexHasNext:function(){return void 0!==this.selectedTimeSliceIndex&&this.selectedTimeSliceIndex<this.timeSliceIndexMax},selectedProductIndex:function(){var e=this;if(!(void 0===this.selectedProduct||null===this.selectedProduct||this.styles.length<1)){var t=this.styles.findIndex((function(t){return t.name===e.selectedProduct.name}));return t>=0?t:void 0}},productIndexMax:function(){if(!(this.styles.length<1))return this.styles.length-1},selectedProductIndexHasPrev:function(){return void 0!==this.selectedProductIndex&&this.selectedProductIndex>0},selectedProductIndexHasNext:function(){return void 0!==this.selectedProductIndex&&this.selectedProductIndex<this.productIndexMax}},watch:{rasterdbs:function(){this.refreshSelectedRasterdb()},currentRasterdb:function(){this.refreshSelectedRasterdb()},selectedRasterdb:function(){this.$emit("selected-rasterdb",this.selectedRasterdb),this.refreshSelectedTimeSlice(),this.refreshSelectedProduct()},meta:function(){this.refreshSelectedTimeSlice(),this.refreshSelectedProduct()},currentTimestamp:function(){this.refreshSelectedTimeSlice()},selectedTimeSlice:function(){this.$emit("selected-time-slice",this.selectedTimeSlice)},currentProduct:function(){this.refreshSelectedProduct()},selectedProduct:function(){this.emitSelectedProduct()},customProductText:function(){this.emitSelectedProduct()},currentLayerWMS_opacity:function(){this.selectedLayerWMS_opacity=this.currentLayerWMS_opacity},selectedLayerWMS_opacity:function(){this.$emit("selected-layerwms-opacity",this.selectedLayerWMS_opacity)}},mounted:function(){this.$store.dispatch("rasterdbs/init"),this.refreshSelectedRasterdb(),this.refreshSelectedTimeSlice(),this.refreshSelectedProduct()}},oo=ro,no=(s("ad60"),Object(p["a"])(oo,eo,to,!1,null,"0b61d564",null)),co=no.exports,lo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[void 0!==e.meta?s("v-btn",{on:{click:function(t){return e.$emit("tool-raster-export-show")}}},[s("v-icon",[e._v("cloud_download")]),e._v(" export")],1):e._e(),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.meta&&void 0!==e.meta.associated&&(void 0!==e.meta.associated.PointDB||void 0!==e.meta.associated.pointcloud),expression:"meta !== undefined && meta.associated !== undefined && (meta.associated.PointDB !== undefined  || meta.associated.pointcloud !== undefined)"}],staticStyle:{"font-size":"0.8em"}},[e._v(" ! just visualisation raster ! ")]),s("div",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.epsgCode,expression:"epsgCode !== undefined"}]},[s("br"),s("hr"),s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("category")]),s("b",[e._v("Vector Layer")]),void 0!==e.selectedVectordb&&null!==e.selectedVectordb?s("div",{staticStyle:{"font-size":"0.8em",color:"grey"}},[e._v("ID: "+e._s(e.selectedVectordb.name))]):e._e(),void 0!==e.vectordbs?s("multiselect",{attrs:{options:e.vectordbs,searchable:!0,"show-labels":!1,placeholder:"pick a vector layer",allowEmpty:!0},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var s=t.option;return[e._v(" "+e._s(void 0===s.title?s.name:s.title)+" ")]}},{key:"option",fn:function(t){var s=t.option;return[e._v(" "+e._s(void 0===s.title?s.name:s.title)+" ")]}}],null,!1,1634031990),model:{value:e.selectedVectordb,callback:function(t){e.selectedVectordb=t},expression:"selectedVectordb"}}):e._e(),void 0!==e.selectedVectordb&&null!==e.selectedVectordb?s("div",[s("div",[s("a",{attrs:{href:e.urlPrefix+"../../vectordbs/"+e.selectedVectordb.name+"/package.zip",download:e.selectedVectordb.name+".zip",title:"download as ZIP-file"}},[s("v-icon",{attrs:{color:"blue"}},[e._v("cloud_download")]),e._v("(download vector layer)")],1)])]):e._e()],1),s("div",{directives:[{name:"show",rawName:"v-show",value:void 0===e.epsgCode,expression:"epsgCode === undefined"}],staticStyle:{color:"#db4c11",padding:"10px","background-color":"#0000000d"},attrs:{title:"Set an EPSG-code for this raster-layer to enable feature 'vector overlay'!"}},[e._v(" ! missing EPSG-code ! ")]),void 0!==e.meta&&void 0!==e.meta.associated&&void 0!==e.meta.associated.PointDB?s("div",[s("br"),s("hr"),s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("blur_on")]),s("b",[e._v("Associated PointDB")]),s("br"),s("v-btn",{attrs:{disabled:void 0===e.selectedExtent},on:{click:e.viewPointsPointdb}},[s("v-icon",[e._v("3d_rotation")]),e._v("  view points")],1),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0===e.selectedExtent,expression:"selectedExtent === undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(select position)")]),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.selectedExtent,expression:"selectedExtent !== undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(at center of selection)")]),s("br"),s("v-btn",{attrs:{disabled:void 0===e.selectedExtent},on:{click:e.viewSurfacePointdb}},[s("v-icon",[e._v("360")]),e._v("  view surface")],1),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0===e.selectedExtent,expression:"selectedExtent === undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(select position)")]),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.selectedExtent,expression:"selectedExtent !== undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(at center of selection)")]),s("br"),s("v-btn",{attrs:{disabled:void 0===e.selectedExtent},on:{click:function(t){return e.$emit("tool-point-export-show")}}},[s("v-icon",[e._v("save_alt")]),e._v("  export points")],1),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0===e.selectedExtent,expression:"selectedExtent === undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(select extent)")]),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.selectedExtent,expression:"selectedExtent !== undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(at selection)")]),s("br"),s("v-btn",{attrs:{disabled:void 0===e.selectedExtent},on:{click:function(t){return e.$emit("tool-point-raster-export-show")}}},[s("v-icon",[e._v("get_app")]),e._v("  export surface")],1),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0===e.selectedExtent,expression:"selectedExtent === undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(select extent)")]),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.selectedExtent,expression:"selectedExtent !== undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(at selection)")]),s("br")],1):e._e(),void 0!==e.meta&&void 0!==e.meta.associated&&void 0!==e.meta.associated.pointcloud?s("div",[s("br"),s("hr"),s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("grain")]),s("b",[e._v("Associated PointCloud")]),s("br"),s("v-btn",{attrs:{disabled:void 0===e.selectedExtent},on:{click:e.viewPointsPointcloud}},[s("v-icon",[e._v("3d_rotation")]),e._v("  view points")],1),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0===e.selectedExtent,expression:"selectedExtent === undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(select position)")]),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.selectedExtent,expression:"selectedExtent !== undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(at center of selection)")]),s("br"),s("v-btn",{attrs:{disabled:void 0===e.selectedExtent},on:{click:e.viewSurfacePointcloud}},[s("v-icon",[e._v("360")]),e._v("  view surface")],1),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0===e.selectedExtent,expression:"selectedExtent === undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(select position)")]),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.selectedExtent,expression:"selectedExtent !== undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(at center of selection)")]),s("br"),s("v-btn",{attrs:{disabled:void 0===e.selectedExtent},on:{click:function(t){return e.$emit("tool-point-export-show")}}},[s("v-icon",[e._v("save_alt")]),e._v("  export points")],1),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0===e.selectedExtent,expression:"selectedExtent === undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(select extent)")]),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.selectedExtent,expression:"selectedExtent !== undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(at selection)")]),s("br"),s("v-btn",{attrs:{disabled:void 0===e.selectedExtent},on:{click:function(t){return e.$emit("tool-point-raster-export-show")}}},[s("v-icon",[e._v("get_app")]),e._v("  export surface")],1),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0===e.selectedExtent,expression:"selectedExtent === undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(select extent)")]),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.selectedExtent,expression:"selectedExtent !== undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(at selection)")])],1):e._e(),void 0!==e.meta&&void 0!==e.meta.associated&&void 0!==e.meta.associated.voxeldb?s("div",[s("br"),s("hr"),s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("grain")]),s("b",[e._v("Associated VoxelDB")]),s("br"),s("v-btn",{attrs:{disabled:void 0===e.selectedExtent},on:{click:e.viewVoxelsVoxelDB}},[s("v-icon",[e._v("3d_rotation")]),e._v("  view voxels")],1),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0===e.selectedExtent,expression:"selectedExtent === undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(select position)")]),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.selectedExtent,expression:"selectedExtent !== undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(at center of selection)")]),s("br")],1):e._e()],1)},uo=[];function vo(e,t){var s="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!s){if(Array.isArray(e)||(s=mo(e))||t&&e&&"number"===typeof e.length){s&&(e=s);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,n=!1;return{s:function(){s=s.call(e)},n:function(){var e=s.next();return o=e.done,e},e:function(e){n=!0,r=e},f:function(){try{o||null==s.return||s.return()}finally{if(n)throw r}}}}function mo(e,t){if(e){if("string"===typeof e)return po(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?po(e,t):void 0}}function po(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,a=new Array(t);s<t;s++)a[s]=e[s];return a}var _o={name:"admin-viewer-tools",props:["meta","selectedExtent","epsgCode","currentVectordb","currentTimestamp"],components:{Multiselect:C.a},data:function(){return{selectedVectordb:null}},methods:{viewPointsPointdb:function(){console.log(this.selectedExtent);var e=this.selectedExtent,t=(e[0]+e[2])/2,s=(e[1]+e[3])/2,a=this.meta.associated.PointDB,i="db="+a+"&x="+t+"&y="+s,r=this.urlPrefix+"../../web/pointcloud_view/pointcloud_view.html#/?"+i;console.log(this.urlPrefix),console.log(r),window.open(r,"_blank")},viewPointsPointcloud:function(){console.log(this.selectedExtent);var e=this.selectedExtent,t=(e[0]+e[2])/2,s=(e[1]+e[3])/2,a=this.meta.associated.pointcloud,i={pointcloud:a,x:t,y:s};void 0!==this.currentTimestamp&&(i.time_slice_id=this.currentTimestamp);var r=new URLSearchParams(i),o=this.urlPrefix+"../../web/pointcloud_view/pointcloud_view.html#/?"+r;console.log(this.urlPrefix),console.log(o),window.open(o,"_blank")},viewVoxelsVoxelDB:function(){console.log(this.selectedExtent);var e=this.selectedExtent,t=(e[0]+e[2])/2,s=(e[1]+e[3])/2,a=-2,i=this.meta.associated.voxeldb,r={voxeldb:i,x:t,y:s,z:a};void 0!==this.currentTimestamp&&(r.time_slice_id=this.currentTimestamp);var o=new URLSearchParams(r),n=this.urlPrefix+"../../web/voxel_view/?"+o;console.log(n),console.log(this.urlPrefix),console.log(n),window.open(n,"_blank")},viewSurfacePointdb:function(){console.log(this.selectedExtent);var e=this.selectedExtent,t=(e[0]+e[2])/2,s=(e[1]+e[3])/2,a=this.meta.associated.PointDB,i="db="+a+"&x="+t+"&y="+s,r=this.urlPrefix+"../../web/height_map_view/height_map_view.html?"+i;console.log(this.urlPrefix),console.log(r),window.open(r,"_blank")},viewSurfacePointcloud:function(){console.log(this.selectedExtent);var e=this.selectedExtent,t=(e[0]+e[2])/2,s=(e[1]+e[3])/2,a=this.meta.associated.pointcloud,i="pointcloud="+a+"&x="+t+"&y="+s,r=this.urlPrefix+"../../web/height_map_view/height_map_view.html?"+i;console.log(this.urlPrefix),console.log(r),window.open(r,"_blank")},exportPointsPointdb:function(){console.log(this.selectedExtent);var e=this.selectedExtent,t=this.meta.associated.PointDB,s="db="+t+"&modus=ext&xmin="+e[0]+"&ymin="+e[1]+"&xmax="+e[2]+"&ymax="+e[3],a=this.urlPrefix+"../../web/point_processing/point_processing.html#/?"+s;console.log(this.urlPrefix),console.log(a),window.open(a,"_blank")},exportSurfacePointdb:function(){console.log(this.selectedExtent);var e=this.selectedExtent,t=this.meta.associated.PointDB,s="db="+t+"&modus=ext&xmin="+e[0]+"&ymin="+e[1]+"&xmax="+e[2]+"&ymax="+e[3],a=this.urlPrefix+"../../web/raster_point_processing/raster_point_processing.html#/?"+s;console.log(this.urlPrefix),console.log(a),window.open(a,"_blank")},refreshSelectedVectordb:function(){if(void 0!==this.vectordbs)if(void 0!==this.currentVectordb){var e,t=vo(this.vectordbs);try{for(t.s();!(e=t.n()).done;){var s=e.value;if(s.name===this.currentVectordb)return void(this.selectedVectordb=s)}}catch(a){t.e(a)}finally{t.f()}this.selectedVectordb=void 0}else this.selectedVectordb=null;else this.selectedVectordb=void 0}},computed:{vectordbs:function(){return this.$store.state.vectordbs.data},urlPrefix:function(){return this.$store.state.identity.urlPrefix}},watch:{vectordbs:function(){this.refreshSelectedVectordb()},currentVectordb:function(){this.refreshSelectedVectordb()},selectedVectordb:function(){this.$emit("selected-vectordb",this.selectedVectordb)}},mounted:function(){this.$store.dispatch("vectordbs/init")}},fo=_o,ho=Object(p["a"])(fo,lo,uo,!1,null,"cf638e34",null),bo=ho.exports,go=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"raster-export-container"},[s("h1",[e._v("Export Raster Data "),s("v-btn",{staticStyle:{maring:"0px"},attrs:{flat:"",icon:"",color:"indigo",title:"close box"},on:{click:function(t){return e.$emit("close")}}},[s("v-icon",[e._v("close")])],1)],1),void 0===e.selectedExtent?s("div",{staticStyle:{display:"inline-block","white-space":"nowrap","padding-top":"20px"}},[e._m(0),s("br"),s("br"),e._v("To Export raster data you need to first select an extent on the map. "),s("br"),s("v-btn",{staticStyle:{maring:"0px"},attrs:{title:"close box"},on:{click:function(t){return e.$emit("close")}}},[s("v-icon",[e._v("close")]),e._v("Close")],1),e._v(" export dialog and select extent: "),s("br"),e._v("Set mouse-modus to 'select' and create extent by pressing left mouse button and moving mouse. "),s("br"),s("br"),s("br"),s("v-btn",{staticStyle:{maring:"0px"},attrs:{title:"select all raster pixels in current layer"},on:{click:function(t){return e.$emit("select-full-extent")}}},[s("v-icon",[e._v("select_all")]),e._v("select full extent")],1),e._v(" "),s("b",[e._v("Note: ")]),e._v(" If the layer is large selecting full extent may not be optimal. ")],1):e._e(),void 0!==e.selectedExtent?s("div",{staticStyle:{display:"inline-block","white-space":"nowrap","padding-top":"20px"}},[s("h3",[e._v("selected extent")]),s("div",[s("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"xmin",box:""},model:{value:e.user_xmin,callback:function(t){e.user_xmin=t},expression:"user_xmin"}}),e._v(" , "),s("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"ymin",box:""},model:{value:e.user_ymin,callback:function(t){e.user_ymin=t},expression:"user_ymin"}}),e._v(" - "),s("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"xmax",box:""},model:{value:e.user_xmax,callback:function(t){e.user_xmax=t},expression:"user_xmax"}}),e._v(" , "),s("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"ymax",box:""},model:{value:e.user_ymax,callback:function(t){e.user_ymax=t},expression:"user_ymax"}}),e._v("      "),s("b",[e._v("size")]),e._v(" (coordinate units) "+e._s(e.user_xmax-e.user_xmin)+" x "+e._s(e.user_ymax-e.user_ymin)+" = "+e._s((e.user_xmax-e.user_xmin)*(e.user_ymax-e.user_ymin))+" ")],1),s("b",[e._v("Scale")]),s("br"),s("multiselect",{attrs:{options:e.scaleDivs,"show-labels":!1,allowEmpty:!1,placeholder:"scale of source raster to output"},scopedSlots:e._u([{key:"option",fn:function(t){var a=t.option;return[e._v(" 1:"+e._s(a)+" - "),1===a?s("span",[s("b",[e._v("original size")])]):e._e(),a>1?s("span",[s("b",[e._v("scaled down raster")]),e._v(" - "),s("i",[e._v("smaller file size and faster download")])]):e._e()]}},{key:"singleLabel",fn:function(t){var a=t.option;return[e._v(" 1:"+e._s(a)+" - "),1===a?s("span",[s("b",[e._v("original size")])]):e._e(),a>1?s("span",[s("b",[e._v("scaled down raster")]),e._v(" - "),s("i",[e._v("smaller file size and faster download")])]):e._e()]}}],null,!1,2442651382),model:{value:e.scaleDiv,callback:function(t){e.scaleDiv=t},expression:"scaleDiv"}}),s("b",[e._v("size")]),e._v(" "+e._s(e.xpixels)+" x "+e._s(e.ypixels)+" = "+e._s(e.pixelCountText)+" "),s("br"),s("br"),s("b",[e._v("Mode")]),s("br"),s("multiselect",{attrs:{options:e.modes,"show-labels":!1,allowEmpty:!1,placeholder:"output format","track-by":"id",label:"title"},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}}),s("br"),"direct_bands"===e.mode.id?s("div",[s("b",[e._v("Arrangement")]),s("br"),e._v(" Raster file at one time slice with (multiple) bands. "),s("br"),s("br"),s("b",[e._v("File format")]),s("br"),s("multiselect",{attrs:{options:e.outputTypes,"show-labels":!1,allowEmpty:!1,placeholder:"output format"},model:{value:e.outputType,callback:function(t){e.outputType=t},expression:"outputType"}}),s("br"),s("b",[e._v("Time slice")]),s("br"),s("multiselect",{attrs:{options:e.meta.time_slices,trackBy:"id",label:"name",searchable:!1,placeholder:"(no time slice selected)",closeOnSelect:!0},model:{value:e.selectedTimeSlice,callback:function(t){e.selectedTimeSlice=t},expression:"selectedTimeSlice"}})],1):e._e(),void 0!==e.meta&&"zip"===e.mode.id?s("div",[s("b",[e._v("Arrangement")]),s("br"),s("multiselect",{attrs:{options:e.zip_arrangements,"show-labels":!1,allowEmpty:!1,placeholder:"output format","track-by":"id",label:"title"},model:{value:e.zip_arrangement,callback:function(t){e.zip_arrangement=t},expression:"zip_arrangement"}}),s("br"),s("b",[e._v("File format of files contained in ZIP file")]),s("br"),e._v(" GeoTIFF "),s("br"),s("br"),s("b",[e._v("Time slices")]),s("br"),s("multiselect",{attrs:{multiple:"",options:e.meta.time_slices,trackBy:"id",label:"name",searchable:!1,placeholder:"(all time slices)",closeOnSelect:!1},model:{value:e.selectedTimeSlices,callback:function(t){e.selectedTimeSlices=t},expression:"selectedTimeSlices"}})],1):e._e(),s("br"),s("b",[e._v("Bands")]),s("br"),void 0!==e.meta?s("div",[s("multiselect",{attrs:{multiple:"",options:e.meta.bands,trackBy:"index",label:"index",searchable:!1,placeholder:"(all bands)",closeOnSelect:!1},scopedSlots:e._u([{key:"option",fn:function(t){var s=t.option;return[e._v(" "+e._s(s.index)+" - "+e._s(s.title)+" ")]}},{key:"singleLabel",fn:function(t){var s=t.option;return[e._v(" "+e._s(s.index)+" - "+e._s(s.title)+" ")]}}],null,!1,1139301430),model:{value:e.selectedBands,callback:function(t){e.selectedBands=t},expression:"selectedBands"}})],1):e._e(),s("br"),"direct_bands"===e.mode.id?s("div",[s("a",{staticStyle:{padding:"9px","background-color":"#f5f5f5","box-shadow":"0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)"},attrs:{title:"download as raster file",href:e.downloadLink,download:e.downloadFilename}},[s("v-icon",{staticStyle:{color:"black"}},[e._v("cloud_download")]),e._v(" Download")],1)]):e._e(),"zip"===e.mode.id?s("div",[s("b",[e._v("Compression")]),s("br"),s("multiselect",{attrs:{options:e.compressions,"show-labels":!1,allowEmpty:!1,placeholder:"output format","track-by":"id",label:"title"},model:{value:e.compression,callback:function(t){e.compression=t},expression:"compression"}}),s("br"),s("v-btn",{on:{click:function(t){return e.zip_download()}}},[s("v-icon",[e._v("cloud_download")]),e._v("Download")],1),s("a",{ref:"zip_download_link",attrs:{hidden:""}},[e._v("hidden link")])],1):e._e(),s("br"),s("br"),"direct_bands"===e.mode.id?s("admin-viewer-raster-export-format-description",{attrs:{"output-type":e.outputType}}):e._e()],1):e._e()])])},yo=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h3",[s("b",{staticStyle:{color:"red"}},[e._v("No extent selected.")])])}],xo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-expansion-panel",[s("v-expansion-panel-content",[s("div",{attrs:{slot:"header"},slot:"header"},[e._v("format description")]),s("hr"),s("h3",{class:{disabled:"GeoTIFF - data"!==e.outputType}},[e._v("GeoTIFF - data")]),s("br"),e._v(" TIFF raster file format with projection information (GeoTIFF) "),s("br"),e._v(" As this format is intended for GIS-software general image-processing"),s("br"),e._v(" applications may not be able to read that files. "),s("br"),s("br"),e._v(' For compatibility with TIFF readers (e.g. GDAL) all bands need to be of same data type, for output "biggest" data type is chosen. '),s("br"),s("br"),e._v(" Tested with: "),s("a",{attrs:{href:"http://gdal.org/"}},[e._v("GDAL")]),e._v(", "),s("a",{attrs:{href:"https://qgis.org/"}},[e._v("QGIS")]),e._v(", "),s("a",{attrs:{href:"https://cran.r-project.org/web/packages/raster/"}},[e._v("R raster")]),s("br"),s("br"),s("hr"),s("h3",{class:{disabled:"GeoTIFF - tiled data (experimental)"!==e.outputType}},[e._v("GeoTIFF - tiled data (experimental)")]),s("br"),e._v(" TIFF raster file format with projection information and tiled data (experimental). "),s("br"),e._v(" As this format is intended for GIS-software general image-processing"),s("br"),e._v(" applications may not be able to read that files. "),s("br"),s("br"),e._v(' For compatibility with TIFF readers (e.g. GDAL) all bands need to be of same data type, for output "biggest" data type is chosen. '),s("br"),s("br"),e._v(" Experimental tiled output. "),s("br"),s("br"),s("hr"),s("h3",{class:{disabled:"GeoTIFF - visualisation"!==e.outputType}},[e._v("GeoTIFF - visualisation")]),s("br"),e._v(" TIFF image file format with projection information (transparency as alpha channel, GeoTIFF) "),s("br"),e._v(" Up to three bands are rendered: "),s("ul",[s("li",[e._v("one band: raser band is rendered to one-band greyscale image (8-bit).")]),s("li",[e._v("two bands: raster bands are rendered to three band red-green-blue image (3x8 bit) with interpolated green.")]),s("li",[e._v("three or more bands: Raster data of first three bands is rendered to three band red-green-blue image (3x8 bit).")])]),s("br"),e._v(" This format is intended for visualisation only. "),s("br"),e._v(" Pixel values are mapped non-linearly to image range (0 - 255) "),s("br"),e._v("to present hight detail in resulting image. "),s("br"),s("br"),s("hr"),s("h3",{class:{disabled:"PNG - visualisation"!==e.outputType}},[e._v("PNG - visualisation")]),s("br"),e._v(" PNG image file format (transparency as alpha channel, no projection information) "),s("br"),e._v(" Files can be displayed in web browsers. "),s("br"),s("br"),e._v(" Output processing details are same as 'GeoTIFF - visualisation'. "),s("br"),s("br"),s("hr"),s("h3",{class:{disabled:"JPEG - visualisation"!==e.outputType}},[e._v("JPEG - visualisation")]),s("br"),e._v(" JPEG image file format (small file size with lossy image compression, no projection information, no transparency information) "),s("br"),e._v(" Files can be displayed in web browsers. "),s("br"),s("br"),e._v(" Output processing details are same as 'GeoTIFF - visualisation'. "),s("br"),s("br"),s("hr"),s("h3",{class:{disabled:"rDAT - data"!==e.outputType}},[e._v("rDAT - data")]),s("br"),e._v(" rDAT file format is transfer format of RSDB R-package. "),s("br"),e._v(" Extensive meta data is preserved by this format. "),s("br"),e._v("e.g. band names, wavelength "),s("br"),s("br"),e._v(' For compatibility with R rasters all bands need to be of same data type. For output "biggest" data type is chosen. '),s("br"),s("br"),e._v(" example: "),s("br"),s("i",[e._v("load file in "),s("a",{attrs:{href:"https://www.r-project.org/"}},[e._v("R")]),e._v(" as RasterLayer (one band) or as RasterStack (multiple bands) and plot it.")]),s("br"),s("br"),s("pre",[e._v('library(RSDB)\nr <- read.rdat("c:/downloads/raster.rdat")\nplot(r)\n      ')])])],1)},wo=[],ko={name:"admin-viewer-raster-export-format-description",props:["outputType"],components:{},data:function(){return{}},methods:{},computed:{},watch:{},mounted:function(){}},Eo=ko,So=(s("4142"),Object(p["a"])(Eo,xo,wo,!1,null,"13ce5e84",null)),Oo=So.exports,Po={name:"admin-viewer-raster-export",props:["meta","selectedExtent","preselectedTimeSlice"],components:{Multiselect:C.a,"admin-viewer-raster-export-format-description":Oo},data:function(){return{user_xmin:void 0,user_ymin:void 0,user_xmax:void 0,user_ymax:void 0,outputTypes:["GeoTIFF - data","GeoTIFF - tiled data (experimental)","rDAT - data","PNG - visualisation","JPEG - visualisation","GeoTIFF - visualisation"],outputType:"GeoTIFF - data",modes:[{id:"zip",title:"zip file with raster files (divided into tiles for arbitrary large raster downloads)"},{id:"direct_bands",title:"raster file (for small raster downloads only)"}],mode:void 0,zip_arrangements:[{id:"multiband",title:"multiband: one tile per time slice (files with multiple bands)"},{id:"timeseries",title:"timeseries: one tile per band (files with multiple bands containing time slices)"},{id:"separate_timestamp_band",title:"separate: tiles for each time slice and each band (single band files)"},{id:"separate_band_timestamp",title:"separate: tiles for each band and each time slice (single band files)"}],zip_arrangement:{id:"multiband",title:"multiband: one tile per time slice (files with multiple bands)"},compressions:[{id:"0",title:"0 - no compression (fastest)"},{id:"1",title:"1 - compression (fast)"},{id:"2",title:"2 - compression (fast)"},{id:"3",title:"3 - compression (fast)"},{id:"4",title:"4 - compression (fast)"},{id:"5",title:"5 - compression (fast)"},{id:"6",title:"6 - compression (compromise)"},{id:"7",title:"7 - compression (slow)"},{id:"8",title:"8 - compression (slower)"},{id:"9",title:"9 - best compression (slowest)"}],compression:{id:"0",title:"0 - no compression (fastest)"},selectedBands:[],selectedTimeSlice:void 0,selectedTimeSlices:[],scaleDivs:[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768,65536],scaleDiv:1}},methods:{toQuery:function(e){var t="";for(var s in e)0==t.length?t="?":t+="&",t+=s+"="+e[s];return t},zip_download:function(){var e=this,t=this.$store.getters.apiUrl("rasterdb/"+e.meta.name+"/packages"),s={ext:[this.user_xmin,this.user_ymin,this.user_xmax,this.user_ymax],compression:e.compression.id,div:e.scaleDiv,arrangement:e.zip_arrangement.id};this.selectedTimeSlices.length>0&&(s.time_slice_ids=this.selectedTimeSlices.map((function(e){return e.id}))),e.selectedBands.length>0&&(s.bands=e.selectedBands.map((function(e){return e.index}))),B.a.post(t,{package:s}).then((function(t){var s=t.data.package;console.log(s),console.log("start");var a=e.$refs.zip_download_link;console.log(a);var i=e.urlPrefix+"../../rasterdb/"+e.meta.name+"/packages/"+s.zip_file_url;a.href=i,a.download=s.zip_file_name,a.click(),console.log(a),console.log("stop")})).catch((function(e){console.log(e)}))}},computed:{xpixels:function(){return Math.floor(Math.floor((this.user_xmax-this.user_xmin)/this.meta.ref.pixel_size.x)/this.scaleDiv)},ypixels:function(){return Math.floor(Math.floor((this.user_ymax-this.user_ymin)/this.meta.ref.pixel_size.y)/this.scaleDiv)},pixelCountText:function(){var e=this.xpixels*this.ypixels;return e>=1e11?(e/1e12).toFixed(1)+" terapixel":e>=1e8?(e/1e9).toFixed(1)+" gigapixel":e>=1e6?(e/1e6).toFixed(1)+" megapixel":e>=1e5?(e/1e6).toFixed(2)+" megapixel":e+" pixel"},urlPrefix:function(){return this.$store.state.identity.urlPrefix},downloadLink:function(){var e=this.$store.getters.apiUrl("rasterdb"),t="raster.tiff",s=[this.user_xmin,this.user_ymin,this.user_xmax,this.user_ymax].join(" "),a={ext:s};switch(void 0!==this.selectedTimeSlice&&null!==this.selectedTimeSlice&&(a.time_slice_id=this.selectedTimeSlice.id),this.outputType){case"GeoTIFF - data":t="raster.tiff";break;case"GeoTIFF - tiled data (experimental)":t="raster.tiff",a.format="tiff:banded:tiled";break;case"GeoTIFF - visualisation":t="raster.tiff",a.visualisation=!0;break;case"PNG - visualisation":t="raster.png",a.visualisation=!0;break;case"rDAT - data":t="raster.rdat";break;case"JPEG - visualisation":t="raster.jpg";break;default:throw"unknown output type"}this.selectedBands.length>0&&(a.band=this.selectedBands.map((function(e){return e.index})).join(" ")),1!==this.scaleDiv&&(a.div=this.scaleDiv);var i=e+"/"+this.meta.name+"/"+t+this.toQuery(a);return i},downloadFilename:function(){var e="";switch(this.outputType){case"GeoTIFF - data":e=".tiff";break;case"GeoTIFF - tiled data (experimental)":e=".tiff";break;case"GeoTIFF - visualisation":e=".tiff";break;case"PNG - visualisation":e=".png";break;case"rDAT - data":e=".rdat";break;case"JPEG - visualisation":e=".jpg";break;default:e=""}var t=this.meta.name;return void 0!==this.selectedTimeSlice&&null!==this.selectedTimeSlice&&(t+="__"+this.selectedTimeSlice.name.split("-").join("_").split(":").join("_").split("/").join("_").split("\\").join("_").split(".").join("_")),t+e}},watch:{selectedExtent:function(){void 0!==this.selectedExtent&&(this.user_xmin=this.selectedExtent[0],this.user_ymin=this.selectedExtent[1],this.user_xmax=this.selectedExtent[2],this.user_ymax=this.selectedExtent[3])},preselectedTimeSlice:function(){void 0!=this.preselectedTimeSlice&&null!=this.preselectedTimeSlice?(this.selectedTimeSlice=this.preselectedTimeSlice,this.selectedTimeSlices=[this.preselectedTimeSlice]):(this.selectedTimeSlice=void 0,this.selectedTimeSlices=[])}},mounted:function(){this.mode=this.modes[0]}},Co=Po,To=(s("1418"),Object(p["a"])(Co,go,yo,!1,null,"6d13599b",null)),Mo=To.exports,Ro=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"point-export-container"},[s("h1",[e._v("Export Point Data "),s("v-btn",{staticStyle:{maring:"0px"},attrs:{flat:"",icon:"",color:"indigo",title:"close box"},on:{click:function(t){return e.$emit("close")}}},[s("v-icon",[e._v("close")])],1)],1),void 0!==e.selectedExtent?s("div",{staticStyle:{display:"inline-block","white-space":"nowrap","padding-top":"20px"}},[s("h3",[e._v("selected extent")]),s("div",[s("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"xmin",box:""},model:{value:e.user_xmin,callback:function(t){e.user_xmin=t},expression:"user_xmin"}}),e._v(" , "),s("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"ymin",box:""},model:{value:e.user_ymin,callback:function(t){e.user_ymin=t},expression:"user_ymin"}}),e._v(" - "),s("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"xmax",box:""},model:{value:e.user_xmax,callback:function(t){e.user_xmax=t},expression:"user_xmax"}}),e._v(" , "),s("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"ymax",box:""},model:{value:e.user_ymax,callback:function(t){e.user_ymax=t},expression:"user_ymax"}}),e._v("      "),s("b",[e._v("size")]),e._v(" (coordinate units) "+e._s(e.user_xmax-e.user_xmin)+" x "+e._s(e.user_ymax-e.user_ymin)+" = "+e._s((e.user_xmax-e.user_xmin)*(e.user_ymax-e.user_ymin))+" ")],1),s("br"),s("b",[e._v("File-Format")]),s("br"),s("multiselect",{attrs:{options:e.outputTypes,"show-labels":!1,allowEmpty:!1,placeholder:"output format","track-by":"name",label:"title"},model:{value:e.outputType,callback:function(t){e.outputType=t},expression:"outputType"}}),s("br"),s("a",{staticStyle:{padding:"9px","background-color":"#f5f5f5","box-shadow":"0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)"},attrs:{title:"download points as file",href:e.downloadLink,download:e.downloadFilename}},[s("v-icon",{staticStyle:{color:"black"}},[e._v("cloud_download")]),e._v(" Download")],1),s("br"),s("br"),s("br"),s("admin-viewer-point-export-format-description",{attrs:{"output-type":e.outputType}})],1):e._e()])])},jo=[],$o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-expansion-panel",[s("v-expansion-panel-content",[s("div",{attrs:{slot:"header"},slot:"header"},[e._v("format description")]),s("hr"),s("h3",{class:{disabled:"zip"!==e.outputType.name}},[e._v("ZIP (experimantal)")]),s("br"),e._v(" ZIP file containing las files (described in section LAS) "),s("br"),s("br"),e._v("Contained las files are tiles of 1x1km size. All tiles covering the requested extent are returned. "),s("br"),e._v("Tiles are cropped by extend, so parts of tiles outside of extend are empty. "),s("br"),s("hr"),s("hr"),s("h3",{class:{disabled:"LAS"!==e.outputType.name}},[e._v("LAS")]),s("br"),e._v(" LAS point file format "),s("br"),s("br"),s("a",{attrs:{href:"https://www.asprs.org/committee-general/laser-las-file-format-exchange-activities.html"}},[e._v("LAS")]),e._v(" version 1.2 Point Data Format 0 "),s("br"),s("br"),e._v("Tested with: "),s("a",{attrs:{href:"https://www.liblas.org/"}},[e._v("libLAS")]),s("br"),s("br"),s("hr"),s("h3",{class:{disabled:"xyz"!==e.outputType.name}},[e._v("xyz")]),s("br"),e._v(" xyz text based point format. "),s("br"),s("br"),s("hr"),s("h3",{class:{disabled:"rDAT"!==e.outputType.name}},[e._v("rDAT")]),s("br"),e._v(" rDAT file format is transfer format of RSDB R-package. "),s("br"),e._v(" Extensive meta data is preserved by this format. "),s("br"),e._v("e.g. projection "),s("br"),s("br"),e._v(" example: "),s("br"),s("i",[e._v("load file in "),s("a",{attrs:{href:"https://www.r-project.org/"}},[e._v("R")]),e._v(" as data.frame and plot it.")]),s("br"),s("br"),s("pre",[e._v('library(RSDB)\ndf <- read.rdat("points.rdat")\nlibrary(rgl)\nplot3d(df$x, df$y, df$z)\n      ')])])],1)},Ao=[],Do={name:"admin-viewer-point-export-format-description",props:["outputType"],components:{},data:function(){return{}},methods:{},computed:{},watch:{},mounted:function(){}},zo=Do,No=(s("5731"),Object(p["a"])(zo,$o,Ao,!1,null,"bc6b87cc",null)),Lo=No.exports,Io={name:"admin-viewer-point-export",props:["pointdb","pointcloud","selectedExtent"],components:{Multiselect:C.a,"admin-viewer-point-export-format-description":Lo},data:function(){return{user_xmin:void 0,user_ymin:void 0,user_xmax:void 0,user_ymax:void 0,outputTypes:[{name:"zip",title:".zip - containing tiled .las files (for arbitrarily large data)"},{name:"LAS",title:".las - binary file (for small datasets only)"},{name:"xyz",title:".xyz - text file (for small datasets only)"},{name:"rDAT",title:".rDAT - binary file (for small datasets only)"}],outputType:void 0}},methods:{toQuery:function(e){var t="";for(var s in e)0==t.length?t="?":t+="&",t+=s+"="+e[s];return t}},computed:{xpixels:function(){return Math.floor(Math.floor((this.user_xmax-this.user_xmin)/1)/1)},ypixels:function(){return Math.floor(Math.floor((this.user_ymax-this.user_ymin)/1)/1)},pixelCountText:function(){var e=this.xpixels*this.ypixels;return e>=1e11?(e/1e12).toFixed(1)+" terapixel":e>=1e8?(e/1e9).toFixed(1)+" gigapixel":e>=1e6?(e/1e6).toFixed(1)+" megapixel":e>=1e5?(e/1e6).toFixed(2)+" megapixel":e+" pixel"},urlPrefix:function(){return this.$store.state.identity.urlPrefix},downloadLink:function(){if(void 0!==this.pointdb){var e=this.urlPrefix+"../../pointdb",t="unknown",s=[this.user_xmin,this.user_xmax,this.user_ymin,this.user_ymax].join(","),a={db:this.pointdb,ext:s};switch(this.outputType.name){case"LAS":t="points.las",a.format="las";break;case"xyz":t="points.xyz",a.format="xyz";break;case"rDAT":t="points.rdat",a.format="rdat";break;case"zip":t="points.zip",a.format="zip";break;default:throw a.format="unknown","unknown output type "+this.outputType.name}var i=e+"/"+t+this.toQuery(a);return i}if(void 0!==this.pointcloud){var r=this.urlPrefix+"../../pointclouds",o="unknown",n=[this.user_xmin,this.user_ymin,this.user_xmax,this.user_ymax].join(" "),c={ext:n};switch(this.outputType.name){case"LAS":o="points.las";break;case"xyz":o="points.xyz";break;case"rDAT":o="points.rdat";break;case"zip":o="points.zip";break;default:throw"unknown output type "+this.outputType.name}var l=r+"/"+this.pointcloud+"/"+o+this.toQuery(c);return l}return"error"},downloadFilename:function(){var e="";switch(this.outputType.name){case"LAS":e=".las";break;case"xyz":e=".xyz";break;case"rDAT":e=".rdat";break;case"zip":e=".zip";break;default:throw"unknown output type "+this.outputType.name}var t=void 0!==this.pointdb?this.pointdb:void 0!==this.pointcloud?this.pointcloud:"raster";return t+e}},watch:{selectedExtent:function(){void 0!==this.selectedExtent&&(this.user_xmin=this.selectedExtent[0],this.user_ymin=this.selectedExtent[1],this.user_xmax=this.selectedExtent[2],this.user_ymax=this.selectedExtent[3])}},mounted:function(){this.outputType=this.outputTypes.find((function(e){return"zip"===e.name}))}},Bo=Io,Fo=(s("e1e9"),Object(p["a"])(Bo,Ro,jo,!1,null,"2ee932e4",null)),Vo=Fo.exports,Uo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"point-export-container"},[s("h1",[e._v("Export Raster of processed point-cloud data"),s("v-btn",{staticStyle:{maring:"0px"},attrs:{flat:"",icon:"",color:"indigo",title:"close box"},on:{click:function(t){return e.$emit("close")}}},[s("v-icon",[e._v("close")])],1)],1),void 0!==e.selectedExtent?s("div",{staticStyle:{display:"inline-block","white-space":"nowrap","padding-top":"20px"}},[s("h3",[e._v("selected extent")]),s("div",[s("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"xmin",box:""},model:{value:e.user_xmin,callback:function(t){e.user_xmin=t},expression:"user_xmin"}}),e._v(" , "),s("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"ymin",box:""},model:{value:e.user_ymin,callback:function(t){e.user_ymin=t},expression:"user_ymin"}}),e._v(" - "),s("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"xmax",box:""},model:{value:e.user_xmax,callback:function(t){e.user_xmax=t},expression:"user_xmax"}}),e._v(" , "),s("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"ymax",box:""},model:{value:e.user_ymax,callback:function(t){e.user_ymax=t},expression:"user_ymax"}}),e._v("      "),s("b",[e._v("size")]),e._v(" (coordinate units) "+e._s(e.user_xmax-e.user_xmin)+" x "+e._s(e.user_ymax-e.user_ymin)+" = "+e._s((e.user_xmax-e.user_xmin)*(e.user_ymax-e.user_ymin))+" ")],1),s("br"),s("b",[e._v("Point-cloud to raster processing type")]),s("br"),void 0!=e.raster_processing_types?s("span",[s("multiselect",{attrs:{options:e.raster_processing_types,"show-labels":!1,allowEmpty:!1,placeholder:"point-cloud to raster processing type","track-by":"name",label:"label"},model:{value:e.raster_processing_type,callback:function(t){e.raster_processing_type=t},expression:"raster_processing_type"}})],1):e._e(),void 0!=e.metaMessage?s("span",[e._v(" "+e._s(e.metaMessage)+" ")]):e._e(),s("br"),s("b",[e._v("File-Format")]),s("br"),s("multiselect",{attrs:{options:e.outputTypes,"show-labels":!1,allowEmpty:!1,placeholder:"output format","track-by":"name",label:"title"},model:{value:e.outputType,callback:function(t){e.outputType=t},expression:"outputType"}}),s("br"),s("a",{staticStyle:{padding:"9px","background-color":"#f5f5f5","box-shadow":"0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)"},attrs:{title:"download points as file",href:e.downloadLink,download:e.downloadFilename}},[s("v-icon",{staticStyle:{color:"black"}},[e._v("cloud_download")]),e._v(" Download")],1),s("br"),s("br"),s("br"),s("admin-viewer-point-raster-export-format-description",{attrs:{"output-type":e.outputType}})],1):e._e()])])},Wo=[],Go=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-expansion-panel",[s("v-expansion-panel-content",[s("div",{attrs:{slot:"header"},slot:"header"},[e._v("format description")]),s("hr"),s("h3",{class:{disabled:"zip"!==e.outputType.name}},[e._v("ZIP (experimantal)")]),s("br"),e._v(" ZIP file containing tiff files (described in section GeoTIFF - data) "),s("br"),s("br"),e._v("Contained tiff files are tiles of 1x1km size. All tiles covering the requested extent are returned. "),s("br"),e._v("Tiles are cropped by extend, so parts of tiles outside of extend are empty. "),s("br"),s("hr"),s("hr"),s("h3",{class:{disabled:"tiff"!==e.outputType.name}},[e._v("GeoTIFF - data")]),s("br"),e._v(" TIFF raster file format with projection information (GeoTIFF) "),s("br"),e._v(" As this format is intended for GIS-software general image-processing"),s("br"),e._v(" applications may not be able to read that files. "),s("br"),s("br"),e._v(' For compatibility with TIFF readers (e.g. GDAL) all bands need to be of same data type, for output "biggest" data type is chosen. '),s("br"),s("br"),e._v(" Tested with: "),s("a",{attrs:{href:"http://gdal.org/"}},[e._v("GDAL")]),e._v(", "),s("a",{attrs:{href:"https://qgis.org/"}},[e._v("QGIS")]),e._v(", "),s("a",{attrs:{href:"https://cran.r-project.org/web/packages/raster/"}},[e._v("R raster")]),s("br"),s("br"),s("hr"),s("h3",{class:{disabled:"png"!==e.outputType.name}},[e._v("PNG - visualisation")]),s("br"),e._v(" PNG image file format (transparency as alpha channel, no projection information) "),s("br"),e._v(" Files can be displayed in web browsers. "),s("br"),s("br"),e._v(" Output processing details are same as 'GeoTIFF - visualisation'. "),s("br"),s("br"),s("hr"),s("h3",{class:{disabled:"rDAT"!==e.outputType.name}},[e._v("rDAT - data")]),s("br"),e._v(" rDAT file format is transfer format of RSDB R-package. "),s("br"),e._v(" Extensive meta data is preserved by this format. "),s("br"),e._v("e.g. band names, wavelength "),s("br"),s("br"),e._v(' For compatibility with R rasters all bands need to be of same data type. For output "biggest" data type is chosen. '),s("br"),s("br"),e._v(" example: "),s("br"),s("i",[e._v("load file in "),s("a",{attrs:{href:"https://www.r-project.org/"}},[e._v("R")]),e._v(" as RasterLayer (one band) or as RasterStack (multiple bands) and plot it.")]),s("br"),s("br"),s("pre",[e._v('library(RSDB)\nr <- read.rdat("c:/downloads/raster.rdat")\nplot(r)\n      ')])])],1)},qo=[],Ho={name:"admin-viewer-point-raster-export-format-description",props:["outputType"],components:{},data:function(){return{}},methods:{},computed:{},watch:{},mounted:function(){}},Jo=Ho,Qo=(s("df43"),Object(p["a"])(Jo,Go,qo,!1,null,"b8b26910",null)),Yo=Qo.exports,Ko={name:"admin-viewer-point-raster-export",props:["pointdb","pointcloud","selectedExtent"],components:{Multiselect:C.a,"admin-viewer-point-raster-export-format-description":Yo},data:function(){return{user_xmin:void 0,user_ymin:void 0,user_xmax:void 0,user_ymax:void 0,outputTypes:[{name:"zip",title:".zip - containing tiled .tiff files (for arbitrarily large rasters)"},{name:"tiff",title:".tiff - GeoTIFF raster file (for small rasters only)"},{name:"png",title:".png - PNG image file (for small rasters only)"},{name:"rDAT",title:".rDAT - binary file (for small rasters only)"}],outputType:void 0,valid_processing_types:["basic_raster","index_raster","multi_raster"],raster_processing_type:void 0,meta:void 0,metaMessage:"init"}},methods:{toQuery:function(e){var t="";for(var s in e)0==t.length?t="?":t+="&",t+=s+"="+e[s];return t},refreshMeta:function(){var e=this;if(void 0!==this.pointdb)this.meta=void 0,this.metaMessage="loading meta data of layer ...",B.a.get(this.urlPrefix+"../../pointdb/info.json?db="+this.pointdb+"&statistics=false").then((function(t){e.meta=t.data,e.metaMessage=void 0})).catch((function(t){e.meta=void 0,e.metaMessage="ERROR loading meta data of layer "+t}));else{if(void 0===this.pointcloud)return this.meta=void 0,void(this.metaMessage="error in meta");this.meta=void 0,this.metaMessage="loading meta data of layer ...",B.a.get(this.urlPrefix+"../../pointclouds/"+this.pointcloud).then((function(t){e.meta=t.data,e.metaMessage=void 0})).catch((function(t){e.meta=void 0,e.metaMessage="ERROR loading meta data of layer "+t}))}}},computed:{xpixels:function(){return Math.floor(Math.floor((this.user_xmax-this.user_xmin)/1)/1)},ypixels:function(){return Math.floor(Math.floor((this.user_ymax-this.user_ymin)/1)/1)},pixelCountText:function(){var e=this.xpixels*this.ypixels;return e>=1e11?(e/1e12).toFixed(1)+" terapixel":e>=1e8?(e/1e9).toFixed(1)+" gigapixel":e>=1e6?(e/1e6).toFixed(1)+" megapixel":e>=1e5?(e/1e6).toFixed(2)+" megapixel":e+" pixel"},urlPrefix:function(){return this.$store.state.identity.urlPrefix},downloadLink:function(){if(void 0!==this.pointdb&&void 0!==this.outputType&&void 0!==this.raster_processing_type){var e=this.urlPrefix+"../../pointdb",t="unknown",s=[this.user_xmin,this.user_xmax,this.user_ymin,this.user_ymax].join(","),a={db:this.pointdb,ext:s,type:this.raster_processing_type.name};switch(this.outputType.name){case"tiff":t="raster.tiff",a.format="tiff";break;case"png":t="raster.png",a.format="png";break;case"rDAT":t="raster.rDAT",a.format="rDAT";break;case"zip":t="raster.zip",a.format="zip";break;default:throw a.format="unknown","unknown output type "+this.outputType.name}var i=e+"/"+t+this.toQuery(a);return i}if(void 0!==this.pointcloud&&void 0!==this.outputType&&void 0!==this.raster_processing_type){var r=this.urlPrefix+"../../pointclouds",o="unknown",n=[this.user_xmin,this.user_ymin,this.user_xmax,this.user_ymax].join(" "),c={ext:n,type:this.raster_processing_type.name,fill:10};switch(this.outputType.name){case"tiff":o="raster.tiff",c.format="tiff";break;case"png":o="raster.png",c.format="png";break;case"rDAT":o="raster.rDAT",c.format="rDAT";break;case"zip":o="raster.zip",c.format="zip";break;default:throw c.format="unknown","unknown output type "+this.outputType.name}var l=r+"/"+this.pointcloud+"/"+o+this.toQuery(c);return l}return"error"},downloadFilename:function(){var e="";switch(this.outputType.name){case"tiff":e=".tiff";break;case"png":e=".png";break;case"rDAT":e=".rdat";break;case"zip":e=".zip";break;default:throw"unknown output type "+this.outputType.name}var t=void 0!==this.pointdb?this.pointdb:void 0!==this.pointcloud?this.pointcloud:"raster";return t+e},raster_processing_types:function(){var e=this;if(void 0!==this.meta)return void 0!==this.meta.raster_processing_types?this.meta.raster_processing_types.filter((function(t){return e.valid_processing_types.indexOf(t.data_type)>=0})).map((function(e){return{name:e.name,label:e.name+" - "+e.title}})):void 0!==this.meta.pointcloud?this.meta.pointcloud.raster_types.map((function(e){return{name:e.name,label:e.name+" - "+e.description}})):void 0}},watch:{selectedExtent:function(){void 0!==this.selectedExtent&&(this.user_xmin=this.selectedExtent[0],this.user_ymin=this.selectedExtent[1],this.user_xmax=this.selectedExtent[2],this.user_ymax=this.selectedExtent[3])},pointdb:function(){this.refreshMeta()},pointcloud:function(){this.refreshMeta()},raster_processing_types:function(){this.raster_processing_type=void 0!==this.raster_processing_types&&0!==this.raster_processing_types.length?this.raster_processing_types[0]:void 0}},mounted:function(){this.outputType=this.outputTypes.find((function(e){return"zip"===e.name})),this.refreshMeta()}},Xo=Ko,Zo=(s("97dc"),Object(p["a"])(Xo,Uo,Wo,!1,null,"4ad8def0",null)),en=Zo.exports,tn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("vue-draggable-resizable",{attrs:{x:e.boxX,y:e.boxY}},[s("div",{staticClass:"box"},[s("div",{staticClass:"box-header"},[e._v(" Viewer Settings "),s("button",{staticClass:"close-button",on:{click:function(t){return e.$emit("close")}}},[e._v("x")])]),s("b",[e._v("Background")]),s("multiselect",{attrs:{options:e.backgroundOptions,searchable:!0,"show-labels":!1,placeholder:"pick a background",allowEmpty:!1},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var s=t.option;return[e._v(" "+e._s(s.title)+" ")]}},{key:"option",fn:function(t){var s=t.option;return[e._v(" "+e._s(s.title)+" ")]}}]),model:{value:e.selectedBackground,callback:function(t){e.selectedBackground=t},expression:"selectedBackground"}}),s("b",[e._v("Connection")]),e._v(" "),s("button",{staticClass:"button-connection-test",on:{click:e.connection_test}},[e._v("|conntection test|")]),e._v(" "+e._s(e.connectionSpeedMessage)+" "),s("multiselect",{attrs:{options:e.formatOptions,searchable:!0,"show-labels":!1,placeholder:"pick a format",allowEmpty:!1},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var s=t.option;return[e._v(" "+e._s(s.title)+" ")]}},{key:"option",fn:function(t){var s=t.option;return[e._v(" "+e._s(s.description)+" ")]}}]),model:{value:e.selectedFormat,callback:function(t){e.selectedFormat=t},expression:"selectedFormat"}}),s("div",[s("br"),s("br"),s("hr"),s("b",[e._v("Raster visualisation")]),s("div",[s("b",[e._v("Value range")]),e._v("     "),s("v-checkbox",{staticStyle:{display:"inline-block"},attrs:{"hide-details":""},model:{value:e.autoValueRange,callback:function(t){e.autoValueRange=t},expression:"autoValueRange"}}),s("span",{class:{disabled:!e.autoValueRange}},[e._v("auto")]),e._v("     "),s("span",{class:{disabled:e.autoValueRange}},[e._v(" min: "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.valueRangeMinText,expression:"valueRangeMinText"}],staticClass:"text-input",class:{"text-input-invalid":!e.autoValueRange&&isNaN(e.valueRangeMin)},attrs:{type:"text",id:"name",name:"name",maxlength:"8",size:"10",disabled:e.autoValueRange,placeholder:"minimum"},domProps:{value:e.valueRangeMinText},on:{input:function(t){t.target.composing||(e.valueRangeMinText=t.target.value)}}}),e._v(" max: "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.valueRangeMaxText,expression:"valueRangeMaxText"}],staticClass:"text-input",class:{"text-input-invalid":!e.autoValueRange&&isNaN(e.valueRangeMax)},attrs:{type:"text",id:"name",name:"name",maxlength:"8",size:"10",disabled:e.autoValueRange,placeholder:"maximum"},domProps:{value:e.valueRangeMaxText},on:{input:function(t){t.target.composing||(e.valueRangeMaxText=t.target.value)}}})])],1),s("div",[s("b",[e._v("Gamma")]),e._v("    "),s("v-checkbox",{staticStyle:{display:"inline-block"},attrs:{"hide-details":""},model:{value:e.syncBands,callback:function(t){e.syncBands=t},expression:"syncBands"}}),e._v("sync bands "),s("multiselect",{attrs:{options:e.gammas,"show-labels":!1,allowEmpty:!1,placeholder:"gamma correction"},model:{value:e.selectedGamma,callback:function(t){e.selectedGamma=t},expression:"selectedGamma"}})],1),s("div",[s("b",[e._v("Single band mapping")]),s("multiselect",{attrs:{options:e.oneBandMappings,"show-labels":!1,allowEmpty:!1,placeholder:"value to pixel mapping of one band"},model:{value:e.selectedOneBandMapping,callback:function(t){e.selectedOneBandMapping=t},expression:"selectedOneBandMapping"}})],1)]),s("div",[s("br"),s("br"),s("hr"),s("b",[e._v("Vector overlay")]),s("div",[s("v-checkbox",{staticStyle:{display:"inline-block"},attrs:{"hide-details":""},model:{value:e.showLabels,callback:function(t){e.showLabels=t},expression:"showLabels"}}),e._v("Show vector feature labels ")],1)])],1)])},sn=[],an=s("fb19"),rn=s.n(an);function on(e,t,s,a,i,r,o){try{var n=e[r](o),c=n.value}catch(l){return void s(l)}n.done?t(c):Promise.resolve(c).then(a,i)}function nn(e){return function(){var t=this,s=arguments;return new Promise((function(a,i){var r=e.apply(t,s);function o(e){on(r,a,i,o,n,"next",e)}function n(e){on(r,a,i,o,n,"throw",e)}o(void 0)}))}}var cn={name:"admin-viewer-settings",props:[],components:{Multiselect:C.a,VueDraggableResizable:rn.a},data:function(){return{boxX:0,boxY:0,backgroundOptions:[{name:"checkerboard",title:"checkerboard"},{name:"osm",title:"OpenStreetMap"},{name:"OpenTopoMap",title:"OpenTopoMap"},{name:"StamenTerrain",title:"Stamen Terrain"},{name:"black",title:"black"},{name:"grey",title:"grey"},{name:"white",title:"white"}],selectedBackground:void 0,formatOptions:[{name:"image/png:0",title:"uncompressed ",description:"uncompressed - connection > 200 MBit/s"},{name:"image/png",title:"compressed",description:"compressed (default)"},{name:"image/jpeg",title:"lossy compressed (no transparency)",description:"lossy compressed (no transparency) - connection < 50 MBit/s"}],selectedFormat:void 0,connectionSpeedMessage:"(not measured)",gammas:["auto","0.1","0.2","0.5","1.0","1.5","2.0","2.5","3.0"],selectedGamma:"auto",syncBands:!1,oneBandMappings:["grey","inferno","viridis","jet","cividis"],selectedOneBandMapping:"grey",showLabels:!0,autoValueRange:!0,valueRangeMinText:"0",valueRangeMaxText:"255"}},methods:{connection_test:function(){var e=this;return nn(oe.a.mark((function t(){var s,a,i,r,o;return oe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("connection test start"),e.connectionSpeedMessage="measuring...",t.prev=2,s=performance.now(),t.next=6,B.a.get(e.$store.getters.apiUrl("api/connection_test"),{responseType:"arraybuffer"});case 6:a=performance.now(),i=a-s,r=(2e4/i).toFixed(0),o=(16e4/i).toFixed(0),e.connectionSpeedMessage="measured "+o+" Mbit/s ("+r+" MByte/s)",t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](2),console.log("connection test error"),e.connectionSpeedMessage="measuring error";case 17:case"end":return t.stop()}}),t,null,[[2,13]])})))()},isNumber:function(e){return void 0!==e&&""!==e&&!isNaN(e)},parseNumber:function(e){return+e}},computed:{valueRangeMin:function(){return this.autoValueRange?NaN:this.isNumber(this.valueRangeMinText)?this.parseNumber(this.valueRangeMinText):NaN},valueRangeMax:function(){return this.autoValueRange?NaN:this.isNumber(this.valueRangeMaxText)?this.parseNumber(this.valueRangeMaxText):NaN}},watch:{selectedBackground:function(){this.$emit("selected-background",this.selectedBackground)},selectedFormat:function(){this.$emit("selected-format",this.selectedFormat)},selectedGamma:function(){this.$emit("selected-gamma",this.selectedGamma)},syncBands:function(){this.$emit("sync-bands",this.syncBands)},showLabels:function(){this.$emit("show-labels",this.showLabels)},selectedOneBandMapping:{immediate:!0,handler:function(){this.$emit("selected-mapping",this.selectedOneBandMapping)}},valueRangeMin:function(){this.$emit("value-range-min",this.valueRangeMin)},valueRangeMax:function(){this.$emit("value-range-max",this.valueRangeMax)}},mounted:function(){this.selectedBackground=this.backgroundOptions[2],this.selectedFormat=this.formatOptions[1]}},ln=cn,dn=(s("9a17"),Object(p["a"])(ln,tn,sn,!1,null,"2243f96c",null)),un=dn.exports,vn=s("c810"),mn=s("81bd"),pn=s("6792"),_n=s("2ef1"),fn=s("273e"),hn=s("eb48"),bn=s("3a39"),gn=s("35d8"),yn=s("8295"),xn=s("a2e1"),wn=s("f5dd"),kn=s("bc81"),En=s("a79f");function Sn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function On(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Sn(Object(s),!0).forEach((function(t){Pn(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Sn(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Pn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Cn(e,t,s,a,i,r,o){try{var n=e[r](o),c=n.value}catch(l){return void s(l)}n.done?t(c):Promise.resolve(c).then(a,i)}function Tn(e){return function(){var t=this,s=arguments;return new Promise((function(a,i){var r=e.apply(t,s);function o(e){Cn(r,a,i,o,n,"next",e)}function n(e){Cn(r,a,i,o,n,"throw",e)}o(void 0)}))}}var Mn={name:"admin-viewer",props:["rasterdb","timestamp","product","vectordb"],components:{"admin-viewer-select":co,"admin-viewer-tools":bo,"admin-viewer-raster-export":Mo,"admin-viewer-point-export":Vo,"admin-viewer-point-raster-export":en,"admin-viewer-settings":un,Splitpanes:O["Splitpanes"],Pane:O["Pane"],RingLoader:T["a"]},data:function(){return{messages:{},messagesIndex:0,notifications:{},notificationsIndex:0,olmap:void 0,mapAliasToProj4:{},mapProj4ToAlias:{},viewOverlay:void 0,olmousePosition:void 0,layerBackgroundOSM:void 0,layerBackgroundOpenTopoMap:void 0,layerBackgroundStamenTerrain:void 0,selectedFormat:void 0,vectorSource:void 0,vectorLayer:void 0,vectorLabelLayer:void 0,sourceWMS:void 0,layerWMS:void 0,layerWMS_opacity:1,validProjection:!0,meta:void 0,selectShow:!0,selectedRasterdb:void 0,selectedTimeSlice:void 0,selectedProduct:void 0,selectedBackground:void 0,selectedGamma:"auto",syncBands:!1,selectedOneBandMapping:void 0,valueRangeMin:NaN,valueRangeMax:NaN,toolsShow:!0,toolRasterExportShow:!1,toolPointExportShow:!1,toolPointRasterExportShow:!1,selectedVectordb:void 0,showLabels:!0,settingsDialog:!1,mouseModusButtonState:"move",mouseModusKeySelect:!1,interactionExtent:void 0,selectedExtent:void 0,globalEventListeners:{},table:{attibutes:[],data:[]},featureDetailsShow:!1,selectedFeatures:[]}},methods:{addnotification:function(e){var t=this.notificationsIndex++;return a["default"].set(this.notifications,t,e),t},removeNotification:function(e){a["default"].delete(this.notifications,e)},addMessage:function(e){var t=this.messagesIndex++;return a["default"].set(this.messages,t,e),t},removeMessage:function(e){a["default"].delete(this.messages,e)},refreshMeta:function(){var e=this;return Tn(oe.a.mark((function t(){var s,a,i;return oe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.meta=void 0,void 0!==e.selectedRasterdb&&null!==e.selectedRasterdb){t.next=4;break}return e.setVectorView(),t.abrupt("return");case 4:return s=e.addMessage("loading meta data of layer ..."),t.prev=5,a=e.$store.getters.apiUrl("rasterdb/"+e.selectedRasterdb.name+"/meta.json"),t.next=9,B.a.get(a);case 9:i=t.sent,e.meta=i.data,e.removeMessage(s),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](5),e.addnotification("ERROR loading meta data of layer "+t.t0),e.removeMessage(s);case 18:case"end":return t.stop()}}),t,null,[[5,14]])})))()},getNoProjection:function(e){return new wn["a"]({code:"no-projection",units:"pixels",extent:e,axisOrientation:"enu",global:!1,metersPerUnit:1,worldExtent:e,getPointResolution:function(e){return e}})},refreshWMS:function(e){var t=this;if(void 0===this.meta)return this.sourceWMS=void 0,this.layerWMS.setSource(void 0),void this.refreshLayers();var s=function(e,s){var a=t.$store.state.identity.transactionCount;e.wmsReqestCount=a,e.getImage().src=s+"&cnt="+a,t.$store.commit("identity/incrementTransactionCount")},a=this.meta.ref.extent,i="";void 0!==this.meta.ref.proj4&&""!==this.meta.ref.proj4&&(i=this.meta.ref.proj4.trim());var r=void 0;if(""!==i){var o=this.getProjectionAlias(i);r=o}void 0===r&&(r=this.getNoProjection(a));var n=this.$store.getters.apiUrl("rasterdb_wms");this.sourceWMS=new pn["a"]({url:n,params:this.wmsParams,imageLoadFunction:s,projection:r,ratio:1}),this.sourceWMS.on("imageloadstart",(function(){t.$store.commit("identity/incrementTransactionRunCount")})),this.sourceWMS.on("imageloadend",(function(){t.$store.commit("identity/decrementTransactionRunCount")})),this.sourceWMS.on("imageloaderror",(function(e){t.$store.commit("identity/decrementTransactionRunCount");var s=t.$store.state.identity.transactionCount-1;e.image.wmsReqestCount===s&&t.addnotification("ERROR loading image")})),this.layerWMS.setSource(this.sourceWMS),e&&this.layerWMS.setExtent(a),this.setWmsView()},setWmsView:function(){if(void 0!==this.meta)if(void 0!==this.meta.ref)if(void 0!==this.meta.ref.pixel_size)if(void 0!==this.meta.ref.extent){var e=this.meta.ref.extent,t=[(e[0]+e[2])/2,(e[1]+e[3])/2],s="";void 0!==this.meta.ref.proj4&&""!==this.meta.ref.proj4&&(s=this.meta.ref.proj4.trim());var a=void 0;if(""!==s){var i=this.getProjectionAlias(s);a=i}void 0===a?(a=this.getNoProjection(e),this.validProjection=!1):this.validProjection=!0,this.olmousePosition.setProjection(a);var r=this.meta.ref.pixel_size.x<=this.meta.ref.pixel_size.y?this.meta.ref.pixel_size.x:this.meta.ref.pixel_size.y,o=e[2]-e[0],n=e[3]-e[1],c=o>=n?o:n,l=new Rr["a"]({center:t,projection:a,extent:e,constrainOnlyCenter:!0,minResolution:r/4,maxResolution:c/256});this.olmap.setView(l),l.fit(e),this.olmap.updateSize(),this.refreshLayers()}else this.refreshLayers();else this.refreshLayers();else this.refreshLayers();else this.refreshLayers()},setWebmercatorView:function(){var e="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",t=this.getProjectionAlias(e);this.olmousePosition.setProjection(t);var s=new Rr["a"]({center:[0,0],projection:t,zoom:2});this.validProjection=!0,this.olmap.setView(s),this.olmap.updateSize(),this.refreshLayers()},setVectorView:function(){if(void 0===this.meta)if(void 0!==this.vectorSource){var e="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",t=this.getProjectionAlias(e);this.olmousePosition.setProjection(t);var s=new Rr["a"]({center:[0,0],projection:t,zoom:2});this.validProjection=!0,this.olmap.setView(s);var a=this.vectorSource.getExtent();s.fit(a),this.olmap.updateSize(),this.refreshLayers()}else this.setWebmercatorView();else this.refreshLayers()},refreshRoute:function(){var e="/viewer",t={};void 0===this.selectedRasterdb?void 0!==this.rasterdb&&(e+="/"+this.rasterdb):null!==this.selectedRasterdb&&(e+="/"+this.selectedRasterdb.name),void 0===this.selectedTimeSlice?void 0!==this.timestamp&&(t.timestamp=this.timestamp):null!==this.selectedTimeSlice&&(t.timestamp=this.selectedTimeSlice.id),void 0===this.selectedProduct?void 0!==this.product&&(t.product=this.product):null!==this.selectedProduct&&("custom"===this.selectedProduct.title?t.product="custom":t.product=this.selectedProduct.name),void 0===this.selectedVectordb?void 0!==this.vectordb&&(t.vectordb=this.vectordb):null!==this.selectedVectordb&&(t.vectordb=this.selectedVectordb.name),this.$router.push({path:e,query:t})},refreshLayers:function(){var e=this.olmap.getLayers();if(e.clear(),void 0!==this.selectedBackground&&this.validProjection)switch(this.selectedBackground.name){case"osm":e.push(this.layerBackgroundOSM);break;case"OpenTopoMap":e.push(this.layerBackgroundOpenTopoMap);break;case"StamenTerrain":e.push(this.layerBackgroundStamenTerrain);break}void 0!==this.sourceWMS&&e.push(this.layerWMS),void 0!==this.vectorSource&&(e.push(this.vectorLayer),this.showLabels&&e.push(this.vectorLabelLayer))},selectFullExtent:function(){this.interactionExtent.setExtent(this.meta.ref.extent)},refreshVectordbLayer:function(){void 0!==this.selectedVectordb&&null!==this.selectedVectordb&&void 0!==this.epsgCode?(this.loadGeojson(),this.loadTable()):this.refreshVectorSource(void 0)},loadGeojson:function(){var e=this;return Tn(oe.a.mark((function t(){var s,a,i,r;return oe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.addMessage("loading vector data of layer ..."),a=e.$store.getters.apiUrl("vectordbs/"+e.selectedVectordb.name+"/geometry.json"),t.prev=2,t.next=5,B.a.get(a,{params:{epsg:e.epsgCode,just_name_attribute:!0}});case 5:i=t.sent,r=i.data,e.removeMessage(s),e.refreshVectorSource(r),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](2),e.addnotification("ERROR vector data of layer"+t.t0),e.removeMessage(s);case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()},loadTable:function(){var e=this;return Tn(oe.a.mark((function t(){var s,a,i;return oe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.addMessage("loading table data of layer ..."),a=e.$store.getters.apiUrl("vectordbs/"+e.selectedVectordb.name+"/table.json"),t.prev=2,t.next=5,B.a.get(a);case 5:i=t.sent,e.table=i.data,e.removeMessage(s),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](2),e.addnotification("ERROR table data of layer"),e.removeMessage(s);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))()},refreshVectorSource:function(e){if(void 0===e)return this.vectorSource=void 0,this.vectorLayer.setSource(void 0),this.vectorLabelLayer.setSource(void 0),void this.setVectorView();var t=(new xn["a"]).readFeatures(e);this.vectorSource=new Tr["a"]({features:t}),this.vectorLayer.setSource(this.vectorSource),this.vectorLabelLayer.setSource(this.vectorSource),this.setVectorView()},onSettingsDialog:function(){this.settingsDialog=!this.settingsDialog;var e=document.getElementById("split-main").getBoundingClientRect();this.$refs.settingsDialog.boxX=e.left},showFeaturesDialog:function(e){var t=this.vectorSource.getClosestFeatureToCoordinate(e.coordinate);null!==t&&(console.log("clicked "+t.getId()+"  "+e.coordinate),this.selectedFeatures=[t],this.featureDetailsShow=!0)},featureToTableEntry:function(e){if(void 0===e)return[];var t=this.table.data[e];return void 0==t?[]:t},getProjectionAlias:function(e){var t=this.mapProj4ToAlias[e];if(void 0===t){var s=1;t="WMS_VIEW_PROJECTION_"+s;while(void 0!==this.mapAliasToProj4[t])s++,t="WMS_VIEW_PROJECTION_"+s;this.mapAliasToProj4[t]=e,this.mapProj4ToAlias[e]=t,En["a"].defs(t,e),Object(kn["a"])(En["a"])}return t},onSplitpanesResize:function(){this.olmap.updateSize()}},computed:On(On({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}})),{},{mouseModus:function(){var e=this.mouseModusButtonState;return this.mouseModusKeySelect&&(e="select"),e},session:function(){var e=this.$store.state.identity.data;return void 0===e?void 0:e.session},transactionRunCount:function(){return this.$store.state.identity.transactionRunCount},selectedBackgroundClass:function(){if(void 0===this.selectedBackground)return"";switch(this.selectedBackground.name){case"checkerboard":return"background-checkerboard";case"black":return"background-black";case"grey":return"background-grey";case"white":return"background-white";default:return""}},wmsParams:function(){var e="color";e=void 0==this.selectedProduct||null==this.selectedProduct?void 0!==this.meta&&null!==this.meta&&void 0!==this.meta.bands&&1==this.meta.bands.length?"band"+this.meta.bands[0].index:"color":this.selectedProduct.name,"auto"!==this.selectedGamma&&(e+="@gamma"+this.selectedGamma),"undefined"!==this.selectedOneBandMapping&&"grey"!==this.selectedOneBandMapping&&(e+="@pal_"+this.selectedOneBandMapping),this.syncBands&&(e+="@sync_bands"),isNaN(this.valueRangeMin)||(e+="@min"+this.valueRangeMin),isNaN(this.valueRangeMax)||(e+="@max"+this.valueRangeMax);var t={LAYERS:this.rasterdb};return void 0!==this.selectedTimeSlice&&null!==this.selectedTimeSlice&&(t.TIME=this.selectedTimeSlice.id),""!==e&&(t.STYLES=e),void 0!==this.session&&(t.session=this.session),void 0!==this.selectedFormat&&(t.FORMAT=this.selectedFormat.name),t},epsgCode:function(){if(void 0===this.meta||void 0===this.meta.ref)return 3857;var e=this.meta.ref.code;if(void 0!==e&&e.startsWith("EPSG:")){var t=Number.parseInt(e.substring(5));return Number.isInteger(t)?t:void 0}}}),watch:{selectedRasterdb:function(){this.refreshMeta(),this.refreshRoute()},meta:function(){this.refreshWMS(!0),this.interactionExtent.setExtent();var e="unknown projection";void 0!==this.meta&&void 0!==this.meta.ref&&(void 0!==this.meta.ref.projectionTitle?e=this.meta.ref.projectionTitle:void 0!==this.meta.ref.proj4&&""!==this.meta.ref.proj4&&(e=this.meta.ref.proj4)),document.getElementById("foot-start-1").innerHTML=e},selectedTimeSlice:function(){this.refreshRoute()},selectedProduct:function(){this.refreshRoute()},selectedVectordb:function(){this.refreshVectordbLayer(),this.refreshRoute()},mouseModusButtonState:function(){this.mouseModusKeySelect=!1},wmsParams:function(){void 0!==this.sourceWMS&&this.sourceWMS.updateParams(this.wmsParams)},session:function(){this.refreshWMS()},selectedBackground:function(){this.refreshLayers()},validProjection:function(){this.refreshLayers()},mouseModus:function(){switch(this.viewOverlay.classList.remove("olmap-viewer-mouseModus-move"),this.viewOverlay.classList.remove("olmap-viewer-mouseModus-move-on"),this.viewOverlay.classList.remove("olmap-viewer-mouseModus-select"),this.viewOverlay.classList.remove("olmap-viewer-mouseModus-select-on"),this.mouseModus){case"select":this.interactionExtent.setActive(!0),this.viewOverlay.classList.add("olmap-viewer-mouseModus-select");break;default:this.interactionExtent.setActive(!1),this.interactionExtent.createOrUpdatePointerFeature_([NaN,NaN]),this.viewOverlay.classList.add("olmap-viewer-mouseModus-move");break}},layerWMS_opacity:function(){void 0!==this.layerWMS&&this.layerWMS.setOpacity(this.layerWMS_opacity)},epsgCode:function(){this.refreshVectordbLayer()},showLabels:function(){this.refreshLayers()}},mounted:function(){var e=this,t=this;document.getElementById("foot-start-1").innerHTML="?",document.getElementById("foot-end-1").innerHTML="",this.globalEventListeners.keydown=function(t){17==t.keyCode&&(e.mouseModusKeySelect=!0)},this.globalEventListeners.keyup=function(t){17==t.keyCode&&(e.mouseModusKeySelect=!1)},document.addEventListener("keydown",this.globalEventListeners.keydown),document.addEventListener("keyup",this.globalEventListeners.keyup),this.$store.dispatch("identity/init"),this.layerWMS=new vn["a"]({}),this.layerWMS.setOpacity(this.layerWMS_opacity),this.layerBackgroundOSM=new Cr["a"]({source:new Mr["b"]}),this.layerBackgroundOpenTopoMap=new Cr["a"]({title:"OpenTopoMap",type:"base",visible:!0,source:new _n["a"]({url:"https://{a-c}.tile.opentopomap.org/{z}/{x}/{y}.png",attributions:'Kartendaten: © <a href="https://openstreetmap.org/copyright">OpenStreetMap</a>-Mitwirkende, SRTM | Kartendarstellung: © <a href="http://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)',wrapX:!1})}),this.layerBackgroundStamenTerrain=new Cr["a"]({source:new fn["a"]({layer:"terrain",wrapX:!1})});var s=new Lr["a"]({color:"rgba(255,255,255,0.0)"}),a=new Ir["a"]({color:"rgb(95, 112, 245)",width:2}),i=new Ir["a"]({color:"rgb(200, 20, 35)",width:2});function r(){return new Br["c"]({image:new gn["a"]({stroke:i,points:4,radius:10,radius2:0,angle:Math.PI/4}),fill:s,stroke:a})}this.vectorLayer=new mn["a"]({style:r});var o=new Lr["a"]({color:"rgba(255,255,255,0.6)"});function n(e){var t=new yn["a"]({font:"15px sans-serif",text:e.getProperties().name,overflow:!0,backgroundFill:o,padding:[2,2,2,2]});return new Br["c"]({text:t})}this.vectorLabelLayer=new mn["a"]({style:n,declutter:!0});var c=[new Br["c"]({fill:new Lr["a"]({color:[255,255,255,.5]})}),new Br["c"]({stroke:new Ir["a"]({color:[50,50,50],width:1,lineDash:[10]})})];this.interactionExtent=new hn["a"]({boxStyle:c}),this.interactionExtent.on("extentchanged",(function(e){null===e.extent?t.selectedExtent=void 0:t.selectedExtent=e.extent})),this.interactionExtent.setActive(!1),this.olmousePosition=new Nr["a"]({projection:"EPSG:4326",target:"foot-end-1",coordinateFormat:function(e){return Object(Vr["j"])(e,2)}}),this.olmap=new Or["a"]({target:"olmap-viewer",controls:Dr["a"]({attributionOptions:{collapsible:!1}}).extend([new zr["a"]({}),this.olmousePosition]),interactions:bn["a"]().extend([this.interactionExtent])}),this.viewOverlay=document.querySelector(".ol-overlaycontainer-stopevent"),this.olmap.on("click",(function(t){switch(e.mouseModus){case"move":e.showFeaturesDialog(t);break}})),this.olmap.on("movestart",(function(){switch(e.viewOverlay.classList.remove("olmap-viewer-mouseModus-move"),e.viewOverlay.classList.remove("olmap-viewer-mouseModus-move-on"),e.viewOverlay.classList.remove("olmap-viewer-mouseModus-select"),e.viewOverlay.classList.remove("olmap-viewer-mouseModus-select-on"),e.mouseModus){case"select":e.viewOverlay.classList.add("olmap-viewer-mouseModus-select-on");break;default:e.viewOverlay.classList.add("olmap-viewer-mouseModus-move-on");break}})),this.olmap.on("moveend",(function(){switch(e.viewOverlay.classList.remove("olmap-viewer-mouseModus-move"),e.viewOverlay.classList.remove("olmap-viewer-mouseModus-move-on"),e.viewOverlay.classList.remove("olmap-viewer-mouseModus-select"),e.viewOverlay.classList.remove("olmap-viewer-mouseModus-select-on"),e.mouseModus){case"select":e.viewOverlay.classList.add("olmap-viewer-mouseModus-select");break;default:e.viewOverlay.classList.add("olmap-viewer-mouseModus-move");break}})),this.setWebmercatorView()},destroyed:function(){document.getElementById("foot-start-1").innerHTML="?",document.getElementById("foot-end-1").innerHTML="?",document.removeEventListener("keydown",this.globalEventListeners.keydown),document.removeEventListener("keyup",this.globalEventListeners.keyup)}},Rn=Mn,jn=(s("01ae"),s("0e36"),Object(p["a"])(Rn,Xr,Zr,!1,null,"1ba20eef",null)),$n=jn.exports,An=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"innergrid-container"},[s("div",{staticClass:"innergrid-item-main"},["init"===e.uploadState?s("div",[s("h1",{staticStyle:{"text-align":"center"}},[e._v("Raster File Upload")]),s("uploader",{staticClass:"uploader-example",attrs:{options:e.options},on:{"file-success":function(t){e.inspectFilename=t.name,e.uploadState="done"}}},[s("uploader-unsupport"),s("uploader-drop",[s("p",[s("b",[e._v("Upload")]),e._v(" - Drop raster-file here or")]),s("uploader-btn",[s("v-icon",[e._v("cloud_upload")]),e._v("select raster-file")],1)],1),s("uploader-list")],1),s("div",{staticStyle:{padding:"50px"}},[void 0===e.identity||e.identity.secure?e._e():s("div",[s("h2",[e._v("For upload of big files you need to connect with HTTPS.")]),e._v(" You may switch to HTTPS at "),s("a",{attrs:{href:"#/tools"}},[e._v("tools-tab")]),s("br"),s("br"),s("br")]),e._m(0),e._m(1)])],1):e._e(),"done"===e.uploadState?s("div",[s("b",[e._v("raster file uploaded.")]),e._v(" "),s("v-btn",{directives:[{name:"show",rawName:"v-show",value:"done"!==e.importState,expression:"importState !== 'done'"}],on:{click:function(t){return e.cancel_upload()}}},[s("v-icon",[e._v("cancel")]),e._v(" (cancel import)")],1),e._v(" "),s("v-btn",{directives:[{name:"show",rawName:"v-show",value:"done"===e.importState,expression:"importState === 'done'"}],on:{click:function(t){return e.cancel_upload()}}},[s("v-icon",[e._v("arrow_right_alt")]),e._v(" leave and upload another file")],1),s("hr"),s("table",[s("tr",[e._m(2),s("td",[e._v(e._s(e.inspectFilename))])]),s("tr",[e._m(3),s("td",{staticStyle:{"white-space":"nowrap"}},[s("label",{attrs:{for:"checkbox"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.guessTimestamp,expression:"guessTimestamp"}],staticStyle:{width:"40px"},attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(e.guessTimestamp)?e._i(e.guessTimestamp,null)>-1:e.guessTimestamp},on:{change:function(t){var s=e.guessTimestamp,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r=null,o=e._i(s,r);a.checked?o<0&&(e.guessTimestamp=s.concat([r])):o>-1&&(e.guessTimestamp=s.slice(0,o).concat(s.slice(o+1)))}else e.guessTimestamp=i}}}),e._v(" Try to guess timestamp from filename.")])])]),s("tr",[e._m(4),s("td",[s("multiselect",{staticStyle:{"min-width":"550px"},attrs:{options:e.importStrategies,"track-by":"id",label:"title",allowEmpty:!1,searchable:!1,"show-labels":!1,placeholder:"select import strategy"},model:{value:e.importStrategy,callback:function(t){e.importStrategy=t},expression:"importStrategy"}})],1)]),"existing_add"===e.importStrategy.id||"existing_merge"===e.importStrategy.id?s("tr",[e._m(5),s("td",[s("multiselect",{attrs:{options:e.rasterdbs,"track-by":"name",label:"name",allowEmpty:!1,searchable:!1,"show-labels":!1,placeholder:"select import strategy"},model:{value:e.existingRasterdb,callback:function(t){e.existingRasterdb=t},expression:"existingRasterdb"}})],1)]):e._e()]),s("br"),s("v-btn",{attrs:{disabled:"inspecting"===e.inspectState||"importing"===e.importState||("existing_add"===e.importStrategy.id||"existing_merge"===e.importStrategy.id)&&void 0===e.existingRasterdb.name},on:{click:function(t){return e.inspect()}}},[s("v-icon",[e._v("zoom_in")]),e._v("inspect")],1),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:"done"===e.inspectState,expression:"inspectState === 'done'"}]},[s("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v(" press again to discard and reload meta data")],1),"inspecting"===e.inspectState?s("div",[s("pulse-loader"),e._v(" Inspecting file ... ")],1):e._e(),s("hr"),"done"===e.inspectState?s("div",[s("br"),s("div",[void 0!==e.specification.gdal_driver?s("span",[e._v("file type: "),s("b",[e._v(e._s(e.specification.gdal_driver))]),e._v(" ; ")]):e._e(),s("b",[e._v(e._s(e.specification.x_range)+" width")]),e._v(" x "),s("b",[e._v(e._s(e.specification.y_range)+" height")]),e._v(" ==> "),s("b",[e._v(e._s(e.specification.x_range*e.specification.y_range)+" pixels")]),e._v(" ; "),e.specification.bands.length<=1?s("span",[s("b",[e._v(e._s(e.specification.bands.length)+" band")])]):e._e(),e.specification.bands.length>1?s("span",[s("b",[e._v(e._s(e.specification.bands.length)+" bands")]),e._v(" ==> "),s("b",[e._v(e._s(e.specification.x_range*e.specification.y_range*e.specification.bands.length)+" values")])]):e._e(),s("br"),s("br"),s("span",{staticStyle:{"white-space":"nowrap",display:"inline-block"}},[s("span",{staticStyle:{"white-space":"nowrap",display:"inline-block"}},[e._v("mode ")]),e._v(" "),s("multiselect",{staticStyle:{"min-width":"550px","white-space":"nowrap",display:"inline-block"},attrs:{options:e.importModes,"track-by":"id",label:"title",allowEmpty:!1,searchable:!1,"show-labels":!1,placeholder:"select import mode"},model:{value:e.importMode,callback:function(t){e.importMode=t},expression:"importMode"}})],1),s("br"),s("br"),"simple"===e.importMode.id?s("table",[s("tr",[e._m(6),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.specification.time_slice,expression:"specification.time_slice"}],attrs:{placeholder:"time slice"},domProps:{value:e.specification.time_slice},on:{input:function(t){t.target.composing||e.$set(e.specification,"time_slice",t.target.value)}}})]),s("td",[e._v("   "),s("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v("Free text date format: e.g. "),s("span",{staticStyle:{color:"grey"}},[e._v("June 2020")]),e._v(" but "),s("a",{attrs:{href:"https://www.iso.org/iso-8601-date-and-time-format.html",target:"_blank"}},[e._v("ISO 8601")]),e._v(" format, as in timestamp, recommanded, e.g. "),s("span",{staticStyle:{color:"grey"}},[e._v("2020-06")])],1)]),s("tr",[e._m(7),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.specification.timestamp,expression:"specification.timestamp"}],attrs:{placeholder:"timestamp"},domProps:{value:e.specification.timestamp},on:{input:function(t){t.target.composing||e.$set(e.specification,"timestamp",t.target.value)}}})]),s("td",[e._v("   "),s("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v("Format: "),s("b",[e._v("yyyy-MM-dd'T'HH:mm")]),e._v(" e.g. "),s("span",{staticStyle:{color:"grey"}},[e._v("2001-12-31T23:59")]),e._v(" or shortened forms e.g. "),s("span",{staticStyle:{color:"grey"}},[e._v("2001-12-31")]),e._v(" or "),s("span",{staticStyle:{color:"grey"}},[e._v("2001-12")]),e._v(" or "),s("span",{staticStyle:{color:"grey"}},[e._v("2001")])],1)])]):e._e()]),s("br"),e.create?s("table",[s("tr",[e._m(8),s("td",[e._v(e._s(e.specification.filename))])]),s("tr",[e._m(9),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.specification.id,expression:"specification.id"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"id"},domProps:{value:e.specification.id},on:{input:function(t){t.target.composing||e.$set(e.specification,"id",t.target.value)}}})]),e.existingID?e._e():s("td",[s("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),s("b",[e._v("Caution")]),e._v(" with existing IDs: Layer will be deleted and overwritten with imported data.")],1),e.existingID?s("td",{staticStyle:{color:"red"}},[s("v-icon",{staticStyle:{color:"red"}},[e._v("warning")]),e._v(" ID already exists: Layer will be deleted and overwritten with imported data.")],1):e._e()]),s("tr",[e._m(10),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.specification.title,expression:"specification.title"}],attrs:{placeholder:"title"},domProps:{value:e.specification.title},on:{input:function(t){t.target.composing||e.$set(e.specification,"title",t.target.value)}}})])]),s("tr",[e._m(11),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.specification.description,expression:"specification.description"}],attrs:{placeholder:"description"},domProps:{value:e.specification.description},on:{input:function(t){t.target.composing||e.$set(e.specification,"description",t.target.value)}}})])]),s("tr",[e._m(12),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.specification.acquisition_date,expression:"specification.acquisition_date"}],attrs:{placeholder:"date or range of dates"},domProps:{value:e.specification.acquisition_date},on:{input:function(t){t.target.composing||e.$set(e.specification,"acquisition_date",t.target.value)}}})])]),s("tr",[e._m(13),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.specification.corresponding_contact,expression:"specification.corresponding_contact"}],attrs:{placeholder:"e.g. user name (name@mail.com), user2 name2 (name@mail.com)"},domProps:{value:e.specification.corresponding_contact},on:{input:function(t){t.target.composing||e.$set(e.specification,"corresponding_contact",t.target.value)}}})])]),s("tr",[e._m(14),s("td",[s("multiselect",{attrs:{options:e.layer_tags,multiple:"",taggable:!0,placeholder:"select tags",tagPlaceholder:"Press enter to create a tag"},on:{tag:e.createTag},model:{value:e.specification.tags,callback:function(t){e.$set(e.specification,"tags",t)},expression:"specification.tags"}})],1)]),s("tr",[e._m(15),s("td",[s("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclRole},model:{value:e.specification.acl,callback:function(t){e.$set(e.specification,"acl",t)},expression:"specification.acl"}})],1),s("td",[s("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v(" select a role that that you "),s("i",[e._v("have")]),e._v(", to view uploaded (meta-)data (if you are not admin).")],1)]),s("tr",[e._m(16),s("td",[s("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclModRole},model:{value:e.specification.acl_mod,callback:function(t){e.$set(e.specification,"acl_mod",t)},expression:"specification.acl_mod"}})],1),s("td",[s("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v(" select a role that that you "),s("i",[e._v("have")]),e._v(", to modify uploaded (meta-)data (if you are not admin).")],1)])]):e._e(),e.create?e._e():s("table",[s("tr",[e._m(17),s("td",[e._v(e._s(e.specification.filename))])]),s("tr",[e._m(18),s("td",[e._v(e._s(e.specification.id))])]),s("tr",[e._m(19),s("td",[e._v(e._s(e.specification.title))])]),s("tr",[e._m(20),s("td",[e._v(e._s(e.specification.description))])]),s("tr",[e._m(21),s("td",[e._v(e._s(e.specification.acquisition_date))])]),s("tr",[e._m(22),s("td",[e._v(e._s(e.specification.tags))])]),s("tr",[e._m(23),s("td",[e._v(e._s(e.specification.acl))])]),s("tr",[e._m(24),s("td",[e._v(e._s(e.specification.acl_mod))])])]),e.create?s("table",[s("tr",[e._m(25),s("td",[e._v("x "+e._s(e.specification.pixel_size_x)+" y "+e._s(e.specification.pixel_size_y))])]),s("tr",[e._m(26),s("td",[e._v("x "+e._s(e.specification.rasterdb_geo_offset_x)+" y "+e._s(e.specification.rasterdb_geo_offset_y))])])]):e._e(),e.create?e._e():s("table",{staticStyle:{"text-align":"center"}},[e._m(27),s("tr",[e._m(28),s("td",[e._v(e._s(e.specification.pixel_size_x))]),s("td"),s("td",[e._v(e._s(e.specification.pixel_size_y))])]),s("tr",[e._m(29),s("td",[e._v(e._s(e.specification.file_pixel_size_x))]),s("td"),s("td",[e._v(e._s(e.specification.file_pixel_size_y))])])]),e.specification.pixel_size_x!=e.specification.file_pixel_size_x||e.specification.pixel_size_y!=e.specification.file_pixel_size_y?s("div",{staticStyle:{color:"red"}},[s("v-icon",{staticStyle:{color:"red"}},[e._v("warning")]),e._v(" Pixel size of layer raster and pixel size of file raster do seem to differ. "),s("br"),e._v("If difference is more than a very small amount pixels are inserted at wrong positions. "),s("br"),s("b",{staticStyle:{"font-size":"1.2em"}},[e._v("No reprojection will be done.")])],1):e._e(),s("br"),e.create?s("table",[s("tr",[e._m(30),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.specification.geo_code,expression:"specification.geo_code"}],attrs:{placeholder:"code"},domProps:{value:e.specification.geo_code},on:{input:function(t){t.target.composing||e.$set(e.specification,"geo_code",t.target.value)}}})]),e.validEPSG?s("td",[e._v("==> go to "),s("a",{attrs:{href:"https://epsg.io/"+e.epsg,target:"_blank"}},[e._v("epsg.io")])]):e._e(),e.validEPSG?e._e():s("td",[s("b",[e._v("no EPSG code")]),e._v(": typical geo codes start with "),s("i",[e._v("EPSG:")]),e._v(" e.g. "),s("i",[e._v("EPSG:4326")])])]),s("tr",[e._m(31),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.specification.proj4,expression:"specification.proj4"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"proj4"},domProps:{value:e.specification.proj4},on:{input:function(t){t.target.composing||e.$set(e.specification,"proj4",t.target.value)}}})]),e.proj4CompareOK?s("td",[s("b",{staticStyle:{color:"green"}},[s("v-icon",[e._v("check")])],1),e._v(" (checked on epsg.io)")]):e._e(),e.proj4CompareOK||void 0===e.proj4Compare?e._e():s("td",[s("b",[s("v-icon",[e._v("warning")]),e._v(" Does not match to epsg.io")],1),e._v(" "),s("v-btn",{on:{click:function(t){e.specification.proj4=e.proj4Compare}}},[e._v("==> adopt epsg.io")]),e._v(' "'+e._s(e.proj4Compare)+'"')],1),void 0!==e.proj4CompareError?s("td",[s("b",[e._v("ERROR")]),e._v(": could not get proj4 from epsg.io (invalid EPSG code?)")]):e._e()])]):e._e(),e.create?e._e():s("table",[s("tr",[e._m(32),s("td",[e._v(e._s(e.specification.geo_code))])]),s("tr",[e._m(33),s("td",[e._v(e._s(e.specification.file_geo_code))])]),s("tr",[e._m(34),s("td",[e._v(e._s(e.specification.proj4))])]),s("tr",[e._m(35),s("td",[e._v(e._s(e.specification.file_proj4))])])]),e.specification.geo_code!=e.specification.file_geo_code||e.specification.proj4!=e.specification.file_proj4?s("div",{staticStyle:{color:"red"}},[s("v-icon",{staticStyle:{color:"red"}},[e._v("warning")]),e._v(" Projection of layer raster and projection of file raster do seem to differ. "),s("br"),e._v("Check if this is correct. "),s("br"),s("b",{staticStyle:{"font-size":"1.2em"}},[e._v("No reprojection will be done.")])],1):e._e(),s("br"),e.create?e._e():s("div",[s("b",[e._v("existing band indices:")]),e._v("   "),s("span",{staticStyle:{"font-size":"1.5em"}},[e._v(e._s(e.specification.existing_bands.map((function(e){return e.index}))))]),s("br"),s("br")]),s("hr"),"simple"===e.importMode.id?s("div",e._l(e.specification.bands,(function(t){return s("div",{key:t.file_band_index},[s("table",[s("tr",[s("td",[s("b",[e._v("file band index "),s("span",{staticStyle:{"font-size":"1.5em"}},[e._v(e._s(t.file_band_index))]),e._v(" ==> ")])]),s("td",[s("span",[e._v("layer band index")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.rasterdb_band_index,expression:"band.rasterdb_band_index"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"band number in rasterdb. Leave empty to omit (not import) this band."},domProps:{value:t.rasterdb_band_index},on:{input:function(s){s.target.composing||e.$set(t,"rasterdb_band_index",s.target.value)}}})]),""===t.rasterdb_band_index||e.isNaturalNumber(t.rasterdb_band_index)?e._e():s("td",[s("b",{staticStyle:{color:"red"}},[e._v("Error:")]),e._v(" band index needs to be a non-negative integer number")]),""!==t.rasterdb_band_index?s("td",[s("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v(" Leave empty to omit (not import) this band.")],1):e._e(),""===t.rasterdb_band_index?s("td",[e._v("band exlcuded from import")]):e._e()]),!e.create&&e.isNaturalNumber(t.rasterdb_band_index)?s("tr",[e._m(36,!0),s("td",[s("b",[e._v(e._s(void 0===e.existing_bands_map[t.rasterdb_band_index]?"create new band":"into existing band"))])])]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?s("tr",[s("td",[s("b",[e._v("file band data type ("+e._s(t.gdal_raster_data_type)+") ==> ")])]),void 0===e.existing_bands_map[t.rasterdb_band_index]?s("td",[s("v-select",{attrs:{items:["short","float","int16"]},model:{value:t.rastedb_band_data_type,callback:function(s){e.$set(t,"rastedb_band_data_type",s)},expression:"band.rastedb_band_data_type"}})],1):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?s("td",[e._v(e._s(t.rastedb_band_data_type))]):e._e()]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?s("tr",[e._m(37,!0),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.no_data_value,expression:"band.no_data_value"}],attrs:{placeholder:"no data value"},domProps:{value:t.no_data_value},on:{input:function(s){s.target.composing||e.$set(t,"no_data_value",s.target.value)}}})])]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?s("tr",[e._m(38,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.band_name,expression:"band.band_name"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"name"},domProps:{value:t.band_name},on:{input:function(s){s.target.composing||e.$set(t,"band_name",s.target.value)}}})]):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?s("td",[e._v(e._s(t.band_name))]):e._e()]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?s("tr",[e._m(39,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.wavelength,expression:"band.wavelength"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"wavelength in nm"},domProps:{value:t.wavelength},on:{input:function(s){s.target.composing||e.$set(t,"wavelength",s.target.value)}}})]):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?s("td",[e._v(e._s(t.wavelength))]):e._e()]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?s("tr",[e._m(40,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.fwhm,expression:"band.fwhm"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"fwhm in nm"},domProps:{value:t.fwhm},on:{input:function(s){s.target.composing||e.$set(t,"fwhm",s.target.value)}}})]):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?s("td",[e._v(e._s(t.fwhm))]):e._e()]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?s("tr",[e._m(41,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?s("td",[s("v-select",{attrs:{items:["(not specified)","red","green","blue"]},model:{value:t.visualisation,callback:function(s){e.$set(t,"visualisation",s)},expression:"band.visualisation"}})],1):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?s("td",[e._v(e._s(t.visualisation))]):e._e()]):e._e()]),s("hr")])})),0):e._e(),"timeseries"===e.importMode.id?s("div",[s("br"),e._v(" Autofill: generate       "),s("admin-upload-generate-time-slices",{attrs:{specification:e.specification},on:{"timestamp-sequence":function(t){return e.fillTimeSlices(t)}}}),e._v(" or (obsolete)       "),s("admin-upload-generate-timestamps",{attrs:{specification:e.specification},on:{"timestamp-sequence":function(t){return e.fillTimestamps(t)}}}),s("br"),s("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v("Specify either "),s("b",[e._v("time slices")]),e._v(" or (obsolete) "),s("b",[e._v("timestamps")]),e._v(", not both. "),s("br"),s("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v("timestamp format: "),s("b",[e._v("yyyy-MM-dd'T'HH:mm")]),e._v(" e.g. "),s("span",{staticStyle:{color:"grey"}},[e._v("2001-12-31T23:59")]),e._v(" or shortened forms e.g. "),s("span",{staticStyle:{color:"grey"}},[e._v("2001-12-31")]),e._v(" or "),s("span",{staticStyle:{color:"grey"}},[e._v("2001-12")]),e._v(" or "),s("span",{staticStyle:{color:"grey"}},[e._v("2001")]),s("br"),s("table",{staticStyle:{"border-collapse":"collapse"},attrs:{border:"1",bordercolor:"#aaaaaa",cellpadding:"10"}},[e._m(42),e._m(43),e._l(e.specification.bands,(function(t){return s("tr",{key:t.file_band_index},[s("td",{staticStyle:{"background-color":"rgb(244, 250, 255)"},attrs:{align:"center"}},[e._v(e._s(t.file_band_index))]),s("td",{staticStyle:{"background-color":"rgb(244, 250, 255)"},attrs:{align:"center"}},[e._v(e._s(t.gdal_raster_data_type))]),s("td",{attrs:{align:"center"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.no_data_value,expression:"band.no_data_value"}],staticStyle:{"text-align":"center","background-color":"rgb(244, 250, 255)"},attrs:{placeholder:"no data value"},domProps:{value:t.no_data_value},on:{input:function(s){s.target.composing||e.$set(t,"no_data_value",s.target.value)}}})]),s("td",{attrs:{align:"center"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.rasterdb_band_index,expression:"band.rasterdb_band_index"}],staticStyle:{"min-width":"10px","text-align":"center","background-color":"rgb(247, 255, 244)"},attrs:{placeholder:"omit"},domProps:{value:t.rasterdb_band_index},on:{input:function(s){s.target.composing||e.$set(t,"rasterdb_band_index",s.target.value)}}})]),s("td",{attrs:{align:"center"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.time_slice,expression:"band.time_slice"}],staticStyle:{"min-width":"10px","text-align":"center","background-color":"rgb(247, 255, 244)"},attrs:{placeholder:"time slice"},domProps:{value:t.time_slice},on:{input:function(s){s.target.composing||e.$set(t,"time_slice",s.target.value)}}})]),s("td",{attrs:{align:"center"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.timestamp,expression:"band.timestamp"}],staticStyle:{"min-width":"10px","text-align":"center","background-color":"rgb(247, 255, 244)"},attrs:{placeholder:"timestamp"},domProps:{value:t.timestamp},on:{input:function(s){s.target.composing||e.$set(t,"timestamp",s.target.value)}}})])])}))],2),s("br"),s("hr"),e._l(e.specification.addBands,(function(t){return s("div",{key:t.rasterdb_band_index},[s("table",[s("tr",[s("td",[s("b",{staticStyle:{"font-size":"1.5em"}},[e._v("layer band index "),s("span",{staticStyle:{"font-size":"1.5em"}},[e._v(e._s(t.rasterdb_band_index))])])])]),!e.create&&e.isNaturalNumber(t.rasterdb_band_index)?s("tr",[e._m(44,!0),s("td",[s("b",[e._v(e._s(void 0===e.existing_bands_map[t.rasterdb_band_index]?"create new band":"into existing band"))])])]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?s("tr",[e._m(45,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?s("td",[s("v-select",{attrs:{items:["short","float"]},model:{value:t.rastedb_band_data_type,callback:function(s){e.$set(t,"rastedb_band_data_type",s)},expression:"band.rastedb_band_data_type"}})],1):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?s("td",[e._v(e._s(t.rastedb_band_data_type))]):e._e()]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?s("tr",[e._m(46,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.band_name,expression:"band.band_name"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"name"},domProps:{value:t.band_name},on:{input:function(s){s.target.composing||e.$set(t,"band_name",s.target.value)}}})]):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?s("td",[e._v(e._s(t.band_name))]):e._e()]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?s("tr",[e._m(47,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.wavelength,expression:"band.wavelength"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"wavelength in nm"},domProps:{value:t.wavelength},on:{input:function(s){s.target.composing||e.$set(t,"wavelength",s.target.value)}}})]):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?s("td",[e._v(e._s(t.wavelength))]):e._e()]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?s("tr",[e._m(48,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.fwhm,expression:"band.fwhm"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"fwhm in nm"},domProps:{value:t.fwhm},on:{input:function(s){s.target.composing||e.$set(t,"fwhm",s.target.value)}}})]):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?s("td",[e._v(e._s(t.fwhm))]):e._e()]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?s("tr",[e._m(49,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?s("td",[s("v-select",{attrs:{items:["(not specified)","red","green","blue"]},model:{value:t.visualisation,callback:function(s){e.$set(t,"visualisation",s)},expression:"band.visualisation"}})],1):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?s("td",[e._v(e._s(t.visualisation))]):e._e()]):e._e()]),s("hr")])}))],2):e._e(),s("br"),s("v-checkbox",{attrs:{label:"update pyramid"},model:{value:e.specification.update_pyramid,callback:function(t){e.$set(e.specification,"update_pyramid",t)},expression:"specification.update_pyramid"}}),s("v-checkbox",{attrs:{label:"update catalog"},model:{value:e.specification.update_catalog,callback:function(t){e.$set(e.specification,"update_catalog",t)},expression:"specification.update_catalog"}}),!e.create||void 0!==e.specification&&void 0!==e.specification.acl&&0!==e.specification.acl.length?e._e():s("div",{staticStyle:{color:"red"}},[s("v-icon",{staticStyle:{color:"red"}},[e._v("warning")]),e._v(" No access role specified. ==> Only admin can view imported raster. ")],1),!e.create||void 0!==e.specification&&void 0!==e.specification.acl_mod&&0!==e.specification.acl_mod.length?e._e():s("div",{staticStyle:{color:"red"}},[s("v-icon",{staticStyle:{color:"red"}},[e._v("warning")]),e._v(" No modify role specified. ==> Only admin can modify imported raster and reimport raster with same id. ")],1),s("br"),s("v-btn",{attrs:{disabled:"importing"===e.importState||!e.create&&"init"!==e.importState},on:{click:function(t){return e.start_import()}}},[s("v-icon",[e._v("cloud_upload")]),e._v(" >> import <<")],1),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:"done"===e.importState&&e.create,expression:"importState === 'done' && create"}]},[s("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v(" press again to reimport (e.g. with changed meta data)")],1),void 0!==e.remote_task?s("div",[e._v(" "+e._s((e.remote_task.runtime/1e3).toFixed(0))+" s "),s("br"),s("span",{staticStyle:{color:"grey"}},[e._v(e._s(e.remote_task.message))])]):e._e(),"init"===e.importState?s("div",[e._v(" Import not started. Press 'import' to start. ")]):e._e(),"importing"===e.importState?s("div",[s("pulse-loader"),e._v(" Import is running ... ")],1):e._e(),"error"===e.importState?s("div",[s("v-icon",{staticStyle:{color:"red"}},[e._v("error")]),e._v(" "),s("b",[e._v("Import error")]),s("br"),e._v(e._s(e.importErrorStatus)+" : "+e._s(e.importErrorStatusText)+" "),s("br"),s("br"),e._v(e._s(e.importErrorStatusMessage)+" ")],1):e._e(),"done"===e.importState?s("div",[s("v-icon",{staticStyle:{color:"green"}},[e._v("cloud_done")]),e._v(" Import done. "),s("br"),s("br"),e._v("view meta data: "),s("a",{attrs:{href:"#/layers/rasterdbs/"+e.specification.id}},[e._v(e._s(e.specification.id))]),s("br"),s("br"),e._v("view layer: "),s("a",{attrs:{href:"#/viewer/"+e.specification.id}},[e._v(e._s(e.specification.id))])],1):e._e()],1):e._e(),s("br"),s("br"),s("br")],1):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:Object.keys(e.messages).length>0,expression:"Object.keys(messages).length > 0"}],staticClass:"message_box"},e._l(e.messages,(function(t,a){return s("div",{key:a},[e._v(e._s(t))])})),0),e._l(e.notifications,(function(t,a){return s("v-snackbar",{key:a,attrs:{value:"true"}},[e._v(" "+e._s(t)),s("v-btn",{attrs:{flat:"",color:"pink"},nativeOn:{click:function(t){return e.removeNotification(a)}}},[e._v("Close")])],1)}))],2)])},Dn=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",[s("b",[e._v("Procedure of raster file-import:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[e._v("user uploads a raster-file")]),s("li",[e._v("remote sensing database inspects raster-file")]),s("li",[e._v("remote sensing database prefills import-form")]),s("li",[e._v("user completes import-form")]),s("li",[e._v("remote sensing database imports raster-file based on import-form")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("filename:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("timestamp:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",{staticStyle:{"min-width":"150px"}},[s("b",[e._v("strategy:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("existing raster layer id:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[e._v("(optional) "),s("b",[e._v("time slice")]),e._v(" of inserted data within this layer   ")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[e._v("OR (optional) "),s("span",{staticStyle:{color:"grey"}},[e._v("(obsolete)")]),e._v(" "),s("b",[e._v("timestamp")]),e._v("   ")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("filename:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("ID")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("title")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("description")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("informal acquisition date")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("corresponding contact")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("tags")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("access roles")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("modify roles")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("filename:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("ID")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("title")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("description")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("acquisition date")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("tags")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("access roles")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("modify roles")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("pixel size:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("offset:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("tr",[s("td"),s("td",[s("b",[e._v("x")])]),s("td",[e._v("  ")]),s("td",[s("b",[e._v("y")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("layer pixel size  ")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("file pixel size  ")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("code:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("proj4:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("layer code:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("file code:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("layer proj4:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("file proj4:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("import")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("file no data value: ")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("band name:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("wavelength (nm):")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("fwhm (nm):")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("visualisation:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("tr",[s("td",{staticStyle:{"background-color":"rgb(196, 205, 213)"},attrs:{colspan:"3",align:"center"}},[s("b",[e._v("file")])]),s("td",{staticStyle:{"background-color":"rgb(189, 206, 184)"},attrs:{colspan:"3",align:"center"}},[s("b",[e._v("layer")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("tr",[s("td",{staticStyle:{"background-color":"#dee7ef"},attrs:{align:"center"}},[s("b",[e._v("band")])]),s("td",{staticStyle:{"background-color":"#dee7ef"},attrs:{align:"center"}},[s("b",[e._v("type")])]),s("td",{staticStyle:{"background-color":"#dee7ef"},attrs:{align:"center"}},[s("b",[e._v("NA-value")])]),s("td",{staticStyle:{"background-color":"rgb(211, 230, 205)"},attrs:{align:"center"}},[s("b",[e._v("band")])]),s("td",{staticStyle:{"background-color":"rgb(211, 230, 205)"},attrs:{align:"center"}},[s("b",[e._v("time slice")])]),s("td",{staticStyle:{"background-color":"rgb(211, 230, 205)"},attrs:{align:"center"}},[s("b",[e._v("timestamp")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("import")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("layer band data type")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("band name:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("wavelength (nm):")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("fwhm (nm):")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("visualisation:")])])}],zn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"generate sequence of time slices"},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("time slices ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("generate sequence of time slices ("+e._s(e.bandCount)+")")])]),s("span",{staticStyle:{color:"grey"}},[s("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v(" Click "),s("i",[e._v("apply")]),e._v("-button to commit generated time slices. (You may need to scroll down.)")],1),s("br"),s("br"),s("multiselect",{attrs:{options:e.modes,"track-by":"id",label:"title",allowEmpty:!1,searchable:!1,"show-labels":!1,placeholder:"select mode"},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}}),s("br"),e._v(" first timestamp year (e.g. 2001) "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.first_year,expression:"first_year"}],staticStyle:{"background-color":"aliceblue"},attrs:{placeholder:"year"},domProps:{value:e.first_year},on:{input:function(t){t.target.composing||(e.first_year=t.target.value)}}}),"month"===e.mode.id?s("span",[e._v(" month (e.g. 12) "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.first_month,expression:"first_month"}],staticStyle:{"background-color":"aliceblue"},attrs:{placeholder:"month"},domProps:{value:e.first_month},on:{input:function(t){t.target.composing||(e.first_month=t.target.value)}}})]):e._e(),s("br"),s("br"),s("hr"),s("div",{staticStyle:{"background-color":"#e4ebf54d"}},[s("div",{staticStyle:{color:"red"}},[e._v(" "+e._s(e.inputError)+" ")]),void 0===e.inputError?s("table",[s("tr",[s("th",{attrs:{align:"center"}},[e._v("band")]),s("th",{attrs:{align:"center"}},[e._v("timestamp")])]),e._l(e.timestamps,(function(t,a){return s("tr",{key:t},[s("td",{attrs:{align:"center"}},[s("b",[e._v(e._s(a+1))])]),s("td",{attrs:{align:"center"}},[e._v(e._s(t))])])}))],2):e._e()]),s("hr"),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"grey--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat",disabled:e.timestamps.length!==e.bandCount},nativeOn:{click:function(t){return e.execute()}}},[e._v("Apply")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},Nn=[],Ln={name:"admin-upload-generate-time_slices",props:["specification"],components:{Multiselect:C.a},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,bandCount:0,modes:[{id:"month",title:"sequence of months"},{id:"year",title:"sequence of years"}],mode:{id:"month",title:"sequence of months"},first_year:"2001",first_month:"12",inputError:void 0}},methods:{refresh:function(){this.bandCount=this.specification.bands.length},execute:function(){this.$emit("timestamp-sequence",this.timestamps),this.dialog=!1},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)}},computed:{timestamps:function(){var e=this;e.inputError="unknown error";var t=[],s=parseInt(this.first_year);if("year"===this.mode.id)if(s>=1e3&&s<=9999){s+=0;for(var a=0;a<this.bandCount;a++)t.push(s),s++;e.inputError=void 0}else e.inputError="not valid input";else if("month"===this.mode.id){var i=parseInt(this.first_month);if(s>=1e3&&s<=9999&&i>=1&&i<=12){s+=0,i+=0;for(var r=0;r<this.bandCount;r++){var o=i<=9?"0"+i:i,n=s+"-"+o;t.push(n),12==i?(s++,i=1):i++}e.inputError=void 0}else e.inputError="not valid input"}return t}},watch:{specification:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},In=Ln,Bn=(s("e7e5"),Object(p["a"])(In,zn,Nn,!1,null,"3cb78144",null)),Fn=Bn.exports,Vn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"generate sequence of timestamps"},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("timestamps ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("generate sequence of timestamps ("+e._s(e.bandCount)+")")])]),s("span",{staticStyle:{color:"grey"}},[s("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v(" Click "),s("i",[e._v("apply")]),e._v("-button to commit generated timestamps. (You may need to scroll down.)")],1),s("br"),s("br"),s("multiselect",{attrs:{options:e.modes,"track-by":"id",label:"title",allowEmpty:!1,searchable:!1,"show-labels":!1,placeholder:"select mode"},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}}),s("br"),e._v(" first timestamp year (e.g. 2001) "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.first_year,expression:"first_year"}],staticStyle:{"background-color":"aliceblue"},attrs:{placeholder:"year"},domProps:{value:e.first_year},on:{input:function(t){t.target.composing||(e.first_year=t.target.value)}}}),"month"===e.mode.id?s("span",[e._v(" month (e.g. 12) "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.first_month,expression:"first_month"}],staticStyle:{"background-color":"aliceblue"},attrs:{placeholder:"month"},domProps:{value:e.first_month},on:{input:function(t){t.target.composing||(e.first_month=t.target.value)}}})]):e._e(),s("br"),s("br"),s("hr"),s("div",{staticStyle:{"background-color":"#e4ebf54d"}},[s("div",{staticStyle:{color:"red"}},[e._v(" "+e._s(e.inputError)+" ")]),void 0===e.inputError?s("table",[s("tr",[s("th",{attrs:{align:"center"}},[e._v("band")]),s("th",{attrs:{align:"center"}},[e._v("timestamp")])]),e._l(e.timestamps,(function(t,a){return s("tr",{key:t},[s("td",{attrs:{align:"center"}},[s("b",[e._v(e._s(a+1))])]),s("td",{attrs:{align:"center"}},[e._v(e._s(t))])])}))],2):e._e()]),s("hr"),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"grey--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat",disabled:e.timestamps.length!==e.bandCount},nativeOn:{click:function(t){return e.execute()}}},[e._v("Apply")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},Un=[],Wn={name:"admin-upload-generate-timestamps",props:["specification"],components:{Multiselect:C.a},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,bandCount:0,modes:[{id:"month",title:"sequence of months"},{id:"year",title:"sequence of years"}],mode:{id:"month",title:"sequence of months"},first_year:"2001",first_month:"12",inputError:void 0}},methods:{refresh:function(){this.bandCount=this.specification.bands.length},execute:function(){this.$emit("timestamp-sequence",this.timestamps),this.dialog=!1},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)}},computed:{timestamps:function(){var e=this;e.inputError="unknown error";var t=[],s=parseInt(this.first_year);if("year"===this.mode.id)if(s>=1e3&&s<=9999){s+=0;for(var a=0;a<this.bandCount;a++)t.push(s),s++;e.inputError=void 0}else e.inputError="not valid input";else if("month"===this.mode.id){var i=parseInt(this.first_month);if(s>=1e3&&s<=9999&&i>=1&&i<=12){s+=0,i+=0;for(var r=0;r<this.bandCount;r++){var o=i<=9?"0"+i:i,n=s+"-"+o;t.push(n),12==i?(s++,i=1):i++}e.inputError=void 0}else e.inputError="not valid input"}return t}},watch:{specification:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},Gn=Wn,qn=(s("6ec4"),Object(p["a"])(Gn,Vn,Un,!1,null,"1e33e076",null)),Hn=qn.exports;function Jn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Qn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(s),!0).forEach((function(t){Yn(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Jn(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Yn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Kn(e){return e.slice().sort((function(e,t){return e-t})).filter((function(e,t,s){return!t||e!=s[t-1]}))}a["default"].use(Wa.a);var Xn={name:"admin-upload",props:[],components:{PulseLoader:ts["a"],Multiselect:C.a,"admin-upload-generate-time-slices":Fn,"admin-upload-generate-timestamps":Hn},data:function(){return{messages:{},messagesIndex:0,notifications:{},notificationsIndex:0,options:{target:this.$store.getters.apiUrl("api/upload"),testChunks:!1,chunkSize:10485760,simultaneousUploads:1},uploadState:"init",inspectState:"init",inspectFilename:void 0,guessTimestamp:!0,importStrategies:[{id:"create",title:"create new layer"},{id:"existing_add",title:"insert into existing layer with new (added) bands"},{id:"existing_merge",title:"insert into existing layer and (preferably) into exisiting bands"}],importStrategy:{},importModes:[{id:"simple",title:"simple (file represents one point in time)"},{id:"timeseries",title:"timeseries (bands of file represent multiple points in time)"}],importMode:{},existingRasterdb:{},specification:void 0,proj4Compare:void 0,proj4CompareError:void 0,createdTags:[],createdAclRoles:[],importState:"init",importResult:void 0,importErrorStatus:void 0,importErrorStatusText:void 0,importErrorStatusMessage:void 0,presetBands:[],presetTimestamp:void 0,remote_task:void 0}},methods:{createTag:function(e){this.createdTags.push(e),this.specification.tags.push(e)},createAclRole:function(e){this.createdAclRoles.push(e),this.specification.acl.push(e)},createAclModRole:function(e){this.createdAclRoles.push(e),this.specification.acl_mod.push(e)},addnotification:function(e){var t=this.notificationsIndex++;return a["default"].set(this.notifications,t,e),t},removeNotification:function(e){a["default"].delete(this.notifications,e)},addMessage:function(e){var t=this.messagesIndex++;return a["default"].set(this.messages,t,e),t},removeMessage:function(e){a["default"].delete(this.messages,e)},cancel_upload:function(){this.uploadState="init",this.inspectState="init",this.inspectFilename=void 0,this.specification=void 0,this.proj4Compare=void 0,this.proj4CompareError=void 0,this.importState="init",this.importResult=void 0},inspect:function(){var e=this;this.importState="init",this.remote_task=void 0,e.inspectState="inspecting",e.specification=void 0;var t={filename:this.inspectFilename,strategy:this.importStrategy.id};"existing_add"!=this.importStrategy.id&&"existing_merge"!=this.importStrategy.id||(t.rasterdb=this.existingRasterdb.name),this.guessTimestamp&&(t.guess_timestamp=!0),B.a.get(this.urlPrefix+"../../api/inspect",{params:t}).then((function(t){e.inspectState="done",e.specification=t.data.specification,e.presetBands=JSON.parse(JSON.stringify(e.specification.bands)),e.setPresetBands(),e.presetTimestamp=e.specification.timestamp})).catch((function(t){e.inspectState="error",e.addnotification("ERROR "+t)}))},start_import:function(){var e=this;this.remote_task=void 0;var t=this.$store.getters.apiUrl("api/import");e.importState="importing",B.a.post(t,{specification:e.specification}).then((function(t){console.log(t.data.remote_task),e.remote_task=t.data.remote_task,e.query_remote_task()})).catch((function(t){e.importState="error",e.importErrorStatus="unknown",e.importErrorStatusText="unknown",e.importErrorStatusMessage="unknown",void 0!==t.response?(void 0!==t.response.status&&(e.importErrorStatus=t.response.status),void 0!==t.response.statusText&&(e.importErrorStatusText=t.response.statusText),void 0!==t.response.data&&(e.importErrorStatusMessage=t.response.data)):e.importErrorStatusMessage=e.errorToText(t),console.log("1------"),console.log(JSON.stringify(t)),console.log("2------"),console.log(e.errorToText(t)),console.log("3------"),e.setError=!0,e.setErrorMessage="Error setting property: "+e.errorToText(t),console.log(t),e.refreshAfterImport()}))},refreshAfterImport:function(){this.$store.dispatch("layer_tags/refresh"),this.$store.dispatch("acl_roles/refresh"),this.$store.dispatch("rasterdbs/refresh")},isNaturalNumber:function(e){e=e.toString();var t=Math.abs(e),s=parseInt(e,10);return!isNaN(t)&&s===t&&t.toString()===e},setBand:function(e){var t=this.existing_bands_map[this.specification.bands[e].rasterdb_band_index];this.specification.bands[e].rastedb_band_data_type=t.type,this.specification.bands[e].band_name=t.name,this.specification.bands[e].wavelength=t.wavelength,this.specification.bands[e].fwhm=t.fwhm,this.specification.bands[e].visualisation=t.visualisation},clearBand:function(e){this.specification.bands[e].rastedb_band_data_type=this.presetBands[e].rastedb_band_data_type,this.specification.bands[e].band_name=this.presetBands[e].band_name,this.specification.bands[e].wavelength=this.presetBands[e].wavelength,this.specification.bands[e].fwhm=this.presetBands[e].fwhm,this.specification.bands[e].visualisation=this.presetBands[e].visualisation},setPresetBands:function(){console.log(this.specification),console.log(this.specification.bands);var e=this.specification.bands.length;if(!(e<1))if("simple"===this.importMode.id)for(var t=0;t<e;t++)this.specification.bands[t].rasterdb_band_index=this.presetBands[t].rasterdb_band_index,this.specification.bands[t].rastedb_band_data_type=this.presetBands[t].rastedb_band_data_type,this.specification.bands[t].band_name=this.presetBands[t].band_name,this.specification.bands[t].wavelength=this.presetBands[t].wavelength,this.specification.bands[t].fwhm=this.presetBands[t].fwhm,this.specification.bands[t].visualisation=this.presetBands[t].visualisation,this.specification.bands[t].no_data_value=this.presetBands[t].no_data_value,this.specification.bands[t].visualisation=this.presetBands[t].visualisation;else if("timeseries"===this.importMode.id)for(t=0;t<e;t++)this.specification.bands[t].rasterdb_band_index=this.presetBands[0].rasterdb_band_index,this.specification.bands[t].rastedb_band_data_type=this.presetBands[0].rastedb_band_data_type,this.specification.bands[t].band_name=this.presetBands[0].band_name,this.specification.bands[t].wavelength=this.presetBands[0].wavelength,this.specification.bands[t].fwhm=this.presetBands[0].fwhm,this.specification.bands[t].visualisation=this.presetBands[0].visualisation,this.specification.bands[t].no_data_value=this.presetBands[0].no_data_value,this.specification.bands[t].visualisation=this.presetBands[0].visualisation;else console.log("error")},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data},query_remote_task:function(){var e=this;B.a.get(this.urlPrefix+"../../api/remote_tasks/"+this.remote_task.id).then((function(t){console.log(t.data.remote_task),e.remote_task=t.data.remote_task,e.remote_task.active?window.setTimeout((function(){e.query_remote_task()}),1e3):("DONE"===e.remote_task.status?e.importState="done":e.importState="error",console.log(t),e.refreshAfterImport())})).catch((function(t){e.importState="error",e.importErrorStatus="unknown",e.importErrorStatusText="unknown",e.importErrorStatusMessage="unknown",void 0!==t.response?(void 0!==t.response.status&&(e.importErrorStatus=t.response.status),void 0!==t.response.statusText&&(e.importErrorStatusText=t.response.statusText),void 0!==t.response.data&&(e.importErrorStatusMessage=t.response.data)):e.importErrorStatusMessage=e.errorToText(t),console.log("1------"),console.log(JSON.stringify(t)),console.log("2------"),console.log(e.errorToText(t)),console.log("3------"),e.setError=!0,e.setErrorMessage="Error setting property: "+e.errorToText(t),console.log(t),e.refreshAfterImport()}))},updateAddBands:function(){var e=this;if("simple"!==this.importMode.id){void 0===this.specification.addBands&&(this.specification.addBands=[]),this.specification.addBands=this.specification.addBands.filter((function(t){return e.selectedRasterDbBandIndicesUnique.includes(t.rasterdb_band_index)}));var t=e.selectedRasterDbBandIndicesUnique.filter((function(t){for(var s=0;s<e.specification.addBands.length;s++)if(t===e.specification.addBands[s].rasterdb_band_index)return!1;return!0}));console.log("toAddIndices"),console.log(t);var s=t.map((function(t){for(var s={},a=0;a<e.specification.bands.length;a++)if(e.specification.bands[a].rasterdb_band_index===t){console.log("found!"),s=e.specification.bands[a];break}return{rasterdb_band_index:t,band_name:s.band_name,fwhm:s.fwhm,rastedb_band_data_type:s.rastedb_band_data_type,visualisation:s.visualisation,wavelength:s.wavelength}}));this.specification.addBands=this.specification.addBands.concat(s)}else void 0!==this.specification&&(this.specification.addBands=void 0)},fillTimeSlices:function(e){for(var t=0;t<e.length;t++)console.log("set"+e[t]),this.specification.bands[t].time_slice=e[t],this.specification.bands[t].timestamp=void 0},fillTimestamps:function(e){for(var t=0;t<e.length;t++)console.log("set"+e[t]),this.specification.bands[t].time_slice=void 0,this.specification.bands[t].timestamp=e[t]}},computed:Qn(Qn({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}})),{},{validEPSG:function(){return void 0!==this.specification&&void 0!==this.specification.geo_code&&this.specification.geo_code.startsWith("EPSG:")},epsg:function(){return this.validEPSG?this.specification.geo_code.substr(5):void 0},proj4CompareOK:function(){return this.specification.proj4===this.proj4Compare},layer_tags:function(){return void 0===this.$store.state.layer_tags.data?this.createdTags:this.$store.state.layer_tags.data.concat(this.createdTags)},acl_roles:function(){return void 0===this.$store.state.acl_roles.data?this.createdAclRoles:this.$store.state.acl_roles.data.concat(this.createdAclRoles)},rasterdbs:function(){return void 0===this.$store.state.rasterdbs.data?[]:this.$store.state.rasterdbs.data},existingID:function(){return void 0!==this.specification&&void 0!==this.specification.id&&void 0!==this.rasterdbs&&this.rasterdbs.some((function(e){return e.name===this.specification.id}),this)},create:function(){return"create"===this.importStrategy.id},existing_bands_map:function(){return void 0===this.specification.existing_bands?{}:this.specification.existing_bands.reduce((function(e,t){return e[t.index]=t,e}),{})},selectedRasterDbBandIndices:function(){return void 0===this.specification?[]:this.specification.bands.map((function(e){return e.rasterdb_band_index}))},selectedRasterDbBandIndicesUnique:function(){return Kn(this.selectedRasterDbBandIndices)},identity:function(){return this.$store.state.identity.data}}),watch:{epsg:function(){var e=this;this.proj4Compare=void 0,this.proj4CompareError=void 0,void 0!==this.epsg&&B.a.get("https://epsg.io/"+this.epsg+".proj4").then((function(t){e.proj4Compare=t.data})).catch((function(t){console.log(t),e.proj4CompareError=JSON.stringify(t)}))},importStrategy:function(){this.inspectState="init",this.specification=void 0},existingRasterdb:function(){this.inspectState="init",this.specification=void 0},selectedRasterDbBandIndices:function(e,t){console.log(t),console.log(e);for(var s=e.length,a=0;a<s;a++)if(this.isNaturalNumber(e[a])){if(e[a]!==t[a]){var i=this.existing_bands_map[e[a]];if(void 0!==i)this.setBand(a);else{var r=this.existing_bands_map[t[a]];void 0!==r&&this.clearBand(a)}}}else void 0!==this.existing_bands_map[t[a]]&&this.clearBand(a)},remote_task:function(){},importMode:function(){var e=this;if(void 0!==this.specification)if(this.setPresetBands(),"simple"===this.importMode.id){e.specification.timestamp=e.presetTimestamp;for(var t=0;t<this.specification.bands.length;t++)this.specification.bands[t].timestamp=void 0}else"timeseries"===this.importMode.id&&(e.specification.timestamp=void 0);this.updateAddBands()},selectedRasterDbBandIndicesUnique:function(){this.updateAddBands()}},mounted:function(){this.$store.dispatch("layer_tags/init"),this.$store.dispatch("acl_roles/init"),this.$store.dispatch("rasterdbs/init"),this.$store.dispatch("identity/init"),this.importStrategy=this.importStrategies[0],this.importMode=this.importModes[0];var e=this;window.injectFile=function(t){e.inspectFilename=t}}},Zn=Xn,ec=(s("1575"),Object(p["a"])(Zn,An,Dn,!1,null,"4e7ad9f6",null)),tc=ec.exports,sc=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"innergrid-container"},[s("div",{staticClass:"innergrid-item-main"},[s("v-layout",[s("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[s("v-card",[s("h3",{staticClass:"headline mb-0"},[e._v("Accounts "),s("v-btn",{attrs:{flat:"",icon:"",color:"green",title:"reload accounts from source and refresh view"},on:{click:function(t){return e.refresh()}}},[s("v-icon",[e._v("refresh")])],1),e._v(" "+e._s(e.refreshMessage)+" ")],1),s("v-divider"),void 0!=e.accounts?s("v-data-table",{attrs:{headers:e.headers,items:e.accounts,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[s("td",{class:{admin:e.accountIsAdmin(t.item),empty:0==t.item.roles.length}},[e.accountIsAdmin(t.item)?s("v-icon",{attrs:{title:"Account is admin."}},[e._v("admin_panel_settings")]):s("v-icon",{attrs:{title:"User account, no admin."}},[e._v("account_box")]),t.item.managed?e._e():s("v-icon",{attrs:{title:"Account can not be changed or removed."}},[e._v("lock")]),s("span",{staticClass:"user-list"},[e._v(e._s(t.item.name))])],1),s("td",[e._l(t.item.roles,(function(t){return s("span",{key:t},[s("span",{staticClass:"role-list"},[e._v(e._s(t))]),e._v("   ")])})),0===t.item.roles.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2),t.item.managed?s("td",[s("v-btn",{attrs:{icon:"",color:"grey lighten-3"},on:{click:function(s){e.selectedAccount=t.item,e.$refs.manage_account.show=!0}}},[s("v-icon",{attrs:{title:"Manage account."}},[e._v("folder_open")])],1),s("v-btn",{attrs:{icon:"",color:"grey lighten-3"},on:{click:function(s){e.selectedAccount=t.item,e.$refs.remove_account.show=!0}}},[s("v-icon",{attrs:{title:"Delete account."}},[e._v("delete_forever")])],1)],1):e._e()]}}],null,!1,598733977)}):e._e(),s("v-divider"),s("dialog-add-account",{ref:"add_account",on:{changed:e.refresh}}),s("v-btn",{attrs:{title:"Insert a new account."},on:{click:function(t){e.$refs.add_account.show=!0}}},[s("v-icon",[e._v("add")]),e._v(" Add account")],1),s("dialog-manage-account",{ref:"manage_account",attrs:{account:e.selectedAccount},on:{changed:e.refresh}}),s("dialog-remove-account",{ref:"remove_account",attrs:{account:e.selectedAccount},on:{changed:e.refresh}}),s("br"),s("br"),s("br"),s("h3",{staticClass:"headline mb-0"},[e._v("Roles")]),s("v-divider"),void 0!=e.acl_roles?s("v-data-table",{attrs:{headers:e.roles_headers,items:e.roles,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[s("td",[s("span",{staticClass:"role-list"},[e._v(e._s(t.item.role))])]),s("td",e._l(t.item.users,(function(t){return s("span",{key:t},[s("span",{staticClass:"user-list"},[e._v(e._s(t))])])})),0)]}}],null,!1,1823264137)}):e._e(),s("v-divider")],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.accountsError,callback:function(t){e.accountsError=t},expression:"accountsError"}},[e._v(" "+e._s(e.accountsErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.accountsError=!1}}},[e._v("Close")])],1)],1)])},ac=[],ic=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-dialog",{attrs:{value:e.show,lazy:"",persistent:"","max-width":"500px"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[e._v("Add account")]),s("v-card-text",[s("v-textarea",{attrs:{label:"User","auto-grow":"",rows:"1",title:"Username"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),s("v-textarea",{attrs:{label:"Password","auto-grow":"",rows:"1",title:"Password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" Roles "),s("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclRole},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}})],1),s("v-card-text",[e._v(" "+e._s(e.postMessage)+" ")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"green darken-1",flat:"flat"},nativeOn:{click:function(t){e.show=!1}}},[e._v("Cancel")]),s("v-btn",{attrs:{color:"green darken-1",flat:"flat",disabled:!e.valid},nativeOn:{click:function(t){return e.commit.apply(null,arguments)}}},[e._v("Add")])],1)],1)],1)},rc=[];function oc(e,t,s,a,i,r,o){try{var n=e[r](o),c=n.value}catch(l){return void s(l)}n.done?t(c):Promise.resolve(c).then(a,i)}function nc(e){return function(){var t=this,s=arguments;return new Promise((function(a,i){var r=e.apply(t,s);function o(e){oc(r,a,i,o,n,"next",e)}function n(e){oc(r,a,i,o,n,"throw",e)}o(void 0)}))}}var cc={name:"dialog-add-account",props:{},components:{Multiselect:C.a},data:function(){return{show:!1,username:"",password:"",postMessage:void 0,selectedRoles:[],availableRoles:[],createdAclRoles:[]}},computed:{valid:function(){return void 0!==this.username&&null!==this.username&&this.username.length>0},acl_roles:function(){return this.availableRoles.concat(this.createdAclRoles)}},methods:{commit:function(){var e=this;return nc(oe.a.mark((function t(){var s,a;return oe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.valid){t.next=17;break}return t.prev=1,e.postMessage="Sending add account...",s={actions:[{action:"add_account",user:e.username,password:e.password,roles:e.selectedRoles}]},a=e.$store.getters.apiUrl("api/accounts"),t.next=7,B.a.post(a,s);case 7:e.postMessage=void 0,e.$emit("changed"),e.show=!1,t.next=17;break;case 12:t.prev=12,t.t0=t["catch"](1),e.postMessage="Error add account.",console.log(t.t0),e.$emit("changed");case 17:case"end":return t.stop()}}),t,null,[[1,12]])})))()},createAclRole:function(e){this.createdAclRoles.push(e),this.selectedRoles.push(e)},refresh:function(){var e=this;return nc(oe.a.mark((function t(){var s;return oe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.a.get(e.$store.getters.apiUrl("api/roles"));case 3:s=t.sent,e.availableRoles=s.data.roles,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},watch:{show:{immediate:!0,handler:function(){this.username="",this.password="",this.postMessage=void 0,this.selectedRoles=[],this.show&&this.refresh()}}},mounted:function(){}},lc=cc,dc=Object(p["a"])(lc,ic,rc,!1,null,"4b9ae56b",null),uc=dc.exports,vc=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-dialog",{attrs:{value:e.show,lazy:"",persistent:"","max-width":"500px"}},[void 0!==e.account?s("v-card",[s("v-card-title",{staticClass:"headline"},[e._v("Manage account")]),s("v-card-text",[e._v(" User: "),s("b",[e._v(e._s(e.account.name))])]),s("v-card-text",[e._v(" Roles "),s("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclRole},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}})],1),s("v-card-text",[e._v(" Password, leave empty to keep current password. "),s("v-textarea",{attrs:{"auto-grow":"",rows:"1",title:"Password. Leave empty if you do not want to change the password."},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),s("v-card-text",[e._v(" "+e._s(e.postMessage)+" ")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"green darken-1",flat:"flat"},nativeOn:{click:function(t){e.show=!1}}},[e._v("Cancel")]),s("v-btn",{attrs:{color:"green darken-1",flat:"flat",disabled:!e.valid},nativeOn:{click:function(t){return e.commit.apply(null,arguments)}}},[e._v("Apply")])],1)],1):e._e()],1)},mc=[];function pc(e,t,s,a,i,r,o){try{var n=e[r](o),c=n.value}catch(l){return void s(l)}n.done?t(c):Promise.resolve(c).then(a,i)}function _c(e){return function(){var t=this,s=arguments;return new Promise((function(a,i){var r=e.apply(t,s);function o(e){pc(r,a,i,o,n,"next",e)}function n(e){pc(r,a,i,o,n,"throw",e)}o(void 0)}))}}var fc={name:"dialog-manage-account",props:["account"],components:{Multiselect:C.a},data:function(){return{show:!1,postMessage:void 0,selectedRoles:[],availableRoles:[],createdAclRoles:[],password:""}},computed:{valid:function(){return!0},acl_roles:function(){return this.availableRoles.concat(this.createdAclRoles)}},methods:{commit:function(){var e=this;return _c(oe.a.mark((function t(){var s,a,i;return oe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.valid){t.next=19;break}return t.prev=1,e.postMessage="Sending set account...",s={action:"set_account",user:e.account.name,roles:e.selectedRoles},void 0!==e.password&&null!==e.password&&e.password.length>0&&(s.password=e.password),a={actions:[s]},i=e.$store.getters.apiUrl("api/accounts"),t.next=9,B.a.post(i,a);case 9:e.postMessage=void 0,e.$emit("changed"),e.show=!1,t.next=19;break;case 14:t.prev=14,t.t0=t["catch"](1),e.postMessage="Error set account.",console.log(t.t0),e.$emit("changed");case 19:case"end":return t.stop()}}),t,null,[[1,14]])})))()},createAclRole:function(e){this.createdAclRoles.push(e),this.selectedRoles.push(e)},refresh:function(){var e=this;return _c(oe.a.mark((function t(){var s;return oe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.a.get(e.$store.getters.apiUrl("api/roles"));case 3:s=t.sent,e.availableRoles=s.data.roles,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:e.selectedRoles=[],e.password="",void 0!==e.account&&(e.selectedRoles=e.account.roles);case 13:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},watch:{show:{immediate:!0,handler:function(){this.postMessage=void 0,this.show&&this.refresh()}},account:{immediate:!0,handler:function(){this.refresh()}}},mounted:function(){}},hc=fc,bc=Object(p["a"])(hc,vc,mc,!1,null,"06e67235",null),gc=bc.exports,yc=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-dialog",{attrs:{value:e.show,lazy:"",persistent:"","max-width":"500px"}},[void 0!==e.account?s("v-card",[s("v-card-title",{staticClass:"headline"},[e._v("Remove account")]),s("v-card-text",[e._v(" Should this account be removed? "),s("br"),s("br"),s("b",[e._v(e._s(e.account.name))])]),s("v-card-text",[e._v(" "+e._s(e.postMessage)+" ")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"green darken-1",flat:"flat"},nativeOn:{click:function(t){e.show=!1}}},[e._v("Cancel")]),s("v-btn",{attrs:{color:"green darken-1",flat:"flat",disabled:!e.valid},nativeOn:{click:function(t){return e.commit.apply(null,arguments)}}},[e._v("Remove")])],1)],1):e._e()],1)},xc=[];function wc(e,t,s,a,i,r,o){try{var n=e[r](o),c=n.value}catch(l){return void s(l)}n.done?t(c):Promise.resolve(c).then(a,i)}function kc(e){return function(){var t=this,s=arguments;return new Promise((function(a,i){var r=e.apply(t,s);function o(e){wc(r,a,i,o,n,"next",e)}function n(e){wc(r,a,i,o,n,"throw",e)}o(void 0)}))}}var Ec={name:"dialog-remove-account",props:["account"],components:{},data:function(){return{show:!1,postMessage:void 0}},computed:{valid:function(){return!0}},methods:{commit:function(){var e=this;return kc(oe.a.mark((function t(){var s,a;return oe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.valid){t.next=17;break}return t.prev=1,e.postMessage="Sending remove account...",s={actions:[{action:"remove_account",user:e.account.name}]},a=e.$store.getters.apiUrl("api/accounts"),t.next=7,B.a.post(a,s);case 7:e.postMessage=void 0,e.$emit("changed"),e.show=!1,t.next=17;break;case 12:t.prev=12,t.t0=t["catch"](1),e.postMessage="Error remove account.",console.log(t.t0),e.$emit("changed");case 17:case"end":return t.stop()}}),t,null,[[1,12]])})))()},refresh:function(){return kc(oe.a.mark((function e(){return oe.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},watch:{show:{immediate:!0,handler:function(){this.postMessage=void 0,this.show&&this.refresh()}}},mounted:function(){}},Sc=Ec,Oc=Object(p["a"])(Sc,yc,xc,!1,null,"760f36ed",null),Pc=Oc.exports;function Cc(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Tc(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Cc(Object(s),!0).forEach((function(t){Mc(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Cc(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Mc(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Rc={name:"admin-overview",components:{"dialog-add-account":uc,"dialog-manage-account":gc,"dialog-remove-account":Pc},data:function(){return{accounts:void 0,accountsError:!1,accountsErrorMessage:void 0,refreshMessage:"init...",headers:[{text:"User",value:"name"},{text:"Roles",value:"roles"},{text:"Actions",value:"managed"}],roles_headers:[{text:"Role",value:"role"},{text:"Users",value:"users"}],selectedAccount:void 0}},methods:{refresh:function(){this.$store.dispatch("acl_roles/refresh"),this.refreshMessage="Reloading accounts list...";var e=this;B.a.get(this.urlPrefix+"../../api/accounts").then((function(t){e.accounts=t.data.accounts,e.refreshMessage=""})).catch((function(t){console.log(t),e.accountsError=!0,e.accountsErrorMessage="ERROR getting accounts: "+t,e.refreshMessage="Error loading accounts."}))},accountIsAdmin:function(e){return e.roles.indexOf("admin")>=0}},computed:Tc(Tc({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}})),{},{acl_roles:function(){return this.$store.state.acl_roles.data},roles:function(){var e=this;if(void 0!==this.acl_roles){var t=this.acl_roles.map((function(t){var s=[];return void 0!==e.accounts&&(s=e.accounts.filter((function(e){return e.roles.some((function(e){return e===t}))})).map((function(e){return e.name}))),{role:t,users:s}}));return t}}}),mounted:function(){this.$store.dispatch("acl_roles/init"),this.refresh()}},jc=Rc,$c=(s("9981"),s("dc18"),Object(p["a"])(jc,sc,ac,!1,null,"11dd4154",null)),Ac=$c.exports,Dc=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"tools-grid-container"},[s("v-tabs",{staticClass:"sub-tab-bar",attrs:{color:"grey lighten-1","slider-color":"yellow","show-arrows":""}},[s("v-tab",{attrs:{to:"/tools/info"}},[s("v-icon",[e._v("view_compact")]),e._v(" Info")],1),s("v-tab",{attrs:{to:"/tools/status"}},[s("v-icon",[e._v("pending_actions")]),e._v(" Task Status")],1),s("v-tab",{attrs:{to:"/tools/task"}},[s("v-icon",[e._v("card_travel")]),e._v(" Task Creation")],1),e.isAdmin?s("v-tab",{attrs:{to:"/tools/accounts"}},[s("v-icon",[e._v("contact_mail")]),e._v(" Accounts")],1):e._e(),s("v-tab",{attrs:{to:"/tools/public"}},[s("v-icon",[e._v("dns")]),e._v(" public")],1),s("v-tab",{attrs:{to:"/tools/vectorviewer"}},[s("v-icon",[e._v("map")]),e._v(" vectorviewer")],1)],1),s("router-view",{staticClass:"tools-grid-item-content"})],1)},zc=[];function Nc(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Lc(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Nc(Object(s),!0).forEach((function(t){Ic(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Nc(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ic(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Bc={name:"admin-tools",components:{},data:function(){return{}},methods:{},computed:Lc({},Object(c["b"])({isAdmin:"identity/isAdmin"})),mounted:function(){}},Fc=Bc,Vc=(s("e407"),Object(p["a"])(Fc,Dc,zc,!1,null,"57d3bf14",null)),Uc=Vc.exports,Wc=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"innergrid-container"},[s("div",{staticClass:"innergrid-item-main"},[s("v-layout",[s("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[s("v-card",[s("h3",{staticClass:"headline mb-0"},[e._v("Remote Sensing Database Administration "),s("v-btn",{attrs:{flat:"",icon:"",color:"green",title:"refresh layers"},on:{click:function(t){return e.refresh()}}},[s("v-icon",[e._v("refresh")])],1)],1),s("v-divider"),void 0!=e.identity?s("v-card-title",[s("div",[s("div",[s("b",[e._v("identity")]),e._v(": "+e._s(e.identity.user))]),s("div",[s("b",[e._v("roles")]),e._v(": "+e._s(e.identity.roles.join(", ")))]),s("div",[s("b",[e._v("connection")]),e._v(": "+e._s(e.identity.secure?"secure":"plain"))]),s("div",[s("b",[e._v("ip")]),e._v(": "+e._s(e.identity.ip))]),s("div",[s("b",[e._v("authentication")]),e._v(": "+e._s(e.identity.auth_method))]),void 0===e.identity||"DIGEST"!==e.identity.auth_method&&"BASIC"!==e.identity.auth_method?e._e():s("div",[s("br"),s("a",{attrs:{href:e.logout_url}},[s("v-icon",[e._v("call_end")]),e._v(" logout")],1),"DIGEST"===e.identity.auth_method?s("span",{staticStyle:{"font-size":"0.8em"}},[e._v("(HTTP "+e._s(e.identity.auth_method)+" authentication)")]):e._e(),"BASIC"===e.identity.auth_method?s("span",{staticStyle:{"font-size":"0.8em"}},[e._v("(HTTPS "+e._s(e.identity.auth_method)+" authentication)")]):e._e()]),void 0!==e.identity&&"jws"===e.identity.auth_method?s("div",[s("br"),s("a",{attrs:{href:e.logout_jws_url}},[s("v-icon",[e._v("call_end")]),e._v(" logout")],1),e._v(" "),s("span",{staticStyle:{"font-size":"0.8em"}},[e._v("(JWS authentication)")])]):e._e()])]):e._e()],1)],1)],1),"init"===e.identityMode||"load"===e.identityMode?s("div",[s("ring-loader",{staticStyle:{display:"inline-block"},attrs:{color:"#000000",size:"20px"}}),e._v(" loading... ")],1):e._e(),"error"===e.identityMode?s("div",[s("v-icon",[e._v("error")]),e._v(" "+e._s(e.identityMessage)+" ")],1):e._e()],1)])},Gc=[],qc={name:"admin-tools-info",components:{RingLoader:T["a"]},data:function(){return{}},methods:{refresh:function(){this.$store.dispatch("identity/refresh")}},computed:{identity:function(){return this.$store.state.identity.data},identityMode:function(){return this.$store.state.identity.mode},identityMessage:function(){return this.$store.state.identity.message},logout_url:function(){var e=window.location.protocol+"//";e+="logout:logout@",e+=window.location.host;var t=window.location.pathname;return t.endsWith("/")&&(t=t.substring(0,t.length-1)),e+=t,e},http_url:function(){var e=this.identity.http_port,t=window.location.host,s=t.indexOf(":");return s>=0&&(t=t.slice(0,s)),t=t+":"+e,"http://"+t+window.location.pathname},https_url:function(){var e=this.identity.https_port,t=window.location.host,s=t.indexOf(":");return s>=0&&(t=t.slice(0,s)),t=t+":"+e,"https://"+t+window.location.pathname},jws_url:function(){var e=this.identity.jws_protocol,t=this.identity.jws_port,s=window.location.host,a=s.indexOf(":");return a>=0&&(s=s.slice(0,a)),s=s+":"+t,e+"//"+s+window.location.pathname},logout_jws_url:function(){var e=window.location.protocol,t=window.location.host,s=window.location.pathname,a="?jws=logout";return e+"//"+t+s+a}},mounted:function(){this.refresh()}},Hc=qc,Jc=(s("fcb8"),Object(p["a"])(Hc,Wc,Gc,!1,null,"90ec81e0",null)),Qc=Jc.exports,Yc=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"innergrid-container"},[s("div",{staticClass:"innergrid-item-main"},[s("v-btn",{staticStyle:{display:"inline-block"},attrs:{disabled:e.autoRefresh,flat:"",icon:"",color:"green",title:"refresh status"},on:{click:function(t){return e.refresh()}}},[s("v-icon",[e._v("refresh")])],1),s("v-switch",{staticStyle:{display:"inline-block"},attrs:{label:"auto refresh"},model:{value:e.autoRefresh,callback:function(t){e.autoRefresh=t},expression:"autoRefresh"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:void 0==e.data,expression:"data == undefined"}]},[s("b",[e._v("--- [task info not loaded] ---")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:void 0!=e.data&&0===e.data.length,expression:"data != undefined && data.length === 0"}]},[s("b",[e._v("--- [no tasks submitted] ---")])]),void 0!=e.data&&e.data.length>0?s("table",{staticClass:"table-status"},[e._m(0),s("tbody",e._l(e.data,(function(t){return s("tr",{key:t.id,on:{click:function(s){e.selected_remote_task_id=t.id}}},[s("td",[e._v(e._s(t.id))]),s("td",[e._v(e._s(t.name))]),s("td",["READY"===t.status?s("v-icon",{attrs:{color:"yellow"}},[e._v("directions_walk")]):e._e(),"RUNNING"===t.status?s("v-icon",{attrs:{color:"black"}},[e._v("directions_run")]):e._e(),"DONE"===t.status?s("v-icon",{attrs:{color:"green"}},[e._v("done")]):e._e(),"ERROR"===t.status?s("v-icon",{attrs:{color:"red"}},[e._v("error")]):e._e(),e._v(" "+e._s(t.status)+" ")],1),s("td",[e._v(e._s(t.message))]),s("td",[e._v(e._s((t.runtime/1e3).toFixed(3))+"s")]),t.identity?s("td",[e._v(e._s(t.identity))]):s("td",[e._v("---")]),"READY"!==t.status&&"RUNNING"!==t.status||t.canceled||!t.cancelable?e._e():s("td",[s("v-btn",{attrs:{icon:""},on:{click:function(s){return e.cancel(t.id)}}},[s("v-icon",[e._v("cancel")])],1)],1),t.canceled||t.cancelable?e._e():s("td",[e._v("---")]),t.canceled?s("td",[e._v("cancel requested")]):e._e()])})),0)]):e._e(),s("div",{staticStyle:{color:"grey"}},[s("v-icon",[e._v("event_note")]),e._v(" Click on a task entry to view details.")],1),s("admin-task-console",{attrs:{id:e.selected_remote_task_id},on:{close:function(t){e.selected_remote_task_id=void 0}}}),s("transition",{attrs:{name:"fade"}},["init"===e.mode||"load"===e.mode?s("div",[s("ring-loader",{staticStyle:{display:"inline-block"},attrs:{color:"#000000",size:"20px"}}),e._v(" loading... ")],1):e._e()]),"error"===e.mode?s("div",[s("v-icon",[e._v("error")]),e._v(" "+e._s(e.message)+" ")],1):e._e()],1)])},Kc=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("ID")]),s("th",[e._v("Name")]),s("th",[e._v("Status")]),s("th",[e._v("Message")]),s("th",[e._v("Runtime")]),s("th",[e._v("Identity")]),s("th",[e._v("Cancel")])])])}];function Xc(e,t,s,a,i,r,o){try{var n=e[r](o),c=n.value}catch(l){return void s(l)}n.done?t(c):Promise.resolve(c).then(a,i)}function Zc(e){return function(){var t=this,s=arguments;return new Promise((function(a,i){var r=e.apply(t,s);function o(e){Xc(r,a,i,o,n,"next",e)}function n(e){Xc(r,a,i,o,n,"throw",e)}o(void 0)}))}}var el={name:"admin-tools-status",components:{RingLoader:T["a"],"admin-task-console":ut},data:function(){return{data:void 0,mode:"init",message:"",messageActive:!1,autoRefresh:!1,autoRefreshTimer:void 0,selected_remote_task_id:void 0}},methods:{refresh:function(){var e=this;this.mode="load";var t=this.$store.getters.apiUrl("api/remote_tasks?identity");B.a.get(t).then((function(t){e.data=t.data.remote_tasks,e.mode="ready"})).catch((function(t){e.mode="error",e.message=e.interpretError(t),e.messageActive=!0}))},interpretError:function(e){return e.response?e.response.data?e.response.data:e.response:e.request?"network error":e.message?e.message:e},cancel:function(e){var t=this;return Zc(oe.a.mark((function s(){var a;return oe.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,console.log(e),a=t.$store.getters.apiUrl("api/remote_tasks/"+e+"/cancel"),s.next=5,B.a.post(a);case 5:t.refresh(),s.next=13;break;case 8:s.prev=8,s.t0=s["catch"](0),t.mode="error",t.message=t.interpretError(s.t0),t.messageActive=!0;case 13:return s.prev=13,s.finish(13);case 15:case"end":return s.stop()}}),s,null,[[0,8,13,15]])})))()},updateAutoRefresh:function(){var e=this;void 0!==this.autoRefreshTimer&&(window.clearInterval(this.autoRefreshTimer),this.autoRefreshTimer=void 0),this.autoRefresh&&(this.autoRefreshTimer=window.setInterval((function(){e.refresh()}),1e3))}},computed:{},watch:{autoRefresh:function(){this.updateAutoRefresh()}},mounted:function(){this.refresh(),this.updateAutoRefresh()}},tl=el,sl=(s("8c2a"),Object(p["a"])(tl,Yc,Kc,!1,null,"4dd4ea96",null)),al=sl.exports,il=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"innergrid-container"},[s("div",{staticClass:"innergrid-item-main"},[e._m(0),void 0!==e.data?s("multiselect",{staticStyle:{display:"inline-block","max-width":"200px"},attrs:{options:e.data,"track-by":"category",allowEmpty:!1,searchable:!1,"show-labels":!1,placeholder:"select category"},scopedSlots:e._u([{key:"singleLabel",fn:function(t){return[e._v(e._s(e.categoryToTitle(t.option.category)))]}},{key:"option",fn:function(t){return[e._v(e._s(e.categoryToTitle(t.option.category)))]}}],null,!1,2563334390),model:{value:e.selectedCategory,callback:function(t){e.selectedCategory=t},expression:"selectedCategory"}}):e._e(),e._m(1),void 0!==e.selectedCategory?s("multiselect",{staticStyle:{display:"inline-block","max-width":"300px"},attrs:{options:e.selectedCategory.remote_task_entries,"track-by":"name",allowEmpty:!1,searchable:!1,"show-labels":!1,placeholder:"select task"},scopedSlots:e._u([{key:"singleLabel",fn:function(t){return[e._v(e._s(t.option.name))]}},{key:"option",fn:function(t){return[e._v(e._s(t.option.name))]}}],null,!1,1766883606),model:{value:e.selectedRemoteTaskEntry,callback:function(t){e.selectedRemoteTaskEntry=t},expression:"selectedRemoteTaskEntry"}}):e._e(),s("v-btn",{attrs:{flat:"",icon:"",color:"green",title:"refresh layers"},on:{click:function(t){return e.refreshLayers()}}},[s("v-icon",[e._v("refresh")])],1),void 0!==e.selectedRemoteTaskEntry?s("div",[void 0!==e.selectedRemoteTaskEntry.description?s("div",[s("br"),s("b",[e._v("Description: ")]),e._v(e._s(e.selectedRemoteTaskEntry.description)+" ")]):e._e(),s("div",[s("br"),s("div",[s("hr"),s("b",[e._v("Task Parameters")]),s("table",[e._m(2),e._l(e.selectedRemoteTaskEntry.params,(function(t){return s("tr",{key:t.name},[s("td",{class:[t.required?"param-required":"param-optional",!t.required||void 0!==t.value&&""!==t.value?"":"param-required-missing"]},[e._v(e._s(t.name)+e._s(t.required?"*":""))]),"rasterdb"===t.type?s("td",[s("multiselect",{staticStyle:{"min-width":"600px"},attrs:{options:e.rasterdbs,searchable:!0,"show-labels":!1,placeholder:"pick a rasterdb",allowEmpty:!1},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var s=t.option;return[e._v(" "+e._s(s)+" ")]}},{key:"option",fn:function(t){var s=t.option;return[e._v(" "+e._s(s)+" ")]}}],null,!0),model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"param.value"}})],1):"pointdb"===t.type?s("td",[s("multiselect",{staticStyle:{"min-width":"600px"},attrs:{options:e.pointdbs,searchable:!0,"show-labels":!1,placeholder:"pick a pointdb",allowEmpty:!1},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var s=t.option;return[e._v(" "+e._s(s)+" ")]}},{key:"option",fn:function(t){var s=t.option;return[e._v(" "+e._s(s)+" ")]}}],null,!0),model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"param.value"}})],1):"pointcloud"===t.type?s("td",[s("multiselect",{staticStyle:{"min-width":"600px"},attrs:{options:e.pointclouds,searchable:!0,"show-labels":!1,placeholder:"pick a pointcloud",allowEmpty:!1},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var s=t.option;return[e._v(" "+e._s(s)+" ")]}},{key:"option",fn:function(t){var s=t.option;return[e._v(" "+e._s(s)+" ")]}}],null,!0),model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"param.value"}})],1):"vectordb"===t.type?s("td",[s("multiselect",{staticStyle:{"min-width":"600px"},attrs:{options:e.vectordbs,searchable:!0,"show-labels":!1,placeholder:"pick a vectordb",allowEmpty:!1},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var s=t.option;return[e._v(" "+e._s(s)+" ")]}},{key:"option",fn:function(t){var s=t.option;return[e._v(" "+e._s(s)+" ")]}}],null,!0),model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"param.value"}})],1):"voxeldb"===t.type?s("td",[s("multiselect",{staticStyle:{"min-width":"600px"},attrs:{options:e.voxeldbs,searchable:!0,"show-labels":!1,placeholder:"pick a voxeldb",allowEmpty:!1},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var s=t.option;return[e._v(" "+e._s(s)+" ")]}},{key:"option",fn:function(t){var s=t.option;return[e._v(" "+e._s(s)+" ")]}}],null,!0),model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"param.value"}})],1):"string"===t.type||"layer_id"===t.type?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"param.value"}],class:[!t.required||void 0!==t.value&&""!==t.value?"":"param-required-missing"],attrs:{placeholder:"(empty)"},domProps:{value:t.value},on:{input:function(s){s.target.composing||e.$set(t,"value",s.target.value)}}})]):"string_array"===t.type?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"param.value"}],class:[e.isParamRequiredOrNotEmpty(t)&&!e.isStringArray(t.value)?"param-required-missing":""],attrs:{placeholder:"(empty)"},domProps:{value:t.value},on:{input:function(s){s.target.composing||e.$set(t,"value",s.target.value)}}})]):"number"===t.type?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"param.value"}],class:[e.isParamRequiredOrNotEmpty(t)&&!e.isNumber(t.value)?"param-required-missing":""],attrs:{placeholder:"(empty)"},domProps:{value:t.value},on:{input:function(s){s.target.composing||e.$set(t,"value",s.target.value)}}})]):"number_array"===t.type?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"param.value"}],class:[e.isParamRequiredOrNotEmpty(t)&&!e.isNumberArray(t.value)?"param-required-missing":""],attrs:{placeholder:"(empty)"},domProps:{value:t.value},on:{input:function(s){s.target.composing||e.$set(t,"value",s.target.value)}}})]):"number_rect"===t.type?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"param.value"}],class:[e.isParamRequiredOrNotEmpty(t)&&!e.isNumberRect(t.value)?"param-required-missing":""],attrs:{placeholder:"(empty)"},domProps:{value:t.value},on:{input:function(s){s.target.composing||e.$set(t,"value",s.target.value)}}})]):"integer"===t.type?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"param.value"}],class:[e.isParamRequiredOrNotEmpty(t)&&!e.isInteger(t.value)?"param-required-missing":""],attrs:{placeholder:"(empty)"},domProps:{value:t.value},on:{input:function(s){s.target.composing||e.$set(t,"value",s.target.value)}}})]):"integer_array"===t.type?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"param.value"}],class:[e.isParamRequiredOrNotEmpty(t)&&!e.isIntegerArray(t.value)?"param-required-missing":""],attrs:{placeholder:"(empty)"},domProps:{value:t.value},on:{input:function(s){s.target.composing||e.$set(t,"value",s.target.value)}}})]):"boolean"===t.type?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"param.value"}],class:[e.isParamRequiredOrNotEmpty(t)&&!e.isBoolean(t.value)?"param-required-missing":""],attrs:{placeholder:"(empty)"},domProps:{value:t.value},on:{input:function(s){s.target.composing||e.$set(t,"value",s.target.value)}}})]):s("td",[e._v("["+e._s(t.type)+"] unknown parameter type")]),s("td",{staticClass:"param-desc"},[e._v(e._s(t.desc))]),s("td",{staticClass:"param-format"},[e._v(e._s(t.format))]),void 0!==t.example&&""!==t.example?s("td",{staticClass:"param-example"},[e._v(e._s(t.example))]):e._e()])}))],2),e._m(3),s("hr")]),s("br"),s("b",[e._v("resulting task")]),s("div",{staticStyle:{"background-color":"white"}},[e._v(" "+e._s(e.taskJSON)+" ")])]),s("br"),s("div",[s("v-btn",{attrs:{disabled:!e.isValidTask},on:{click:e.submit_task}},[s("v-icon",[e._v("input")]),e._v(" submit")],1),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.isValidTask,expression:"!isValidTask"}],staticStyle:{color:"#ff3f01e6"}},[e._v("some missing required parameters")])],1)]):e._e(),"init"===e.mode||"load"===e.mode?s("div",[s("ring-loader",{staticStyle:{display:"inline-block"},attrs:{color:"#000000",size:"20px"}}),e._v(" loading... ")],1):e._e(),"error"===e.mode?s("div",[s("v-icon",[e._v("error")]),e._v(" "+e._s(e.message)+" ")],1):e._e()],1),s("admin-task-console",{attrs:{id:e.remote_task_id}}),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},rl=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("b",[e._v("Category")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("b",[e._v("Task")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("tr",[s("th",[e._v("Parameter")]),s("th",[e._v("Value")]),s("th",[e._v("Description")]),s("th",[e._v("Format")]),s("th",[e._v("Example")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticStyle:{"font-size":"0.8em",color:"#6c6c6c"}},[s("br"),s("b",[e._v("*")]),e._v(" marked parameters are required. Red marked parameter values are not valid.")])}];function ol(e,t,s,a,i,r,o){try{var n=e[r](o),c=n.value}catch(l){return void s(l)}n.done?t(c):Promise.resolve(c).then(a,i)}function nl(e){return function(){var t=this,s=arguments;return new Promise((function(a,i){var r=e.apply(t,s);function o(e){ol(r,a,i,o,n,"next",e)}function n(e){ol(r,a,i,o,n,"throw",e)}o(void 0)}))}}var cl={name:"admin-tools-task",components:{RingLoader:T["a"],Multiselect:C.a,"admin-task-console":ut},data:function(){return{data:void 0,mode:"init",message:"",messageActive:!1,selectedCategory:void 0,selectedRemoteTaskEntry:void 0,remote_task_id:void 0,setError:!1,setErrorMessage:void 0}},methods:{refresh:function(){var e=this;return nl(oe.a.mark((function t(){var s,a;return oe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("rasterdbs/init"),e.$store.dispatch("pointdbs/init"),e.$store.dispatch("pointclouds/init"),e.$store.dispatch("vectordbs/init"),e.$store.dispatch("voxeldbs/init"),e.mode="load",s=e.$store.getters.apiUrl("api/remote_task_entries"),t.prev=7,t.next=10,B.a.get(s);case 10:a=t.sent,e.data=a.data.remote_task_categories,e.mode="ready",t.next=20;break;case 15:t.prev=15,t.t0=t["catch"](7),e.mode="error",e.message=e.interpretError(t.t0),e.messageActive=!0;case 20:case"end":return t.stop()}}),t,null,[[7,15]])})))()},interpretError:function(e){return e.response?e.response.data?e.response.data:e.response:e.request?"network error":e.message?e.message:e},categoryToTitle:function(e){switch(e){case"task_rasterdb":return"RasterDB";case"task_pointdb":return"PointDB";case"task_pointcloud":return"PointCloud";case"task_vectordb":return"VectorDB";case"task_voxeldb":return"VoxelDB";default:return e}},submit_task:function(){var e=this;e.remote_task_id=void 0;var t=this.$store.getters.apiUrl("api/remote_tasks");B.a.post(t,{remote_task:e.taskJSON}).then((function(t){console.log(t);var s=t.data.remote_task;e.remote_task_id=s.id})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t)}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data},isParamRequiredOrNotEmpty:function(e){return e.required||!this.isEmpty(e.value)},isEmpty:function(e){return void 0===e||""===e.trim()},isNumber:function(e){return void 0!==e&&""!==e&&!isNaN(e)},isInteger:function(e){return void 0!==e&&""!==e&&!isNaN(e)&&Number.isInteger(+e)},isBoolean:function(e){return"true"===e||"false"==e},isStringArray:function(e){return this.parseStringArray(e).length>0},isNumberArray:function(e){return this.parseNumberArray(e).length>0},isNumberRect:function(e){return 4===this.parseNumberArray(e).length},parseNumber:function(e){return+e},parseInteger:function(e){return Number.parseInt(e)},isIntegerArray:function(e){return this.parseIntegerArray(e).length>0},parseBoolean:function(e){return"true"===e||"false"!=e&&void 0},parseStringArray:function(e){return void 0===e||""===e?[]:e.split(",").map((function(e){return e.trim()})).filter((function(e){return""!==e}))},parseNumberArray:function(e){var t=this,s=this.parseStringArray(e);return s.every((function(e){return t.isNumber(e)}))?s.map((function(e){return t.parseNumber(e)})):[]},parseNumberRect:function(e){return this.parseNumberArray(e)},parseIntegerArray:function(e){var t=this,s=this.parseStringArray(e);return s.every((function(e){return t.isInteger(e)}))?s.map((function(e){return t.parseInteger(e)})):[]},refreshLayers:function(){this.$store.dispatch("rasterdbs/refresh"),this.$store.dispatch("pointdbs/refresh"),this.$store.dispatch("pointclouds/refresh"),this.$store.dispatch("vectordbs/refresh"),this.$store.dispatch("voxeldbs/refresh"),this.$store.dispatch("poi_groups/refresh"),this.$store.dispatch("roi_groups/refresh"),this.$store.dispatch("layer_tags/refresh")}},computed:{taskJSON:function(){var e=this;if(void 0!==this.selectedCategory&&void 0!==this.selectedRemoteTaskEntry){var t={};return t[this.selectedCategory.category]=this.selectedRemoteTaskEntry.name,this.selectedRemoteTaskEntry.params.forEach((function(s){if(!e.isEmpty(s.value))switch(s.type){case"string_array":e.isStringArray(s.value)&&(t[s.name]=e.parseStringArray(s.value));break;case"number":e.isNumber(s.value)&&(t[s.name]=e.parseNumber(s.value));break;case"number_array":e.isNumberArray(s.value)&&(t[s.name]=e.parseNumberArray(s.value));break;case"number_rect":e.isNumberRect(s.value)&&(t[s.name]=e.parseNumberRect(s.value));break;case"integer":e.isInteger(s.value)&&(t[s.name]=e.parseInteger(s.value));break;case"integer_array":e.isIntegerArray(s.value)&&(t[s.name]=e.parseIntegerArray(s.value));break;case"boolean":e.isBoolean(s.value)&&(t[s.name]=e.parseBoolean(s.value));break;default:t[s.name]=s.value}})),t}},isValidTask:function(){var e=this;return this.selectedRemoteTaskEntry.params.filter((function(e){return e.required})).every((function(t){return void 0!==e.taskJSON[t.name]}))},rasterdbs:function(){if(void 0===this.$store.state.rasterdbs.data)return[];var e=this.$store.state.rasterdbs.data.map((function(e){return e.name}));return void 0===e?[]:e.slice().sort((function(e,t){return e.localeCompare(t)}))},pointdbs:function(){if(void 0===this.$store.state.pointdbs.data)return[];var e=this.$store.state.pointdbs.data.map((function(e){return e.name}));return void 0===e?[]:e.slice().sort((function(e,t){return e.localeCompare(t)}))},pointclouds:function(){if(void 0===this.$store.state.pointclouds.data)return[];var e=this.$store.state.pointclouds.data.map((function(e){return e.name}));return void 0===e?[]:e.slice().sort((function(e,t){return e.localeCompare(t)}))},vectordbs:function(){if(void 0===this.$store.state.vectordbs.data)return[];var e=this.$store.state.vectordbs.data.map((function(e){return e.name}));return void 0===e?[]:e.slice().sort((function(e,t){return e.localeCompare(t)}))},voxeldbs:function(){if(void 0===this.$store.state.voxeldbs.data)return[];var e=this.$store.state.voxeldbs.data.map((function(e){return e.name}));return void 0===e?[]:e.slice().sort((function(e,t){return e.localeCompare(t)}))}},watch:{data:function(){void 0===this.selectedCategory&&void 0!==this.data&&this.data.length>0&&(this.selectedCategory=this.data[0])},selectedCategory:function(){void 0!==this.selectedCategory&&this.selectedCategory.remote_task_entries.length>0?this.selectedRemoteTaskEntry=this.selectedCategory.remote_task_entries[0]:this.selectedRemoteTaskEntry=void 0}},mounted:function(){this.refresh()}},ll=cl,dl=(s("79ca"),Object(p["a"])(ll,il,rl,!1,null,"23e0d622",null)),ul=dl.exports,vl=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"innergrid-container"},[s("div",{staticClass:"innergrid-item-main"},[s("v-layout",[s("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[s("v-card",[s("h3",{staticClass:"headline mb-0"},[e._v("Public URLs "),s("v-btn",{attrs:{flat:"",icon:"",color:"green",title:"reload public entries"},on:{click:function(t){return e.refresh()}}},[s("v-icon",[e._v("refresh")])],1),e._v(" "+e._s(e.refreshMessage)+" ")],1),s("v-divider"),void 0!==e.public_access?s("table",{staticClass:"access-table"},[s("thead",[s("tr",[s("th",[e._v("Id")]),s("th",[e._v("Type")]),s("th",[e._v("Properties")]),s("th",[e._v("Actions")])])]),s("tbody",e._l(e.public_access,(function(t,a){return s("tr",{key:a},[s("td",[e._v(e._s(a))]),s("td",[e._v(e._s(t.type))]),s("td",e._l(t,(function(t,a){return s("span",{key:a},["type"!==a?s("span",[s("b",[e._v(e._s(a)+":")]),e._v(" "+e._s(t))]):e._e()])})),0),s("td",[s("v-btn",{attrs:{icon:"",small:"",color:"grey lighten-3"},on:{click:function(t){return e.remove(a)}}},[s("v-icon",{attrs:{title:"Remove entry."}},[e._v("delete_forever")])],1)],1)])})),0)]):e._e(),s("v-divider"),s("dialog-add-public",{ref:"add_public",on:{changed:e.refresh}}),s("v-btn",{attrs:{title:"Insert a new public URL."},on:{click:function(t){e.$refs.add_public.show=!0}}},[s("v-icon",[e._v("add")]),e._v(" Add public URL")],1)],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.public_accessError,callback:function(t){e.public_accessError=t},expression:"public_accessError"}},[e._v(" "+e._s(e.public_accessErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.public_accessError=!1}}},[e._v("Close")])],1)],1)])},ml=[],pl=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-dialog",{attrs:{value:e.show,lazy:"",persistent:"","max-width":"500px"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[e._v("Add public URL")]),s("v-card-text",[e._v(" Public "),s("b",[e._v("Id")]),e._v(", user defined part of public URL. "),s("br"),s("i",[e._v("Choose a random character sequence to limit access to users knowing that URL, click on the construction at the right.")]),s("v-text-field",{attrs:{label:"Id","append-outer-icon":"construction"},on:{"click:append-outer":e.setRandom},model:{value:e.id,callback:function(t){e.id=t},expression:"id"}}),s("b",[e._v("Type")]),s("multiselect",{attrs:{options:e.types,placeholder:"select one public URL type",searchable:!1,allowEmpty:!1,preselectFirst:!0,showLabels:!1},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),s("hr")],1),"RasterDB_WMS"===e.type?s("v-card-text",[e._v(" Connected "),s("b",[e._v("RasterDB")]),e._v(" layer "),s("multiselect",{attrs:{options:e.rasterdbs,searchable:!0,"show-labels":!1,placeholder:"pick a rasterdb",allowEmpty:!1},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var s=t.option;return[e._v(" "+e._s(s)+" ")]}},{key:"option",fn:function(t){var s=t.option;return[e._v(" "+e._s(s)+" ")]}}],null,!1,2526485078),model:{value:e.rasterdb,callback:function(t){e.rasterdb=t},expression:"rasterdb"}}),s("hr")],1):e._e(),s("v-card-text",[e._v(" "+e._s(e.postMessage)+" ")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"green darken-1",flat:"flat"},nativeOn:{click:function(t){e.show=!1}}},[e._v("Cancel")]),s("v-btn",{attrs:{color:"green darken-1",flat:"flat",disabled:!e.valid},nativeOn:{click:function(t){return e.commit.apply(null,arguments)}}},[e._v("Add")])],1)],1)],1)},_l=[];function fl(e,t,s,a,i,r,o){try{var n=e[r](o),c=n.value}catch(l){return void s(l)}n.done?t(c):Promise.resolve(c).then(a,i)}function hl(e){return function(){var t=this,s=arguments;return new Promise((function(a,i){var r=e.apply(t,s);function o(e){fl(r,a,i,o,n,"next",e)}function n(e){fl(r,a,i,o,n,"throw",e)}o(void 0)}))}}var bl={name:"dialog-add-public",props:{},components:{Multiselect:C.a},data:function(){return{show:!1,types:["RasterDB_WMS"],type:void 0,id:"",rasterdb:void 0}},computed:{valid:function(){return void 0!==this.id&&null!==this.id&&0!==this.id.length&&(void 0!==this.type&&null!==this.type&&("RasterDB_WMS"!==this.type||void 0!==this.rasterdb&&null!==this.rasterdb))},rasterdbs:function(){if(void 0===this.$store.state.rasterdbs.data)return[];var e=this.$store.state.rasterdbs.data.map((function(e){return e.name}));return void 0===e?[]:e.slice().sort((function(e,t){return e.localeCompare(t)}))}},methods:{commit:function(){var e=this;return hl(oe.a.mark((function t(){var s,a,i;return oe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.valid){t.next=19;break}return t.prev=1,e.postMessage="Sending add public_access...",s={action:"add_public_access",id:e.id,type:e.type},"RasterDB_WMS"===e.type&&(s.rasterdb=e.rasterdb),a={actions:[s]},i=e.$store.getters.apiUrl("api/public_access"),t.next=9,B.a.post(i,a);case 9:e.postMessage=void 0,e.$emit("changed"),e.show=!1,t.next=19;break;case 14:t.prev=14,t.t0=t["catch"](1),e.postMessage="Error add account.",console.log(t.t0),e.$emit("changed");case 19:case"end":return t.stop()}}),t,null,[[1,14]])})))()},getRandom:function(e){var t=new Uint32Array(e);window.crypto.getRandomValues(t);for(var s="",a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",i=a.length,r=0;r<e;r++)s+=a[t[r]%i];return s},setRandom:function(){this.id=this.getRandom(12)},refresh:function(){this.$store.dispatch("rasterdbs/refresh")}},watch:{show:{immediate:!0,handler:function(){this.username="",this.password="",this.postMessage=void 0,this.selectedRoles=[],this.show&&(this.setRandom(),this.refresh())}}},mounted:function(){}},gl=bl,yl=Object(p["a"])(gl,pl,_l,!1,null,"2206cef1",null),xl=yl.exports;function wl(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function kl(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?wl(Object(s),!0).forEach((function(t){El(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):wl(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function El(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Sl(e,t,s,a,i,r,o){try{var n=e[r](o),c=n.value}catch(l){return void s(l)}n.done?t(c):Promise.resolve(c).then(a,i)}function Ol(e){return function(){var t=this,s=arguments;return new Promise((function(a,i){var r=e.apply(t,s);function o(e){Sl(r,a,i,o,n,"next",e)}function n(e){Sl(r,a,i,o,n,"throw",e)}o(void 0)}))}}var Pl={name:"admin-public",components:{dialogAddPublic:xl},data:function(){return{public_access:void 0,public_accessError:!1,public_accessErrorMessage:void 0,refreshMessage:"init..."}},methods:{refresh:function(){this.$store.dispatch("rasterdbs/refresh"),this.refreshMessage="Reloading public_access...";var e=this;B.a.get(this.urlPrefix+"../../api/public_access").then((function(t){e.public_access=t.data.public,e.refreshMessage=""})).catch((function(t){console.log(t),e.public_accessError=!0,e.public_accessErrorMessage="ERROR getting public_access: "+t,e.refreshMessage="Error loading public_access."}))},remove:function(e){var t=this;return Ol(oe.a.mark((function s(){var a,i;return oe.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,t.refreshMessage="Sending remove public_access entry...",a={actions:[{action:"remove_public_access",id:e}]},i=t.$store.getters.apiUrl("api/public_access"),s.next=6,B.a.post(i,a);case 6:t.refreshMessage="",t.refresh(),s.next=17;break;case 10:s.prev=10,s.t0=s["catch"](0),t.public_accessError=!0,t.public_accessErrorMessage="ERROR removing public_access entry: "+s.t0,t.refreshMessage="Error removing public_access entry.",console.log(s.t0),t.refresh();case 17:case"end":return s.stop()}}),s,null,[[0,10]])})))()}},computed:kl({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}})),mounted:function(){this.refresh()}},Cl=Pl,Tl=(s("3179"),s("ca19"),Object(p["a"])(Cl,vl,ml,!1,null,"10041580",null)),Ml=Tl.exports,Rl=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"innergrid-container"},[s("iframe",{staticClass:"innergrid-item-main",attrs:{src:e.urlPrefix+"../../files/",frameborder:"0"}})])},jl=[],$l={name:"admin-files",data:function(){return{}},methods:{refresh:function(){}},computed:{urlPrefix:function(){return this.$store.state.identity.urlPrefix}},mounted:function(){this.refresh()}},Al=$l,Dl=(s("9883"),Object(p["a"])(Al,Rl,jl,!1,null,"62e595ea",null)),zl=Dl.exports,Nl=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"main"},[s("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"olmap-vectorviewer"}}),s("div",{staticClass:"innergrid-container",class:[e.filter_focus?"innergrid-item-nav-fill":"innergrid-item-nav-compact"]},[s("v-list",{staticClass:"innergrid-item-nav"},[s("v-list-tile",[void 0!==e.vectordbs?s("multiselect",{attrs:{options:e.vectordbs,"track-by":"name",allowEmpty:!1,searchable:!1,"show-labels":!1,placeholder:"select vectordb"},on:{open:function(t){e.filter_focus=!0},close:function(t){e.filter_focus=!1}},scopedSlots:e._u([{key:"singleLabel",fn:function(t){return[e._v(e._s(void 0===t.option.title?t.option.name:t.option.title))]}},{key:"option",fn:function(t){return[e._v(e._s(void 0===t.option.title?t.option.name:t.option.title))]}}],null,!1,133643734),model:{value:e.selectedVectordb,callback:function(t){e.selectedVectordb=t},expression:"selectedVectordb"}}):e._e()],1),void 0!=e.meta?s("v-list-tile",[s("v-btn",{on:{click:function(t){e.$refs.dialogVectorStyle.show=!0}}},[e._v("Style")]),s("dialog-vector-style",{ref:"dialogVectorStyle",attrs:{meta:e.meta},on:{changed:function(t){return e.updateMeta()}}})],1):e._e(),void 0!==e.selectedVectordb&&null!==e.selectedVectordb?s("v-list-tile",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.showLabels,expression:"showLabels"}],attrs:{type:"checkbox",id:"labels"},domProps:{checked:Array.isArray(e.showLabels)?e._i(e.showLabels,null)>-1:e.showLabels},on:{change:function(t){var s=e.showLabels,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r=null,o=e._i(s,r);a.checked?o<0&&(e.showLabels=s.concat([r])):o>-1&&(e.showLabels=s.slice(0,o).concat(s.slice(o+1)))}else e.showLabels=i}}}),s("label",{attrs:{for:"labels"}},[e._v("Show Labels")])]):e._e(),void 0!==e.selectedVectordb&&null!==e.selectedVectordb?s("a",{attrs:{href:e.urlPrefix+"../../vectordbs/"+e.selectedVectordb.name+"/package.zip",download:e.selectedVectordb.name+".zip",title:"download as ZIP-file"}},[s("v-icon",{attrs:{color:"blue"}},[e._v("cloud_download")]),e._v("(download vector layer)")],1):e._e()],1)],1),s("v-dialog",{attrs:{value:e.featureDetailsShow,lazy:"",persistent:"","max-width":"500px"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[e._v("Attributes")]),s("v-card-text",e._l(e.selectedFeatures,(function(t){return s("table",{key:t.getId()},e._l(e.table.attributes,(function(a,i){return s("tr",{key:i},[s("td",[s("b",[e._v(e._s(a))])]),s("td",[e._v(e._s(e.table.data[t.getId()][i]))])])})),0)})),0),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"green darken-1",flat:"flat"},nativeOn:{click:function(t){e.featureDetailsShow=!1}}},[e._v("Close")])],1)],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:Object.keys(e.messages).length>0,expression:"Object.keys(messages).length > 0"}],staticClass:"message_box"},e._l(e.messages,(function(t,a){return s("div",{key:a},[s("ring-loader",{staticStyle:{display:"inline-block"},attrs:{color:"#000000",size:"25px"}}),e._v(" "+e._s(t)+" ")],1)})),0),e._l(e.notifications,(function(t,a){return s("v-snackbar",{key:a,attrs:{value:"true"}},[e._v(" "+e._s(t)),s("v-btn",{attrs:{flat:"",color:"pink"},nativeOn:{click:function(t){return e.removeNotification(a)}}},[e._v("Close")])],1)}))],2)])},Ll=[],Il=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-dialog",{attrs:{value:e.show,lazy:"",persistent:"","max-width":"600px"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[e._v("Style")]),s("v-card-text",[e._v(" Change "),s("b",[e._v("stroke color")]),e._v(" ("),s("v-icon",[e._v("brush")]),e._v("), change "),s("b",[e._v("fill color")]),e._v(" ("),s("v-icon",[e._v("format_color_fill")]),e._v("). ")],1),s("hr"),s("hr"),void 0!=e.style?s("v-card-text",[s("table",[s("tr",[s("td",[s("dialog-stroke",{ref:"stroke",attrs:{stroke_color:e.style.stroke_color,stroke_width:e.style.stroke_width,stroke_dash:e.style.stroke_dash},on:{stroke:e.onStroke}}),s("v-btn",{attrs:{icon:""},on:{click:function(t){e.$refs.stroke.show=!0}}},[s("v-icon",[e._v("brush")])],1)],1),s("td",[s("b",[e._v("Stroke")])]),s("td",{staticStyle:{"margin-top":"10px","padding-left":"50px","padding-top":"10px","padding-bottom":"10px"},style:{"background-color":"white","border-top-style":"solid","border-top-color":e.style.stroke_color,"border-top-width":e.style.stroke_width+"px"}}),s("td",{staticStyle:{"padding-left":"10px","padding-right":"10px"}},[e._v("+")]),s("td",[s("dialog-color",{ref:"fill_color",model:{value:e.style.fill_color,callback:function(t){e.$set(e.style,"fill_color",t)},expression:"style.fill_color"}}),s("v-btn",{attrs:{icon:""},on:{click:function(t){e.$refs.fill_color.show=!0}}},[s("v-icon",[e._v("format_color_fill")])],1)],1),s("td",[s("b",[e._v("Fill")])]),s("td",{staticStyle:{"padding-left":"80px"},style:{"background-color":e.style.fill_color}}),s("td",{staticStyle:{"padding-left":"10px","padding-right":"10px"}},[e._v(" --\x3e ")]),s("td",{staticStyle:{background:"linear-gradient(90deg, rgba(0,0,0,1) 0%, rgba(255,255,255,1) 100%)"}},[s("span",{staticStyle:{margin:"5px","padding-left":"50px","padding-top":"10px","padding-bottom":"10px"},style:{"background-color":e.style.fill_color,"border-style":"solid","border-color":e.style.stroke_color,"border-width":e.style.stroke_width+"px"}})]),s("td",{staticStyle:{background:"linear-gradient(90deg, red, yellow, lime, aqua, blue, magenta)"}},[s("span",{staticStyle:{margin:"1px","padding-left":"60px","padding-top":"10px","padding-bottom":"10px"},style:{"background-color":e.style.fill_color,"border-style":"solid","border-radius":"20px","border-color":e.style.stroke_color,"border-width":e.style.stroke_width+"px"}})])])])]):e._e(),s("hr"),s("v-card-text",[e._v(" "+e._s(e.postMessage)+" ")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"green darken-1",flat:"flat"},nativeOn:{click:function(t){e.show=!1}}},[e._v("Discard")]),s("v-btn",{attrs:{color:"green darken-1",flat:"flat"},nativeOn:{click:function(t){return e.apply.apply(null,arguments)}}},[e._v("Apply")])],1)],1)],1)},Bl=[],Fl=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-dialog",{attrs:{value:e.show,lazy:"",persistent:"","max-width":"500px"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[e._v("Stroke")]),s("v-card-text",[e._v(" Color "),s("chrome-picker",{model:{value:e.user_stroke_colors,callback:function(t){e.user_stroke_colors=t},expression:"user_stroke_colors"}})],1),s("v-card-text",[e._v(" Width: "),s("b",[e._v(e._s(e.user_stroke_width))]),e._v(" pixel "),s("v-slider",{attrs:{min:"0",max:"20",ticks:"",step:"1"},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("v-icon",{on:{click:function(t){e.user_stroke_width>=1&&(e.user_stroke_width-=1)}}},[e._v(" remove ")])]},proxy:!0},{key:"append",fn:function(){return[s("v-icon",{on:{click:function(t){e.user_stroke_width<=19&&(e.user_stroke_width+=1)}}},[e._v(" add ")])]},proxy:!0}]),model:{value:e.user_stroke_width,callback:function(t){e.user_stroke_width=t},expression:"user_stroke_width"}})],1),s("v-card-text",[s("v-select",{attrs:{items:e.line_styles,box:"",label:"Line style"},model:{value:e.line_style,callback:function(t){e.line_style=t},expression:"line_style"}}),"dashed"===e.line_style||"dashed 2"===e.line_style||"dashed 3"===e.line_style?s("div",["dashed"===e.line_style?s("span",[e._v("Dash length: ")]):s("span",[e._v("First dash length: ")]),s("b",[e._v(e._s(e.user_stroke_dash0))]),e._v(" pixel "),s("v-slider",{attrs:{min:"0",max:"100",ticks:"",step:"1"},model:{value:e.user_stroke_dash0,callback:function(t){e.user_stroke_dash0=t},expression:"user_stroke_dash0"}})],1):e._e(),"dashed 2"===e.line_style||"dashed 3"===e.line_style?s("div",[e._v(" Second dash length: "),s("b",[e._v(e._s(e.user_stroke_dash1))]),e._v(" pixel "),s("v-slider",{attrs:{min:"0",max:"100",ticks:"",step:"1"},model:{value:e.user_stroke_dash1,callback:function(t){e.user_stroke_dash1=t},expression:"user_stroke_dash1"}})],1):e._e(),"dashed 3"===e.line_style?s("div",[e._v(" Third dash length: "),s("b",[e._v(e._s(e.user_stroke_dash2))]),e._v(" pixel "),s("v-slider",{attrs:{min:"0",max:"100",ticks:"",step:"1"},model:{value:e.user_stroke_dash2,callback:function(t){e.user_stroke_dash2=t},expression:"user_stroke_dash2"}})],1):e._e()],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"green darken-1",flat:"flat"},nativeOn:{click:function(t){e.show=!1}}},[e._v("Cancel")]),s("v-btn",{attrs:{color:"green darken-1",flat:"flat"},nativeOn:{click:function(t){return e.commit.apply(null,arguments)}}},[e._v("Apply")])],1)],1)],1)},Vl=[],Ul=s("c345"),Wl={name:"dialog-stoke",props:{stroke_color:{type:String,required:!0},stroke_width:{type:Number,required:!0},stroke_dash:{type:Array,required:!0}},components:{"chrome-picker":Ul["Chrome"]},data:function(){return{show:!1,user_stroke_colors:"#FF0000FF",user_stroke_width:2,line_styles:["solid","dashed","dashed 2","dashed 3"],line_style:"solid",user_stroke_dash0:1,user_stroke_dash1:1,user_stroke_dash2:1}},computed:{},methods:{commit:function(){var e=void 0===this.user_stroke_colors.hex8?this.user_stroke_colors:this.user_stroke_colors.hex8,t={stroke_color:e,stroke_width:this.user_stroke_width};"solid"===this.line_style?t.stroke_dash=[]:"dashed"===this.line_style?t.stroke_dash=[this.user_stroke_dash0]:"dashed 2"===this.line_style?t.stroke_dash=[this.user_stroke_dash0,this.user_stroke_dash1]:"dashed 3"===this.line_style&&(t.stroke_dash=[this.user_stroke_dash0,this.user_stroke_dash1,this.user_stroke_dash2]),this.$emit("stroke",t),this.show=!1},onStrokeWidthDecrement:function(){},onStrokeWidthIncrement:function(){}},watch:{stroke_color:{immediate:!0,handler:function(){this.user_stroke_colors=this.stroke_color}},stroke_width:{immediate:!0,handler:function(){console.log(this.stroke_width),this.user_stroke_width=this.stroke_width}},stroke_dash:{immediate:!0,handler:function(){void 0===this.stroke_dash||0===this.stroke_dash.length?this.line_style="solid":1===this.stroke_dash.length?(this.line_style="dashed",this.user_stroke_dash0=this.stroke_dash[0]):2===this.stroke_dash.length?(this.line_style="dashed 2",this.user_stroke_dash0=this.stroke_dash[0],this.user_stroke_dash1=this.stroke_dash[1]):this.stroke_dash.length>=3&&(this.line_style="dashed 3",this.user_stroke_dash0=this.stroke_dash[0],this.user_stroke_dash1=this.stroke_dash[1],this.user_stroke_dash2=this.stroke_dash[2])}}},mounted:function(){}},Gl=Wl,ql=Object(p["a"])(Gl,Fl,Vl,!1,null,"57db8926",null),Hl=ql.exports,Jl=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-dialog",{attrs:{value:e.show,lazy:"",persistent:"","max-width":"500px"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[e._v("Color")]),s("v-card-text",[s("chrome-picker",{model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"green darken-1",flat:"flat"},nativeOn:{click:function(t){e.show=!1}}},[e._v("Cancel")]),s("v-btn",{attrs:{color:"green darken-1",flat:"flat"},nativeOn:{click:function(t){return e.commit.apply(null,arguments)}}},[e._v("Apply")])],1)],1)],1)},Ql=[],Yl={name:"dialog-color",props:{value:{type:String,required:!0}},components:{"chrome-picker":Ul["Chrome"]},data:function(){return{show:!1,colors:"#FF0000FF"}},computed:{},methods:{commit:function(){void 0!==this.colors.hex8&&this.$emit("input",this.colors.hex8),this.show=!1}},watch:{value:{immediate:!0,handler:function(){this.colors=this.value}}},mounted:function(){}},Kl=Yl,Xl=Object(p["a"])(Kl,Jl,Ql,!1,null,"28447ec3",null),Zl=Xl.exports;function ed(e,t,s,a,i,r,o){try{var n=e[r](o),c=n.value}catch(l){return void s(l)}n.done?t(c):Promise.resolve(c).then(a,i)}function td(e){return function(){var t=this,s=arguments;return new Promise((function(a,i){var r=e.apply(t,s);function o(e){ed(r,a,i,o,n,"next",e)}function n(e){ed(r,a,i,o,n,"throw",e)}o(void 0)}))}}var sd={name:"dialog-vector-style",props:["meta"],components:{"dialog-stroke":Hl,"dialog-color":Zl},data:function(){return{show:!1,postMessage:void 0,style:void 0}},computed:{},methods:{apply:function(){var e=this;return td(oe.a.mark((function t(){var s,a;return oe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.postMessage="Sending style...",s={style:e.style},a=e.$store.getters.apiUrl("vectordbs/"+e.meta.name),t.next=6,B.a.post(a,s);case 6:e.postMessage=void 0,e.$emit("changed"),e.show=!1,t.next=16;break;case 11:t.prev=11,t.t0=t["catch"](0),e.postMessage="Error sending style.",console.log(t.t0),e.$emit("changed");case 16:case"end":return t.stop()}}),t,null,[[0,11]])})))()},onStroke:function(e){this.style.stroke_color=e.stroke_color,this.style.stroke_width=e.stroke_width,this.style.stroke_dash=e.stroke_dash}},watch:{meta:{immediate:!0,handler:function(){var e=void 0===this.meta?void 0:this.meta.style;void 0===e&&(e={type:"basic"}),void 0===e.stroke_color&&(e.stroke_color="#772B2BFF"),void 0===e.stroke_width&&(e.stroke_width=2),void 0===e.stroke_dash&&(e.stroke_dash=[]),void 0===e.fill_color&&(e.fill_color="#772B2BFF"),this.style=e}}},mounted:function(){}},ad=sd,id=Object(p["a"])(ad,Il,Bl,!1,null,"4d50630a",null),rd=id.exports;function od(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function nd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?od(Object(s),!0).forEach((function(t){cd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):od(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function cd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ld(e,t,s,a,i,r,o){try{var n=e[r](o),c=n.value}catch(l){return void s(l)}n.done?t(c):Promise.resolve(c).then(a,i)}function dd(e){return function(){var t=this,s=arguments;return new Promise((function(a,i){var r=e.apply(t,s);function o(e){ld(r,a,i,o,n,"next",e)}function n(e){ld(r,a,i,o,n,"throw",e)}o(void 0)}))}}var ud=function(){var e=(new Intl.Collator).compare;return function(t,s){return e(void 0===t.title?t.name:t.title,void 0===s.title?s.name:s.title)}}(),vd={name:"admin-vectorviewer",props:["vectordb"],components:{RingLoader:T["a"],Multiselect:C.a,"dialog-vector-style":rd},data:function(){return{messages:{},messagesIndex:0,notifications:{},notificationsIndex:0,olmap:void 0,vectorSource:void 0,prevVectorSourceExt:void 0,vectorLayer:void 0,vectorLabelLayer:void 0,filter_focus:!1,vectorWmsLayer:void 0,meta:void 0,geojson:void 0,table:{attibutes:[],data:[]},selectedVectordb:void 0,showLabels:!1,featureDetailsShow:!1,selectedFeatures:[]}},methods:{addnotification:function(e){var t=this.notificationsIndex++;return a["default"].set(this.notifications,t,e),t},removeNotification:function(e){a["default"].delete(this.notifications,e)},addMessage:function(e){var t=this.messagesIndex++;return a["default"].set(this.messages,t,e),t},removeMessage:function(e){a["default"].delete(this.messages,e)},loadGeojson:function(){var e=this,t=this.addMessage("loading vector data of layer ..."),s=this.$store.getters.apiUrl("vectordbs/"+this.meta.name+"/geometry.json?epsg=3857");B.a.get(s).then((function(s){e.geojson=s.data,e.removeMessage(t),e.refreshVectorSource()})).catch((function(){e.addnotification("ERROR vector data of layer"),e.removeMessage(t)}))},loadTable:function(){var e=this,t=this.addMessage("loading table data of layer ..."),s=this.$store.getters.apiUrl("vectordbs/"+this.meta.name+"/table.json");B.a.get(s).then((function(s){e.table=s.data,e.removeMessage(t)})).catch((function(){e.addnotification("ERROR table data of layer"),e.removeMessage(t)}))},refreshVectorSource:function(){var e=void 0===this.geojson?[]:(new xn["a"]).readFeatures(this.geojson);if(this.vectorSource=new Tr["a"]({features:e}),this.vectorLayer.setSource(this.vectorSource),this.vectorLabelLayer.setSource(this.vectorSource),e.length>0){var t=this.vectorSource.getExtent();void 0!==this.prevVectorSourceExt&&this.prevVectorSourceExt[0]===t[0]&&this.prevVectorSourceExt[1]===t[1]&&this.prevVectorSourceExt[2]===t[2]&&this.prevVectorSourceExt[3]===t[3]||(console.log("fit"),this.olmap.getView().fit(t),this.prevVectorSourceExt=t)}},refreshRoute:function(){if(void 0!=this.vectordbs){var e="/vectorviewer";void 0!==this.selectedVectordb&&(e+="/"+this.selectedVectordb.name),e!==this.$router.currentRoute.path&&this.$router.push({path:e})}},updateSelectedVectordb:function(){var e=this;if(void 0!==this.vectordbs&&void 0!==this.vectordb){var t=this.vectordbs.find((function(t){return t.name===e.vectordb}));void 0===t?(this.addnotification("vectordb not found: "+this.vectordb),this.selectedVectordb=void 0):this.selectedVectordb=t}},updateMeta:function(){var e=this;return dd(oe.a.mark((function t(){var s,a,i;return oe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(void 0===e.selectedVectordb||null===e.selectedVectordb){t.next=16;break}return s=e.addMessage("loading table data of layer ..."),a=e.$store.getters.apiUrl("vectordbs/"+e.selectedVectordb.name),e.meta=void 0,t.prev=4,t.next=7,B.a.get(a);case 7:i=t.sent,e.meta=i.data.vectordb,e.removeMessage(s),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](4),e.addnotification("ERROR meta data of layer"),e.removeMessage(s);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})))()}},computed:nd(nd({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}})),{},{vectordbs:function(){var e=this.$store.state.vectordbs.data;return void 0===e?void 0:e.slice().sort(ud)},vectordbsError:{get:function(){return"error"===this.$store.state.vectordbs.mode&&this.$store.state.vectordbs.messageActive},set:function(e){0==e&&this.$store.commit("vectordbs/closeMessage")}},vectordbsErrorMessage:function(){return this.$store.state.vectordbs.message},urlPrefix:function(){return this.$store.state.identity.urlPrefix}}),watch:{vectordbs:function(){this.updateSelectedVectordb()},vectordb:{immediate:!0,handler:function(){this.updateSelectedVectordb()}},selectedVectordb:{immediate:!0,handler:function(){this.updateMeta(),this.refreshRoute()}},meta:function(){if(void 0!==this.meta){this.loadGeojson(),this.loadTable();var e=new pn["a"]({url:this.$store.getters.apiUrl("vectordbs/"+this.meta.name+"/wms"),ratio:1,params:{rev:Date.now()}});this.vectorWmsLayer.setSource(e)}else this.geojson=void 0,this.table={attibutes:[],data:[]},this.refreshVectorSource(),this.vectorWmsLayer.setSource(void 0)},showLabels:function(){this.vectorLabelLayer.setVisible(this.showLabels)}},mounted:function(){var e=this,t=this;this.$store.dispatch("vectordbs/init"),document.getElementById("foot-start-1").innerHTML="WGS 84/Pseudo-Mercator",document.getElementById("foot-end-1").innerHTML="";var s=new Lr["a"]({color:"rgba(255,255,255,0.0)"}),a=new Ir["a"]({color:"rgb(95, 112, 245)",width:2}),i=new Ir["a"]({color:"rgb(200, 20, 35)",width:2});function r(){return new Br["c"]({image:new gn["a"]({stroke:i,points:4,radius:10,radius2:0,angle:Math.PI/4}),fill:s,stroke:a})}this.vectorLayer=new mn["a"]({style:r});var o=new Br["c"]({text:new yn["a"]({font:"16px sans-serif",fill:new Lr["a"]({color:"rgba(0, 0, 0, 1)"}),stroke:new Ir["a"]({color:"rgba(255, 255, 255, 0.8)",width:3}),overflow:!0})});this.vectorLabelLayer=new mn["a"]({style:function(t){return o.getText().setText(t.get(e.meta.name_attribute)),o},declutter:!0,renderMode:"image"});var n=new Mr["b"]({}),c=new Cr["a"]({source:n});c.setVisible(!1),this.vectorLabelLayer.setVisible(this.showLabels),this.vectorWmsLayer=new vn["a"]({}),t.olmap=new Or["a"]({target:"olmap-vectorviewer",layers:[c,this.vectorWmsLayer,this.vectorLabelLayer],view:new Rr["a"]({center:jr["h"]([11,20.82]),zoom:3}),controls:Dr["a"]({attributionOptions:{collapsible:!1}}).extend([new zr["a"],new Nr["a"]({projection:"EPSG:4326",target:"foot-end-1",coordinateFormat:function(e){return Object(Vr["j"])(e,4)}})])}),t.olmap.on("click",(function(e){var s=t.vectorSource.getClosestFeatureToCoordinate(e.coordinate);null!==s&&(t.selectedFeatures=[s],t.featureDetailsShow=!0)})),this.refreshVectorSource()},destroyed:function(){document.getElementById("foot-start-1").innerHTML="?",document.getElementById("foot-end-1").innerHTML="?"}},md=vd,pd=(s("1537"),s("799c"),Object(p["a"])(md,Nl,Ll,!1,null,"e26a3438",null)),_d=pd.exports;a["default"].use(h["a"]);var fd=new h["a"]({routes:[{path:"/",component:k},{path:"/layers",component:A,children:[{path:"overview",component:ee},{path:"rasterdbs/:rasterdb",component:cs,props:!0},{path:"pointdbs/:pointdb",component:Zi,props:!0},{path:"pointclouds/:pointcloud",component:Hs,props:!0},{path:"voxeldbs/:voxeldb",component:ja,props:!0},{path:"vectordbs/:vectordb",component:Wi,props:!0},{path:"poi_groups/:poi_group",component:cr,props:!0},{path:"roi_groups/:roi_group",component:hr,props:!0},{path:"*",redirect:"overview"},{path:"",redirect:"overview"}]},{path:"/explorer",component:Kr},{path:"/viewer/:rasterdb?",component:$n,props:function(e){return{rasterdb:e.params.rasterdb,timestamp:e.query.timestamp,product:e.query.product,vectordb:e.query.vectordb}}},{path:"/upload",component:tc},{path:"/tools",component:Uc,children:[{path:"info",component:Qc},{path:"status",component:al},{path:"task",component:ul},{path:"accounts",component:Ac},{path:"vectorviewer/:vectordb?",component:_d,props:!0},{path:"public",component:Ml},{path:"*",redirect:"info"},{path:"",redirect:"info"}]},{path:"/files",component:zl},{path:"/vectorviewer/:vectordb?",component:_d,props:!0},{path:"*",redirect:"/"}]}),hd={data:void 0,mode:"init",message:"",messageActive:!1},bd={names:function(e){return void 0===e.data?[]:e.data.map((function(e){return e.name}))}},gd={init:function(e){var t=e.state,s=e.dispatch,a=t.mode;"init"!==a&&"error"!==a||s("refresh")},refresh:function(e){var t=e.state,s=e.commit,a=e.rootState;t.mode="load",B.a.get(a.identity.urlPrefix+"../../rasterdbs.json?vuex").then((function(e){t.data=e.data.rasterdbs,t.mode="ready"})).catch((function(e){t.mode="error",s("setMessage",e)}))}},yd={setMessage:function(e,t){e.message=t,e.messageActive=!0},closeMessage:function(e){e.messageActive=!1}},xd={namespaced:!0,state:hd,getters:bd,actions:gd,mutations:yd},wd={data:void 0,mode:"init",message:"",messageActive:!1},kd={names:function(e){return void 0===e.data?[]:e.data.map((function(e){return e.name}))}},Ed={init:function(e){var t=e.state,s=e.dispatch,a=t.mode;"init"!==a&&"error"!==a||s("refresh")},refresh:function(e){var t=e.state,s=e.commit,a=e.rootState;t.mode="load",B.a.get(a.identity.urlPrefix+"../../pointclouds?vuex").then((function(e){t.data=e.data.pointclouds,t.mode="ready"})).catch((function(e){t.mode="error",s("setMessage",e)}))}},Sd={setMessage:function(e,t){e.message=t,e.messageActive=!0},closeMessage:function(e){e.messageActive=!1}},Od={namespaced:!0,state:wd,getters:kd,actions:Ed,mutations:Sd},Pd={data:void 0,mode:"init",message:"",messageActive:!1},Cd={names:function(e){return void 0===e.data?[]:e.data.map((function(e){return e.name}))}},Td={init:function(e){var t=e.state,s=e.dispatch,a=t.mode;"init"!==a&&"error"!==a||s("refresh")},refresh:function(e){var t=e.state,s=e.commit,a=e.rootState;t.mode="load",B.a.get(a.identity.urlPrefix+"../../voxeldbs?vuex").then((function(e){t.data=e.data.voxeldbs,t.mode="ready"})).catch((function(e){t.mode="error",s("setMessage",e)}))}},Md={setMessage:function(e,t){e.message=t,e.messageActive=!0},closeMessage:function(e){e.messageActive=!1}},Rd={namespaced:!0,state:Pd,getters:Cd,actions:Td,mutations:Md},jd={data:void 0,mode:"init",message:"",messageActive:!1},$d={},Ad={init:function(e){var t=e.state,s=e.dispatch,a=t.mode;"init"!==a&&"error"!==a||s("refresh")},refresh:function(e){var t=e.state,s=e.commit,a=e.rootState;t.mode="load",B.a.get(a.identity.urlPrefix+"../../vectordbs?vuex").then((function(e){t.data=e.data.vectordbs,t.mode="ready"})).catch((function(e){t.mode="error",s("setMessage",e)}))}},Dd={setMessage:function(e,t){e.message=t,e.messageActive=!0},closeMessage:function(e){e.messageActive=!1}},zd={namespaced:!0,state:jd,getters:$d,actions:Ad,mutations:Dd},Nd={data:void 0,mode:"init",message:"",messageActive:!1},Ld={names:function(e){return void 0===e.data?[]:e.data.map((function(e){return e.name}))}},Id={init:function(e){var t=e.state,s=e.dispatch,a=t.mode;"init"!==a&&"error"!==a||s("refresh")},refresh:function(e){var t=e.state,s=e.commit,a=e.rootState;t.mode="load",B.a.get(a.identity.urlPrefix+"../../pointdbs?vuex").then((function(e){t.data=e.data.pointdbs,t.mode="ready"})).catch((function(e){t.mode="error",s("setMessage",e)}))}},Bd={setMessage:function(e,t){e.message=t,e.messageActive=!0},closeMessage:function(e){e.messageActive=!1}},Fd={namespaced:!0,state:Nd,getters:Ld,actions:Id,mutations:Bd},Vd=!1,Ud={data:void 0,mode:"init",message:"",messageActive:!1,transactionCount:0,transactionRunCount:0,urlPrefix:Vd?"http://127.0.0.1:8081/":""},Wd={isAdmin:function(e){return void 0!==e.data&&(void 0!==e.data.roles&&e.data.roles.includes("admin"))}},Gd={closeMessage:function(e){e.messageActive=!1},incrementTransactionCount:function(e){e.transactionCount++},incrementTransactionRunCount:function(e){e.transactionRunCount++},decrementTransactionRunCount:function(e){e.transactionRunCount--},setUrlPrefix:function(e,t){e.urlPrefix=t},setData:function(e,t){e.data=t,e.mode="ready"},setError:function(e,t){e.message=t,e.messageActive=!0,e.mode="error"}},qd={init:function(e){var t=e.state,s=e.dispatch,a=t.mode;"init"!==a&&"error"!==a||s("refresh")},refresh:function(e){var t=e.state,s=e.commit,a=e.rootState;t.mode="load",B.a.get(a.identity.urlPrefix+"../../api/identity").then((function(e){s("setData",e.data)})).catch((function(e){s("setError",Hd(e))}))}};function Hd(e){return e.response?e.response.data?e.response.data:e.response:e.request?"network error":e.message?e.message:e}var Jd={namespaced:!0,state:Ud,getters:Wd,mutations:Gd,actions:qd},Qd={data:void 0,mode:"init",message:"",messageActive:!1},Yd={names:function(e){return void 0===e.data?[]:e.data.map((function(e){return e.name}))}},Kd={init:function(e){var t=e.state,s=e.dispatch,a=t.mode;"init"!==a&&"error"!==a||s("refresh")},refresh:function(e){var t=e.state,s=e.commit,a=e.rootState;t.mode="load",B.a.get(a.identity.urlPrefix+"../../poi_groups?vuex").then((function(e){t.data=e.data.poi_groups,t.mode="ready"})).catch((function(e){t.mode="error",s("setMessage",e)}))}},Xd={setMessage:function(e,t){e.message=t,e.messageActive=!0},closeMessage:function(e){e.messageActive=!1}},Zd={namespaced:!0,state:Qd,getters:Yd,actions:Kd,mutations:Xd},eu={data:void 0,mode:"init",message:"",messageActive:!1},tu={names:function(e){return void 0===e.data?[]:e.data.map((function(e){return e.name}))}},su={init:function(e){var t=e.state,s=e.dispatch,a=t.mode;"init"!==a&&"error"!==a||s("refresh")},refresh:function(e){var t=e.state,s=e.commit,a=e.rootState;t.mode="load",B.a.get(a.identity.urlPrefix+"../../roi_groups?vuex").then((function(e){t.data=e.data.roi_groups,t.mode="ready"})).catch((function(e){t.mode="error",s("setMessage",e)}))}},au={setMessage:function(e,t){e.message=t,e.messageActive=!0},closeMessage:function(e){e.messageActive=!1}},iu={namespaced:!0,state:eu,getters:tu,actions:su,mutations:au},ru={data:void 0,mode:"init",message:"",messageActive:!1},ou={},nu={init:function(e){var t=e.state,s=e.dispatch,a=t.mode;"init"!==a&&"error"!==a||s("refresh")},refresh:function(e){var t=e.state,s=e.commit,a=e.rootState;t.mode="load",B.a.get(a.identity.urlPrefix+"../../api/layer_tags?vuex").then((function(e){t.data=e.data.layer_tags,t.mode="ready"})).catch((function(e){t.mode="error",s("setMessage",e)}))}},cu={setMessage:function(e,t){e.message=t,e.messageActive=!0},closeMessage:function(e){e.messageActive=!1}},lu={namespaced:!0,state:ru,getters:ou,actions:nu,mutations:cu},du={data:void 0,mode:"init",message:"",messageActive:!1},uu={},vu={setMessage:function(e,t){e.message=t,e.messageActive=!0},closeMessage:function(e){e.messageActive=!1},setData:function(e,t){e.data=t,e.mode="ready"},setError:function(e,t){e.message=t,e.messageActive=!0,e.mode="error"}},mu={init:function(e){var t=e.state,s=e.dispatch,a=t.mode;"init"!==a&&"error"!==a||s("refresh")},refresh:function(e){var t=e.state,s=e.commit,a=e.rootState;t.mode="load",B.a.get(a.identity.urlPrefix+"../../api/roles").then((function(e){s("setData",e.data.roles)})).catch((function(e){s("setError",pu(e))}))}};function pu(e){return e.response?e.response.data?e.response.data:e.response:e.request?"network error":e.message?e.message:e}var _u={namespaced:!0,state:du,getters:uu,mutations:vu,actions:mu};a["default"].use(c["a"]);var fu=!1,hu={rasterdbs:xd,pointclouds:Od,voxeldbs:Rd,vectordbs:zd,pointdbs:Fd,identity:Jd,poi_groups:Zd,roi_groups:iu,layer_tags:lu,acl_roles:_u},bu={},gu={apiUrl:function(){return function(e){return fu?"http://127.0.0.1:8081/"+e:"../../"+e}}},yu={init:function(e){var t=e.dispatch;t("identity/init")}},xu={},wu=new c["a"].Store({modules:hu,state:bu,getters:gu,actions:yu,mutations:xu});function ku(e){while(void 0!==e&&null!==e){if(e.classList.contains("uploader-drop"))return!0;e=e.parentElement}return!1}a["default"].config.productionTip=!1,window.addEventListener("dragenter",(function(e){ku(e.target)||(e.preventDefault(),e.dataTransfer.effectAllowed="none",e.dataTransfer.dropEffect="none")}),!1),window.addEventListener("dragover",(function(e){ku(e.target)||(e.preventDefault(),e.dataTransfer.effectAllowed="none",e.dataTransfer.dropEffect="none")})),window.addEventListener("drop",(function(e){ku(e.target)||(e.preventDefault(),e.dataTransfer.effectAllowed="none",e.dataTransfer.dropEffect="none")})),window.addEventListener("dragstart",(function(e){e.preventDefault(),e.dataTransfer.effectAllowed="none",e.dataTransfer.dropEffect="none"})),new a["default"]({router:fd,store:wu,render:function(e){return e(f)}}).$mount("#app")},5731:function(e,t,s){"use strict";s("7e98")},"5d5c":function(e,t,s){},"5da2":function(e,t,s){"use strict";s("90cc")},6541:function(e,t,s){"use strict";s("3d53")},"65d7":function(e,t,s){},"65e2":function(e,t,s){"use strict";s("2195")},6614:function(e,t,s){},"6ec4":function(e,t,s){"use strict";s("65d7")},"6fa1":function(e,t,s){},"799c":function(e,t,s){"use strict";s("8101")},"79ca":function(e,t,s){"use strict";s("5d5c")},"7e98":function(e,t,s){},"7f12":function(e,t,s){},8101:function(e,t,s){},"84f2":function(e,t,s){},"85ec":function(e,t,s){},8777:function(e,t,s){"use strict";s("3a90")},8890:function(e,t,s){"use strict";s("c7e8")},"8c2a":function(e,t,s){"use strict";s("f195")},"8c49":function(e,t,s){},"8c53":function(e,t,s){"use strict";s("c715")},"8cff":function(e,t,s){},"8f4a":function(e,t,s){"use strict";s("27cf")},"90cc":function(e,t,s){},"951c":function(e,t,s){"use strict";s("b754")},9788:function(e,t,s){},"97dc":function(e,t,s){"use strict";s("f950")},9883:function(e,t,s){"use strict";s("2b55")},9981:function(e,t,s){"use strict";s("bb9d")},"9a17":function(e,t,s){"use strict";s("3a26")},"9ff1":function(e,t,s){"use strict";s("6614")},a381:function(e,t,s){},a3ae:function(e,t,s){},a468:function(e,t,s){"use strict";s("402f")},a6e5:function(e,t,s){},a89d:function(e,t,s){},abea:function(e,t,s){},ad60:function(e,t,s){"use strict";s("0598")},adf7:function(e,t,s){},ae68:function(e,t,s){},b754:function(e,t,s){},b889:function(e,t,s){"use strict";s("398d")},b91f:function(e,t,s){},bb9d:function(e,t,s){},bf13:function(e,t,s){},bfbd:function(e,t,s){"use strict";s("2505")},c659:function(e,t,s){"use strict";s("b91f")},c715:function(e,t,s){},c7e8:function(e,t,s){},ca19:function(e,t,s){"use strict";s("0d14")},cb36:function(e,t,s){"use strict";s("4c5a")},dc18:function(e,t,s){"use strict";s("6fa1")},dc84:function(e,t,s){},dd15:function(e,t,s){"use strict";s("a381")},de3b:function(e,t,s){"use strict";s("8cff")},df43:function(e,t,s){"use strict";s("f392")},e1e9:function(e,t,s){"use strict";s("42b2")},e407:function(e,t,s){"use strict";s("ed23")},e673:function(e,t,s){},e7e5:function(e,t,s){"use strict";s("a6e5")},ea1d:function(e,t,s){"use strict";s("22ec")},ed23:function(e,t,s){},f195:function(e,t,s){},f392:function(e,t,s){},f950:function(e,t,s){},fcb8:function(e,t,s){"use strict";s("ae68")}});