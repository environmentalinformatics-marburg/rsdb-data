(function(e){function t(t){for(var a,o,n=t[0],c=t[1],l=t[2],u=0,v=[];u<n.length;u++)o=n[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&v.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(v.length)v.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],a=!0,n=1;n<s.length;n++){var c=s[n];0!==i[c]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=s[0]))}return e}var a={},i={app:0},r=[];function o(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=a,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(s,a,function(t){return e[t]}.bind(null,a));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=t,n=n.slice();for(var l=0;l<n.length;l++)t(n[l]);var d=c;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";var a=s("85ec"),i=s.n(a);i.a},"0abd":function(e,t,s){"use strict";var a=s("f45c"),i=s.n(a);i.a},"0e36":function(e,t,s){"use strict";var a=s("e673"),i=s.n(a);i.a},"11d1":function(e,t,s){"use strict";var a=s("bfd8"),i=s.n(a);i.a},"12f3":function(e,t,s){"use strict";var a=s("d57c"),i=s.n(a);i.a},"14a1":function(e,t,s){"use strict";var a=s("9985"),i=s.n(a);i.a},"15ef":function(e,t,s){"use strict";var a=s("772a"),i=s.n(a);i.a},1725:function(e,t,s){"use strict";var a=s("822c"),i=s.n(a);i.a},"1c5a":function(e,t,s){"use strict";var a=s("9ed1"),i=s.n(a);i.a},"1d7a":function(e,t,s){},"1e89":function(e,t,s){},"22ec":function(e,t,s){},"26d7":function(e,t,s){},"2b14":function(e,t,s){},"2b55":function(e,t,s){},"2c83":function(e,t,s){},"2c93":function(e,t,s){},"2f00":function(e,t,s){"use strict";var a=s("5479"),i=s.n(a);i.a},"3a4b":function(e,t,s){"use strict";var a=s("2c93"),i=s.n(a);i.a},"3d53":function(e,t,s){},"453f":function(e,t,s){"use strict";var a=s("f622"),i=s.n(a);i.a},"4c5a":function(e,t,s){},"4cd6":function(e,t,s){},"4dd6":function(e,t,s){},"4e24":function(e,t,s){},"4e42":function(e,t,s){},"4f4e":function(e,t,s){"use strict";var a=s("4e24"),i=s.n(a);i.a},5479:function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("e792");var a=s("2b0e"),i=s("ce5b"),r=s.n(i);s("bf40");a["default"].use(r.a,{});var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",{attrs:{light:""}},[s("div",{staticClass:"grid-container"},[s("div",{staticClass:"grid-item-head"},[s("v-tabs",{staticStyle:{position:"relative"},attrs:{dark:"",color:"blue-grey lighten-1","slider-color":"yellow"}},[e._l(e.tabs,(function(t){return s("v-tab",{key:t.name,attrs:{to:"/"+(void 0===t.target?t.name:t.target),ripple:"",replace:""}},[void 0!==t.icon?s("v-icon",[e._v(e._s(t.icon))]):e._e(),e._v(" "+e._s(t.title)+" ")],1)})),void 0===e.identity||"login"!==e.identity.auth_method&&"jws"!==e.identity.auth_method?e._e():s("span",{staticStyle:{position:"absolute",right:"5px",top:"5px"}},[s("a",{on:{click:e.local_logout}},[s("v-icon",[e._v("meeting_room")]),e._v(" logout ")],1)])],2)],1),s("router-view",{staticClass:"grid-item-content"}),s("div",{staticClass:"grid-item-foot"},[s("span",{attrs:{id:"foot-start-1"}},[e._v("?")]),s("span",{attrs:{id:"foot-end-1"}},[e._v("?")])])],1),e.isInternetExplorer?s("div",{staticClass:"internet-explorer"},[s("h3",{staticStyle:{color:"rgba(197, 32, 32, 1)"}},[e._v("Microsoft Internet Explorer is not usable for this site.")]),e._v(" Use a browser that conforms to current web standards: "),s("br"),e._v("Mozilla Firefox "),s("br"),e._v("Google Chrome "),s("br"),e._v("Microsoft Edge ")]):e._e()])},n=[],c=s("2f62");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var v={name:"App",data:function(){return{}},methods:{local_logout:function(){window.location.href="/logout?ref="+encodeURIComponent(window.location.href)}},computed:d(d({},Object(c["b"])({isAdmin:"identity/isAdmin"})),{},{identity:function(){return this.$store.state.identity.data},tabs:function(){var e=[];return e.push({name:"overview",title:"Overview",target:"",icon:"home"}),e.push({name:"layers",title:"Layers",icon:"photo_library"}),e.push({name:"explorer",title:"Explorer",icon:"explore"}),e.push({name:"viewer",title:"Viewer",icon:"zoom_in"}),e.push({name:"files",title:"Files",icon:"source"}),e.push({name:"tools",title:"Tools",icon:"build"}),e},isInternetExplorer:function(){return void 0!==window.document.documentMode}}),mounted:function(){this.$store.dispatch("init")}},m=v,p=(s("034f"),s("2877")),_=Object(p["a"])(m,o,n,!1,null,null,null),f=_.exports,h=s("8c4f"),b=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"innergrid-container"},[s("div",{staticClass:"innergrid-item-main"},[s("v-layout",[s("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[s("v-card",[s("h1",{staticClass:"headline mb-0"},[e._v("Remote Sensing Database")]),s("v-divider"),s("v-card-title",[s("span",{staticClass:"component"},[s("a",{attrs:{href:"#/layers"}},[s("div",[s("img",{attrs:{src:"images/layers.png"}})]),s("div",{staticClass:"component-text"},[e._v("Layers")])])]),s("span",{staticClass:"component"},[s("a",{attrs:{href:"#/explorer"}},[s("div",[s("img",{attrs:{src:"images/catalog2.png"}})]),s("div",{staticClass:"component-text"},[e._v("Map Explorer")])])]),s("span",{staticClass:"component"},[s("a",{attrs:{href:"#/viewer"}},[s("div",[s("img",{attrs:{src:"images/rasterdb_image.png"}})]),s("div",{staticClass:"component-text"},[e._v("Layer Viewer")])])]),s("span",{staticClass:"component"},[s("a",{attrs:{href:e.old_interface_url,target:"_blank"}},[s("div",[s("img",{attrs:{src:"images/old_interface.png"}})]),s("div",{staticClass:"component-text"},[e._v("old web interface")])])])]),s("v-divider"),s("v-card-title",[s("span",{staticClass:"component"},[s("a",{attrs:{href:e.indices_processing_url,target:"_blank"}},[s("div",[s("img",{attrs:{src:"images/lidar_indices_processing.png"}})]),s("div",{staticClass:"component-text"},[e._v("LiDAR indices processing")])])]),s("span",{staticClass:"component"},[s("a",{attrs:{href:e.indices_documentation_url,target:"_blank"}},[s("div",[s("img",{attrs:{src:"images/lidar_indices_documentation.png"}})]),s("div",{staticClass:"component-text"},[e._v("LiDAR indices documentation")])])]),s("span",{staticClass:"component"},[s("a",{attrs:{href:"https://environmentalinformatics-marburg.github.io/rsdb",target:"_blank"}},[s("div",[s("img",{attrs:{src:"images/rsdb_documentation.png"}})]),s("div",{staticClass:"component-text"},[e._v("RSDB documentation")])])]),s("span",{staticClass:"component"},[s("a",{attrs:{href:"https://github.com/environmentalinformatics-marburg/rsdb/wiki",target:"_blank"}},[s("div",[s("img",{attrs:{src:"images/rsdb_wiki.png"}})]),s("div",{staticClass:"component-text"},[e._v("RSDB wiki")])])])])],1)],1)],1)],1)])},g=[],y={name:"admin-overview",data:function(){return{}},methods:{},computed:{old_interface_url:function(){return this.$store.getters.apiUrl("web")},indices_processing_url:function(){return this.$store.getters.apiUrl("web/lidar_indices/lidar_indices.html")},indices_documentation_url:function(){return this.$store.getters.apiUrl("web/lidar_indices_description/lidar_indices_description.html")}},mounted:function(){}},x=y,w=(s("ea1d"),Object(p["a"])(x,b,g,!1,null,"9103dfd4",null)),k=w.exports,E=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("splitpanes",{staticClass:"rsdb-theme"},[s("pane",{staticClass:"split-nav",attrs:{"min-size":"10",size:"20"}},[s("v-list",{staticClass:"split-nav-list",attrs:{dense:""}},[e._l(e.items,(function(t){return s("v-list-tile",{key:t.name,class:{activeNavigation:e.navigation===t.name},attrs:{to:"/layers/"+t.name,replace:""},on:{click:function(s){e.navigation=t.name}}},[s("v-list-tile-action",[s("v-icon",[e._v(e._s(t.icon))])],1),s("v-list-tile-content",[s("v-list-tile-title",[e._v(e._s(t.title))])],1)],1)})),s("v-divider"),s("v-list-tile",[s("v-btn",{attrs:{flat:"",icon:"",color:"green",title:"refresh layers"},on:{click:function(t){return e.refreshLayers()}}},[s("v-icon",[e._v("refresh")])],1),e._v(" Layers ")],1),void 0!==e.layer_tags?s("multiselect",{attrs:{options:e.layer_tags,"show-labels":!1,placeholder:"filter by tag",multiple:!0},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}}):e._e(),s("v-text-field",{attrs:{label:"search",clearable:"","append-icon":"search"},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),0===e.filteredRasterdbs.length&&0===e.filteredPointdbs.length&&0===e.filteredPointclouds.length&&0===e.filteredVoxeldbs.length&&0===e.filteredPoi_groups.length&&0===e.filteredRoi_groups.length?s("div",[e._v(" no layers ")]):e._e(),0!==e.filteredRasterdbs.length?s("v-list-group",[s("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[s("v-list-tile-content",[s("v-list-tile-title",[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("collections")]),e._v(" "),s("b",[e._v("RasterDBs")]),e._v(" ("+e._s(e.filteredRasterdbs.length)+")")],1)],1)],1),e._l(e.filteredRasterdbs,(function(t){return s("v-list-tile",{key:t.name,class:{activeNavigation:e.navigation==="rasterdbs/"+t.name},attrs:{to:"/layers/rasterdbs/"+t.name,replace:""},on:{click:function(s){e.navigation="rasterdbs/"+t.name}}},[s("v-list-tile-action",[s("v-icon",[e._v("collections")])],1),s("v-list-tile-content",[s("v-list-tile-title",[e._v(e._s(void 0!==t.title?t.title:t.name))])],1)],1)}))],2):e._e(),0!==e.filteredPointdbs.length?s("v-list-group",[s("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[s("v-list-tile-content",[s("v-list-tile-title",[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("blur_on")]),e._v(" "),s("b",[e._v("PointDBs")]),e._v(" ("+e._s(e.filteredPointdbs.length)+")")],1)],1)],1),e._l(e.filteredPointdbs,(function(t){return s("v-list-tile",{key:t.name,class:{activeNavigation:e.navigation==="pointdbs/"+t.name},attrs:{to:"/layers/pointdbs/"+t.name,replace:""},on:{click:function(s){e.navigation="pointdbs/"+t.name}}},[s("v-list-tile-action",[s("v-icon",[e._v("blur_on")])],1),s("v-list-tile-content",[s("v-list-tile-title",[e._v(e._s(void 0!==t.title?t.title:t.name))])],1)],1)}))],2):e._e(),0!==e.filteredPointclouds.length?s("v-list-group",[s("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[s("v-list-tile-content",[s("v-list-tile-title",[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("grain")]),e._v(" "),s("b",[e._v("Pointclouds")]),e._v(" ("+e._s(e.filteredPointclouds.length)+")")],1)],1)],1),e._l(e.filteredPointclouds,(function(t){return s("v-list-tile",{key:t.name,class:{activeNavigation:e.navigation==="pointclouds/"+t.name},attrs:{to:"/layers/pointclouds/"+t.name,replace:""},on:{click:function(s){e.navigation="pointclouds/"+t.name}}},[s("v-list-tile-action",[s("v-icon",[e._v("grain")])],1),s("v-list-tile-content",[s("v-list-tile-title",[e._v(e._s(void 0!==t.title?t.title:t.name))])],1)],1)}))],2):e._e(),0!==e.filteredVoxeldbs.length?s("v-list-group",[s("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[s("v-list-tile-content",[s("v-list-tile-title",[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("view_module")]),e._v(" "),s("b",[e._v("Voxeldbs")]),e._v(" ("+e._s(e.filteredVoxeldbs.length)+")")],1)],1)],1),e._l(e.filteredVoxeldbs,(function(t){return s("v-list-tile",{key:t.name,class:{activeNavigation:e.navigation==="voxeldbs/"+t.name},attrs:{to:"/layers/voxeldbs/"+t.name,replace:""},on:{click:function(s){e.navigation="voxeldbs/"+t.name}}},[s("v-list-tile-action",[s("v-icon",[e._v("view_module")])],1),s("v-list-tile-content",[s("v-list-tile-title",[e._v(e._s(void 0!==t.title?t.title:t.name))])],1)],1)}))],2):e._e(),0!==e.filteredVectordbs.length?s("v-list-group",[s("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[s("v-list-tile-content",[s("v-list-tile-title",[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("category")]),e._v(" "),s("b",[e._v("Vectordbs")]),e._v(" ("+e._s(e.filteredVectordbs.length)+")")],1)],1)],1),e._l(e.filteredVectordbs,(function(t){return s("v-list-tile",{key:t.name,class:{activeNavigation:e.navigation==="vectordbs/"+t.name},attrs:{to:"/layers/vectordbs/"+t.name,replace:""},on:{click:function(s){e.navigation="vectordbs/"+t.name}}},[s("v-list-tile-action",[s("v-icon",[e._v("category")])],1),s("v-list-tile-content",[s("v-list-tile-title",[e._v(e._s(void 0!==t.title?t.title:t.name))])],1)],1)}))],2):e._e(),0!==e.filteredPoi_groups.length?s("v-list-group",[s("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[s("v-list-tile-content",[s("v-list-tile-title",[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("scatter_plot")]),e._v(" "),s("b",[e._v("POI groups")]),e._v(" ("+e._s(e.filteredPoi_groups.length)+")")],1)],1)],1),e._l(e.filteredPoi_groups,(function(t){return s("v-list-tile",{key:t.name,class:{activeNavigation:e.navigation==="poi_groups/"+t.name},attrs:{to:"/layers/poi_groups/"+t.name,replace:""},on:{click:function(s){e.navigation="poi_groups/"+t.name}}},[s("v-list-tile-action",[s("v-icon",[e._v("scatter_plot")])],1),s("v-list-tile-content",[s("v-list-tile-title",[e._v(e._s(void 0!==t.title&&""!==t.title?t.title:t.name))])],1)],1)}))],2):e._e(),0!==e.filteredRoi_groups.length?s("v-list-group",[s("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[s("v-list-tile-content",[s("v-list-tile-title",[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("widgets")]),e._v(" "),s("b",[e._v("ROI groups")]),e._v(" ("+e._s(e.filteredRoi_groups.length)+")")],1)],1)],1),e._l(e.filteredRoi_groups,(function(t){return s("v-list-tile",{key:t.name,class:{activeNavigation:e.navigation==="roi_groups/"+t.name},attrs:{to:"/layers/roi_groups/"+t.name,replace:""},on:{click:function(s){e.navigation="roi_groups/"+t.name}}},[s("v-list-tile-action",[s("v-icon",[e._v("widgets")])],1),s("v-list-tile-content",[s("v-list-tile-title",[e._v(e._s(void 0!==t.title&&""!==t.title?t.title:t.name))])],1)],1)}))],2):e._e(),"init"===e.rasterdbsMode||"load"===e.rasterdbsMode?s("v-list-tile",[s("ring-loader",{attrs:{color:"#000000",size:"20px"}}),e._v(" loading rasterdbs... ")],1):e._e(),"error"===e.rasterdbsMode?s("v-list-tile",[s("v-icon",[e._v("error")]),e._v(" Could not load rasterdbs. ")],1):e._e(),"init"===e.pointdbsMode||"load"===e.pointdbsMode?s("v-list-tile",[s("ring-loader",{attrs:{color:"#000000",size:"20px"}}),e._v(" loading pointdbs... ")],1):e._e(),"error"===e.pointdbsMode?s("v-list-tile",[s("v-icon",[e._v("error")]),e._v(" Could not load pointdbs. ")],1):e._e(),"init"===e.pointcloudsMode||"load"===e.pointcloudsMode?s("v-list-tile",[s("ring-loader",{attrs:{color:"#000000",size:"20px"}}),e._v(" loading pointclouds... ")],1):e._e(),"error"===e.pointcloudsMode?s("v-list-tile",[s("v-icon",[e._v("error")]),e._v(" Could not load pointclouds. ")],1):e._e(),"init"===e.voxeldbsMode||"load"===e.voxeldbsMode?s("v-list-tile",[s("ring-loader",{attrs:{color:"#000000",size:"20px"}}),e._v(" loading voxeldbs... ")],1):e._e(),"error"===e.voxeldbsMode?s("v-list-tile",[s("v-icon",[e._v("error")]),e._v(" Could not load voxeldbs. ")],1):e._e(),"init"===e.vectordbsMode||"load"===e.vectordbsMode?s("v-list-tile",[s("ring-loader",{attrs:{color:"#000000",size:"20px"}}),e._v(" loading vectordbs... ")],1):e._e(),"error"===e.vectordbsMode?s("v-list-tile",[s("v-icon",[e._v("error")]),e._v(" Could not load vectordbs. ")],1):e._e(),"init"===e.poi_groupsMode||"load"===e.poi_groupsMode?s("v-list-tile",[s("ring-loader",{attrs:{color:"#000000",size:"20px"}}),e._v(" loading poi groups... ")],1):e._e(),"error"===e.poi_groupsMode?s("v-list-tile",[s("v-icon",[e._v("error")]),e._v(" Could not load poi groups. ")],1):e._e(),"init"===e.roi_groupsMode||"load"===e.roi_groupsMode?s("v-list-tile",[s("ring-loader",{attrs:{color:"#000000",size:"20px"}}),e._v(" loading roi groups... ")],1):e._e(),"error"===e.roi_groupsMode?s("v-list-tile",[s("v-icon",[e._v("error")]),e._v(" Could not load roi groups. ")],1):e._e()],2)],1),s("pane",{staticClass:"split-main",attrs:{"min-size":"10"}},[s("router-view")],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.rasterdbsError,callback:function(t){e.rasterdbsError=t},expression:"rasterdbsError"}},[e._v(" "+e._s(e.rasterdbsErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.rasterdbsError=!1}}},[e._v("Close")])],1)],1)},S=[],O=s("512e"),P=(s("c1ea"),s("8e5f")),C=s.n(P),T=(s("e607"),s("c0e3")),j=function(){var e=new Intl.Collator(void 0,{numeric:!0}).compare;return function(t,s){return e(void 0===t.title||""===t.title?t.name:t.title,void 0===s.title||""===s.title?s.name:s.title)}}(),M={name:"admin-splitlayers",components:{Splitpanes:O["Splitpanes"],Pane:O["Pane"],RingLoader:T["a"],Multiselect:C.a},data:function(){return{navigation:"overview",selectedTags:[],searchText:void 0}},methods:{refreshLayers:function(){this.$store.dispatch("rasterdbs/refresh"),this.$store.dispatch("pointdbs/refresh"),this.$store.dispatch("pointclouds/refresh"),this.$store.dispatch("voxeldbs/refresh"),this.$store.dispatch("vectordbs/refresh"),this.$store.dispatch("poi_groups/refresh"),this.$store.dispatch("roi_groups/refresh"),this.$store.dispatch("layer_tags/refresh")}},computed:{items:function(){var e=[];return e.push({name:"overview",title:"overview",icon:"apps"}),e},layer_tags:function(){return this.$store.state.layer_tags.data},filterFun:function(){var e=this.tagFilterFun,t=this.searchFilterFun;return function(s){return e(s)&&t(s)}},tagFilterFun:function(){if(0===this.selectedTags.length)return function(){return!0};if(1===this.selectedTags.length){var e=this.selectedTags[0];return function(t){var s=t.tags;return void 0!==s&&s.indexOf(e)>=0}}var t=this.selectedTags;return function(e){var s=e.tags;return void 0!==s&&t.every((function(e){return s.indexOf(e)>=0}))}},searchFilterFun:function(){var e=this.searchText;return void 0===e||null===e||0===e.length?function(){return!0}:(e=e.trim().toLowerCase(),""==e?function(){return!0}:function(t){return t.name.toLowerCase().indexOf(e)>=0||void 0!==t.title&&t.title.toLowerCase().indexOf(e)>=0})},filteredRasterdbs:function(){return void 0===this.rasterdbs?[]:this.rasterdbs.filter(this.filterFun).sort(j)},rasterdbs:function(){return this.$store.state.rasterdbs.data},rasterdbsMode:function(){return this.$store.state.rasterdbs.mode},rasterdbsError:{get:function(){return"error"===this.$store.state.rasterdbs.mode&&this.$store.state.rasterdbs.messageActive},set:function(e){0==e&&this.$store.commit("rasterdbs/closeMessage")}},rasterdbsErrorMessage:function(){return this.$store.state.rasterdbs.message},filteredPointdbs:function(){return void 0===this.pointdbs?[]:this.pointdbs.filter(this.filterFun).sort(j)},pointdbs:function(){return this.$store.state.pointdbs.data},pointdbsMode:function(){return this.$store.state.pointdbs.mode},pointdbsError:{get:function(){return"error"===this.$store.state.pointdbs.mode&&this.$store.state.pointdbs.messageActive},set:function(e){0==e&&this.$store.commit("pointdbs/closeMessage")}},pointdbsErrorMessage:function(){return this.$store.state.pointdbs.message},filteredPointclouds:function(){return void 0===this.pointclouds?[]:this.pointclouds.filter(this.filterFun).sort(j)},pointclouds:function(){return this.$store.state.pointclouds.data},pointcloudsMode:function(){return this.$store.state.pointclouds.mode},pointcloudsError:{get:function(){return"error"===this.$store.state.pointclouds.mode&&this.$store.state.pointclouds.messageActive},set:function(e){0==e&&this.$store.commit("pointclouds/closeMessage")}},pointcloudsErrorMessage:function(){return this.$store.state.pointclouds.message},filteredVoxeldbs:function(){return void 0===this.voxeldbs?[]:this.voxeldbs.filter(this.filterFun).sort(j)},voxeldbs:function(){return this.$store.state.voxeldbs.data},voxeldbsMode:function(){return this.$store.state.voxeldbs.mode},voxeldbsError:{get:function(){return"error"===this.$store.state.voxeldbs.mode&&this.$store.state.voxeldbs.messageActive},set:function(e){0==e&&this.$store.commit("voxeldbs/closeMessage")}},voxeldbsErrorMessage:function(){return this.$store.state.voxeldbs.message},filteredVectordbs:function(){return void 0===this.vectordbs?[]:this.vectordbs.filter(this.filterFun).sort(j)},vectordbs:function(){return this.$store.state.vectordbs.data},vectordbsMode:function(){return this.$store.state.vectordbs.mode},vectordbsError:{get:function(){return"error"===this.$store.state.vectordbs.mode&&this.$store.state.vectordbs.messageActive},set:function(e){0==e&&this.$store.commit("vectordbs/closeMessage")}},vectordbsErrorMessage:function(){return this.$store.state.vectordbs.message},filteredPoi_groups:function(){return void 0===this.poi_groups?[]:this.poi_groups.filter(this.filterFun).sort(j)},poi_groups:function(){return this.$store.state.poi_groups.data},poi_groupsMode:function(){return this.$store.state.poi_groups.mode},poi_groupsError:{get:function(){return"error"===this.$store.state.poi_groups.mode&&this.$store.state.poi_groups.messageActive},set:function(e){0==e&&this.$store.commit("poi_groups/closeMessage")}},poi_groupsErrorMessage:function(){return this.$store.state.poi_groups.message},filteredRoi_groups:function(){return void 0===this.roi_groups?[]:this.roi_groups.filter(this.filterFun).sort(j)},roi_groups:function(){return this.$store.state.roi_groups.data},roi_groupsMode:function(){return this.$store.state.roi_groups.mode},roi_groupsError:{get:function(){return"error"===this.$store.state.roi_groups.mode&&this.$store.state.roi_groups.messageActive},set:function(e){0==e&&this.$store.commit("roi_groups/closeMessage")}},roi_groupsErrorMessage:function(){return this.$store.state.roi_groups.message}},mounted:function(){this.$store.dispatch("rasterdbs/init"),this.$store.dispatch("pointdbs/init"),this.$store.dispatch("pointclouds/init"),this.$store.dispatch("voxeldbs/init"),this.$store.dispatch("vectordbs/init"),this.$store.dispatch("poi_groups/init"),this.$store.dispatch("roi_groups/init"),this.$store.dispatch("layer_tags/init")}},R=M,$=(s("8246"),Object(p["a"])(R,E,S,!1,null,"309df824",null)),A=$.exports,D=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h3",{staticClass:"headline mb-0",staticStyle:{"text-align":"center"}},[e._v(" Layers overview ")]),s("v-divider",{staticClass:"meta-divider"}),s("v-container",{attrs:{fluid:"","grid-list-lg":""}},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-card",[s("v-card-title",{attrs:{"primary-title":""}},[s("h3",{staticClass:"headline mb-0"},[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("collections")]),e._v(" RasterDB")],1)]),s("v-card-text",[e._v(" Layers of this type store spatial "),s("b",[e._v("pixel data")]),e._v(" as rasters that are organised in points in time and in bands. ")]),s("v-btn",{on:{click:function(t){return e.$router.push({path:"/upload"})}}},[s("v-icon",[e._v("cloud_upload")]),e._v("upload")],1),e._v(" Insert raster-file data (e.g. GeoTIFF) into new or existing RasterDB-layers. ")],1)],1),s("v-flex",{attrs:{xs12:""}},[s("v-card",[s("v-card-title",{attrs:{"primary-title":""}},[s("h3",{staticClass:"headline mb-0"},[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("blur_on")]),e._v(" PointDB")],1)]),s("v-card-text",[e._v(" Layers of this type store spatial point cloud points. Especially suitable for "),s("b",[e._v("LiDAR data")]),e._v(". ")])],1)],1),s("v-flex",{attrs:{xs12:""}},[s("v-card",[s("v-card-title",{attrs:{"primary-title":""}},[s("h3",{staticClass:"headline mb-0"},[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("grain")]),e._v(" Pointcloud")],1)]),s("v-card-text",[e._v(" Layers of this type store spatial "),s("b",[e._v("point cloud points")]),e._v(". Points may contain a variety of attribues such as RGB color values. ")])],1)],1),s("v-flex",{attrs:{xs12:""}},[s("v-card",[s("v-card-title",{attrs:{"primary-title":""}},[s("h3",{staticClass:"headline mb-0"},[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("view_module")]),e._v(" VoxelDB")],1)]),s("v-card-text",[e._v(" Layers of this type store "),s("b",[e._v("voxels")]),e._v(". ")])],1)],1),s("v-flex",{attrs:{xs12:""}},[s("v-card",[s("v-card-title",{attrs:{"primary-title":""}},[s("h3",{staticClass:"headline mb-0"},[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("category")]),e._v(" VectorDB")],1)]),s("v-card-text",[e._v(" Layers of this type store spatial "),s("b",[e._v("general vector data")]),e._v(". ")]),s("admin-vectordb-create",{on:{created_vectordb:function(t){return e.$router.push({path:"/layers/vectordbs/"+t})}}}),e._v(" Add an empty VectorDB-layer and upload vector data. ")],1)],1),s("v-flex",{attrs:{xs12:""}},[s("v-card",[s("v-card-title",{attrs:{"primary-title":""}},[s("h3",{staticClass:"headline mb-0"},[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("scatter_plot")]),e._v(" POI group")],1)]),s("v-card-text",[e._v(" Groups of this type store vector data: spatial "),s("b",[e._v("Points")]),e._v(" with name. "),s("br"),e._v("From a vectordb-layer a POI-group of same name can be autogenerated by extracting point-features from vector-data. ")])],1)],1),s("v-flex",{attrs:{xs12:""}},[s("v-card",[s("v-card-title",{attrs:{"primary-title":""}},[s("h3",{staticClass:"headline mb-0"},[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("widgets")]),e._v(" ROI group")],1)]),s("v-card-text",[e._v(" Groups of this type store vector data: "),s("b",[e._v("Polygons")]),e._v(" with name and spatial vertex points. "),s("br"),e._v("From a vectordb-layer a ROI-group of same name can be autogenerated by extracting polygon-features from vector-data. ")])],1)],1)],1)],1)],1)},z=[],N=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"create new VectorDB layer"},slot:"activator"},[s("v-icon",[e._v("add")]),e._v(" create ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("create new VectorDB layer")])]),s("v-card-text",[e._v(" On the newly created vector layer you can upload vecor data at the then shown "),s("i",[e._v('"vector layer details page"')]),e._v(" - section "),s("i",[e._v('"Actions"')]),e._v(" - button "),s("i",[e._v('"Files"')]),e._v(". ")]),s("v-card-text",[s("v-text-field",{attrs:{label:"name of the new vector layer"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),s("i",[e._v("Space, not latin chars and other special chars are not allowed. You may replace space chars by underscore. "),s("br"),e._v("Allowed chars: 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_")])],1),s("v-card-text",[void 0!==e.identity?s("span",[e._v("Your roles: "),e._l(e.identity.roles,(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))])])}))],2):e._e(),e.isAdmin?s("div",[e._v("Your are "),s("b",[e._v("admin")]),e._v(", so you are able read/modify layers independent of specified roles!")]):e._e(),s("br"),s("br"),e._v("Specified roles can "),s("b",[e._v("read")]),e._v(" layer data. "),s("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclRole},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}}),s("br"),e._v("Specified roles can "),s("b",[e._v("modify")]),e._v(" layer data. "),s("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclModRole},model:{value:e.selectedRolesMod,callback:function(t){e.selectedRolesMod=t},expression:"selectedRolesMod"}}),s("br"),s("i",[e._v("Note: Only users that have one of the the read/modify roles are able to view/change created vector layer!")]),s("br"),e.name?e._e():s("span",{staticStyle:{color:"red"}},[e._v("ERROR: You need to specify a name for the new layer.")]),s("br"),0==e.selectedRoles.length||0==e.selectedRolesMod.length?s("span",{staticStyle:{color:"red"}},[e._v("ERROR: You need to specify at least one role for read and for modify.")]):e._e()],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"grey--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat",disabled:!e.name||0==e.selectedRoles.length||0==e.selectedRolesMod.length},nativeOn:{click:function(t){return e.execute()}}},[e._v("Create")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},L=[],B=s("bc3a"),I=s.n(B);function F(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function V(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?F(Object(s),!0).forEach((function(t){G(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):F(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function G(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var U={name:"admin-vectordb-create",props:[],components:{Multiselect:C.a},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,name:"",selectedRoles:[],selectedRolesMod:[],createdAclRoles:[]}},methods:{refresh:function(){this.$store.dispatch("acl_roles/refresh")},execute:function(){var e=this,t=this.$store.getters.apiUrl("vectordbs");I.a.post(t,{create_vectordb:{name:e.name,acl:this.selectedRoles,acl_mod:this.selectedRolesMod}}).then((function(t){console.log(t),e.dialog=!1,e.$store.dispatch("vectordbs/refresh"),e.$emit("created_vectordb",e.name)})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t),e.dialog=!1,e.$store.dispatch("vectordbs/refresh")}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)},createAclRole:function(e){this.createdAclRoles.push(e),this.selectedRoles.push(e)},createAclModRole:function(e){this.createdAclRoles.push(e),this.selectedRolesMod.push(e)}},computed:V(V({},Object(c["b"])({isAdmin:"identity/isAdmin"})),{},{identity:function(){return this.$store.state.identity.data},acl_roles:function(){return void 0===this.availableRoles?this.createdAclRoles:this.availableRoles.concat(this.createdAclRoles)},availableRoles:function(){var e=void 0===this.$store.state.acl_roles?[]:this.$store.state.acl_roles.data;return void 0===this.identity?e:this.identity.roles.concat(e)}}),watch:{dialog:function(){this.dialog&&(this.selectedRoles=void 0===this.identity||0==this.identity.roles.length?[]:this.identity.roles[0],this.selectedRolesMod=void 0===this.identity||0==this.identity.roles.length?[]:this.identity.roles[0],this.refresh())},identity:function(){0==this.selectedRoles.length&&(this.selectedRoles=void 0===this.identity||0==this.identity.roles.length?[]:this.identity.roles[0]),0==this.selectedRolesMod.length&&(this.selectedRolesMod=void 0===this.identity||0==this.identity.roles.length?[]:this.identity.roles[0])}},mounted:function(){this.refresh()}},q=U,W=(s("0abd"),Object(p["a"])(q,N,L,!1,null,"0866a680",null)),H=W.exports;function J(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Q(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?J(Object(s),!0).forEach((function(t){Y(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):J(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Y(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var K={name:"admin-layers-overview",components:{"admin-vectordb-create":H},data:function(){return{}},methods:{},computed:Q(Q({},Object(c["b"])({isAdmin:"identity/isAdmin"})),{},{rasterdbs:function(){return this.$store.state.rasterdbs.data}}),mounted:function(){this.$store.dispatch("rasterdbs/init")}},X=K,Z=(s("7103"),Object(p["a"])(X,D,z,!1,null,"0ccb68ea",null)),ee=Z.exports,te=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main"},[s("transition",{attrs:{name:"fade"}},[e.busy?s("div",{staticClass:"div-busy"},[s("pulse-loader"),e._v(e._s(e.busyMessage)+" ")],1):e._e()]),s("div",{staticStyle:{"text-align":"center","padding-right":"400px"}},[s("h3",{staticClass:"headline mb-0"},[e._v(" "+e._s(void 0===e.meta||void 0===e.meta.title||""===e.meta.title?e.rasterdb:e.meta.title)+" "),s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/viewer/"+e.rasterdb,target:"_blank",title:"open layer in viewer on new tab"}},[s("v-icon",[e._v("zoom_in")])],1)],1),void 0!==e.meta&&void 0!==e.meta.title&&""!==e.meta.title?s("span",[s("span",{staticStyle:{"user-select":"none"}},[e._v("id: ")]),s("b",[e._v(e._s(e.rasterdb))])]):e._e()]),e.metaError?s("div",[s("b",[e._v("ERROR")]),e._v(" "+e._s(e.metaErrorMessage)+" ")]):e._e(),void 0!=e.meta?s("div",[s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.modify?s("admin-rasterdb-dialog-set-info",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Info ")],1),s("div",{staticClass:"meta-content",staticStyle:{poisition:"relative"}},[s("a",{attrs:{href:"#/viewer/"+e.rasterdb,target:"_blank",title:"open layer in viewer on new tab"}},[s("img",{key:e.meta.name,staticClass:"thumbnail",attrs:{src:e.$store.getters.apiUrl("rasterdb/"+e.meta.name+"/raster.png?width=200"),alt:""}})]),s("table",{staticStyle:{"padding-right":"420px"}},[s("tr",[e._m(0),s("td",[0===e.meta.description.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.description))])])]),s("tr",[e._m(1),s("td",[void 0===e.meta.acquisition_date?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.acquisition_date))])])]),s("tr",[e._m(2),s("td",[void 0===e.meta.corresponding_contact?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.corresponding_contact))])])]),s("tr",[e._m(3),s("td",[e._l(e.optArray(e.meta.tags),(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.optArray(e.meta.tags).length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.modify?s("admin-rasterdb-dialog-set-projection",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Projection ")],1),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(4),s("td",[void 0===e.meta.ref.code||0===e.meta.ref.code.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.ref.code))])])]),s("tr",[e._m(5),s("td",[void 0===e.meta.ref.proj4||0===e.meta.ref.proj4.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.ref.proj4))])])])])]),s("div",[s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.modify?s("admin-rasterdb-dialog-set-associated",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Associated ")],1),s("div",{staticClass:"meta-content"},[s("table",e._l(e.meta.associated,(function(t,a){return s("tr",{key:a},[s("td",[s("b",[e._v(e._s(a)+":")])]),s("td",e._l(e.optArray(t),(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))]),"PointDB"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/pointdbs/"+t,title:"go to pointdb layer info"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"pointcloud"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/pointclouds/"+t,title:"go to pointcloud layer info"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"poi_groups"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/poi_groups/"+t,title:"go to POI group layer info"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"roi_groups"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/roi_groups/"+t,title:"go to ROI group layer info"}},[s("v-icon",[e._v("open_in_new")])],1):e._e()],1)})),0)])})),0)])],1),e.meta.bands.length>0?s("div",[s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Bands ("+e._s(e.meta.bands.length)+") ")]),s("v-data-table",{staticClass:"meta-content",attrs:{headers:e.bandsTableHeaders,items:e.meta.bands,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[s("td",[e._v(e._s(t.item.index))]),s("td",[e._v(e._s(t.item.title))]),s("td",[e._v(e._s(t.item.wavelength))]),s("td",[e._v(e._s(t.item.fwhm))]),s("td",[e._v(e._s(t.item.visualisation))])]}}],null,!1,1755220808)})],1):e._e(),e.meta.time_slices.length>0?s("div",[s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Time slices ("+e._s(e.meta.time_slices.length)+") ")]),s("v-data-table",{staticClass:"meta-content",attrs:{headers:e.timeSliceTableHeaders,items:e.meta.time_slices,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[s("td",[e._v(e._s(t.item.id))]),s("td",[e._v(e._s(t.item.name))])]}}],null,!1,2870960023)})],1):e._e(),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Details ")]),void 0!==e.meta.ref?s("div",{staticClass:"meta-content"},[s("table",{staticClass:"table-details",staticStyle:{display:"inline-block"}},[s("thead",[s("tr",[s("th",[e._v("Pixel size "),s("div",{staticClass:"header-unit"},[e._v(e._s(e.projection_units))])]),e._m(6),s("th",[e._v("Extent "),s("div",{staticClass:"header-unit"},[e._v(e._s(e.projection_units))])]),e._m(7)])]),s("tbody",[s("tr",[s("td",[e._v(e._s(e.pixelSizeText))]),void 0!==e.meta.ref.internal_rasterdb_extent?s("td",[e._v(e._s(e.meta.ref.internal_rasterdb_extent[2]-e.meta.ref.internal_rasterdb_extent[0]+1)+" "),s("b",[e._v("x")]),e._v(" "+e._s(e.meta.ref.internal_rasterdb_extent[3]-e.meta.ref.internal_rasterdb_extent[1]+1))]):s("td",[e._v("none")]),void 0!==e.meta.ref.internal_rasterdb_extent&&void 0!==e.meta.ref.pixel_size?s("td",[e._v(e._s(((e.meta.ref.internal_rasterdb_extent[2]-e.meta.ref.internal_rasterdb_extent[0]+1)*e.meta.ref.pixel_size.x).toPrecision(8))+" "),s("b",[e._v("x")]),e._v(" "+e._s(((e.meta.ref.internal_rasterdb_extent[3]-e.meta.ref.internal_rasterdb_extent[1]+1)*e.meta.ref.pixel_size.y).toPrecision(8)))]):s("td",[e._v("none")]),void 0!==e.meta.ref.extent?s("td",[e._v(e._s(e.meta.ref.extent[0].toPrecision(8))),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.ref.extent[1].toPrecision(8))+" "),s("b",[e._v("-")]),e._v(" "+e._s(e.meta.ref.extent[2].toPrecision(8))),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.ref.extent[3].toPrecision(8)))]):s("td",[e._v("none")])])])]),void 0===e.meta.tile_count?s("v-btn",{staticStyle:{"vertical-align":"top"},on:{click:function(t){return e.refresh(!0)}}},[s("v-icon",[e._v("arrow_drop_down")]),e._v(" more")],1):e._e(),void 0!==e.meta.tile_count?s("div",[s("table",{staticClass:"table-details",staticStyle:{display:"inline-block"}},[e._m(8),s("tbody",[s("tr",[void 0!==e.meta.tile_count?s("td",[e._v(e._s(e.meta.tile_count))]):s("td",[e._v("none")]),void 0!==e.meta.tile_pixel_len?s("td",[e._v(e._s(e.meta.tile_pixel_len)+" "),s("b",[e._v("x")]),e._v(" "+e._s(e.meta.tile_pixel_len))]):s("td",[e._v("none")]),void 0!==e.meta.ref.internal_rasterdb_offset?s("td",[e._v(e._s(e.meta.ref.internal_rasterdb_offset.x.toPrecision(8))),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.ref.internal_rasterdb_offset.y.toPrecision(8)))]):s("td",[e._v("none")]),void 0!==e.meta.ref.internal_rasterdb_extent?s("td",[e._v(e._s(e.meta.ref.internal_rasterdb_extent[0])),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.ref.internal_rasterdb_extent[1])+" "),s("b",[e._v("-")]),e._v(" "+e._s(e.meta.ref.internal_rasterdb_extent[2])),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.ref.internal_rasterdb_extent[3]))]):s("td",[e._v("none")])])])]),s("table",{staticClass:"table-details"},[e._m(9),s("tbody",[s("tr",[void 0!==e.meta.storage_size?s("td",[e._v(e._s(e.meta.storage_size))]):s("td",[e._v("none")]),void 0!==e.meta.storage_internal_free_size?s("td",[e._v(e._s(e.meta.storage_internal_free_size))]):s("td",[e._v("none")]),void 0!==e.meta.tile_size_stats?s("td",[e._v("min: "+e._s(e.meta.tile_size_stats.min)+" mean: "+e._s(e.meta.tile_size_stats.mean)+" max: "+e._s(e.meta.tile_size_stats.max))]):s("td",[e._v("none")])])])])]):e._e()],1):e._e(),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.isAdmin?s("admin-rasterdb-dialog-set-acl",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Access control ")],1),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(10),s("td",[e._l(e.meta.acl,(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.meta.acl.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)]),s("tr",[e._m(11),s("td",[e._l(e.meta.acl_mod,(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.meta.acl_mod.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Applications ")]),s("div",{staticClass:"meta-content"},[s("admin-rasterdb-dialog-wms",{attrs:{meta:e.meta},on:{changed:e.refresh}}),s("admin-rasterdb-dialog-wcs",{attrs:{meta:e.meta},on:{changed:e.refresh}})],1),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Actions ")]),e.modify?s("div",{staticClass:"meta-content"},[s("b",[e._v("Manage:")]),s("admin-rasterdb-bands",{attrs:{meta:e.meta},on:{changed:e.refresh}}),s("admin-rasterdb-dialog-remove-timestamps",{attrs:{meta:e.meta},on:{changed:e.refresh}}),s("br"),s("br"),s("admin-rasterdb-dialog-delete",{attrs:{meta:e.meta},on:{changed:e.refresh}})],1):e._e()],1):e._e()],1)},se=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("description:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("acquisition date:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("corresponding contact:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("tags:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("geo code:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("proj4:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("th",[e._v("Extent "),s("div",{staticClass:"header-unit"},[e._v("pixel")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("th",[e._v("Extent "),s("div",{staticClass:"header-unit"},[e._v("coordinates")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("Tiles "),s("div",{staticClass:"header-unit"},[e._v("count")])]),s("th",[e._v("Tile size "),s("div",{staticClass:"header-unit"},[e._v("pixel")])]),s("th",[e._v("Tile reference point "),s("div",{staticClass:"header-unit"},[e._v("coordinates")])]),s("th",[e._v("Internal extent "),s("div",{staticClass:"header-unit"},[e._v("pixel")])])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("Storage size "),s("div",{staticClass:"header-unit"},[e._v("bytes")])]),s("th",[e._v("Storage internal free size "),s("div",{staticClass:"header-unit"},[e._v("bytes")])]),s("th",[e._v("Tile size "),s("div",{staticClass:"header-unit"},[e._v("bytes")])])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("access roles:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("modify roles:")])])}],ae=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[s("v-icon",[e._v("create")])],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set Infos of "),s("i",[e._v("RasterDB")]),e._v(" "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-card-text",[s("v-text-field",{attrs:{label:"title"},model:{value:e.newTitle,callback:function(t){e.newTitle=t},expression:"newTitle"}})],1),s("v-card-text",[s("v-text-field",{attrs:{label:"description"},model:{value:e.newDescription,callback:function(t){e.newDescription=t},expression:"newDescription"}})],1),s("v-card-text",[s("v-text-field",{attrs:{label:"acquisition date"},model:{value:e.newAcquisition_date,callback:function(t){e.newAcquisition_date=t},expression:"newAcquisition_date"}})],1),s("v-card-text",[s("v-text-field",{attrs:{label:"corresponding contact"},model:{value:e.new_corresponding_contact,callback:function(t){e.new_corresponding_contact=t},expression:"new_corresponding_contact"}})],1),s("v-card-text",[e._v(" Tags "),s("multiselect",{attrs:{options:e.layer_tags,multiple:"",taggable:!0,placeholder:"select tags",tagPlaceholder:"Press enter to create a tag"},on:{tag:e.createTag},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set(t)}}},[e._v("Set")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},ie=[];function re(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function oe(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?re(Object(s),!0).forEach((function(t){ne(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):re(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ne(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ce(e){return void 0===e?[]:Array.isArray(e)?e:[e]}var le={name:"admin-rasterdb-dialog-set-info",props:["meta"],components:{Multiselect:C.a},data:function(){return{dialog:!1,newTitle:"",newDescription:"",newAcquisition_date:"",new_corresponding_contact:"",setError:!1,setErrorMessage:void 0,selectedTags:[],createdTags:[]}},computed:oe(oe({},Object(c["c"])({availableTags:function(e){return e.layer_tags.data}})),{},{layer_tags:function(){return void 0===this.availableTags?this.createdTags:this.availableTags.concat(this.createdTags)}}),methods:{createTag:function(e){this.createdTags.push(e),this.selectedTags.push(e)},refresh:function(){this.newTitle=this.meta.title,this.newDescription=this.meta.description,this.newAcquisition_date=void 0===this.meta.acquisition_date?"":this.meta.acquisition_date,this.new_corresponding_contact=void 0===this.meta.corresponding_contact?"":this.meta.corresponding_contact,this.selectedTags=ce(this.meta.tags),this.$store.dispatch("layer_tags/refresh")},set:function(){var e=this,t=this.$store.getters.apiUrl("rasterdb/"+e.meta.name+"/set");I.a.post(t,{meta:{title:e.newTitle,description:e.newDescription,acquisition_date:e.newAcquisition_date,corresponding_contact:e.new_corresponding_contact,tags:e.selectedTags}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){e.setError=!0,e.setErrorMessage="Error setting property",console.log(t),e.$emit("changed"),e.dialog=!1}))}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},de=le,ue=Object(p["a"])(de,ae,ie,!1,null,null,null),ve=ue.exports,me=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[s("v-icon",[e._v("create")])],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set projection of "),s("i",[e._v("RasterDB")]),e._v(" "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-card-text",[void 0==e.newCode||null==e.newCode||e.newCode.startsWith("EPSG:")?e._e():s("span",{staticStyle:{color:"red"}},[s("v-icon",{attrs:{color:"red"}},[e._v("warning")]),e._v(" Projection code SHOULD start with "),s("b",[e._v("EPSG:")])],1),s("v-text-field",{attrs:{label:"projection code"},model:{value:e.newCode,callback:function(t){e.newCode=t},expression:"newCode"}}),e._v(" Code may be an "),s("a",{attrs:{href:"https://epsg.io",target:"_blank",rel:"noopener noreferrer"}},[e._v("EPSG")]),e._v(" identifier (e.g. 'EPSG:4326') ")],1),s("v-card-text",[s("v-text-field",{attrs:{label:"PROJ.4"},model:{value:e.newProj4,callback:function(t){e.newProj4=t},expression:"newProj4"}}),s("a",{attrs:{href:"http://proj4.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("PROJ.4")]),e._v(" description (e.g. '+proj=longlat +datum=WGS84 +no_defs ') ")],1),s("v-card-text",[e._v(" Ensure same projection for projection code and proj4 ! ")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set(t)}}},[e._v("Set")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},pe=[],_e={name:"admin-rasterdb-dialog-set-projection",props:["meta"],data:function(){return{dialog:!1,newCode:"",newProj4:"",setError:!1,setErrorMessage:void 0}},methods:{refresh:function(){this.newCode=this.meta.ref.code,this.newProj4=this.meta.ref.proj4},set:function(){var e=this,t=this.$store.getters.apiUrl("rasterdb/"+e.meta.name+"/set");I.a.post(t,{meta:{code:e.newCode,proj4:e.newProj4}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error setting property: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},fe=_e,he=Object(p["a"])(fe,me,pe,!1,null,null,null),be=he.exports,ge=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[s("v-icon",[e._v("create")])],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set Associated layers of "),s("i",[e._v("RasterDB")]),e._v(" "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-card-text",{staticStyle:{"min-height":"400px"}},[e._v(" PointDB-layer: This RasterDB layer is visualisation of that PointDB. "),s("multiselect",{attrs:{options:e.pointdbs,placeholder:"select pointdb-layer","allow-empty":!0},model:{value:e.selectedPointdb,callback:function(t){e.selectedPointdb=t},expression:"selectedPointdb"}}),s("br"),e._v(" PointCloud-layer: This RasterDB layer is visualisation of that PointCloud. "),s("multiselect",{attrs:{options:e.pointclouds,placeholder:"select pointcloud-layer","allow-empty":!0},model:{value:e.selectedPointcloud,callback:function(t){e.selectedPointcloud=t},expression:"selectedPointcloud"}}),s("br"),e._v(" VoxelDB-layer: This RasterDB layer is visualisation of that VoxelDB. "),s("multiselect",{attrs:{options:e.voxeldbs,placeholder:"select voxeldb-layer","allow-empty":!0},model:{value:e.selectedVoxeldb,callback:function(t){e.selectedVoxeldb=t},expression:"selectedVoxeldb"}}),s("br"),e._v(" POI-groups: Groups of named geo-points that can be used for processing. "),s("multiselect",{attrs:{options:e.poi_groups,placeholder:"select poi-groups","allow-empty":!0,multiple:!0},model:{value:e.selectedPoi_groups,callback:function(t){e.selectedPoi_groups=t},expression:"selectedPoi_groups"}}),s("br"),e._v(" ROI-groups: Groups of named polygons that can be used for processing. "),s("multiselect",{attrs:{options:e.roi_groups,placeholder:"select roi-groups","allow-empty":!0,multiple:!0},model:{value:e.selectedRoi_groups,callback:function(t){e.selectedRoi_groups=t},expression:"selectedRoi_groups"}})],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set(t)}}},[e._v("Set")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},ye=[];function xe(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function we(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(s),!0).forEach((function(t){ke(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):xe(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ke(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Ee={name:"admin-rasterdb-dialog-set-associated",props:["meta"],components:{Multiselect:C.a},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,selectedPointdb:void 0,selectedPointcloud:void 0,selectedVoxeldb:void 0,selectedPoi_groups:[],selectedRoi_groups:[]}},computed:we({},Object(c["b"])({pointdbs:"pointdbs/names",pointclouds:"pointclouds/names",voxeldbs:"voxeldbs/names",poi_groups:"poi_groups/names",roi_groups:"roi_groups/names"})),methods:{refresh:function(){this.selectedPointdb=this.meta.associated.PointDB,this.selectedPointcloud=this.meta.associated.pointcloud,this.selectedVoxeldb=this.meta.associated.voxeldb,this.selectedPoi_groups=this.meta.associated.poi_groups,this.selectedRoi_groups=this.meta.associated.roi_groups,this.$store.dispatch("pointdbs/refresh"),this.$store.dispatch("pointclouds/refresh"),this.$store.dispatch("poi_groups/refresh"),this.$store.dispatch("roi_groups/refresh")},set:function(){var e=this,t=this.$store.getters.apiUrl("rasterdb/"+e.meta.name+"/set"),s={};void 0!==this.selectedPointdb&&(s.PointDB=this.selectedPointdb),void 0!==this.selectedPointcloud&&(s.pointcloud=this.selectedPointcloud),void 0!==this.selectedVoxeldb&&(s.voxeldb=this.selectedVoxeldb),s.poi_groups=this.selectedPoi_groups,s.roi_groups=this.selectedRoi_groups,I.a.post(t,{meta:{associated:s}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){e.setError=!0,e.setErrorMessage="Error setting property",console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},Se=Ee,Oe=Object(p["a"])(Se,ge,ye,!1,null,null,null),Pe=Oe.exports,Ce=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[s("v-icon",[e._v("create")])],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set access control of "),s("i",[e._v("RasterDB")]),e._v(" "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-divider"),s("v-card-text",[e._v(" Specified roles can "),s("b",[e._v("read")]),e._v(" layer data. "),s("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclRole},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}})],1),s("v-card-text",[e._v(" Specified roles can "),s("b",[e._v("modify")]),e._v(" layer data. "),s("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclModRole},model:{value:e.selectedRolesMod,callback:function(t){e.selectedRolesMod=t},expression:"selectedRolesMod"}})],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set(t)}}},[e._v("Set")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},Te=[];function je(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Me(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?je(Object(s),!0).forEach((function(t){Re(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):je(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Re(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var $e={name:"admin-rasterdb-dialog-set-acl",props:["meta"],components:{Multiselect:C.a},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,selectedRoles:[],selectedRolesMod:[],availableRoles:[],createdAclRoles:[]}},computed:Me(Me({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}})),{},{acl_roles:function(){return this.availableRoles.concat(this.createdAclRoles)}}),methods:{createAclRole:function(e){this.createdAclRoles.push(e),this.selectedRoles.push(e)},createAclModRole:function(e){this.createdAclRoles.push(e),this.selectedRolesMod.push(e)},refresh:function(){var e=this;this.selectedRoles=this.meta.acl,this.selectedRolesMod=this.meta.acl_mod,I.a.get(this.$store.getters.apiUrl("api/roles")).then((function(t){e.availableRoles=t.data.roles})).catch((function(e){console.log(e)}))},set:function(){var e=this,t=this.$store.getters.apiUrl("rasterdb/"+e.meta.name+"/set");I.a.post(t,{meta:{acl:e.selectedRoles,acl_mod:e.selectedRolesMod}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error setting property: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},Ae=$e,De=Object(p["a"])(Ae,Ce,Te,!1,null,null,null),ze=De.exports,Ne=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"Delete this raster layer. This can not be undone."},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("delete_forever")]),e._v("delete entire layer ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("DELETE "),s("i",[e._v("RasterDB")]),e._v(" "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-card-text",[e._v(" Delete this raster layer. "),s("b",[e._v("This can not be undone.")])]),s("v-card-text",[e._v(" Are you sure? ")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"red--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.delete_layer()}}},[e._v("Delete")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},Le=[],Be={name:"admin-rasterdb-dialog-delete",props:["meta"],data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0}},methods:{refresh:function(){},delete_layer:function(){var e=this,t=this.$store.getters.apiUrl("rasterdb/"+e.meta.name+"/delete");I.a.post(t,{action:{delete_rasterdb:e.meta.name}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},Ie=Be,Fe=Object(p["a"])(Ie,Ne,Le,!1,null,null,null),Ve=Fe.exports,Ge=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticStyle:{display:"inline-block"}},[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"open dialog to select and remove time slices of this rasterdb layer"},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("Time slices ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("remove time slices of "),s("i",[e._v("RasterDB")]),e._v(" "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-data-table",{staticClass:"meta-content",attrs:{headers:e.timeSliceTableHeaders,items:e.timeSlices,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.item.remove,expression:"props.item.remove"}],staticStyle:{width:"40px"},attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(t.item.remove)?e._i(t.item.remove,null)>-1:t.item.remove},on:{change:function(s){var a=t.item.remove,i=s.target,r=!!i.checked;if(Array.isArray(a)){var o=null,n=e._i(a,o);i.checked?n<0&&e.$set(t.item,"remove",a.concat([o])):n>-1&&e.$set(t.item,"remove",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(t.item,"remove",r)}}}),e._v("remove time slice")]),s("td",[e._v(e._s(t.item.id))]),s("td",[e._v(e._s(t.item.name))]),s("td",{class:{remove:t.item.remove}},[e._v(e._s(t.item.remove?"remove time slice":"(keep time slice)"))])]}}])}),s("br"),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"red--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.execute()}}},[e._v("Execute")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1),s("admin-task-console",{attrs:{id:e.remote_task_id,closeOnDone:""},on:{done:function(t){return e.$emit("changed")},error:function(t){return e.$emit("changed")}}})],1)},Ue=[],qe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Task Console")])]),"READY"===e.remote_task.status?s("v-icon",{attrs:{color:"yellow"}},[e._v("directions_walk")]):e._e(),"RUNNING"===e.remote_task.status?s("v-icon",{attrs:{color:"black"}},[e._v("directions_run")]):e._e(),"DONE"===e.remote_task.status?s("v-icon",{attrs:{color:"green"}},[e._v("done")]):e._e(),"ERROR"===e.remote_task.status?s("v-icon",{attrs:{color:"red"}},[e._v("error")]):e._e(),e._v(" "+e._s(e.remote_task.status)+" "),s("span",{staticStyle:{"padding-left":"50px"}},["READY"!==e.remote_task.status&&"RUNNING"!==e.remote_task.status||e.remote_task.canceled||!e.remote_task.cancelable?e._e():s("span",[s("v-btn",{attrs:{icon:""},on:{click:function(t){return e.cancel(e.remote_task.id)}}},[s("v-icon",[e._v("cancel")]),e._v(" cancel")],1)],1),e.remote_task.canceled||e.remote_task.cancelable?e._e():s("span",[e._v("---")]),e.remote_task.canceled?s("span",[e._v("cancel requested")]):e._e()]),s("br"),e._v(" id: "+e._s(e.id)+", time "+e._s((e.remote_task.runtime/1e3).toFixed())+" s "),s("br"),e._v(" "+e._s(e.remote_task.message)+" "),s("v-card-actions",[s("v-spacer"),"error"===e.status?s("span",[e._v("error "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Close")])],1):e._e()],1),s("span",{staticStyle:{color:"grey"}},[s("v-icon",[e._v("event_note")]),e._v(" Click outside of this box to close it. "),s("br"),e._v("Task continues to run and can be viewed on status view.")],1),s("hr"),s("b",[e._v("Log Messages")]),e._l(e.log,(function(t,a){return s("div",{key:a},[e._v(e._s(t))])}))],2)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},We=[],He=s("a34a"),Je=s.n(He);function Qe(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Ye(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(s),!0).forEach((function(t){Ke(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Qe(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ke(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Xe(e,t,s,a,i,r,o){try{var n=e[r](o),c=n.value}catch(l){return void s(l)}n.done?t(c):Promise.resolve(c).then(a,i)}function Ze(e){return function(){var t=this,s=arguments;return new Promise((function(a,i){var r=e.apply(t,s);function o(e){Xe(r,a,i,o,n,"next",e)}function n(e){Xe(r,a,i,o,n,"throw",e)}o(void 0)}))}}var et={name:"admin-task-console",props:{id:Number,closeOnDone:Boolean},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,remote_task:{},status:"init",log:[]}},methods:{refresh:function(){},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)},query_remote_task:function(){this.queryLog(this.id);var e=this;I.a.get(this.urlPrefix+"../../api/remote_tasks/"+this.id).then((function(t){console.log(t.data.remote_task),e.remote_task=t.data.remote_task,e.remote_task.active?(e.status="running",window.setTimeout((function(){e.query_remote_task()}),1e3)):("DONE"===e.remote_task.status?(e.status="done",e.closeOnDone&&(e.dialog=!1),e.$emit("done")):(e.status="error",console.log("error"),e.$emit("error")),console.log(t))})).catch((function(t){e.setErrorMessage=e.errorToText(t),e.status="error",e.dialog&&window.setTimeout((function(){e.query_remote_task()}),1e3)}))},cancel:function(e){var t=this;return Ze(Je.a.mark((function s(){var a;return Je.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,console.log(e),a=t.$store.getters.apiUrl("api/remote_tasks/"+e+"/cancel"),s.next=5,I.a.post(a);case 5:t.refresh(),s.next=11;break;case 8:s.prev=8,s.t0=s["catch"](0),console.log(s.t0);case 11:return s.prev=11,s.finish(11);case 13:case"end":return s.stop()}}),s,null,[[0,8,11,13]])})))()},queryLog:function(e){var t=this;return Ze(Je.a.mark((function s(){var a,i;return Je.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,console.log(e),a=t.$store.getters.apiUrl("api/remote_tasks/"+e+"/log"),s.next=5,I.a.get(a);case 5:i=s.sent,t.log=i.data.split("\n"),s.next=12;break;case 9:s.prev=9,s.t0=s["catch"](0),console.log(s.t0);case 12:return s.prev=12,s.finish(12);case 14:case"end":return s.stop()}}),s,null,[[0,9,12,14]])})))()}},computed:Ye({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}})),watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()},id:function(){this.setErrorMessage=void 0,void 0===this.id?(this.status="init",this.dialog=!1,this.remote_task={}):(this.status="init",this.dialog=!0,this.query_remote_task())}},mounted:function(){this.refresh()}},tt=et,st=Object(p["a"])(tt,qe,We,!1,null,null,null),at=st.exports,it={name:"admin-rasterdb-dialog-remove-timestamps",props:["meta"],components:{"admin-task-console":at},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,timeSliceTableHeaders:[{text:"",align:"left",sortable:!1},{text:"Id",align:"left",value:"id"},{text:"Name",align:"left",value:"name"},{text:"action",align:"left",value:"remove"}],timeSlices:[],remote_task_id:void 0}},methods:{refresh:function(){this.timeSlices=this.meta.time_slices.map((function(e){return{id:e.id,name:e.name,remove:!1}}))},execute:function(){var e=this,t=this.$store.getters.apiUrl("api/remote_tasks"),s=this.timeSlices.filter((function(e){return e.remove})).map((function(e){return e.id}));I.a.post(t,{remote_task:{task_rasterdb:"remove_timestamps",rasterdb:e.meta.name,timestamps:s}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1;var s=t.data.remote_task;e.remote_task_id=s.id})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},rt=it,ot=(s("15ef"),Object(p["a"])(rt,Ge,Ue,!1,null,"cc57ac40",null)),nt=ot.exports,ct=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticStyle:{display:"inline-block"}},[s("v-dialog",{attrs:{lazy:"",absolute:"","min-width":"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"open dialog to edit band infos of this rasterdb layer"},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("bands ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Manage bands of "),s("i",[e._v("RasterDB")]),e._v(" "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-data-table",{staticClass:"meta-content",attrs:{headers:e.bandTableHeaders,items:e.bands,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.item.remove,expression:"props.item.remove"}],staticStyle:{width:"40px"},attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(t.item.remove)?e._i(t.item.remove,null)>-1:t.item.remove},on:{change:function(s){var a=t.item.remove,i=s.target,r=!!i.checked;if(Array.isArray(a)){var o=null,n=e._i(a,o);i.checked?n<0&&e.$set(t.item,"remove",a.concat([o])):n>-1&&e.$set(t.item,"remove",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(t.item,"remove",r)}}}),e._v("remove band")]),s("td",[e._v(e._s(t.item.index))]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.item.title,expression:"props.item.title"}],attrs:{placeholder:"title"},domProps:{value:t.item.title},on:{input:function(s){s.target.composing||e.$set(t.item,"title",s.target.value)}}})]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.item.visualisation,expression:"props.item.visualisation"}],attrs:{placeholder:"visualisation"},domProps:{value:t.item.visualisation},on:{input:function(s){s.target.composing||e.$set(t.item,"visualisation",s.target.value)}}})]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.item.vis_min,expression:"props.item.vis_min"}],attrs:{placeholder:"vis_min"},domProps:{value:t.item.vis_min},on:{input:function(s){s.target.composing||e.$set(t.item,"vis_min",s.target.value)}}})]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.item.vis_max,expression:"props.item.vis_max"}],attrs:{placeholder:"vis_max"},domProps:{value:t.item.vis_max},on:{input:function(s){s.target.composing||e.$set(t.item,"vis_max",s.target.value)}}})]),s("td",{class:{remove:t.item.remove}},[e._v(e._s(t.item.remove?"remove band":"(keep band)"))])]}}])}),s("v-card-text",[s("b",[e._v("Edit")]),e._v(" band titles by click on band title entry. "),s("br"),s("b",[e._v("Remove")]),e._v(" bands by checkbox, all data of that band at all timestamps will be removed. ")]),s("br"),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"red--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.execute()}}},[e._v("Execute")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1),s("admin-task-console",{attrs:{id:e.remote_task_id,closeOnDone:""},on:{done:function(t){return e.$emit("changed")},error:function(t){return e.$emit("changed")}}})],1)},lt=[];function dt(e,t,s,a,i,r,o){try{var n=e[r](o),c=n.value}catch(l){return void s(l)}n.done?t(c):Promise.resolve(c).then(a,i)}function ut(e){return function(){var t=this,s=arguments;return new Promise((function(a,i){var r=e.apply(t,s);function o(e){dt(r,a,i,o,n,"next",e)}function n(e){dt(r,a,i,o,n,"throw",e)}o(void 0)}))}}var vt={name:"admin-rasterdb-dialog-bands",props:["meta"],components:{"admin-task-console":at},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,bandTableHeaders:[{text:"",align:"left",sortable:!1},{text:"index",align:"left",value:"index"},{text:"title",align:"left",value:"title"},{text:"visualisation",align:"left",value:"visualisation"},{text:"vis_min",align:"left",value:"vis_min"},{text:"vis_max",align:"left",value:"vis_max"},{text:"action",align:"left",value:"remove"}],bands:[],remote_task_id:void 0}},methods:{refresh:function(){this.bands=this.meta.bands.map((function(e){return{index:e.index,title:e.title,visualisation:e.visualisation,vis_min:e.vis_min,vis_max:e.vis_max}}))},execute:function(){var e=this;return ut(Je.a.mark((function t(){var s,a;return Je.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.$store.getters.apiUrl("rasterdb/"+e.meta.name+"/set"),t.prev=1,t.next=4,I.a.post(s,{meta:{bands:e.bands}});case 4:a=t.sent,console.log(a),e.bands.filter((function(e){return e.remove})).length>0?e.execute_bands_remove():(e.$emit("changed"),e.dialog=!1),t.next=16;break;case 9:t.prev=9,t.t0=t["catch"](1),e.setError=!0,e.setErrorMessage="Error setting property",console.log(t.t0),e.$emit("changed"),e.dialog=!1;case 16:case"end":return t.stop()}}),t,null,[[1,9]])})))()},execute_bands_remove:function(){var e=this;return ut(Je.a.mark((function t(){var s,a,i,r;return Je.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.$store.getters.apiUrl("api/remote_tasks"),a=e.bands.filter((function(e){return e.remove})).map((function(e){return e.index})),t.prev=2,t.next=5,I.a.post(s,{remote_task:{task_rasterdb:"remove_bands",rasterdb:e.meta.name,bands:a}});case 5:i=t.sent,console.log(i),e.$emit("changed"),e.dialog=!1,r=i.data.remote_task,e.remote_task_id=r.id,t.next=22;break;case 13:t.prev=13,t.t0=t["catch"](2),console.log(t.t0),console.log(e.errorToText(t.t0)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t.t0),console.log(t.t0),e.$emit("changed"),e.dialog=!1;case 22:case"end":return t.stop()}}),t,null,[[2,13]])})))()},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},mt=vt,pt=(s("6f24"),Object(p["a"])(mt,ct,lt,!1,null,"89c42bb4",null)),_t=pt.exports,ft=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticStyle:{display:"inline-block"}},[s("v-dialog",{attrs:{lazy:"",absolute:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"Show URL for WMS based access to this RasterDB layer."},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("WMS access ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("WMS access of "),s("i",[e._v("RasterDB")]),e._v(" "),s("b",[e._v(e._s(e.meta.name))])])]),e._v(" WMS URL: "),s("v-btn",{attrs:{title:"copy WMS URL of this RasterDB layer to clipboard"},on:{click:e.onUrlCopy}},[s("v-icon",[e._v("content_copy")]),e._v(" Copy to clipboard")],1),s("div",{staticClass:"wms-url"},[e._v(e._s(e.wmsUrl))]),s("br"),e._v(" Web Map Service (WMS) "),s("a",{attrs:{href:"https://www.ogc.org/standards/wms",target:"_blank"}},[e._v("specification")]),e._v(", "),s("a",{attrs:{href:"https://en.wikipedia.org/wiki/Web_Map_Service",target:"_blank"}},[e._v(" Wikipedia entry")]),s("br"),s("br"),s("h2",[e._v("WMS client "),s("a",{attrs:{href:"https://qgis.org/",target:"_blank"}},[e._v("Qgis 3")]),e._v(":")]),e._v(" At Qgis window "),s("i",[e._v("Browser")]),e._v("-Box rigth click on "),s("i",[e._v("WMS/WMTS")]),e._v("-list-entry, click the shown "),s("i",[e._v("New Connection...")]),e._v("-Button, the "),s("i",[e._v("Create a New WMS/WMTS Connection")]),e._v("-dialog opens, "),s("br"),e._v("at "),s("i",[e._v("Connection Details")]),e._v(" type a name in the "),s("i",[e._v("Name")]),e._v("-field (e.g. the layer name), and in the "),s("i",[e._v("URL")]),e._v("-field type or paste the above WMS URL for this layer, "),s("br"),e._v("if the RSDB server runs with login, at "),s("i",[e._v("Authentication")]),e._v(" select the "),s("i",[e._v("Basic")]),e._v("-tab, type your account details in the "),s("i",[e._v("User name")]),e._v("-field and the "),s("i",[e._v("Password")]),e._v("-field, Qgis does support BASIC-Authentication, but not DIGEST-Authentication, "),s("br"),e._v("click the "),s("i",[e._v("OK")]),e._v("-Button. "),s("br"),s("br"),e._v("The new layer is shown as list-entry in the sub-list of the "),s("i",[e._v("WMS/WMTS")]),e._v("-list-entry, double click on the sub-list-entry, a list of bands and visualisations is shown, "),s("br"),e._v("(optional) if the layer contains multiple points in time, exapnd the list by click on the arrow symbol on the left, "),s("br"),e._v("double click on a list-entry to view in Qgis, the layer is added to the Qgis-Layers in the "),s("i",[e._v("Layers")]),e._v("-Box. "),s("br"),s("br"),s("h2",[e._v("WMS client "),s("a",{attrs:{href:"http://openlayers.org/",target:"_blank"}},[e._v("OpenLayers")]),e._v(":")]),s("br"),s("b",[e._v("WMS GetCapabilities request:")]),s("br"),s("i",[e._v(e._s(e.wmsUrl)+"?REQUEST=GetCapabilities")]),s("br"),e._v(" or "),s("br"),s("i",[e._v(e._s(e.wmsUrl))]),s("br"),s("br"),s("b",[e._v("WMS GetMap request:")]),s("br"),s("i",[e._v(e._s(e.wmsUrl)+"?REQUEST=GetMap&modus=openlayers")]),s("br"),s("i",[e._v("&WIDTH=[WIDTH]")]),s("br"),s("i",[e._v("&HEIGHT=[HEIGHT]")]),s("br"),s("i",[e._v("&BBOX=[XMIN],[YMIN],[XMAX],[YMAX]")]),s("br"),s("i",[e._v("&LAYERS=[LAYER_NAME]")]),s("br"),s("br"),e._v(" Parameters "),s("i",[e._v("REQUEST")]),e._v(", "),s("i",[e._v("WIDTH")]),e._v(", "),s("i",[e._v("HEIGHT")]),e._v(", "),s("i",[e._v("BBOX")]),e._v(" are set by Openlayers. "),s("br"),e._v(" Parameter "),s("i",[e._v("LAYERS")]),e._v(" is set by user. "),s("br"),s("br"),s("b",[e._v("LAYERS:")]),e._v(" (optional) "),s("br"),e._v("Name of visualisation that is listed as layer in the GetCapabilities document. "),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Close")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1),s("v-snackbar",{attrs:{top:"",timeout:2e3},model:{value:e.snackbarCopiedToClipboard,callback:function(t){e.snackbarCopiedToClipboard=t},expression:"snackbarCopiedToClipboard"}},[e._v(" URL copied to clipboard "),s("v-btn",{attrs:{color:"pink",flat:""},on:{click:function(t){e.snackbarCopiedToClipboard=!1}}},[e._v("Close")])],1)],1)},ht=[];function bt(e){var t=document.createElement("textarea");t.style.position="fixed",t.style.top=0,t.style.left=0,t.style.width="2em",t.style.height="2em",t.style.padding=0,t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.select();try{var s=document.execCommand("copy"),a=s?"successful":"unsuccessful";console.log("copying text command was "+a)}catch(i){console.log("ERROR unable to copy: "+i)}document.body.removeChild(t)}var gt={name:"admin-rasterdb-dialog-wms",props:["meta"],components:{},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,snackbarCopiedToClipboard:!1}},methods:{refresh:function(){},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)},onUrlCopy:function(){bt(this.wmsUrl),this.snackbarCopiedToClipboard=!0}},computed:{identity:function(){return this.$store.state.identity.data},wmsUrl:function(){return void 0===this.identity||void 0===this.meta?"[unknown]":this.identity.url_base+"/rasterdb/"+this.meta.name+"/wms"}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},yt=gt,xt=(s("eaa4"),Object(p["a"])(yt,ft,ht,!1,null,"47d8c8ce",null)),wt=xt.exports,kt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticStyle:{display:"inline-block"}},[s("v-dialog",{attrs:{lazy:"",absolute:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"Show URL for WCS based access to this RasterDB layer."},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("WCS access ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("WCS access of "),s("i",[e._v("RasterDB")]),e._v(" "),s("b",[e._v(e._s(e.meta.name))])])]),e._v(" WCS URL: "),s("v-btn",{attrs:{title:"copy WCS URL of this RasterDB layer to clipboard"},on:{click:e.onUrlCopy}},[s("v-icon",[e._v("content_copy")]),e._v(" Copy to clipboard")],1),s("div",{staticClass:"wcs-url"},[e._v(e._s(e.wcsUrl))]),s("br"),e._v(" Web Coverage Service (WCS) "),s("a",{attrs:{href:"http://www.opengeospatial.org/standards/wcs",target:"_blank"}},[e._v("specification")]),e._v(", "),s("a",{attrs:{href:"https://en.wikipedia.org/wiki/Web_Coverage_Service",target:"_blank"}},[e._v(" Wikipedia entry")]),s("br"),s("br"),s("h2",[e._v("WCS client "),s("a",{attrs:{href:"https://qgis.org/",target:"_blank"}},[e._v("Qgis 3")]),e._v(":")]),e._v(" At Qgis window "),s("i",[e._v("Browser")]),e._v("-Box rigth click on "),s("i",[e._v("WCS")]),e._v("-list-entry, click the shown "),s("i",[e._v("New Connection...")]),e._v("-Button, the "),s("i",[e._v("Create a New WCS Connection")]),e._v("-dialog opens, "),s("br"),e._v("at "),s("i",[e._v("Connection Details")]),e._v(" type a name in the "),s("i",[e._v("Name")]),e._v("-field (e.g. the layer name), and in the "),s("i",[e._v("URL")]),e._v("-field type or paste the above WCS URL for this layer, "),s("br"),e._v("if the RSDB server runs with login, at "),s("i",[e._v("Authentication")]),e._v(" select the "),s("i",[e._v("Basic")]),e._v("-tab, type your account details in the "),s("i",[e._v("User name")]),e._v("-field and the "),s("i",[e._v("Password")]),e._v("-field, Qgis does support BASIC-Authentication, but not DIGEST-Authentication, "),s("br"),e._v("click the "),s("i",[e._v("OK")]),e._v("-Button. "),s("br"),s("br"),e._v("The new layer is shown as list-entry in the sub-list of the "),s("i",[e._v("WCS")]),e._v("-list-entry, double click on the sub-list-entry, a list-entry of the layer name is shown, "),s("br"),e._v("double click on this list-entry to view in Qgis, the layer is added to the Qgis-Layers in the "),s("i",[e._v("Layers")]),e._v("-Box. "),s("br"),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Close")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1),s("v-snackbar",{attrs:{top:"",timeout:2e3},model:{value:e.snackbarCopiedToClipboard,callback:function(t){e.snackbarCopiedToClipboard=t},expression:"snackbarCopiedToClipboard"}},[e._v(" URL copied to clipboard "),s("v-btn",{attrs:{color:"pink",flat:""},on:{click:function(t){e.snackbarCopiedToClipboard=!1}}},[e._v("Close")])],1)],1)},Et=[];function St(e){var t=document.createElement("textarea");t.style.position="fixed",t.style.top=0,t.style.left=0,t.style.width="2em",t.style.height="2em",t.style.padding=0,t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.select();try{var s=document.execCommand("copy"),a=s?"successful":"unsuccessful";console.log("copying text command was "+a)}catch(i){console.log("ERROR unable to copy: "+i)}document.body.removeChild(t)}var Ot={name:"admin-rasterdb-dialog-wcs",props:["meta"],components:{},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,snackbarCopiedToClipboard:!1}},methods:{refresh:function(){},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)},onUrlCopy:function(){St(this.wcsUrl),this.snackbarCopiedToClipboard=!0}},computed:{identity:function(){return this.$store.state.identity.data},wcsUrl:function(){return void 0===this.identity||void 0===this.meta?"[unknown]":this.identity.url_base+"/rasterdb/"+this.meta.name+"/wcs"}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},Pt=Ot,Ct=(s("ba66"),Object(p["a"])(Pt,kt,Et,!1,null,"728794dc",null)),Tt=Ct.exports,jt=s("8a5d");function Mt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Rt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(s),!0).forEach((function(t){$t(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Mt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function $t(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var At={name:"admin-rasterdb-detail",components:{"admin-rasterdb-dialog-set-info":ve,"admin-rasterdb-dialog-set-projection":be,"admin-rasterdb-dialog-set-associated":Pe,"admin-rasterdb-dialog-set-acl":ze,"admin-rasterdb-dialog-delete":Ve,"admin-rasterdb-dialog-remove-timestamps":nt,"admin-rasterdb-bands":_t,"admin-rasterdb-dialog-wms":wt,"admin-rasterdb-dialog-wcs":Tt,PulseLoader:jt["a"]},props:["rasterdb"],data:function(){return{meta:void 0,metaError:!1,metaErrorMessage:void 0,busy:!1,busyMessage:void 0,bandsTableHeaders:[{text:"Id",align:"right",value:"index",width:"55px"},{text:"Name",align:"left",value:"title"},{text:"Wavelength",align:"left",value:"wavelength",width:"10px"},{text:"Fwhm",align:"left",value:"fwhm",width:"10px"},{text:"Visualisation",align:"left",value:"visualisation",width:"100px"}],timeSliceTableHeaders:[{text:"Id",align:"right",value:"id",width:"55px"},{text:"Name",align:"left",value:"name"}],panel:[!0,!0]}},methods:{refresh:function(e){var t=this;this.$store.dispatch("rasterdbs/refresh");var s=this.$store.getters.apiUrl("rasterdb/"+t.rasterdb+"/meta.json"),a={};e&&(a.tile_count=!0,a.storage_size=!0,a.storage_internal_free_size=!0,a.tile_size_stats=!0),t.metaError=!1,t.metaErrorMessage=void 0,t.busy=!0,t.busyMessage="loading ...",I.a.get(s,{params:a}).then((function(e){t.meta=e.data,t.busy=!1,t.busyMessage=void 0})).catch((function(e){t.metaError=!0,t.metaErrorMessage="getting meta data: "+t.errorToText(e),t.meta=void 0,t.busy=!1,t.busyMessage=void 0}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data},optArray:function(e){return void 0===e?[]:Array.isArray(e)?e:[e]}},computed:Rt(Rt({},Object(c["b"])({isAdmin:"identity/isAdmin"})),{},{pixelSizeText:function(){return void 0===this.meta||void 0===this.meta.ref||void 0===this.meta.ref.pixel_size?"not set":this.meta.ref.pixel_size.x===this.meta.ref.pixel_size.y?+this.meta.ref.pixel_size.x.toPrecision(8)+" x "+ +this.meta.ref.pixel_size.x.toPrecision(8):+this.meta.ref.pixel_size.x.toPrecision(8)+" x "+ +this.meta.ref.pixel_size.y.toPrecision(8)},modify:function(){return void 0!==this.meta&&void 0!=this.meta.modify&&this.meta.modify},urlPrefix:function(){return this.$store.state.identity.urlPrefix},projection_units:function(){return void 0!==this.meta&&void 0!==this.meta.ref&&void 0!==this.meta.ref.unit&&void 0!==this.meta.ref.unit.name?this.meta.ref.unit.name:"projection units"}}),mounted:function(){this.refresh()},watch:{rasterdb:function(){this.refresh()}}},Dt=At,zt=(s("deb3"),Object(p["a"])(Dt,te,se,!1,null,"9d935e0e",null)),Nt=zt.exports,Lt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main"},[s("transition",{attrs:{name:"fade"}},[e.busy?s("div",{staticClass:"div-busy"},[s("pulse-loader"),e._v(e._s(e.busyMessage)+" ")],1):e._e()]),s("div",{staticStyle:{"text-align":"center","padding-right":"400px"}},[s("h3",{staticClass:"headline mb-0"},[e._v(" "+e._s(void 0===e.meta||void 0===e.meta.title||""===e.meta.title?e.pointcloud:e.meta.title)+" "),void 0!==e.meta&&void 0!==e.meta.associated.rasterdb?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/viewer/"+e.meta.associated.rasterdb,target:"_blank",title:"open layer in viewer on new tab"}},[s("v-icon",[e._v("zoom_in")])],1):e._e()],1),void 0!==e.meta&&void 0!==e.meta.title&&""!==e.meta.title?s("span",[s("span",{staticStyle:{"user-select":"none"}},[e._v("id: ")]),s("b",[e._v(e._s(e.pointcloud))])]):e._e()]),e.metaError?s("div",[s("b",[e._v("ERROR")]),e._v(" "+e._s(e.metaErrorMessage)+" ")]):e._e(),void 0!=e.meta?s("div",[s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.modify?s("admin-pointcloud-dialog-set-info",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Info ")],1),s("div",{staticClass:"meta-content"},[void 0!==e.meta.associated.rasterdb?s("a",{attrs:{href:"#/viewer/"+e.meta.associated.rasterdb,target:"_blank",title:"open layer in viewer on new tab"}},[s("img",{key:e.meta.associated.rasterdb,staticClass:"thumbnail",attrs:{src:e.$store.getters.apiUrl("rasterdb/"+e.meta.associated.rasterdb+"/raster.png?width=200"),alt:""}})]):e._e(),s("table",{staticStyle:{"padding-right":"420px"}},[s("tr",[e._m(0),s("td",[0===e.meta.description.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.description))])])]),s("tr",[e._m(1),s("td",[void 0===e.meta.acquisition_date?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.acquisition_date))])])]),s("tr",[e._m(2),s("td",[void 0===e.meta.corresponding_contact?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.corresponding_contact))])])]),s("tr",[e._m(3),s("td",[e._l(e.optArray(e.meta.tags),(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.optArray(e.meta.tags).length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.modify?s("admin-pointcloud-dialog-set-projection",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Projection ")],1),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(4),s("td",[void 0===e.meta.code||0===e.meta.code.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.code))])])]),s("tr",[e._m(5),s("td",[void 0===e.meta.proj4||0===e.meta.proj4.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.proj4))])])])])]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.modify?s("admin-pointcloud-dialog-set-associated",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Associated ")],1),s("div",{staticClass:"meta-content"},[0===Object.keys(e.meta.associated).length?s("span",{staticStyle:{color:"grey"}},[e._v(" (none) ")]):e._e(),s("table",e._l(e.meta.associated,(function(t,a){return s("tr",{key:a},[s("td",[s("b",[e._v(e._s(a)+":")])]),s("td",e._l(e.optArray(t),(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))]),"PointDB"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/pointdbs/"+t,title:"go to pointdb"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"pointcloud"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/pointclouds/"+t,title:"go to pointcloud"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"rasterdb"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/rasterdbs/"+t,title:"go to rasterdb"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"poi_groups"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/poi_groups/"+t,title:"go to POI group"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"roi_groups"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/roi_groups/"+t,title:"go to ROI group"}},[s("v-icon",[e._v("open_in_new")])],1):e._e()],1)})),0)])})),0)]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Details ")]),s("div",{staticClass:"meta-content"},[s("div",{staticStyle:{"padding-bottom":"10px"}},[s("b",[e._v("point attributes:")]),e._l(e.meta.attributes,(function(t){return s("span",{key:t},[s("span",{staticClass:"point-attributes"},[e._v(e._s(t))])])}))],2),s("table",{staticClass:"table-details",staticStyle:{display:"inline-block"}},[s("thead",[s("tr",[s("th",[e._v("Point precision "),s("div",{staticClass:"header-unit"},[e._v(e._s(e.projection_units))])]),s("th",[e._v("Tile size "),s("div",{staticClass:"header-unit"},[e._v(e._s(e.projection_units))])]),void 0!==e.meta.range?s("th",[e._v("Extent "),s("div",{staticClass:"header-unit"},[e._v(e._s(e.projection_units))])]):e._e(),void 0!==e.meta.extent?s("th",[e._v("Extent "),s("div",{staticClass:"header-unit"},[e._v("coordinates")])]):e._e()])]),s("tbody",[s("tr",[s("td",[e._v(e._s(1/e.meta.cell_scale))]),s("td",[e._v(e._s(e.meta.cell_size)+" "),s("b",[e._v("x")]),e._v(" "+e._s(e.meta.cell_size))]),void 0!==e.meta.range?s("td",[e._v(e._s(e.meta.range.x)+" "),s("b",[e._v("x")]),e._v(" "+e._s(e.meta.range.y))]):e._e(),void 0!==e.meta.extent?s("td",[e._v(e._s(e.meta.extent[0].toPrecision(8))),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.extent[1].toPrecision(8))+" "),s("b",[e._v("-")]),e._v(" "+e._s(e.meta.extent[2].toPrecision(8))),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.extent[3].toPrecision(8)))]):e._e()])])]),void 0===e.meta.storage_internal_free_size?s("v-btn",{staticStyle:{"vertical-align":"top"},on:{click:function(t){return e.refresh(!0)}}},[s("v-icon",[e._v("arrow_drop_down")]),e._v(" more")],1):e._e(),void 0!==e.meta.storage_internal_free_size?s("table",{staticClass:"table-details"},[s("thead",[s("tr",[void 0!==e.meta.cell_count?s("th",[e._v("Tiles "),s("div",{staticClass:"header-unit"},[e._v("count")])]):e._e(),void 0!==e.meta.cell_offset?s("th",[e._v("Tile reference point "),s("div",{staticClass:"header-unit"},[e._v("coordinates")])]):e._e(),void 0!==e.meta.cell_range?s("th",[e._v("Extent "),s("div",{staticClass:"header-unit"},[e._v("tiles")])]):e._e(),void 0!==e.meta.cell_extent?s("th",[e._v("Extent "),s("div",{staticClass:"header-unit"},[e._v("tile coordinates")])]):e._e()])]),s("tbody",[s("tr",[void 0!==e.meta.cell_count?s("td",[e._v(e._s(e.meta.cell_count))]):e._e(),void 0!==e.meta.cell_offset?s("td",[e._v(e._s(e.meta.cell_offset.x.toPrecision(8))),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.cell_offset.y.toPrecision(8)))]):e._e(),void 0!==e.meta.cell_range?s("td",[e._v(e._s(e.meta.cell_range.x)+" "),s("b",[e._v("x")]),e._v(" "+e._s(e.meta.cell_range.y))]):e._e(),void 0!==e.meta.cell_extent?s("td",[e._v(e._s(e.meta.cell_extent[0])),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.cell_extent[1])+" "),s("b",[e._v("-")]),e._v(" "+e._s(e.meta.cell_extent[2])),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.cell_extent[3]))]):e._e()])])]):e._e(),s("div",[e._v(".")]),void 0!==e.meta.storage_internal_free_size?s("table",{staticClass:"table-details"},[e._m(6),s("tbody",[s("tr",[void 0!==e.meta.storage_size?s("td",[e._v(e._s(e.meta.storage_size))]):s("td",[e._v("none")]),void 0!==e.meta.storage_internal_free_size?s("td",[e._v(e._s(e.meta.storage_internal_free_size))]):s("td",[e._v("none")]),void 0!==e.meta.cell_size_stats?s("td",[e._v("min: "+e._s(e.meta.cell_size_stats.min)+" mean: "+e._s(e.meta.cell_size_stats.mean)+" max: "+e._s(e.meta.cell_size_stats.max))]):s("td",[e._v("none")])])])]):e._e()],1),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.isAdmin?s("admin-pointcloud-dialog-set-acl",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Access control ")],1),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(7),s("td",[e._l(e.meta.acl,(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.meta.acl.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)]),s("tr",[e._m(8),s("td",[e._l(e.meta.acl_mod,(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.meta.acl_mod.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Applications ")]),s("div",{staticClass:"meta-content"},[s("v-btn",{on:{click:e.app_lidar_indices}},[s("v-icon",[e._v("folder_open")]),e._v(" LiDAR indices processing")],1),s("a",{attrs:{href:this.urlPrefix+"../../web/lidar_indices_description/lidar_indices_description.html",target:"_blank"}},[e._v("Indices Description")])],1),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Actions ")]),e.modify?s("div",{staticClass:"meta-content"},[s("admin-pointcloud-dialog-delete",{attrs:{meta:e.meta},on:{changed:e.refresh}})],1):e._e()],1):e._e()],1)},Bt=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("description:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("acquisition date:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("corresponding contact:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("tags:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("geo code:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("proj4:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("Storage size "),s("div",{staticClass:"header-unit"},[e._v("bytes")])]),s("th",[e._v("Storage internal free size "),s("div",{staticClass:"header-unit"},[e._v("bytes")])]),s("th",[e._v("Tile size "),s("div",{staticClass:"header-unit"},[e._v("bytes")])])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("access roles:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("modify roles:")])])}],It=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[s("v-icon",[e._v("create")])],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set Infos of "),s("i",[e._v("PointCloud")]),e._v(" "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-card-text",[s("v-text-field",{attrs:{label:"title"},model:{value:e.newTitle,callback:function(t){e.newTitle=t},expression:"newTitle"}})],1),s("v-card-text",[s("v-text-field",{attrs:{label:"description"},model:{value:e.newDescription,callback:function(t){e.newDescription=t},expression:"newDescription"}})],1),s("v-card-text",[s("v-text-field",{attrs:{label:"acquisition date"},model:{value:e.newAcquisition_date,callback:function(t){e.newAcquisition_date=t},expression:"newAcquisition_date"}})],1),s("v-card-text",[s("v-text-field",{attrs:{label:"corresponding contact"},model:{value:e.new_corresponding_contact,callback:function(t){e.new_corresponding_contact=t},expression:"new_corresponding_contact"}})],1),s("v-card-text",[e._v(" Tags "),s("multiselect",{attrs:{options:e.layer_tags,multiple:"",taggable:!0,placeholder:"select tags",tagPlaceholder:"Press enter to create a tag"},on:{tag:e.createTag},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set(t)}}},[e._v("Set")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},Ft=[];function Vt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Gt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(s),!0).forEach((function(t){Ut(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Vt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ut(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function qt(e){return void 0===e?[]:Array.isArray(e)?e:[e]}var Wt={name:"admin-pointcloud-dialog-set-description",props:["meta"],components:{Multiselect:C.a},data:function(){return{dialog:!1,newTitle:"",newDescription:"",newAcquisition_date:"",new_corresponding_contact:"",setError:!1,setErrorMessage:void 0,selectedTags:[],createdTags:[]}},computed:Gt(Gt({},Object(c["c"])({availableTags:function(e){return e.layer_tags.data}})),{},{layer_tags:function(){return void 0===this.availableTags?this.createdTags:this.availableTags.concat(this.createdTags)}}),methods:{createTag:function(e){this.createdTags.push(e),this.selectedTags.push(e)},refresh:function(){this.newTitle=this.meta.title,this.newDescription=this.meta.description,this.newAcquisition_date=void 0===this.meta.acquisition_date?"":this.meta.acquisition_date,this.new_corresponding_contact=void 0===this.meta.corresponding_contact?"":this.meta.corresponding_contact,this.selectedTags=qt(this.meta.tags),this.$store.dispatch("layer_tags/refresh")},set:function(){var e=this,t=this.$store.getters.apiUrl("pointclouds/"+e.meta.name);I.a.post(t,{pointcloud:{title:e.newTitle,description:e.newDescription,acquisition_date:e.newAcquisition_date,corresponding_contact:e.new_corresponding_contact,tags:e.selectedTags}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){e.setError=!0,e.setErrorMessage="Error setting property",console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},Ht=Wt,Jt=Object(p["a"])(Ht,It,Ft,!1,null,null,null),Qt=Jt.exports,Yt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[s("v-icon",[e._v("create")])],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set projection of "),s("i",[e._v("PointCloud")]),e._v(" "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-card-text",[void 0==e.newCode||null==e.newCode||e.newCode.startsWith("EPSG:")?e._e():s("span",{staticStyle:{color:"red"}},[s("v-icon",{attrs:{color:"red"}},[e._v("warning")]),e._v(" Projection code SHOULD start with "),s("b",[e._v("EPSG:")])],1),s("v-text-field",{attrs:{label:"projection code"},model:{value:e.newCode,callback:function(t){e.newCode=t},expression:"newCode"}}),e._v(" Code may be an "),s("a",{attrs:{href:"https://epsg.io",target:"_blank",rel:"noopener noreferrer"}},[e._v("EPSG")]),e._v(" identifier (e.g. 'EPSG:4326') ")],1),s("v-card-text",[s("v-text-field",{attrs:{label:"PROJ.4"},model:{value:e.newProj4,callback:function(t){e.newProj4=t},expression:"newProj4"}}),s("a",{attrs:{href:"http://proj4.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("PROJ.4")]),e._v(" description (e.g. '+proj=longlat +datum=WGS84 +no_defs ') ")],1),s("v-card-text",[e._v(" Ensure same projection for projection code and proj4 ! ")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set(t)}}},[e._v("Set")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},Kt=[],Xt={name:"admin-pointcloud-dialog-set-projection",props:["meta"],data:function(){return{dialog:!1,newCode:"",newProj4:"",setError:!1,setErrorMessage:void 0}},methods:{refresh:function(){this.newCode=this.meta.code,this.newProj4=this.meta.proj4},set:function(){var e=this,t=this.$store.getters.apiUrl("pointclouds/"+e.meta.name);I.a.post(t,{pointcloud:{code:e.newCode,proj4:e.newProj4}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error setting property: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},Zt=Xt,es=Object(p["a"])(Zt,Yt,Kt,!1,null,null,null),ts=es.exports,ss=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[s("v-icon",[e._v("create")])],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set Associated layers of "),s("i",[e._v("PointCloud")]),e._v(" "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-card-text",{staticStyle:{"min-height":"400px"}},[e._v(" RasterDB-layer: Raster-visualisation of this pointcloud. "),s("multiselect",{attrs:{options:e.rasterdbs,placeholder:"select rasterdb-layer","allow-empty":!0},model:{value:e.selectedRasterdb,callback:function(t){e.selectedRasterdb=t},expression:"selectedRasterdb"}}),s("br"),e._v(" POI-groups: Groups of named geo-points that can be used for processing this pointcloud. "),s("multiselect",{attrs:{options:e.poi_groups,placeholder:"select poi-groups","allow-empty":!0,multiple:!0},model:{value:e.selectedPoi_groups,callback:function(t){e.selectedPoi_groups=t},expression:"selectedPoi_groups"}}),s("br"),e._v(" ROI-groups: Groups of named polygons that can be used for processing this pointcloud. "),s("multiselect",{attrs:{options:e.roi_groups,placeholder:"select roi-groups","allow-empty":!0,multiple:!0},model:{value:e.selectedRoi_groups,callback:function(t){e.selectedRoi_groups=t},expression:"selectedRoi_groups"}})],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set(t)}}},[e._v("Set")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},as=[];function is(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function rs(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?is(Object(s),!0).forEach((function(t){os(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):is(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function os(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var ns={name:"admin-pointcloud-dialog-set-associated",props:["meta"],components:{Multiselect:C.a},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,selectedRasterdb:void 0,selectedPoi_groups:[],selectedRoi_groups:[]}},computed:rs({},Object(c["b"])({rasterdbs:"rasterdbs/names",poi_groups:"poi_groups/names",roi_groups:"roi_groups/names"})),methods:{refresh:function(){this.selectedRasterdb=this.meta.associated.rasterdb,this.selectedPoi_groups=this.meta.associated.poi_groups,this.selectedRoi_groups=this.meta.associated.roi_groups,this.$store.dispatch("rasterdbs/refresh"),this.$store.dispatch("poi_groups/refresh"),this.$store.dispatch("roi_groups/refresh")},set:function(){var e=this,t=this.$store.getters.apiUrl("pointclouds/"+e.meta.name),s={};void 0!==this.selectedRasterdb&&(s.rasterdb=this.selectedRasterdb),s.poi_groups=this.selectedPoi_groups,s.roi_groups=this.selectedRoi_groups,I.a.post(t,{pointcloud:{associated:s}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){e.setError=!0,e.setErrorMessage="Error setting property",console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},cs=ns,ls=Object(p["a"])(cs,ss,as,!1,null,null,null),ds=ls.exports,us=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[s("v-icon",[e._v("create")])],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set access control of "),s("i",[e._v("PointCloud")]),e._v(" "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-divider"),s("v-card-text",[e._v(" Specified roles can "),s("b",[e._v("read")]),e._v(" layer data. "),s("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclRole},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}})],1),s("v-card-text",[e._v(" Specified roles can "),s("b",[e._v("modify")]),e._v(" layer data. "),s("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclModRole},model:{value:e.selectedRolesMod,callback:function(t){e.selectedRolesMod=t},expression:"selectedRolesMod"}})],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set(t)}}},[e._v("Set")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},vs=[];function ms(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function ps(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ms(Object(s),!0).forEach((function(t){_s(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ms(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function _s(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var fs={name:"admin-pointcloud-dialog-set-projection",props:["meta"],components:{Multiselect:C.a},data:function(){return{dialog:!1,newCode:"",newProj4:"",setError:!1,setErrorMessage:void 0,selectedRoles:[],selectedRolesMod:[],availableRoles:[],createdAclRoles:[]}},computed:ps(ps({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}})),{},{acl_roles:function(){return this.availableRoles.concat(this.createdAclRoles)}}),methods:{createAclRole:function(e){this.createdAclRoles.push(e),this.selectedRoles.push(e)},createAclModRole:function(e){this.createdAclRoles.push(e),this.selectedRolesMod.push(e)},refresh:function(){var e=this;this.selectedRoles=this.meta.acl,this.selectedRolesMod=this.meta.acl_mod,I.a.get(this.urlPrefix+"../../api/roles").then((function(t){e.availableRoles=t.data.roles})).catch((function(e){console.log(e)}))},set:function(){var e=this,t=this.urlPrefix+"../../pointclouds/"+e.meta.name;I.a.post(t,{pointcloud:{acl:e.selectedRoles,acl_mod:e.selectedRolesMod}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error setting property: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},hs=fs,bs=Object(p["a"])(hs,us,vs,!1,null,null,null),gs=bs.exports,ys=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"Delete this PointCloud layer. This can not be undone."},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("delete_forever")]),e._v("delete entire layer ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("DELETE "),s("i",[e._v("PointCloud")]),e._v(" "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-card-text",[e._v(" Delete this PointCloud layer. "),s("b",[e._v("This can not be undone.")])]),s("v-card-text",[e._v(" Are you sure? ")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"red--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.delete_layer()}}},[e._v("Delete")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},xs=[],ws={name:"admin-pointcloud-dialog-delete",props:["meta"],data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0}},methods:{refresh:function(){},delete_layer:function(){var e=this,t=this.$store.getters.apiUrl("pointclouds/"+e.meta.name);I.a.post(t,{pointcloud:{delete_pointcloud:e.meta.name}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},ks=ws,Es=Object(p["a"])(ks,ys,xs,!1,null,null,null),Ss=Es.exports;function Os(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Ps(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Os(Object(s),!0).forEach((function(t){Cs(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Os(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Cs(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Ts={name:"admin-pointcloud-detail",components:{"admin-pointcloud-dialog-set-info":Qt,"admin-pointcloud-dialog-set-projection":ts,"admin-pointcloud-dialog-set-associated":ds,"admin-pointcloud-dialog-set-acl":gs,"admin-pointcloud-dialog-delete":Ss,PulseLoader:jt["a"]},props:["pointcloud"],data:function(){return{meta:void 0,metaError:!1,metaErrorMessage:void 0,busy:!1,busyMessage:void 0}},methods:{refresh:function(e){var t=this;this.$store.dispatch("pointclouds/refresh");var s=this.$store.getters.apiUrl("pointclouds/"+t.pointcloud),a={};e&&(a.extent=!0,a.cell_count=!0,a.storage_size=!0,a.storage_internal_free_size=!0,a.cell_size_stats=!0),t.metaError=!1,t.metaErrorMessage=void 0,t.busy=!0,t.busyMessage="loading ...",I.a.get(s,{params:a}).then((function(e){t.meta=e.data.pointcloud,t.busy=!1,t.busyMessage=void 0})).catch((function(e){console.log(e),t.metaError=!0,t.metaErrorMessage="ERROR getting meta: "+e,t.meta=void 0,t.busy=!1,t.busyMessage=void 0}))},optArray:function(e){return void 0===e?[]:Array.isArray(e)?e:[e]},app_lidar_indices:function(){var e=this.urlPrefix+"../../web/lidar_indices/lidar_indices.html";window.open(e,"_blank")}},computed:Ps(Ps({},Object(c["b"])({isAdmin:"identity/isAdmin"})),{},{modify:function(){return void 0!==this.meta&&void 0!=this.meta.modify&&this.meta.modify},urlPrefix:function(){return this.$store.state.identity.urlPrefix},projection_units:function(){return void 0!==this.meta.projection_unit&&void 0!==this.meta.projection_unit.name?this.meta.projection_unit.name:"projection units"}}),watch:{pointcloud:function(){this.refresh()}},mounted:function(){this.refresh()}},js=Ts,Ms=(s("6c90"),Object(p["a"])(js,Lt,Bt,!1,null,"23588c4a",null)),Rs=Ms.exports,$s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main"},[s("transition",{attrs:{name:"fade"}},[e.busy?s("div",{staticClass:"div-busy"},[s("pulse-loader"),e._v(e._s(e.busyMessage)+" ")],1):e._e()]),s("div",{staticStyle:{"text-align":"center","padding-right":"400px"}},[s("h3",{staticClass:"headline mb-0"},[e._v(" "+e._s(void 0===e.meta||void 0===e.meta.title||""===e.meta.title?e.voxeldb:e.meta.title)+" "),void 0!==e.meta&&void 0!==e.meta.associated.rasterdb?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/viewer/"+e.meta.associated.rasterdb,target:"_blank",title:"open layer in viewer on new tab"}},[s("v-icon",[e._v("zoom_in")])],1):e._e()],1),void 0!==e.meta&&void 0!==e.meta.title&&""!==e.meta.title?s("span",[s("span",{staticStyle:{"user-select":"none"}},[e._v("id: ")]),s("b",[e._v(e._s(e.voxeldb))])]):e._e()]),e.metaError?s("div",[s("b",[e._v("ERROR")]),e._v(" "+e._s(e.metaErrorMessage)+" ")]):e._e(),void 0!=e.meta?s("div",[s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.modify?s("admin-voxeldb-dialog-set-info",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Info ")],1),s("div",{staticClass:"meta-content"},[void 0!==e.meta.associated.rasterdb?s("a",{attrs:{href:"#/viewer/"+e.meta.associated.rasterdb,target:"_blank",title:"open layer in viewer on new tab"}},[s("img",{key:e.meta.associated.rasterdb,staticClass:"thumbnail",attrs:{src:e.$store.getters.apiUrl("rasterdb/"+e.meta.associated.rasterdb+"/raster.png?width=200"),alt:""}})]):e._e(),s("table",{staticStyle:{"padding-right":"420px"}},[s("tr",[e._m(0),s("td",[0===e.meta.description.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.description))])])]),s("tr",[e._m(1),s("td",[void 0===e.meta.acquisition_date?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.acquisition_date))])])]),s("tr",[e._m(2),s("td",[void 0===e.meta.corresponding_contact?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.corresponding_contact))])])]),s("tr",[e._m(3),s("td",[e._l(e.optArray(e.meta.tags),(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.optArray(e.meta.tags).length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.modify?s("admin-voxeldb-dialog-set-projection",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Projection ")],1),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(4),s("td",[void 0===e.meta.ref.epsg||0===e.meta.ref.epsg.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.ref.epsg))])])]),s("tr",[e._m(5),s("td",[void 0===e.meta.ref.proj4||0===e.meta.ref.proj4.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.ref.proj4))])])])])]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.modify?s("admin-voxeldb-dialog-set-associated",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Associated ")],1),s("div",{staticClass:"meta-content"},[0===Object.keys(e.meta.associated).length?s("span",{staticStyle:{color:"grey"}},[e._v(" (none) ")]):e._e(),s("table",e._l(e.meta.associated,(function(t,a){return s("tr",{key:a},[s("td",[s("b",[e._v(e._s(a)+":")])]),s("td",e._l(e.optArray(t),(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))]),"PointDB"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/pointdbs/"+t,title:"go to pointdb"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"voxeldb"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/voxeldbs/"+t,title:"go to voxeldb"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"rasterdb"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/rasterdbs/"+t,title:"go to rasterdb"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"poi_groups"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/poi_groups/"+t,title:"go to POI group"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"roi_groups"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/roi_groups/"+t,title:"go to ROI group"}},[s("v-icon",[e._v("open_in_new")])],1):e._e()],1)})),0)])})),0)]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Details ")]),s("div",{staticClass:"meta-content"},[s("div",{staticStyle:{"padding-bottom":"10px"}},[s("b",[e._v("voxel attributes:")]),e._l(e.meta.attributes,(function(t){return s("span",{key:t},[s("span",{staticClass:"point-attributes"},[e._v(e._s(t))])])}))],2),s("table",{staticClass:"table-details",staticStyle:{display:"inline-block"}},[s("thead",[s("tr",[s("th",[e._v("Voxel size "),s("div",{staticClass:"header-unit"},[e._v(e._s(e.projection_units))])]),e._m(6),s("th",[e._v("Cell size "),s("div",{staticClass:"header-unit"},[e._v(e._s(e.projection_units))])]),e._m(7)])]),s("tbody",[s("tr",[s("td",[e._v(e._s(e.voxelSizeText))]),s("td",[e._v(e._s(e.cellSizeText))]),s("td",[e._v(e._s(e.cellSizeProjectedText))]),s("td",[e._v(e._s(+e.meta.ref.origin.x.toPrecision(8))),s("b",[e._v(",")]),e._v(" "+e._s(+e.meta.ref.origin.y.toPrecision(8))),s("b",[e._v(",")]),e._v(" "+e._s(+e.meta.ref.origin.z.toPrecision(8)))])])])]),void 0===e.meta.storage_measures?s("v-btn",{staticStyle:{"vertical-align":"top"},on:{click:function(t){return e.refresh(!0)}}},[s("v-icon",[e._v("arrow_drop_down")]),e._v(" more")],1):e._e(),void 0!==e.meta.storage_measures?s("table",{staticClass:"table-details"},[s("thead",[s("tr",[e._m(8),e._m(9),e._m(10),s("th",[e._v("Cell range "),s("div",{staticClass:"header-unit"},[e._v(e._s(e.projection_units))])])])]),s("tbody",[s("tr",[s("td",[e._v(e._s(e.meta.storage_measures.cell_range.xmin)),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.storage_measures.cell_range.ymin)),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.storage_measures.cell_range.zmin)+" "),s("b",[e._v("-")]),e._v(" "+e._s(e.meta.storage_measures.cell_range.xmax)),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.storage_measures.cell_range.ymax)),s("b",[e._v(",")]),e._v(" "+e._s(e.meta.storage_measures.cell_range.zmax))]),s("td",[e._v(e._s(e.cellRangeText))]),s("td",[e._v(e._s(e.cellRangeVoxelText))]),s("td",[e._v(e._s(e.cellRangeProjectedText))])])])]):e._e(),void 0!==e.meta.storage_measures?s("table",{staticClass:"table-details"},[s("thead",[s("tr",[e._m(11),s("th",[e._v("voxel range "),s("div",{staticClass:"header-unit"},[e._v(e._s(e.projection_units))])]),e._m(12)])]),s("tbody",[s("tr",[s("td",[e._v(e._s(e.voxelRangeText))]),s("td",[e._v(e._s(e.voxelRangeProjectedText))]),s("td",[s("span",{staticStyle:{color:"gray"}},[e._v("x:")]),e._v(e._s(+e.meta.storage_measures.extent.xmin.toPrecision(8))),s("b",[e._v(",")]),e._v(" "),s("span",{staticStyle:{color:"gray"}},[e._v("y:")]),e._v(e._s(+e.meta.storage_measures.extent.ymin.toPrecision(8))),s("b",[e._v(",")]),e._v(" "),s("span",{staticStyle:{color:"gray"}},[e._v("z:")]),e._v(e._s(+e.meta.storage_measures.extent.zmin.toPrecision(8))+" "),s("b",[e._v("-")]),e._v(" "),s("span",{staticStyle:{color:"gray"}},[e._v("x:")]),e._v(e._s(+e.meta.storage_measures.extent.xmax.toPrecision(8))),s("b",[e._v(",")]),e._v(" "),s("span",{staticStyle:{color:"gray"}},[e._v("y:")]),e._v(e._s(+e.meta.storage_measures.extent.ymax.toPrecision(8))),s("b",[e._v(",")]),e._v(" "),s("span",{staticStyle:{color:"gray"}},[e._v("z:")]),e._v(e._s(+e.meta.storage_measures.extent.zmax.toPrecision(8)))])])])]):e._e(),void 0!==e.meta.storage_measures?s("table",{staticClass:"table-details"},[e._m(13),s("tbody",[s("tr",[void 0!==e.meta.storage_measures.cell_count?s("td",[e._v(e._s(e.meta.storage_measures.cell_count))]):s("td",[e._v("none")]),void 0!==e.meta.storage_measures.cell_size_stats?s("td",[e._v("min: "+e._s(e.meta.storage_measures.cell_size_stats.min)+" mean: "+e._s(e.meta.storage_measures.cell_size_stats.mean)+" max: "+e._s(e.meta.storage_measures.cell_size_stats.max))]):s("td",[e._v("none")]),void 0!==e.meta.storage_measures.storage_size?s("td",[e._v(e._s(e.meta.storage_measures.storage_size))]):s("td",[e._v("none")]),void 0!==e.meta.storage_measures.storage_internal_free_size?s("td",[e._v(e._s(e.meta.storage_measures.storage_internal_free_size))]):s("td",[e._v("none")])])])]):e._e()],1),void 0!==e.meta&&void 0!==e.meta.time_slices?s("div",[s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Time slices ("+e._s(e.meta.time_slices.length)+") ")]),s("div",{staticClass:"meta-content"},[s("table",{staticClass:"table-details"},[e._m(14),s("tbody",e._l(e.meta.time_slices,(function(t){return s("tr",{key:t.id},[s("td",[e._v(e._s(t.id))]),s("td",[e._v(e._s(t.name))])])})),0)])])],1):e._e(),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.isAdmin?s("admin-voxeldb-dialog-set-acl",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Access control ")],1),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(15),s("td",[e._l(e.meta.acl,(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.meta.acl.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)]),s("tr",[e._m(16),s("td",[e._l(e.meta.acl_mod,(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.meta.acl_mod.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Actions ")]),e.modify?s("div",{staticClass:"meta-content"},[s("admin-voxeldb-dialog-delete",{attrs:{meta:e.meta},on:{changed:e.refresh}})],1):e._e()],1):e._e()],1)},As=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("description:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("acquisition date:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("corresponding contact:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("tags:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("EPSG:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("proj4:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("th",[e._v("Cell size "),s("div",{staticClass:"header-unit"},[e._v("voxels")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("th",[e._v("Origin "),s("div",{staticClass:"header-unit"},[e._v("coordinates")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("th",[e._v("Cell extent "),s("div",{staticClass:"header-unit"},[e._v("cell coordinates")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("th",[e._v("Cell range "),s("div",{staticClass:"header-unit"},[e._v("cells")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("th",[e._v("Cell range "),s("div",{staticClass:"header-unit"},[e._v("voxels")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("th",[e._v("voxel range "),s("div",{staticClass:"header-unit"},[e._v("voxels")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("th",[e._v("voxel extent "),s("div",{staticClass:"header-unit"},[e._v("coordinates")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("Cells "),s("div",{staticClass:"header-unit"},[e._v("count")])]),s("th",[e._v("Cell size "),s("div",{staticClass:"header-unit"},[e._v("bytes")])]),s("th",[e._v("Storage size "),s("div",{staticClass:"header-unit"},[e._v("bytes")])]),s("th",[e._v("Storage internal free size "),s("div",{staticClass:"header-unit"},[e._v("bytes")])])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("Id")]),s("th",[e._v("Name")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("access roles:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("modify roles:")])])}],Ds=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[s("v-icon",[e._v("create")])],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set Infos of "),s("i",[e._v("VoxelDB")]),e._v(" "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-card-text",[s("v-text-field",{attrs:{label:"title"},model:{value:e.newTitle,callback:function(t){e.newTitle=t},expression:"newTitle"}})],1),s("v-card-text",[s("v-text-field",{attrs:{label:"description"},model:{value:e.newDescription,callback:function(t){e.newDescription=t},expression:"newDescription"}})],1),s("v-card-text",[s("v-text-field",{attrs:{label:"acquisition date"},model:{value:e.newAcquisition_date,callback:function(t){e.newAcquisition_date=t},expression:"newAcquisition_date"}})],1),s("v-card-text",[s("v-text-field",{attrs:{label:"corresponding contact"},model:{value:e.new_corresponding_contact,callback:function(t){e.new_corresponding_contact=t},expression:"new_corresponding_contact"}})],1),s("v-card-text",[e._v(" Tags "),s("multiselect",{attrs:{options:e.layer_tags,multiple:"",taggable:!0,placeholder:"select tags",tagPlaceholder:"Press enter to create a tag"},on:{tag:e.createTag},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set(t)}}},[e._v("Set")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},zs=[];function Ns(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Ls(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ns(Object(s),!0).forEach((function(t){Bs(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ns(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Bs(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Is(e){return void 0===e?[]:Array.isArray(e)?e:[e]}var Fs={name:"admin-voxeldb-dialog-set-description",props:["meta"],components:{Multiselect:C.a},data:function(){return{dialog:!1,newTitle:"",newDescription:"",newAcquisition_date:"",new_corresponding_contact:"",setError:!1,setErrorMessage:void 0,selectedTags:[],createdTags:[]}},computed:Ls(Ls({},Object(c["c"])({availableTags:function(e){return e.layer_tags.data}})),{},{layer_tags:function(){return void 0===this.availableTags?this.createdTags:this.availableTags.concat(this.createdTags)}}),methods:{createTag:function(e){this.createdTags.push(e),this.selectedTags.push(e)},refresh:function(){this.newTitle=this.meta.title,this.newDescription=this.meta.description,this.newAcquisition_date=void 0===this.meta.acquisition_date?"":this.meta.acquisition_date,this.new_corresponding_contact=void 0===this.meta.corresponding_contact?"":this.meta.corresponding_contact,this.selectedTags=Is(this.meta.tags),this.$store.dispatch("layer_tags/refresh")},set:function(){var e=this,t=this.$store.getters.apiUrl("voxeldbs/"+e.meta.name);I.a.post(t,{voxeldb:{title:e.newTitle,description:e.newDescription,acquisition_date:e.newAcquisition_date,corresponding_contact:e.new_corresponding_contact,tags:e.selectedTags}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){e.setError=!0,e.setErrorMessage="Error setting property",console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},Vs=Fs,Gs=Object(p["a"])(Vs,Ds,zs,!1,null,null,null),Us=Gs.exports,qs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[s("v-icon",[e._v("create")])],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set projection of "),s("i",[e._v("VoxelDB")]),e._v(" "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-card-text",[e.isEpsg(e.newEpsg)?e._e():s("span",{staticStyle:{color:"red"}},[s("v-icon",{attrs:{color:"red"}},[e._v("warning")]),e._v(" EPSG needs to be a "),s("b",[e._v("number")]),e._v(". ")],1),s("v-text-field",{attrs:{label:"EPSG"},model:{value:e.newEpsg,callback:function(t){e.newEpsg=t},expression:"newEpsg"}}),s("a",{attrs:{href:"https://epsg.io",target:"_blank",rel:"noopener noreferrer"}},[e._v("EPSG")]),e._v(" is an identifying number (e.g. '4326'). ")],1),s("v-card-text",[s("v-text-field",{attrs:{label:"PROJ.4"},model:{value:e.newProj4,callback:function(t){e.newProj4=t},expression:"newProj4"}}),s("a",{attrs:{href:"http://proj4.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("PROJ.4")]),e._v(" description (e.g. '+proj=longlat +datum=WGS84 +no_defs ') ")],1),s("v-card-text",[e._v(" Ensure same projection for EPSG and proj4 ! ")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set(t)}}},[e._v("Set")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},Ws=[],Hs={name:"admin-voxeldb-dialog-set-projection",props:["meta"],data:function(){return{dialog:!1,newEpsg:"",newProj4:"",setError:!1,setErrorMessage:void 0}},methods:{refresh:function(){this.newEpsg=this.meta.ref.epsg,this.newProj4=this.meta.ref.proj4},set:function(){var e=this,t=this.$store.getters.apiUrl("voxeldbs/"+e.meta.name),s=this.isEpsg(e.newEpsg)?this.parseEpsg(e.newEpsg):0;I.a.post(t,{voxeldb:{epsg:s,proj4:e.newProj4}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error setting property: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data},isEpsg:function(e){return void 0!==e&&""!==e&&!isNaN(e)},parseEpsg:function(e){return+e}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},Js=Hs,Qs=Object(p["a"])(Js,qs,Ws,!1,null,null,null),Ys=Qs.exports,Ks=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[s("v-icon",[e._v("create")])],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set Associated layers of "),s("i",[e._v("VoxelDB")]),e._v(" "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-card-text",{staticStyle:{"min-height":"400px"}},[e._v(" RasterDB-layer: Raster-visualisation of this voxeldb. "),s("multiselect",{attrs:{options:e.rasterdbs,placeholder:"select rasterdb-layer","allow-empty":!0},model:{value:e.selectedRasterdb,callback:function(t){e.selectedRasterdb=t},expression:"selectedRasterdb"}}),s("br"),e._v(" POI-groups: Groups of named geo-points that can be used for processing this voxeldb. "),s("multiselect",{attrs:{options:e.poi_groups,placeholder:"select poi-groups","allow-empty":!0,multiple:!0},model:{value:e.selectedPoi_groups,callback:function(t){e.selectedPoi_groups=t},expression:"selectedPoi_groups"}}),s("br"),e._v(" ROI-groups: Groups of named polygons that can be used for processing this voxeldb. "),s("multiselect",{attrs:{options:e.roi_groups,placeholder:"select roi-groups","allow-empty":!0,multiple:!0},model:{value:e.selectedRoi_groups,callback:function(t){e.selectedRoi_groups=t},expression:"selectedRoi_groups"}})],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set(t)}}},[e._v("Set")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},Xs=[];function Zs(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function ea(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Zs(Object(s),!0).forEach((function(t){ta(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Zs(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ta(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var sa={name:"admin-voxeldb-dialog-set-associated",props:["meta"],components:{Multiselect:C.a},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,selectedRasterdb:void 0,selectedPoi_groups:[],selectedRoi_groups:[]}},computed:ea({},Object(c["b"])({rasterdbs:"rasterdbs/names",poi_groups:"poi_groups/names",roi_groups:"roi_groups/names"})),methods:{refresh:function(){this.selectedRasterdb=this.meta.associated.rasterdb,this.selectedPoi_groups=this.meta.associated.poi_groups,this.selectedRoi_groups=this.meta.associated.roi_groups,this.$store.dispatch("rasterdbs/refresh"),this.$store.dispatch("poi_groups/refresh"),this.$store.dispatch("roi_groups/refresh")},set:function(){var e=this,t=this.$store.getters.apiUrl("voxeldbs/"+e.meta.name),s={};void 0!==this.selectedRasterdb&&(s.rasterdb=this.selectedRasterdb),s.poi_groups=this.selectedPoi_groups,s.roi_groups=this.selectedRoi_groups,I.a.post(t,{voxeldb:{associated:s}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){e.setError=!0,e.setErrorMessage="Error setting property",console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},aa=sa,ia=Object(p["a"])(aa,Ks,Xs,!1,null,null,null),ra=ia.exports,oa=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[s("v-icon",[e._v("create")])],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set access control of "),s("i",[e._v("VoxelDB")]),e._v(" "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-divider"),s("v-card-text",[e._v(" Specified roles can "),s("b",[e._v("read")]),e._v(" layer data. "),s("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclRole},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}})],1),s("v-card-text",[e._v(" Specified roles can "),s("b",[e._v("modify")]),e._v(" layer data. "),s("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclModRole},model:{value:e.selectedRolesMod,callback:function(t){e.selectedRolesMod=t},expression:"selectedRolesMod"}})],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set(t)}}},[e._v("Set")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},na=[];function ca(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function la(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ca(Object(s),!0).forEach((function(t){da(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ca(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function da(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var ua={name:"admin-voxeldb-dialog-set-projection",props:["meta"],components:{Multiselect:C.a},data:function(){return{dialog:!1,newCode:"",newProj4:"",setError:!1,setErrorMessage:void 0,selectedRoles:[],selectedRolesMod:[],availableRoles:[],createdAclRoles:[]}},computed:la(la({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}})),{},{acl_roles:function(){return this.availableRoles.concat(this.createdAclRoles)}}),methods:{createAclRole:function(e){this.createdAclRoles.push(e),this.selectedRoles.push(e)},createAclModRole:function(e){this.createdAclRoles.push(e),this.selectedRolesMod.push(e)},refresh:function(){var e=this;this.selectedRoles=this.meta.acl,this.selectedRolesMod=this.meta.acl_mod,I.a.get(this.urlPrefix+"../../api/roles").then((function(t){e.availableRoles=t.data.roles})).catch((function(e){console.log(e)}))},set:function(){var e=this,t=this.urlPrefix+"../../voxeldbs/"+e.meta.name;I.a.post(t,{voxeldb:{acl:e.selectedRoles,acl_mod:e.selectedRolesMod}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error setting property: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},va=ua,ma=Object(p["a"])(va,oa,na,!1,null,null,null),pa=ma.exports,_a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"Delete this VoxelDB layer. This can not be undone."},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("delete_forever")]),e._v("delete entire layer ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("DELETE "),s("i",[e._v("VoxelDB")]),e._v(" "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-card-text",[e._v(" Delete this VoxelDB layer. "),s("b",[e._v("This can not be undone.")])]),s("v-card-text",[e._v(" Are you sure? ")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"red--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.delete_layer()}}},[e._v("Delete")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},fa=[],ha={name:"admin-voxeldb-dialog-delete",props:["meta"],data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0}},methods:{refresh:function(){},delete_layer:function(){var e=this,t=this.$store.getters.apiUrl("voxeldbs/"+e.meta.name);I.a.post(t,{voxeldb:{delete_voxeldb:e.meta.name}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},ba=ha,ga=Object(p["a"])(ba,_a,fa,!1,null,null,null),ya=ga.exports;function xa(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function wa(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?xa(Object(s),!0).forEach((function(t){ka(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):xa(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ka(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Ea={name:"admin-voxeldb-detail",components:{"admin-voxeldb-dialog-set-info":Us,"admin-voxeldb-dialog-set-projection":Ys,"admin-voxeldb-dialog-set-associated":ra,"admin-voxeldb-dialog-set-acl":pa,"admin-voxeldb-dialog-delete":ya,PulseLoader:jt["a"]},props:["voxeldb"],data:function(){return{meta:void 0,metaError:!1,metaErrorMessage:void 0,busy:!1,busyMessage:void 0}},methods:{refresh:function(e){var t=this;this.$store.dispatch("voxeldbs/refresh");var s=this.$store.getters.apiUrl("voxeldbs/"+t.voxeldb),a={};e&&(a.storage_measures=!0),t.metaError=!1,t.metaErrorMessage=void 0,t.busy=!0,t.busyMessage="loading ...",I.a.get(s,{params:a}).then((function(e){t.meta=e.data.voxeldb,t.busy=!1,t.busyMessage=void 0})).catch((function(e){console.log(e),t.metaError=!0,t.metaErrorMessage="ERROR getting meta: "+e,t.meta=void 0,t.busy=!1,t.busyMessage=void 0}))},optArray:function(e){return void 0===e?[]:Array.isArray(e)?e:[e]},app_lidar_indices:function(){var e=this.urlPrefix+"../../web/lidar_indices/lidar_indices.html";window.open(e,"_blank")}},computed:wa(wa({},Object(c["b"])({isAdmin:"identity/isAdmin"})),{},{modify:function(){return void 0!==this.meta&&void 0!=this.meta.modify&&this.meta.modify},urlPrefix:function(){return this.$store.state.identity.urlPrefix},projection_units:function(){return void 0===this.meta||void 0===this.meta.ref||void 0===this.meta.ref.projection_unit||void 0===this.meta.ref.projection_unit.name?"projection units":this.meta.ref.projection_unit.name},voxelSizeText:function(){if(void 0===this.meta||void 0===this.meta.ref||void 0===this.meta.ref.voxel_size)return"not set";var e=this.meta.ref.voxel_size;return+e.x.toPrecision(8)+" x "+ +e.y.toPrecision(8)+" x "+ +e.z.toPrecision(8)},cellSizeText:function(){if(void 0===this.meta||void 0===this.meta.ref||void 0===this.meta.cell_size)return"not set";var e=this.meta.cell_size;return+e.x.toPrecision(8)+" x "+ +e.y.toPrecision(8)+" x "+ +e.z.toPrecision(8)},cellSizeProjectedText:function(){if(void 0===this.meta||void 0===this.meta.ref||void 0===this.meta.cell_size)return"not set";var e=this.meta.ref.voxel_size,t=this.meta.cell_size;return+(t.x*e.x).toPrecision(8)+" x "+ +(t.y*e.y).toPrecision(8)+" x "+ +(t.z*e.z).toPrecision(8)},cellRangeText:function(){if(void 0===this.meta||void 0===this.meta.ref||void 0===this.meta.ref.voxel_size)return"not set";var e=this.meta.storage_measures.cell_range;return e.xmax-e.xmin+1+" x "+(e.ymax-e.ymin+1)+" x "+(e.zmax-e.zmin+1)},cellRangeVoxelText:function(){if(void 0===this.meta||void 0===this.meta.ref||void 0===this.meta.ref.voxel_size)return"not set";var e=this.meta.storage_measures.cell_range,t=this.meta.cell_size;return(e.xmax-e.xmin+1)*t.x+" x "+(e.ymax-e.ymin+1)*t.y+" x "+(e.zmax-e.zmin+1)*t.z},voxelRangeText:function(){if(void 0===this.meta||void 0===this.meta.storage_measures||void 0===this.meta.storage_measures.local_range)return"not set";var e=this.meta.storage_measures.local_range;return e.xmax-e.xmin+1+" x "+(e.ymax-e.ymin+1)+" x "+(e.zmax-e.zmin+1)},voxelRangeProjectedText:function(){if(void 0===this.meta||void 0===this.meta.storage_measures||void 0===this.meta.storage_measures.local_range||void 0===this.meta.ref||void 0===this.meta.ref.voxel_size)return"not set";var e=this.meta.storage_measures.local_range,t=this.meta.ref.voxel_size;return+((e.xmax-e.xmin+1)*t.x).toPrecision(8)+" x "+ +((e.ymax-e.ymin+1)*t.y).toPrecision(8)+" x "+ +((e.zmax-e.zmin+1)*t.z).toPrecision(8)},cellRangeProjectedText:function(){if(void 0===this.meta||void 0===this.meta.ref||void 0===this.meta.ref.voxel_size)return"not set";var e=this.meta.storage_measures.cell_range,t=this.meta.cell_size,s=this.meta.ref.voxel_size;return(e.xmax-e.xmin+1)*t.x*s.x+" x "+(e.ymax-e.ymin+1)*t.y*s.y+" x "+(e.zmax-e.zmin+1)*t.z*s.z}}),watch:{voxeldb:function(){this.refresh()}},mounted:function(){this.refresh()}},Sa=Ea,Oa=(s("a330"),Object(p["a"])(Sa,$s,As,!1,null,"ce95ed86",null)),Pa=Oa.exports,Ca=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main"},[s("transition",{attrs:{name:"fade"}},[e.busy?s("div",{staticClass:"div-busy"},[s("pulse-loader"),e._v(e._s(e.busyMessage)+" ")],1):e._e()]),s("div",{staticStyle:{"text-align":"center","padding-right":"400px"}},[s("h3",{staticClass:"headline mb-0"},[e._v(" "+e._s(void 0===e.meta||void 0===e.meta.title||""===e.meta.title?e.vectordb:e.meta.title)+" "),s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/vectorviewer/"+e.vectordb,target:"_blank",title:"open layer in viewer on new tab"}},[s("v-icon",[e._v("zoom_in")])],1)],1),void 0!==e.meta&&void 0!==e.meta.title&&""!==e.meta.title?s("span",[s("span",{staticStyle:{"user-select":"none"}},[e._v("id: ")]),s("b",[e._v(e._s(e.vectordb))])]):e._e()]),e.metaError?s("div",[s("b",[e._v("ERROR")]),e._v(" "+e._s(e.metaErrorMessage)+" ")]):e._e(),void 0!=e.meta?s("div",[s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.modify?s("admin-vectordb-dialog-set-info",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Info ")],1),s("div",{staticClass:"meta-content",staticStyle:{poisition:"relative"}},[s("a",{attrs:{href:"#/vectorviewer/"+e.vectordb,target:"_blank",title:"open layer in viewer on new tab"}},[s("img",{key:e.meta.name,staticClass:"thumbnail",attrs:{src:e.$store.getters.apiUrl("vectordbs/"+e.meta.name+"/raster.png?width=400&height=600&datatag="+e.meta.datatag),alt:""}})]),s("table",{staticStyle:{"padding-right":"420px"}},[s("tr",[e._m(0),s("td",[0===e.meta.description.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.description))])])]),s("tr",[e._m(1),s("td",[void 0===e.meta.corresponding_contact?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.corresponding_contact))])])]),s("tr",[e._m(2),s("td",[e._l(e.optArray(e.meta.tags),(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.optArray(e.meta.tags).length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Content "),s("a",{directives:[{name:"show",rawName:"v-show",value:e.meta.data_filenames.length>0,expression:"meta.data_filenames.length > 0"}],staticStyle:{"font-size":"0.7em"},attrs:{href:e.urlPrefix+"../../vectordbs/"+e.meta.name+"/package.zip",download:e.meta.name+".zip",title:"download as ZIP-file"}},[s("v-icon",{attrs:{color:"blue"}},[e._v("cloud_download")]),e._v("(download)")],1)]),s("div",{staticClass:"meta-content"},[e.meta.data_filenames.length>0?s("table",e._l(e.meta.data_filenames,(function(t){return s("tr",{key:t},[s("td",{class:t===e.meta.data_filename?"data-filename-primary":"data-filename-other"},[e._v(e._s(t))]),t===e.meta.data_filename?s("td",[e._v(" <--")]):e._e()])})),0):e._e(),0===e.meta.data_filenames.length?s("div",{staticStyle:{color:"grey"}},[s("b",[e._v("no files.")]),e._v(' Click "Manage Files" to upload files. ')]):e._e()]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Details ")]),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(3),s("td",[e._v(e._s(e.meta.details.epsg))])]),s("tr",[e._m(4),s("td",[e._v(e._s(e.meta.details.proj4))])]),s("tr",[e._m(5),s("td",e._l(e.meta.details.attributes,(function(t){return s("span",{key:t},[s("span",{class:t===e.meta.name_attribute?"name-attribute":"attributes"},[e._v(e._s(t))])])})),0)]),s("tr",[e._m(6),e.meta.structured_access.poi||e.meta.structured_access.roi?e._e():s("td",[e._v("none")]),e.meta.structured_access.poi?s("td",[e._v("POI-group")]):e._e(),e.meta.structured_access.roi?s("td",[e._v("ROI-group")]):e._e()])]),s("admin-vectordb-dialog-data-table",{attrs:{meta:e.meta},on:{changed:e.refresh}})],1),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e.isAdmin?s("admin-vectordb-dialog-set-acl",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Access control ")],1),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(7),s("td",[e._l(e.meta.acl,(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.meta.acl.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)]),s("tr",[e._m(8),s("td",[e._l(e.meta.acl_mod,(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.meta.acl_mod.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Applications ")]),s("div",{staticClass:"meta-content"},[s("admin-vectordb-dialog-wfs",{attrs:{meta:e.meta},on:{changed:e.refresh}})],1),e.modify?s("div",[s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Actions ")]),s("div",{staticClass:"meta-content"},[s("b",[e._v("Manage:")]),e.modify?s("admin-vectordb-dialog-files",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e.modify?s("admin-vectordb-attributes",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e.modify?s("admin-vectordb-structured-access",{attrs:{meta:e.meta},on:{changed:function(t){e.refresh(),e.$store.dispatch("poi_groups/refresh"),e.$store.dispatch("roi_groups/refresh")}}}):e._e(),s("br"),s("br"),s("br"),e.modify?s("admin-vectordb-delete",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e()],1)],1):e._e()],1):e._e()],1)},Ta=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("description:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("corresponding contact:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("tags:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("EPSG:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("Proj4:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("attributes:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("structured access:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("access roles:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("modify roles:")])])}],ja=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"Delete this vector layer. This can not be undone."},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("delete_forever")]),e._v("delete entire layer ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("DELETE "),s("i",[e._v("VectorDB")]),e._v(" "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-card-text",[e._v(" Delete this vector layer. "),s("b",[e._v("This can not be undone.")])]),s("v-card-text",[e._v(" Are you sure? ")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"red--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.delete_layer()}}},[e._v("Delete")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},Ma=[],Ra={name:"admin-vectordb-delete",props:["meta"],data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0}},methods:{refresh:function(){},delete_layer:function(){var e=this,t=this.$store.getters.apiUrl("vectordbs/"+e.meta.name);I.a.delete(t).then((function(t){console.log(t),e.dialog=!1,e.$store.dispatch("vectordbs/refresh"),e.$emit("changed")})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t),e.dialog=!1,e.$store.dispatch("vectordbs/refresh")}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},$a=Ra,Aa=Object(p["a"])($a,ja,Ma,!1,null,null,null),Da=Aa.exports,za=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticStyle:{display:"inline-block"}},[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"Upload new files or remove existing files"},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("Files ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Upload / Remove Files")])]),s("v-card-text",[s("uploader",{ref:"uploader",staticClass:"uploader-example",attrs:{options:e.options},on:{"file-success":e.fileFinished}},[s("uploader-unsupport"),s("uploader-drop",[s("p",[s("b",[e._v("Upload")]),e._v(" (possibly multiple files at once) - Drop files here or")]),s("uploader-btn",[s("v-icon",[e._v("cloud_upload")]),e._v("select files")],1)],1),s("uploader-list")],1),s("br"),s("hr"),s("b",[e._v("Files in layer:")]),s("br"),s("br"),e.meta.data_filenames.length>0?s("table",e._l(e.meta.data_filenames,(function(t){return s("tr",{key:t},[s("td",{class:t===e.meta.data_filename?"data-filename-primary":"data-filename-other"},[e._v(e._s(t))]),t===e.meta.data_filename?s("td",[e._v(" <--")]):s("td"),t===e.meta.data_filename?s("td",[s("b",[e._v("(anchor)")])]):s("td",[s("button",{staticClass:"button-set-anchor",on:{click:function(s){return e.setAnchorFile(t)}}},[e._v("set anchor")])]),s("td",[s("button",{staticClass:"button-delete",on:{click:function(s){return e.deleteFile(t)}}},[e._v("delete file")])])])})),0):e._e(),0===e.meta.data_filenames.length?s("div",[e._v(" no data files ")]):e._e(),s("hr"),s("br"),s("i",[e._v('"anchor" should point to the vector-file that should be visualised. '),s("br"),e._v('For shapefile format anchor needs to be set to the ".shp"-file. '),s("br"),e._v('".gpkg"-files (GeoPackage) are also supported. ')])],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"grey--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Close")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1),s("admin-task-console",{attrs:{id:e.remote_task_id,closeOnDone:""},on:{done:function(t){return e.$emit("changed")},error:function(t){return e.$emit("changed")}}})],1)},Na=[],La=s("ef55"),Ba=s.n(La);a["default"].use(Ba.a);var Ia={name:"admin-vectordb-dialog-files",props:["meta"],components:{"admin-task-console":at},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,remote_task_id:void 0,need_refresh_catalog_entry:!1,options:{target:void 0,testChunks:!1,chunkSize:10485760,simultaneousUploads:1}}},methods:{refresh:function(){this.options.target=this.$store.getters.apiUrl("vectordbs/"+this.meta.name+"/files")},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)},fileFinished:function(){this.need_refresh_catalog_entry=!0,console.log("fileFinished"),this.$emit("changed")},deleteFile:function(e){var t=this;this.need_refresh_catalog_entry=!0;var s=this.$store.getters.apiUrl("vectordbs/"+t.meta.name+"/files/"+e);I.a.delete(s).then((function(e){console.log(e),t.$emit("changed")})).catch((function(e){console.log(e),console.log(t.errorToText(e)),t.setError=!0,t.setErrorMessage="Error: "+t.errorToText(e),console.log(e),t.$emit("changed")}))},setAnchorFile:function(e){var t=this;this.need_refresh_catalog_entry=!0;var s=this.$store.getters.apiUrl("vectordbs/"+t.meta.name);I.a.post(s,{data_filename:e}).then((function(e){console.log(e),t.$emit("changed")})).catch((function(e){console.log(e),console.log(t.errorToText(e)),t.setError=!0,t.setErrorMessage="Error: "+t.errorToText(e),console.log(e),t.$emit("changed")}))},refreshCatalogEntry:function(){var e=this,t=this.$store.getters.apiUrl("api/remote_tasks");I.a.post(t,{remote_task:{task_vectordb:"refresh_catalog_entry",vectordb:e.meta.name}}).then((function(t){console.log(t);var s=t.data.remote_task;e.remote_task_id=s.id})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t)}))}},computed:{},watch:{meta:function(){this.refresh()},dialog:function(){if(this.dialog?this.refresh():this.need_refresh_catalog_entry&&(this.refreshCatalogEntry(),this.need_refresh_catalog_entry=!1),void 0!==this.$refs.uploader){var e=this.$refs.uploader.files.slice(0);for(var t in e)e[t].removeFile(e[t])}}},mounted:function(){this.refresh()}},Fa=Ia,Va=(s("6541"),Object(p["a"])(Fa,za,Na,!1,null,null,null)),Ga=Va.exports,Ua=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticStyle:{display:"inline-block"}},[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"Set name attibute"},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("Attributes ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set name attribute")])]),s("v-card-text",[s("br"),s("hr"),s("b",[e._v("Attributes:")]),s("br"),s("br"),s("table",e._l(e.meta.details.attributes,(function(t){return s("tr",{key:t},[s("td",{class:t===e.meta.name_attribute?"data-filename-primary":"data-filename-other"},[e._v(e._s(t))]),t===e.meta.name_attribute?s("td",[e._v(" <--")]):s("td"),t===e.meta.name_attribute?s("td",[s("b",[e._v("(name attribute)")])]):s("td",[s("button",{staticClass:"button-set-anchor",on:{click:function(s){return e.setNameAttribute(t)}}},[e._v("set name attribute")])])])})),0),0===e.meta.details.attributes.length?s("div",[e._v(" no attributes ")]):e._e(),s("hr"),s("br"),s("i",[e._v('"name attribute" denotes the attribut that should be used as name of a vector feature. ')])]),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"grey--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Close")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1),s("admin-task-console",{attrs:{id:e.remote_task_id,closeOnDone:""},on:{done:function(t){return e.$emit("changed")},error:function(t){return e.$emit("changed")}}})],1)},qa=[];a["default"].use(Ba.a);var Wa={name:"admin-vectordb-attributes",props:["meta"],components:{"admin-task-console":at},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,remote_task_id:void 0,need_refresh_catalog_entry:!1}},methods:{errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)},fileFinished:function(){this.need_refresh_catalog_entry=!0,console.log("fileFinished"),this.$emit("changed")},setNameAttribute:function(e){var t=this;this.need_refresh_catalog_entry=!0;var s=this.$store.getters.apiUrl("vectordbs/"+t.meta.name);I.a.post(s,{name_attribute:e}).then((function(e){console.log(e),t.$emit("changed")})).catch((function(e){console.log(e),console.log(t.errorToText(e)),t.setError=!0,t.setErrorMessage="Error: "+t.errorToText(e),console.log(e),t.$emit("changed")}))},refresh:function(){},refreshCatalogEntry:function(){var e=this,t=this.$store.getters.apiUrl("api/remote_tasks");I.a.post(t,{remote_task:{task_vectordb:"refresh_catalog_entry",vectordb:e.meta.name}}).then((function(t){console.log(t);var s=t.data.remote_task;e.remote_task_id=s.id})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t)}))}},computed:{},watch:{meta:function(){this.refresh()},dialog:function(){if(this.dialog?this.refresh():this.need_refresh_catalog_entry&&(this.refreshCatalogEntry(),this.need_refresh_catalog_entry=!1),void 0!==this.$refs.uploader){var e=this.$refs.uploader.files.slice(0);for(var t in e)e[t].removeFile(e[t])}}},mounted:function(){this.refresh()}},Ha=Wa,Ja=(s("2f00"),Object(p["a"])(Ha,Ua,qa,!1,null,null,null)),Qa=Ja.exports,Ya=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticStyle:{display:"inline-block"}},[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px",persistent:e.blocked},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"Set name attibute"},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("Structured Access ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("set structured access")])]),s("v-card-text",[s("br"),s("hr"),s("b",[e._v("enable/disable access types:")]),s("br"),s("br"),s("table",[s("tr",[s("td",[s("v-switch",{attrs:{label:"POI-group"},model:{value:e.structured_access_poi,callback:function(t){e.structured_access_poi=t},expression:"structured_access_poi"}})],1),s("td",{staticStyle:{"padding-left":"20px"}},[s("i",[e._v("view of named "),s("b",[e._v("points")]),e._v(" (Points Of Interest)")])])]),s("tr",[s("td",[s("v-switch",{attrs:{label:"ROI-group"},model:{value:e.structured_access_roi,callback:function(t){e.structured_access_roi=t},expression:"structured_access_roi"}})],1),s("td",{staticStyle:{"padding-left":"20px"}},[s("i",[e._v("view of named "),s("b",[e._v("polygons")]),e._v(" (Regions Of Interest)")])])])]),0===e.meta.details.attributes.length?s("div",[e._v(" no attributes ")]):e._e(),s("hr"),s("br"),s("p",[s("b",[e._v("Name")]),e._v(" of POI-group / ROI-group is identical to "),s("b",[e._v("vector layer name")]),e._v(".")]),s("p",[s("b",[e._v("Names")]),e._v(' for POIs and ROIs are determined by vector layer "'),s("b",[e._v("name attribute")]),e._v('" (may be set by "manage attributes" dialog).')]),s("p",[e._v("For "),s("b",[e._v("POIs")]),e._v(" just "),s("b",[e._v("point vector features")]),e._v(" are included in resulting POI collection. (Other geometry types will be ignored.)")]),s("p",[e._v("For "),s("b",[e._v("ROIs")]),e._v(" just "),s("b",[e._v("polygon vector features")]),e._v(' are included in resulting ROI collection. Multi-polygons and "holes" are not supported. (Other geometry types will be ignored.)')]),s("p",[e._v("Projection is identical to source vector layer projection.")])]),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"grey--text darken-1",attrs:{flat:"flat",disabled:e.blocked},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat",disabled:e.blocked},nativeOn:{click:function(t){return e.apply(t)}}},[e._v("Apply")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1),s("admin-task-console",{attrs:{id:e.remote_task_id,closeOnDone:""},on:{done:function(t){return e.$emit("changed")},error:function(t){return e.$emit("changed")}}})],1)},Ka=[];function Xa(e,t,s,a,i,r,o){try{var n=e[r](o),c=n.value}catch(l){return void s(l)}n.done?t(c):Promise.resolve(c).then(a,i)}function Za(e){return function(){var t=this,s=arguments;return new Promise((function(a,i){var r=e.apply(t,s);function o(e){Xa(r,a,i,o,n,"next",e)}function n(e){Xa(r,a,i,o,n,"throw",e)}o(void 0)}))}}a["default"].use(Ba.a);var ei={name:"admin-vectordb-structured-access",props:["meta"],components:{"admin-task-console":at},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,remote_task_id:void 0,need_refresh_catalog_entry:!1,structured_access_poi:!1,structured_access_roi:!1,blocked:!1}},methods:{errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)},setNameAttribute:function(e){var t=this;this.need_refresh_catalog_entry=!0;var s=this.$store.getters.apiUrl("vectordbs/"+t.meta.name);I.a.post(s,{name_attribute:e}).then((function(e){console.log(e),t.$emit("changed")})).catch((function(e){console.log(e),console.log(t.errorToText(e)),t.setError=!0,t.setErrorMessage="Error: "+t.errorToText(e),console.log(e),t.$emit("changed")}))},refresh:function(){this.structured_access_poi=this.meta.structured_access.poi,this.structured_access_roi=this.meta.structured_access.roi,this.need_refresh_catalog_entry=!1},refreshCatalogEntry:function(){var e=this,t=this.$store.getters.apiUrl("api/remote_tasks");I.a.post(t,{remote_task:{task_vectordb:"refresh_catalog_entry",vectordb:e.meta.name}}).then((function(t){console.log(t);var s=t.data.remote_task;e.remote_task_id=s.id})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t)}))},apply:function(){var e=this;return Za(Je.a.mark((function t(){var s,a;return Je.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.blocked=!0,t.prev=1,s=e.$store.getters.apiUrl("vectordbs/"+e.meta.name),t.next=5,I.a.post(s,{structured_access:{poi:e.structured_access_poi,roi:e.structured_access_roi}});case 5:a=t.sent,console.log(a),e.dialog=!1,t.next=16;break;case 10:t.prev=10,t.t0=t["catch"](1),console.log(t.t0),console.log(e.errorToText(t.t0)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t.t0);case 16:return t.prev=16,e.blocked=!1,e.$emit("changed"),t.finish(16);case 20:case"end":return t.stop()}}),t,null,[[1,10,16,20]])})))()}},computed:{},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog?this.refresh():this.need_refresh_catalog_entry&&(this.refreshCatalogEntry(),this.need_refresh_catalog_entry=!1)}},mounted:function(){this.refresh()}},ti=ei,si=(s("8890"),Object(p["a"])(ti,Ya,Ka,!1,null,null,null)),ai=si.exports,ii=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[s("v-icon",[e._v("create")])],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set Infos of "),s("i",[e._v("VectorDB")]),e._v(" "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-card-text",[s("v-text-field",{attrs:{label:"title"},model:{value:e.newTitle,callback:function(t){e.newTitle=t},expression:"newTitle"}})],1),s("v-card-text",[s("v-text-field",{attrs:{label:"description"},model:{value:e.newDescription,callback:function(t){e.newDescription=t},expression:"newDescription"}})],1),s("v-card-text",[s("v-text-field",{attrs:{label:"corresponding contact"},model:{value:e.new_corresponding_contact,callback:function(t){e.new_corresponding_contact=t},expression:"new_corresponding_contact"}})],1),s("v-card-text",[e._v(" Tags "),s("multiselect",{attrs:{options:e.layer_tags,multiple:"",taggable:!0,placeholder:"select tags",tagPlaceholder:"Press enter to create a tag"},on:{tag:e.createTag},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set(t)}}},[e._v("Set")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},ri=[];function oi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function ni(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?oi(Object(s),!0).forEach((function(t){ci(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):oi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ci(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function li(e){return void 0===e?[]:Array.isArray(e)?e:[e]}var di={name:"admin-vectordb-dialog-set-info",props:["meta"],components:{Multiselect:C.a},data:function(){return{dialog:!1,newTitle:"",newDescription:"",newAcquisition_date:"",new_corresponding_contact:"",setError:!1,setErrorMessage:void 0,selectedTags:[],createdTags:[]}},computed:ni(ni({},Object(c["c"])({availableTags:function(e){return void 0===e.layer_tags.data?[]:e.layer_tags.data}})),{},{layer_tags:function(){return void 0===this.availableTags?this.createdTags:this.availableTags.concat(this.createdTags)}}),methods:{createTag:function(e){this.createdTags.push(e),this.selectedTags.push(e)},refresh:function(){this.newTitle=this.meta.title,this.newDescription=this.meta.description,this.newAcquisition_date=void 0===this.meta.acquisition_date?"":this.meta.acquisition_date,this.new_corresponding_contact=void 0===this.meta.corresponding_contact?"":this.meta.corresponding_contact,this.selectedTags=li(this.meta.tags),this.$store.dispatch("layer_tags/refresh")},set:function(){var e=this,t=this.$store.getters.apiUrl("vectordbs/"+e.meta.name);I.a.post(t,{title:e.newTitle,description:e.newDescription,corresponding_contact:e.new_corresponding_contact,tags:e.selectedTags}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){e.setError=!0,e.setErrorMessage="Error setting property",console.log(t),e.$emit("changed"),e.dialog=!1}))}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},ui=di,vi=Object(p["a"])(ui,ii,ri,!1,null,null,null),mi=vi.exports,pi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[s("v-icon",[e._v("create")])],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Set access control of "),s("i",[e._v("VectorDB")]),e._v(" "),s("b",[e._v(e._s(e.meta.name))])])]),s("v-divider"),s("v-card-text",[e._v(" Specified roles can "),s("b",[e._v("read")]),e._v(" layer data. "),s("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclRole},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}})],1),s("v-card-text",[e._v(" Specified roles can "),s("b",[e._v("modify")]),e._v(" layer data. "),s("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclModRole},model:{value:e.selectedRolesMod,callback:function(t){e.selectedRolesMod=t},expression:"selectedRolesMod"}})],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set(t)}}},[e._v("Set")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},_i=[];function fi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function hi(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?fi(Object(s),!0).forEach((function(t){bi(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):fi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function bi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var gi={name:"admin-vectordb-dialog-set-acl",props:["meta"],components:{Multiselect:C.a},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,selectedRoles:[],selectedRolesMod:[],availableRoles:[],createdAclRoles:[]}},computed:hi(hi({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}})),{},{acl_roles:function(){return this.availableRoles.concat(this.createdAclRoles)}}),methods:{createAclRole:function(e){this.createdAclRoles.push(e),this.selectedRoles.push(e)},createAclModRole:function(e){this.createdAclRoles.push(e),this.selectedRolesMod.push(e)},refresh:function(){var e=this;this.selectedRoles=this.meta.acl,this.selectedRolesMod=this.meta.acl_mod,I.a.get(this.urlPrefix+"../../api/roles").then((function(t){e.availableRoles=t.data.roles})).catch((function(e){console.log(e)}))},set:function(){var e=this,t=this.urlPrefix+"../../vectordbs/"+e.meta.name;I.a.post(t,{acl:e.selectedRoles,acl_mod:e.selectedRolesMod}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error setting property: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},yi=gi,xi=Object(p["a"])(yi,pi,_i,!1,null,null,null),wi=xi.exports,ki=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"show vector data properties as table"},slot:"activator"},[s("v-icon",[e._v("storage")]),e._v(" open data table ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("Data Table")])]),s("v-data-table",{attrs:{headers:e.headers,items:e.data},scopedSlots:e._u([{key:"items",fn:function(t){return e._l(e.attributes.length,(function(a,i){return s("td",{key:i},[e._v(e._s(t.item[i]))])}))}}])}),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"grey--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Close")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},Ei=[],Si={name:"admin-vectordb-dialog-data-table",props:["meta"],components:{},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,attributes:["a","b","c"],data:[]}},methods:{errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)},refresh:function(){var e=this,t=this.$store.getters.apiUrl("vectordbs/"+e.meta.name+"/table.json");I.a.get(t,{}).then((function(t){console.log(t),e.attributes=t.data.attributes,e.data=t.data.data})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t)}))}},computed:{headers:function(){return this.attributes.map((function(e){return{text:e,value:1}}))}},watch:{meta:function(){this.dialog&&this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.dialog&&this.refresh()}},Oi=Si,Pi=Object(p["a"])(Oi,ki,Ei,!1,null,"a589a526",null),Ci=Pi.exports,Ti=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticStyle:{display:"inline-block"}},[s("v-dialog",{attrs:{lazy:"",absolute:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"Show URL for WFS based access to this VectorDB layer."},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("WFS access ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("WFS access of "),s("i",[e._v("VectorDB")]),e._v(" "),s("b",[e._v(e._s(e.meta.name))])])]),e._v(" WFS URL: "),s("v-btn",{attrs:{title:"copy WFS URL of this VectorDB layer to clipboard"},on:{click:e.onUrlCopy}},[s("v-icon",[e._v("content_copy")]),e._v(" Copy to clipboard")],1),s("div",{staticClass:"wfs-url"},[e._v(e._s(e.wfsUrl))]),s("br"),e._v(" Web Feature Service (WFS) "),s("a",{attrs:{href:"https://www.ogc.org/standards/wfs",target:"_blank"}},[e._v("specification")]),e._v(", "),s("a",{attrs:{href:"https://en.wikipedia.org/wiki/Web_Feature_Service",target:"_blank"}},[e._v(" Wikipedia entry")]),s("br"),s("br"),s("h2",[e._v("WFS client "),s("a",{attrs:{href:"https://qgis.org/",target:"_blank"}},[e._v("Qgis 3")]),e._v(":")]),e._v(" At Qgis window "),s("i",[e._v("Browser")]),e._v("-Box rigth click on "),s("i",[e._v("WFS")]),e._v("-list-entry, click the shown "),s("i",[e._v("New Connection...")]),e._v("-Button, the "),s("i",[e._v("Create a New WFS Connection")]),e._v("-dialog opens, "),s("br"),e._v("at "),s("i",[e._v("Connection Details")]),e._v(" type a name in the "),s("i",[e._v("Name")]),e._v("-field (e.g. the layer name), and in the "),s("i",[e._v("URL")]),e._v("-field type or paste the above WFS URL for this layer, "),s("br"),e._v("if the RSDB server runs with login, at "),s("i",[e._v("Authentication")]),e._v(" select the "),s("i",[e._v("Basic")]),e._v("-tab, type your account details in the "),s("i",[e._v("User name")]),e._v("-field and the "),s("i",[e._v("Password")]),e._v("-field, Qgis does support BASIC-Authentication, but not DIGEST-Authentication, "),s("br"),e._v("click the "),s("i",[e._v("OK")]),e._v("-Button. "),s("br"),s("br"),e._v("The new layer is shown as list-entry in the sub-list of the "),s("i",[e._v("WFS")]),e._v("-list-entry, double click on the sub-list-entry, a list-entry of the layer name is shown, "),s("br"),e._v("double click on this list-entry to view in Qgis, the layer is added to the Qgis-Layers in the "),s("i",[e._v("Layers")]),e._v("-Box. "),s("br"),s("br"),s("b",[e._v("Note")]),e._v(": Qgis does cache received network data. If you changed layer (meta-)data and if it is not reflected in Qgis, do the following: "),s("br"),e._v("Remove the relevant entries in the Qgis Layers-box. "),s("br"),e._v("At Main-menu "),s("i",[e._v("Setting")]),e._v(", click "),s("i",[e._v('Options..."')]),e._v("-entry. The "),s("i",[e._v("Options")]),e._v(" dialog-box opens. Select Page "),s("i",[e._v("Network")]),e._v(" on the left. "),s("br"),e._v("At "),s("i",[e._v("Cache Settings")]),e._v("-section, "),s("i",[e._v("Content")]),e._v("-tab click the "),s("i",[e._v("trash can")]),e._v("-symbol-button. "),s("br"),e._v("Cache is now cleared. Right click on the WFS-entry at the Browser-box, click "),s("i",[e._v("refresh")]),e._v("-button to load updated data. "),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Close")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1),s("v-snackbar",{attrs:{top:"",timeout:2e3},model:{value:e.snackbarCopiedToClipboard,callback:function(t){e.snackbarCopiedToClipboard=t},expression:"snackbarCopiedToClipboard"}},[e._v(" URL copied to clipboard "),s("v-btn",{attrs:{color:"pink",flat:""},on:{click:function(t){e.snackbarCopiedToClipboard=!1}}},[e._v("Close")])],1)],1)},ji=[];function Mi(e){var t=document.createElement("textarea");t.style.position="fixed",t.style.top=0,t.style.left=0,t.style.width="2em",t.style.height="2em",t.style.padding=0,t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.select();try{var s=document.execCommand("copy"),a=s?"successful":"unsuccessful";console.log("copying text command was "+a)}catch(i){console.log("ERROR unable to copy: "+i)}document.body.removeChild(t)}var Ri={name:"admin-vectordb-dialog-wfs",props:["meta"],components:{},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,snackbarCopiedToClipboard:!1}},methods:{refresh:function(){},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)},onUrlCopy:function(){Mi(this.wfsUrl),this.snackbarCopiedToClipboard=!0}},computed:{identity:function(){return this.$store.state.identity.data},wfsUrl:function(){return void 0===this.identity||void 0===this.meta?"[unknown]":this.identity.url_base+"/vectordbs/"+this.meta.name+"/wfs"}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},$i=Ri,Ai=(s("6b77"),Object(p["a"])($i,Ti,ji,!1,null,"479a5ddf",null)),Di=Ai.exports;function zi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Ni(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?zi(Object(s),!0).forEach((function(t){Li(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):zi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Li(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Bi={name:"admin-vectordb-detail",components:{PulseLoader:jt["a"],"admin-vectordb-delete":Da,"admin-vectordb-dialog-files":Ga,"admin-vectordb-attributes":Qa,"admin-vectordb-structured-access":ai,"admin-vectordb-dialog-set-info":mi,"admin-vectordb-dialog-set-acl":wi,"admin-vectordb-dialog-data-table":Ci,"admin-vectordb-dialog-wfs":Di},props:["vectordb"],data:function(){return{meta:void 0,metaError:!1,metaErrorMessage:void 0,busy:!1,busyMessage:void 0}},methods:{refresh:function(){var e=this;this.$store.dispatch("vectordbs/refresh");var t=this.urlPrefix+"../../vectordbs/"+e.vectordb;e.metaError=!1,e.metaErrorMessage=void 0,e.busy=!0,e.busyMessage="loading ...",I.a.get(t).then((function(t){e.meta=t.data.vectordb,e.busy=!1,e.busyMessage=void 0})).catch((function(t){e.metaError=!0,e.metaErrorMessage="getting meta data: "+e.errorToText(t),e.meta=void 0,e.busy=!1,e.busyMessage=void 0}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data},optArray:function(e){return void 0===e?[]:Array.isArray(e)?e:[e]}},computed:Ni(Ni(Ni({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}})),Object(c["b"])({isAdmin:"identity/isAdmin"})),{},{modify:function(){return void 0!==this.meta&&void 0!=this.meta.modify&&this.meta.modify}}),mounted:function(){this.refresh()},watch:{vectordb:function(){this.refresh()}}},Ii=Bi,Fi=(s("1725"),Object(p["a"])(Ii,Ca,Ta,!1,null,"01eeba0e",null)),Vi=Fi.exports,Gi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main"},[s("transition",{attrs:{name:"fade"}},[e.busy?s("div",{staticClass:"div-busy"},[s("pulse-loader"),e._v(e._s(e.busyMessage)+" ")],1):e._e()]),s("div",{staticStyle:{"text-align":"center","padding-right":"400px"}},[s("h3",{staticClass:"headline mb-0"},[e._v(" "+e._s(void 0===e.meta||void 0===e.meta.title||""===e.meta.title?e.pointdb:e.meta.title)+" "),void 0!==e.meta&&void 0!==e.meta.associated.rasterdb?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/viewer/"+e.meta.associated.rasterdb,target:"_blank",title:"open layer in viewer on new tab"}},[s("v-icon",[e._v("zoom_in")])],1):e._e()],1),void 0!==e.meta&&void 0!==e.meta.title&&""!==e.meta.title?s("span",[s("span",{staticStyle:{"user-select":"none"}},[e._v("id: ")]),s("b",[e._v(e._s(e.pointdb))])]):e._e()]),e.metaError?s("div",[s("b",[e._v("ERROR")]),e._v(" "+e._s(e.metaErrorMessage)+" ")]):e._e(),void 0!=e.meta?s("div",[s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Info ")]),s("div",{staticClass:"meta-content"},[void 0!==e.meta.associated.rasterdb?s("a",{attrs:{href:"#/viewer/"+e.meta.associated.rasterdb,target:"_blank",title:"open layer in viewer on new tab"}},[s("img",{key:e.meta.associated.rasterdb,staticClass:"thumbnail",attrs:{src:e.$store.getters.apiUrl("rasterdb/"+e.meta.associated.rasterdb+"/raster.png?width=200"),alt:""}})]):e._e(),s("table",{staticStyle:{"padding-right":"420px"}},[s("tr",[e._m(0),s("td",[0===e.meta.description.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.description))])])]),s("tr",[e._m(1),s("td",[void 0===e.meta.acquisition_date?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.acquisition_date))])])]),s("tr",[e._m(2),s("td",[void 0===e.meta.corresponding_contact?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.corresponding_contact))])])]),s("tr",[e._m(3),s("td",[e._l(e.optArray(e.meta.tags),(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.optArray(e.meta.tags).length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Projection ")]),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(4),s("td",[void 0===e.meta.epsg||0===e.meta.epsg.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.epsg))])])]),s("tr",[e._m(5),s("td",[void 0===e.meta.proj4||0===e.meta.proj4.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.proj4))])])])])]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Associated ")]),s("div",{staticClass:"meta-content"},[0===Object.keys(e.meta.associated).length?s("span",{staticStyle:{color:"grey"}},[e._v(" (none) ")]):e._e(),s("table",e._l(e.meta.associated,(function(t,a){return s("tr",{key:a},[s("td",[s("b",[e._v(e._s(a)+":")])]),s("td",e._l(e.optArray(t),(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))]),"PointDB"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/pointdbs/"+t,title:"go to pointdb"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"pointcloud"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/pointclouds/"+t,title:"go to pointcloud"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"rasterdb"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/rasterdbs/"+t,title:"go to rasterdb"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"poi_groups"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/poi_groups/"+t,title:"go to POI group"}},[s("v-icon",[e._v("open_in_new")])],1):e._e(),"roi_groups"===a?s("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/roi_groups/"+t,title:"go to ROI group"}},[s("v-icon",[e._v("open_in_new")])],1):e._e()],1)})),0)])})),0)]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Details ")]),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(6),s("td",[e._v(e._s(e.meta.classified))])]),s("tr",[e._m(7),s("td",[e._v(e._s(e.meta.classified_vegetation))])]),s("tr",[e._m(8),s("td",[e._v(e._s(e.meta.tile_size))])])])]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Access control ")]),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(9),s("td",[e._l(e.meta.acl,(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.meta.acl.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Applications ")]),s("div",{staticClass:"meta-content"},[s("v-btn",{on:{click:e.app_lidar_indices}},[s("v-icon",[e._v("folder_open")]),e._v(" LiDAR indices processing")],1),s("a",{attrs:{href:this.urlPrefix+"../../web/lidar_indices_description/lidar_indices_description.html",target:"_blank"}},[e._v("Indices Description")])],1)],1):e._e()],1)},Ui=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("description:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("acquisition date:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("corresponding contact:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("tags:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("EPSG:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("proj4:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("ground classified:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("vegetation classified:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("tile size:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("access roles:")])])}];function qi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Wi(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?qi(Object(s),!0).forEach((function(t){Hi(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):qi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Hi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Ji={name:"admin-pointdb-detail",components:{PulseLoader:jt["a"]},props:["pointdb"],data:function(){return{meta:void 0,metaError:!1,metaErrorMessage:void 0,busy:!1,busyMessage:void 0}},methods:{refresh:function(){var e=this,t=this.$store.getters.apiUrl("pointdb/info.json?db="+e.pointdb+"&statistics=false");e.metaError=!1,e.metaErrorMessage=void 0,e.busy=!0,e.busyMessage="loading ...",I.a.get(t).then((function(t){e.meta=t.data,e.busy=!1,e.busyMessage=void 0})).catch((function(t){console.log(t),e.metaError=!0,e.metaErrorMessage="ERROR getting meta: "+t,e.meta=void 0,e.busy=!1,e.busyMessage=void 0}))},optArray:function(e){return void 0===e?[]:Array.isArray(e)?e:[e]},app_lidar_indices:function(){var e=this.$store.getters.apiUrl("web/lidar_indices/lidar_indices.html");window.open(e,"_blank")}},computed:Wi(Wi({},Object(c["b"])({isAdmin:"identity/isAdmin"})),{},{modify:function(){return void 0!==this.meta&&void 0!=this.meta.modify&&this.meta.modify},urlPrefix:function(){return this.$store.state.identity.urlPrefix}}),watch:{pointdb:function(){this.refresh()}},mounted:function(){this.refresh()}},Qi=Ji,Yi=(s("adfc"),Object(p["a"])(Qi,Gi,Ui,!1,null,"e3bf4ce6",null)),Ki=Yi.exports,Xi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main"},[s("transition",{attrs:{name:"fade"}},[e.busy?s("div",{staticClass:"div-busy"},[s("pulse-loader"),e._v(e._s(e.busyMessage)+" ")],1):e._e()]),s("div",{staticStyle:{"text-align":"center"}},[s("h3",{staticClass:"headline mb-0"},[e._v(e._s(void 0===e.meta||void 0===e.meta.title||""===e.meta.title?e.poi_group:e.meta.title))]),void 0!==e.meta&&void 0!==e.meta.title&&""!==e.meta.title?s("span",[s("span",{staticStyle:{"user-select":"none"}},[e._v("id: ")]),s("b",[e._v(e._s(e.poi_group))])]):e._e()]),e.metaError?s("div",[s("b",[e._v("ERROR")]),e._v(" "+e._s(e.metaErrorMessage)+" ")]):e._e(),void 0!=e.meta?s("div",[s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Info ")]),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(0),s("td",[0===e.meta.description.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.description))])])]),s("tr",[e._m(1),s("td",[e._l(e.optArray(e.meta.tags),(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.optArray(e.meta.tags).length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)]),s("tr",[e._m(2),s("td",[0===e.meta.epsg.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.epsg))])])]),s("tr",[e._m(3),s("td",[0===e.meta.proj4.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.proj4))])])])])]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Access control ")]),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(4),s("td",[e._l(e.meta.acl,(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.meta.acl.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),s("v-divider",{staticClass:"meta-divider"}),s("v-card-title",[e._v(" "+e._s(e.meta.pois.length)+" POIs "),s("v-spacer"),s("v-spacer"),s("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),s("v-data-table",{attrs:{headers:e.headers,items:e.meta.pois,"hide-actions":"",search:e.search,"custom-filter":e.filterFunc,"custom-sort":e.sortFunc},scopedSlots:e._u([{key:"items",fn:function(t){return[s("td",[e._v(e._s(t.item.name))]),s("td",[e._v(e._s(t.item.x)+", "+e._s(t.item.y))])]}}],null,!1,947854177)})],1):e._e()],1)},Zi=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("description:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("tags:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("EPSG:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("Proj4:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("access roles:")])])}];function er(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function tr(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?er(Object(s),!0).forEach((function(t){sr(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):er(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function sr(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var ar={name:"admin-poi_group-detail",components:{PulseLoader:jt["a"]},props:["poi_group"],data:function(){return{meta:void 0,metaError:!1,metaErrorMessage:void 0,busy:!1,busyMessage:void 0,headers:[{text:"name",value:"name"},{text:"position",value:"position"}],search:void 0}},methods:{refresh:function(){var e=this,t=this.urlPrefix+"../../poi_groups/"+e.poi_group;e.metaError=!1,e.metaErrorMessage=void 0,e.busy=!0,e.busyMessage="loading ...",I.a.get(t).then((function(t){e.meta=t.data.poi_group,e.busy=!1,e.busyMessage=void 0})).catch((function(t){console.log(t),e.metaError=!0,e.metaErrorMessage="ERROR getting meta: "+t,e.meta=void 0,e.busy=!1,e.busyMessage=void 0}))},optArray:function(e){return void 0===e?[]:Array.isArray(e)?e:[e]},filterFunc:function(e,t){return e.filter((function(e){return e.name.search(new RegExp(t,"i"))>=0}))},cmpFunc:function(e,t){var s=new Intl.Collator(void 0,{numeric:!0}).compare;switch(console.log(e),e){case"position":return function(e,s){var a=e.x-s.x,i=0===a?e.y-s.y:a;return t?-i:i};default:return function(e,a){var i=s(e.name,a.name);return t?-i:i}}},sortFunc:function(e,t,s){return e.sort(this.cmpFunc(t,s))}},computed:tr(tr(tr({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}})),Object(c["b"])({isAdmin:"identity/isAdmin"})),{},{modify:function(){return void 0!==this.meta&&void 0!=this.meta.modify&&this.meta.modify}}),watch:{poi_group:function(){this.refresh()}},mounted:function(){this.refresh()}},ir=ar,rr=(s("712e"),Object(p["a"])(ir,Xi,Zi,!1,null,"141ce6b6",null)),or=rr.exports,nr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main"},[s("transition",{attrs:{name:"fade"}},[e.busy?s("div",{staticClass:"div-busy"},[s("pulse-loader"),e._v(e._s(e.busyMessage)+" ")],1):e._e()]),s("div",{staticStyle:{"text-align":"center"}},[s("h3",{staticClass:"headline mb-0"},[e._v(e._s(void 0===e.meta||void 0===e.meta.title||""===e.meta.title?e.roi_group:e.meta.title))]),void 0!==e.meta&&void 0!==e.meta.title&&""!==e.meta.title?s("span",[s("span",{staticStyle:{"user-select":"none"}},[e._v("id: ")]),s("b",[e._v(e._s(e.roi_group))])]):e._e()]),e.metaError?s("div",[s("b",[e._v("ERROR")]),e._v(" "+e._s(e.metaErrorMessage)+" ")]):e._e(),void 0!=e.meta?s("div",[s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Info ")]),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(0),s("td",[0===e.meta.description.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.description))])])]),s("tr",[e._m(1),s("td",[e._l(e.optArray(e.meta.tags),(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.optArray(e.meta.tags).length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)]),s("tr",[e._m(2),s("td",[0===e.meta.epsg.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.epsg))])])]),s("tr",[e._m(3),s("td",[0===e.meta.proj4.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):s("span",[e._v(e._s(e.meta.proj4))])])])])]),s("v-divider",{staticClass:"meta-divider"}),s("h3",{staticClass:"subheading mb-0"},[e._v(" Access control ")]),s("div",{staticClass:"meta-content"},[s("table",[s("tr",[e._m(4),s("td",[e._l(e.meta.acl,(function(t){return s("span",{key:t},[s("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.meta.acl.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),s("v-divider",{staticClass:"meta-divider"}),s("v-card-title",[e._v(" "+e._s(e.meta.rois.length)+" ROIs "),s("v-spacer"),s("v-spacer"),s("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),s("v-data-table",{attrs:{headers:e.headers,items:e.meta.rois,"hide-actions":"",search:e.search,"custom-filter":e.filterFunc},scopedSlots:e._u([{key:"items",fn:function(t){return[s("td",[e._v(e._s(t.item.name))]),s("td",[e._v(e._s(t.item.center[0])+", "+e._s(t.item.center[1]))]),s("td",[e._v(e._s(t.item.polygon.length-1))])]}}],null,!1,530476886)})],1):e._e()],1)},cr=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("description:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("tags:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("EPSG:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("Proj4:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("access roles:")])])}];function lr(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function dr(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(s),!0).forEach((function(t){ur(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):lr(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ur(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var vr={name:"admin-roi_group-detail",components:{PulseLoader:jt["a"]},props:["roi_group"],data:function(){return{meta:void 0,metaError:!1,metaErrorMessage:void 0,busy:!1,busyMessage:void 0,headers:[{text:"name",value:"name"},{text:"center position",value:"center"},{text:"point count",value:"polygon"}],search:void 0}},methods:{refresh:function(){var e=this,t=this.$store.getters.apiUrl("roi_groups/"+e.roi_group);e.metaError=!1,e.metaErrorMessage=void 0,e.busy=!0,e.busyMessage="loading ...",I.a.get(t).then((function(t){e.meta=t.data.roi_group,e.busy=!1,e.busyMessage=void 0})).catch((function(t){console.log(t),e.metaError=!0,e.metaErrorMessage="ERROR getting meta: "+t,e.meta=void 0,e.busy=!1,e.busyMessage=void 0}))},optArray:function(e){return void 0===e?[]:Array.isArray(e)?e:[e]},filterFunc:function(e,t){return e.filter((function(e){return e.name.search(new RegExp(t,"i"))>=0}))}},computed:dr(dr({},Object(c["b"])({isAdmin:"identity/isAdmin"})),{},{modify:function(){return void 0!==this.meta&&void 0!=this.meta.modify&&this.meta.modify}}),watch:{roi_group:function(){this.refresh()}},mounted:function(){this.refresh()}},mr=vr,pr=(s("e7b2"),Object(p["a"])(mr,nr,cr,!1,null,"25866a6f",null)),_r=pr.exports,fr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"main"},[s("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"olmap-explorer"}}),s("div",{staticClass:"innergrid-container",class:[e.filter_focus?"innergrid-item-nav-fill":"innergrid-item-nav-compact"]},[s("v-list",{staticClass:"innergrid-item-nav"},[s("v-list-tile",[void 0!==e.layer_tags?s("multiselect",{attrs:{options:e.layer_tags,"show-labels":!1,placeholder:"filter by tag",multiple:!0},on:{open:function(t){e.filter_focus=!0},close:function(t){e.filter_focus=!1}},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}}):e._e()],1),s("v-list-tile",[s("v-text-field",{staticStyle:{display:"inline-block"},attrs:{label:"search",clearable:"","append-icon":"search"},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1),s("v-list-tile",[s("v-btn",{staticStyle:{display:"inline-block"},attrs:{title:"zoom to all (filtered) layers"},on:{click:function(t){return e.zoomToEntries()}}},[s("v-icon",[e._v("control_camera")]),e._v("zoom fit")],1),s("v-btn",{staticStyle:{display:"inline-block"},attrs:{title:"select all (filtered) layers, even layers that are not visible on the map"},on:{click:function(t){return e.selectAllLayers()}}},[s("v-icon",[e._v("select_all")]),e._v("select all")],1)],1)],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:Object.keys(e.messages).length>0,expression:"Object.keys(messages).length > 0"}],staticClass:"message_box"},e._l(e.messages,(function(t,a){return s("div",{key:a},[s("ring-loader",{staticStyle:{display:"inline-block"},attrs:{color:"#000000",size:"25px"}}),e._v(" "+e._s(t)+" ")],1)})),0),e._l(e.notifications,(function(t,a){return s("v-snackbar",{key:a,attrs:{value:"true"}},[e._v(" "+e._s(t)),s("v-btn",{attrs:{flat:"",color:"pink"},nativeOn:{click:function(t){return e.removeNotification(a)}}},[e._v("Close")])],1)})),s("div",{staticClass:"hoverEntries"},[s("b",[e._v("hovered layers")]),e._l(e.hoverEntries,(function(t){return s("div",{key:t.name},[e._v(e._s(void 0===t.title?t.name:t.title))])}))],2),s("admin-explorer-selected",{attrs:{entries:e.selectedEntries,selectedTags:e.selectedTags,searchText:e.searchText}})],2)])},hr=[],br=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.show?s("div",{staticClass:"selectedEntries"},[s("div",{attrs:{id:"container"}},[s("v-btn",{attrs:{title:"go back to layer explorer map",icon:""},on:{click:function(t){e.show=!1}}},[s("v-icon",[e._v("arrow_back")])],1),s("h3",{staticClass:"headline mb-0",staticStyle:{"text-align":"center"}},[e._v(" Selected Layers ")]),s("v-btn",{attrs:{title:"go back to layer explorer map",icon:""},on:{click:function(t){e.show=!1}}},[s("v-icon",[e._v("cancel")])],1)],1),s("v-divider",{staticClass:"meta-divider"}),e.selectedTags.length>0?s("span",[e._v("by tags "),s("b",e._l(e.selectedTags,(function(t){return s("span",{key:t},[e._v(e._s(t))])})),0)]):e._e(),void 0!==e.searchText&&e.searchText.length>0?s("span",[e._v(" of search "),s("b",[e._v(e._s(e.searchText))])]):e._e(),s("v-data-table",{staticClass:"meta-content",attrs:{headers:e.tableHeaders,items:e.entries,pagination:e.pagination,"custom-sort":e.sortFunc,"hide-actions":""},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[s("td",[s("v-icon",{staticStyle:{"user-select":"none"},attrs:{title:t.item.type}},[e._v(e._s(e.getIcon(t.item)))]),void 0!==e.getMapLink(t.item)?s("a",{attrs:{href:e.getMapLink(t.item),title:"view on map",target:"_blank"}},[s("v-icon",{staticStyle:{"user-select":"none",color:"blue"}},[e._v("zoom_in")])],1):e._e()],1),s("td",[void 0!==e.getLink(t.item)?s("a",{attrs:{href:e.getLink(t.item),title:"view details",target:"_blank"}},[e._v(e._s(t.item.name))]):e._e()]),s("td",[e._v(e._s(void 0!==t.item.title?t.item.title:""))]),s("td",[e._v(e._s(t.item.description))])]}}],null,!1,1350650275)})],1):e._e()},gr=[],yr={name:"admin-explorer-selected",props:["entries","selectedTags","searchText"],data:function(){return{show:!1,tableHeaders:[{text:"type",align:"left",value:"type"},{text:"ID",align:"left",value:"name"},{text:"Title",align:"left",value:"title"},{text:"Description",align:"left",value:"description"}],pagination:{rowsPerPage:-1,sortBy:"title"}}},methods:{onShow:function(){this.show=!0},getIcon:function(e){switch(e.type){case"RasterDB":return"collections";case"PointDB":return"blur_on";case"pointcloud":return"grain";case"vectordb":return"category";default:return"device_unknown"}},getLink:function(e){switch(e.type){case"RasterDB":return"#/layers/rasterdbs/"+e.name;case"PointDB":return"#/layers/pointdbs/"+e.name;case"pointcloud":return"#/layers/pointclouds/"+e.name;case"vectordb":return"#/layers/vectordbs/"+e.name;default:return}},getMapLink:function(e){switch(e.type){case"RasterDB":return"#/viewer/"+e.name;case"PointDB":return void 0!==e.associated&&void 0!==e.associated.rasterdb?"#/viewer/"+e.associated.rasterdb:void 0;case"pointcloud":return void 0!==e.associated&&void 0!==e.associated.rasterdb?"#/viewer/"+e.associated.rasterdb:void 0;case"vectordb":return"#/vectorviewer/"+e.name;default:return}},sortFunc:function(e,t,s){console.log("index "+t);var a=(new Intl.Collator).compare;return e.sort((function(e,i){var r=e[t],o=i[t],n=a(void 0===r?e.name:r,void 0===o?i.name:o);return s?-n:n}))}},watch:{},mounted:function(){this.$parent.$on("admin-explorer-selected-show",this.onShow)}},xr=yr,wr=(s("7ac7"),Object(p["a"])(xr,br,gr,!1,null,"507879a8",null)),kr=wr.exports,Er=(s("5bc0"),s("5eee")),Sr=s("3e6b"),Or=s("480c"),Pr=s("5831"),Cr=s("d0e9"),Tr=s("a2c7"),jr=s("256f"),Mr=s("5bc3"),Rr=s("4cdf"),$r=s("21bc"),Ar=s("9d47"),Dr=s("020f"),zr=s("83a6"),Nr=s("8682"),Lr=s("6c77"),Br=s("ce2c"),Ir=s("a568");function Fr(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Vr(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Fr(Object(s),!0).forEach((function(t){Gr(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Fr(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Gr(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Ur=jr["k"]("EPSG:4326"),qr=jr["k"]("EPSG:3857"),Wr={name:"admin-explorer",components:{RingLoader:T["a"],Multiselect:C.a,"admin-explorer-selected":kr},data:function(){return{messages:{},messagesIndex:0,notifications:{},notificationsIndex:0,olmap:void 0,catalogLayer:void 0,catalog:[],hoverEntries:[],selectedEntries:[],selectedTags:[],searchText:"",filter_focus:!1}},methods:{addnotification:function(e){var t=this.notificationsIndex++;return a["default"].set(this.notifications,t,e),t},removeNotification:function(e){a["default"].delete(this.notifications,e)},addMessage:function(e){var t=this.messagesIndex++;return a["default"].set(this.messages,t,e),t},removeMessage:function(e){a["default"].delete(this.messages,e)},refreshCatalog:function(){var e=this,t=this.addMessage("loading catalog of layers ...");I.a.get(this.urlPrefix+"../../api/catalog.json").then((function(s){e.catalog=s.data,e.removeMessage(t)})).catch((function(){e.addnotification("ERROR loading catalog"),e.removeMessage(t)}))},refreshCatalogSource:function(e){var t=[];e.forEach((function(e){var s=e.polygon;if(void 0!==s){var a=new Mr["a"]([s]);a.transform(Ur,qr),t.push(new Rr["a"]({geometry:a,entry:e}))}}));var s=new Pr["a"]({features:t});this.catalogLayer.setSource(s),this.zoomToEntries()},zoomToEntries:function(){console.log("zoomToEntries");var e=180,t=90,s=-180,a=-90;this.filteredCatalog.forEach((function(i){var r=i.polygon;void 0!==r&&r.forEach((function(i){var r=i[0],o=i[1];r<e&&(e=r),o<t&&(t=o),s<r&&(s=r),a<o&&(a=o)}))}));var i=[e,t,s,a];console.log(i);var r=jr["h"]([e,t]),o=jr["h"]([s,a]),n=[r[0],r[1],o[0],o[1]];console.log(n),this.olmap.getView().fit(n)},selectAllLayers:function(){var e=this;e.selectedEntries=this.filteredCatalog,e.$emit("admin-explorer-selected-show")}},computed:Vr(Vr({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}})),{},{layer_tags:function(){return this.$store.state.layer_tags.data},filteredCatalog:function(){return this.catalog.filter(this.filterFun)},filterFun:function(){var e=this.tagFilterFun,t=this.searchFilterFun;return function(s){return e(s)&&t(s)}},tagFilterFun:function(){if(0===this.selectedTags.length)return function(){return!0};if(1===this.selectedTags.length){var e=this.selectedTags[0];return function(t){var s=t.tags;return void 0!==s&&s.indexOf(e)>=0}}var t=this.selectedTags;return function(e){var s=e.tags;return void 0!==s&&t.every((function(e){return s.indexOf(e)>=0}))}},searchFilterFun:function(){var e=this.searchText;return void 0===e||null===e||0===e.length?function(){return!0}:(e=e.trim().toLowerCase(),""==e?function(){return!0}:function(t){return t.name.toLowerCase().indexOf(e)>=0||void 0!==t.title&&t.title.toLowerCase().indexOf(e)>=0})}}),watch:{filteredCatalog:function(){this.refreshCatalogSource(this.filteredCatalog)}},mounted:function(){var e=this;document.getElementById("foot-start-1").innerHTML="WGS 84/Pseudo-Mercator",document.getElementById("foot-end-1").innerHTML="",this.$store.dispatch("layer_tags/init");var t=new zr["a"]({color:"rgba(255,255,255,0.0)"}),s=new Nr["a"]({color:"rgb(95, 112, 245)",width:2}),a=[new Lr["c"]({image:new Br["a"]({fill:t,stroke:s,radius:5}),fill:t,stroke:s})];this.catalogLayer=new Sr["a"]({style:a}),this.olmap=new Er["a"]({target:"olmap-explorer",layers:[new Or["a"]({source:new Cr["b"]}),this.catalogLayer],view:new Tr["a"]({center:jr["h"]([11,20.82]),zoom:3}),controls:$r["a"]({attributionOptions:{collapsible:!1}}).extend([new Ar["a"],new Dr["a"]({projection:"EPSG:4326",target:"foot-end-1",coordinateFormat:function(e){return Object(Ir["j"])(e,4)}})])}),this.refreshCatalog(),this.olmap.on("pointermove",(function(t){var s=[],a=e.catalogLayer.getSource().getFeaturesAtCoordinate(t.coordinate);a.forEach((function(e){s.push(e.get("entry"))})),e.hoverEntries=s})),this.olmap.on("click",(function(t){console.log("click");var s=[],a=e.catalogLayer.getSource().getFeaturesAtCoordinate(t.coordinate);a.forEach((function(e){s.push(e.get("entry"))})),e.selectedEntries=s,e.$emit("admin-explorer-selected-show")}))},destroyed:function(){document.getElementById("foot-start-1").innerHTML="?",document.getElementById("foot-end-1").innerHTML="?"}},Hr=Wr,Jr=(s("7120"),s("cb36"),Object(p["a"])(Hr,fr,hr,!1,null,"2f59cc4e",null)),Qr=Jr.exports,Yr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{position:"relative"}},[s("splitpanes",{staticClass:"rsdb-theme",on:{resize:e.onSplitpanesResize}},[s("pane",{staticClass:"split-nav",attrs:{"min-size":"10",size:"20"}},[s("v-list",{staticClass:"split-nav-list",attrs:{dense:""}},[s("v-toolbar",[e._v(" Mouse"),s("br"),e._v("Modus "),s("v-btn-toggle",{staticStyle:{border:"1px solid #8d8d88"},attrs:{mandatory:""},model:{value:e.mouseModusButtonState,callback:function(t){e.mouseModusButtonState=t},expression:"mouseModusButtonState"}},[s("v-btn",{attrs:{flat:"",value:"move",title:"move map by mouse (press and hold left mouse button)"}},[s("v-icon",[e._v("open_with")]),e._v("move ")],1),s("v-btn",{attrs:{flat:"",value:"select",title:"select an extent on map (press and hold left mouse button)"}},[s("v-icon",[e._v("settings_overscan")]),e._v("select ")],1)],1),s("div",{staticStyle:{"padding-right":"10px"}}),s("v-btn",{attrs:{fab:"",title:"change viewer settings"},on:{click:e.onSettingsDialog}},[s("v-icon",[e._v("settings_applications")])],1)],1),s("admin-viewer-select",{directives:[{name:"show",rawName:"v-show",value:e.selectShow,expression:"selectShow"}],attrs:{currentLayerWMS_opacity:e.layerWMS_opacity,currentRasterdb:e.rasterdb,currentTimestamp:e.timestamp,currentProduct:e.product,meta:e.meta},on:{"selected-rasterdb":function(t){e.selectedRasterdb=t},"selected-time-slice":function(t){e.selectedTimeSlice=t},"selected-product":function(t){e.selectedProduct=t},"selected-layerwms-opacity":function(t){e.layerWMS_opacity=t},close:function(t){e.selectShow=!1}}}),s("admin-viewer-tools",{attrs:{selectedExtent:e.selectedExtent,meta:e.meta,epsgCode:e.epsgCode,currentVectordb:e.vectordb,currentTimestamp:e.timestamp},on:{"tool-raster-export-show":function(t){e.toolRasterExportShow=!0},"tool-point-export-show":function(t){e.toolPointExportShow=!0},"tool-point-raster-export-show":function(t){e.toolPointRasterExportShow=!0},"selected-vectordb":function(t){e.selectedVectordb=t}}})],1)],1),s("pane",{staticClass:"split-main",class:e.selectedBackgroundClass,attrs:{"min-size":"10",id:"split-main"}},[s("div",{staticStyle:{height:"100%"},attrs:{id:"olmap-viewer"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.transactionRunCount>0,expression:"transactionRunCount > 0"}],staticClass:"busy",staticStyle:{"margin-left":"100px"}},[s("img",{attrs:{src:"images/busy.svg"}}),e._v(" Processing ... "+e._s(e.transactionRunCount>1?"("+e.transactionRunCount+" queued)":"")+" "),s("b",[e._v(e._s(e.transactionRunCount>1?"Please wait until processing finished.":""))])])])],1),s("admin-viewer-settings",{directives:[{name:"show",rawName:"v-show",value:e.settingsDialog,expression:"settingsDialog"}],ref:"settingsDialog",staticStyle:{position:"absolute",top:"0px",left:"0px"},on:{close:function(t){e.settingsDialog=!1},"selected-background":function(t){e.selectedBackground=t},"selected-format":function(t){e.selectedFormat=t},"selected-gamma":function(t){e.selectedGamma=t},"sync-bands":function(t){e.syncBands=t},"selected-mapping":function(t){e.selectedOneBandMapping=t},"show-labels":function(t){e.showLabels=t},"value-range-min":function(t){e.valueRangeMin=t},"value-range-max":function(t){e.valueRangeMax=t}}}),void 0!==e.meta?s("admin-viewer-raster-export",{directives:[{name:"show",rawName:"v-show",value:e.toolRasterExportShow,expression:"toolRasterExportShow"}],attrs:{meta:e.meta,selectedExtent:e.selectedExtent,preselectedTimeSlice:e.selectedTimeSlice},on:{close:function(t){e.toolRasterExportShow=!1},"select-full-extent":function(t){return e.selectFullExtent()}}}):e._e(),void 0!==e.meta?s("admin-viewer-point-export",{directives:[{name:"show",rawName:"v-show",value:e.toolPointExportShow,expression:"toolPointExportShow"}],attrs:{pointdb:e.meta.associated.PointDB,pointcloud:e.meta.associated.pointcloud,selectedExtent:e.selectedExtent},on:{close:function(t){e.toolPointExportShow=!1}}}):e._e(),void 0!==e.meta?s("admin-viewer-point-raster-export",{directives:[{name:"show",rawName:"v-show",value:e.toolPointRasterExportShow,expression:"toolPointRasterExportShow"}],attrs:{pointdb:e.meta.associated.PointDB,pointcloud:e.meta.associated.pointcloud,selectedExtent:e.selectedExtent},on:{close:function(t){e.toolPointRasterExportShow=!1}}}):e._e(),s("v-dialog",{attrs:{value:e.featureDetailsShow,lazy:"",persistent:"","max-width":"500px"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[e._v("Attributes")]),s("v-card-text",e._l(e.selectedFeatures,(function(t){return s("table",{key:t.getId()},e._l(e.table.attributes,(function(a,i){return s("tr",{key:i},[s("td",[s("b",[e._v(e._s(a))])]),s("td",[e._v(e._s(e.featureToTableEntry(t.getId())[i]))])])})),0)})),0),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"green darken-1",flat:"flat"},nativeOn:{click:function(t){e.featureDetailsShow=!1}}},[e._v("Close")])],1)],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:Object.keys(e.messages).length>0,expression:"Object.keys(messages).length > 0"}],staticClass:"message_box"},e._l(e.messages,(function(t,a){return s("div",{key:a},[s("ring-loader",{staticStyle:{display:"inline-block"},attrs:{color:"#000000",size:"25px"}}),e._v(" "+e._s(t)+" ")],1)})),0),e._l(e.notifications,(function(t,a){return s("v-snackbar",{key:a,attrs:{value:"true"}},[e._v(" "+e._s(t)),s("v-btn",{attrs:{flat:"",color:"pink"},nativeOn:{click:function(t){return e.removeNotification(a)}}},[e._v("Close")])],1)}))],2)},Kr=[],Xr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[void 0!==e.rasterdbs?s("div",[s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("collections")]),s("b",[e._v("Raster Layer")]),s("multiselect",{attrs:{options:e.rasterdbs,searchable:!0,"show-labels":!1,placeholder:"pick a layer",allowEmpty:!0},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var s=t.option;return[e._v(" "+e._s(s.title)+" ")]}},{key:"option",fn:function(t){var s=t.option;return[e._v(" "+e._s(s.title)+" ")]}}],null,!1,39431062),model:{value:e.selectedRasterdb,callback:function(t){e.selectedRasterdb=t},expression:"selectedRasterdb"}})],1):e._e(),void 0!==e.meta&&e.meta.time_slices.length>0?s("div",[s("b",[e._v("Time slice")]),e.meta.time_slices.length>1?s("multiselect",{attrs:{options:e.meta.time_slices,searchable:!0,"show-labels":!1,placeholder:"pick a time slice",allowEmpty:!1,trackBy:"id"},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var s=t.option;return[e._v(" "+e._s(s.name)+" ")]}},{key:"option",fn:function(t){var s=t.option;return[e._v(" "+e._s(s.name)+" ")]}}],null,!1,418961142),model:{value:e.selectedTimeSlice,callback:function(t){e.selectedTimeSlice=t},expression:"selectedTimeSlice"}}):e._e(),1===e.meta.time_slices.length?s("div",[e._v(" "+e._s(e.meta.time_slices[0].name)+" ")]):e._e()],1):e._e(),e.styles.length>0?s("div",[s("b",[e._v("Raster Visualisation")]),e.styles.length>1?s("multiselect",{attrs:{options:e.styles,label:"title",searchable:!0,"show-labels":!1,placeholder:"pick a band",allowEmpty:!1,trackBy:"name"},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var s=t.option;return[e._v(" "+e._s(s.name)+" - "+e._s(s.title)+" ")]}},{key:"option",fn:function(t){var s=t.option;return[e._v(" "+e._s(s.name)+" - "+e._s(s.title)+" ")]}}],null,!1,654599382),model:{value:e.selectedProduct,callback:function(t){e.selectedProduct=t},expression:"selectedProduct"}}):e._e(),void 0!==e.selectedProduct&&null!==e.selectedProduct&&"custom"===e.selectedProduct.name?s("div",[e._v(" custom: "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.customProductText,expression:"customProductText"}],staticClass:"text-input",attrs:{type:"text",id:"name",name:"name",placeholder:"type text, e.g. [b1,b2,b3]",title:"e.g. for RGB visualisation with bands 1,3,5 type: [b1,b3,b5]"},domProps:{value:e.customProductText},on:{input:function(t){t.target.composing||(e.customProductText=t.target.value)}}})]):e._e(),1===e.styles.length?s("div",[e._v(" "+e._s(e.styles[0].name)+" - "+e._s(e.styles[0].title)+" ")]):e._e(),s("v-slider",{staticStyle:{"padding-right":"15px","margin-top":"0px"},attrs:{label:"opacity",min:"0",max:"1",step:"0","hide-details":!0},model:{value:e.selectedLayerWMS_opacity,callback:function(t){e.selectedLayerWMS_opacity=t},expression:"selectedLayerWMS_opacity"}})],1):e._e()])},Zr=[];function eo(e,t){var s;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(s=to(e))||t&&e&&"number"===typeof e.length){s&&(e=s);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,n=!1;return{s:function(){s=e[Symbol.iterator]()},n:function(){var e=s.next();return o=e.done,e},e:function(e){n=!0,r=e},f:function(){try{o||null==s.return||s.return()}finally{if(n)throw r}}}}function to(e,t){if(e){if("string"===typeof e)return so(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?so(e,t):void 0}}function so(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,a=new Array(t);s<t;s++)a[s]=e[s];return a}var ao={name:"admin-viewer-select",props:["currentRasterdb","currentTimestamp","currentProduct","meta","currentLayerWMS_opacity"],components:{Multiselect:C.a},data:function(){return{selectedRasterdb:void 0,selectedProduct:void 0,selectedTimeSlice:void 0,selectedLayerWMS_opacity:1,customProductText:void 0}},methods:{refreshSelectedRasterdb:function(){if(void 0!==this.rasterdbs)if(void 0!==this.currentRasterdb){var e,t=eo(this.rasterdbs);try{for(t.s();!(e=t.n()).done;){var s=e.value;if(s.name===this.currentRasterdb)return void(this.selectedRasterdb=s)}}catch(a){t.e(a)}finally{t.f()}this.selectedRasterdb=void 0}else this.selectedRasterdb=null;else this.selectedRasterdb=void 0},refreshSelectedTimeSlice:function(){if(void 0!==this.selectedRasterdb&&null!==this.selectedRasterdb&&void 0!==this.meta&&this.meta.name===this.selectedRasterdb.name&&0!==this.meta.time_slices.length)if(void 0!==this.currentTimestamp){var e,t=eo(this.meta.time_slices);try{for(t.s();!(e=t.n()).done;){var s=e.value;if(s.id==this.currentTimestamp)return void(this.selectedTimeSlice=s)}}catch(a){t.e(a)}finally{t.f()}this.selectedTimeSlice=void 0}else this.selectedTimeSlice=null;else this.selectedTimeSlice=void 0},refreshSelectedProduct:function(){if(void 0!==this.selectedRasterdb&&null!==this.selectedRasterdb&&void 0!==this.meta&&this.meta.name===this.selectedRasterdb.name&&0!==this.styles.length)if(void 0!==this.currentProduct){var e,t=eo(this.styles);try{for(t.s();!(e=t.n()).done;){var s=e.value;if(s.name===this.currentProduct)return void(this.selectedProduct=s)}}catch(a){t.e(a)}finally{t.f()}this.selectedProduct=void 0}else this.selectedProduct=null;else this.selectedProduct=void 0},emitSelectedProduct:function(){if(void 0!==this.selectedProduct&&null!==this.selectedProduct&&"custom"===this.selectedProduct.name){var e={name:this.customProductText,title:"custom"};this.$emit("selected-product",e)}else this.$emit("selected-product",this.selectedProduct)}},computed:{rasterdbs:function(){var e=this.$store.state.rasterdbs.data;return void 0===e?[]:e.slice().sort((function(e,t){return e.title.localeCompare(t.title)}))},styles:function(){return void 0===this.meta?[]:this.meta.wms.styles.concat({name:"custom",title:"user defined"})}},watch:{rasterdbs:function(){this.refreshSelectedRasterdb()},currentRasterdb:function(){this.refreshSelectedRasterdb()},selectedRasterdb:function(){this.$emit("selected-rasterdb",this.selectedRasterdb),this.refreshSelectedTimeSlice(),this.refreshSelectedProduct()},meta:function(){this.refreshSelectedTimeSlice(),this.refreshSelectedProduct()},currentTimestamp:function(){this.refreshSelectedTimeSlice()},selectedTimeSlice:function(){this.$emit("selected-time-slice",this.selectedTimeSlice)},currentProduct:function(){this.refreshSelectedProduct()},selectedProduct:function(){this.emitSelectedProduct()},customProductText:function(){this.emitSelectedProduct()},currentLayerWMS_opacity:function(){this.selectedLayerWMS_opacity=this.currentLayerWMS_opacity},selectedLayerWMS_opacity:function(){this.$emit("selected-layerwms-opacity",this.selectedLayerWMS_opacity)}},mounted:function(){this.$store.dispatch("rasterdbs/init"),this.refreshSelectedRasterdb(),this.refreshSelectedTimeSlice(),this.refreshSelectedProduct()}},io=ao,ro=(s("d3b5"),Object(p["a"])(io,Xr,Zr,!1,null,"de4507a4",null)),oo=ro.exports,no=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("v-btn",{on:{click:function(t){return e.$emit("tool-raster-export-show")}}},[s("v-icon",[e._v("cloud_download")]),e._v(" export")],1),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.meta&&void 0!==e.meta.associated&&(void 0!==e.meta.associated.PointDB||void 0!==e.meta.associated.pointcloud),expression:"meta !== undefined && meta.associated !== undefined && (meta.associated.PointDB !== undefined  || meta.associated.pointcloud !== undefined)"}],staticStyle:{"font-size":"0.8em"}},[e._v(" ! just visualisation raster ! ")]),s("div",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.epsgCode,expression:"epsgCode !== undefined"}]},[s("br"),s("hr"),s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("category")]),s("b",[e._v("Vector Layer")]),void 0!==e.vectordbs?s("multiselect",{attrs:{options:e.vectordbs,"track-by":"name",label:"name",allowEmpty:!0,searchable:!1,"show-labels":!1,placeholder:""},on:{open:function(t){e.filter_focus=!0},close:function(t){e.filter_focus=!1}},model:{value:e.selectedVectordb,callback:function(t){e.selectedVectordb=t},expression:"selectedVectordb"}}):e._e(),void 0!==e.selectedVectordb&&null!==e.selectedVectordb?s("a",{attrs:{href:e.urlPrefix+"../../vectordbs/"+e.selectedVectordb.name+"/package.zip",download:e.selectedVectordb.name+".zip",title:"download as ZIP-file"}},[s("v-icon",{attrs:{color:"blue"}},[e._v("cloud_download")]),e._v("(download vector layer)")],1):e._e()],1),s("div",{directives:[{name:"show",rawName:"v-show",value:void 0===e.epsgCode,expression:"epsgCode === undefined"}],staticStyle:{color:"#db4c11",padding:"10px","background-color":"#0000000d"},attrs:{title:"Set an EPSG-code for this raster-layer to enable feature 'vector overlay'!"}},[e._v(" ! missing EPSG-code ! ")]),void 0!==e.meta&&void 0!==e.meta.associated&&void 0!==e.meta.associated.PointDB?s("div",[s("br"),s("hr"),s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("blur_on")]),s("b",[e._v("Associated PointDB")]),s("br"),s("v-btn",{attrs:{disabled:void 0===e.selectedExtent},on:{click:e.viewPointsPointdb}},[s("v-icon",[e._v("3d_rotation")]),e._v(" view points")],1),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0===e.selectedExtent,expression:"selectedExtent === undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(select position)")]),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.selectedExtent,expression:"selectedExtent !== undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(at center of selection)")]),s("br"),s("v-btn",{attrs:{disabled:void 0===e.selectedExtent},on:{click:e.viewSurfacePointdb}},[s("v-icon",[e._v("360")]),e._v(" view surface")],1),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0===e.selectedExtent,expression:"selectedExtent === undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(select position)")]),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.selectedExtent,expression:"selectedExtent !== undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(at center of selection)")]),s("br"),s("v-btn",{attrs:{disabled:void 0===e.selectedExtent},on:{click:function(t){return e.$emit("tool-point-export-show")}}},[s("v-icon",[e._v("save_alt")]),e._v(" export points")],1),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0===e.selectedExtent,expression:"selectedExtent === undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(select extent)")]),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.selectedExtent,expression:"selectedExtent !== undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(at selection)")]),s("br"),s("v-btn",{attrs:{disabled:void 0===e.selectedExtent},on:{click:function(t){return e.$emit("tool-point-raster-export-show")}}},[s("v-icon",[e._v("get_app")]),e._v(" export surface")],1),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0===e.selectedExtent,expression:"selectedExtent === undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(select extent)")]),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.selectedExtent,expression:"selectedExtent !== undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(at selection)")]),s("br")],1):e._e(),void 0!==e.meta&&void 0!==e.meta.associated&&void 0!==e.meta.associated.pointcloud?s("div",[s("br"),s("hr"),s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("grain")]),s("b",[e._v("Associated PointCloud")]),s("br"),s("v-btn",{attrs:{disabled:void 0===e.selectedExtent},on:{click:e.viewPointsPointcloud}},[s("v-icon",[e._v("3d_rotation")]),e._v(" view points")],1),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0===e.selectedExtent,expression:"selectedExtent === undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(select position)")]),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.selectedExtent,expression:"selectedExtent !== undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(at center of selection)")]),s("br"),s("v-btn",{attrs:{disabled:void 0===e.selectedExtent},on:{click:e.viewSurfacePointcloud}},[s("v-icon",[e._v("360")]),e._v(" view surface")],1),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0===e.selectedExtent,expression:"selectedExtent === undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(select position)")]),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.selectedExtent,expression:"selectedExtent !== undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(at center of selection)")]),s("br"),s("v-btn",{attrs:{disabled:void 0===e.selectedExtent},on:{click:function(t){return e.$emit("tool-point-export-show")}}},[s("v-icon",[e._v("save_alt")]),e._v(" export points")],1),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0===e.selectedExtent,expression:"selectedExtent === undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(select extent)")]),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.selectedExtent,expression:"selectedExtent !== undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(at selection)")]),s("br"),s("v-btn",{attrs:{disabled:void 0===e.selectedExtent},on:{click:function(t){return e.$emit("tool-point-raster-export-show")}}},[s("v-icon",[e._v("get_app")]),e._v(" export surface")],1),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0===e.selectedExtent,expression:"selectedExtent === undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(select extent)")]),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.selectedExtent,expression:"selectedExtent !== undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(at selection)")])],1):e._e(),void 0!==e.meta&&void 0!==e.meta.associated&&void 0!==e.meta.associated.voxeldb?s("div",[s("br"),s("hr"),s("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("grain")]),s("b",[e._v("Associated VoxelDB")]),s("br"),s("v-btn",{attrs:{disabled:void 0===e.selectedExtent},on:{click:e.viewVoxelsVoxelDB}},[s("v-icon",[e._v("3d_rotation")]),e._v(" view voxels")],1),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0===e.selectedExtent,expression:"selectedExtent === undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(select position)")]),s("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.selectedExtent,expression:"selectedExtent !== undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(at center of selection)")]),s("br")],1):e._e()],1)},co=[];function lo(e,t){var s;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(s=uo(e))||t&&e&&"number"===typeof e.length){s&&(e=s);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,n=!1;return{s:function(){s=e[Symbol.iterator]()},n:function(){var e=s.next();return o=e.done,e},e:function(e){n=!0,r=e},f:function(){try{o||null==s.return||s.return()}finally{if(n)throw r}}}}function uo(e,t){if(e){if("string"===typeof e)return vo(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?vo(e,t):void 0}}function vo(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,a=new Array(t);s<t;s++)a[s]=e[s];return a}var mo={name:"admin-viewer-tools",props:["meta","selectedExtent","epsgCode","currentVectordb","currentTimestamp"],components:{Multiselect:C.a},data:function(){return{selectedVectordb:null}},methods:{viewPointsPointdb:function(){console.log(this.selectedExtent);var e=this.selectedExtent,t=(e[0]+e[2])/2,s=(e[1]+e[3])/2,a=this.meta.associated.PointDB,i="db="+a+"&x="+t+"&y="+s,r=this.urlPrefix+"../../web/pointcloud_view/pointcloud_view.html#/?"+i;console.log(this.urlPrefix),console.log(r),window.open(r,"_blank")},viewPointsPointcloud:function(){console.log(this.selectedExtent);var e=this.selectedExtent,t=(e[0]+e[2])/2,s=(e[1]+e[3])/2,a=this.meta.associated.pointcloud,i="pointcloud="+a+"&x="+t+"&y="+s,r=this.urlPrefix+"../../web/pointcloud_view/pointcloud_view.html#/?"+i;console.log(this.urlPrefix),console.log(r),window.open(r,"_blank")},viewVoxelsVoxelDB:function(){console.log(this.selectedExtent);var e=this.selectedExtent,t=(e[0]+e[2])/2,s=(e[1]+e[3])/2,a=-2,i=this.meta.associated.voxeldb,r={voxeldb:i,x:t,y:s,z:a};void 0!==this.currentTimestamp&&(r.time_slice_id=this.currentTimestamp);var o=new URLSearchParams(r),n=this.urlPrefix+"../../web/voxel_view/?"+o;console.log(n),console.log(this.urlPrefix),console.log(n),window.open(n,"_blank")},viewSurfacePointdb:function(){console.log(this.selectedExtent);var e=this.selectedExtent,t=(e[0]+e[2])/2,s=(e[1]+e[3])/2,a=this.meta.associated.PointDB,i="db="+a+"&x="+t+"&y="+s,r=this.urlPrefix+"../../web/height_map_view/height_map_view.html?"+i;console.log(this.urlPrefix),console.log(r),window.open(r,"_blank")},viewSurfacePointcloud:function(){console.log(this.selectedExtent);var e=this.selectedExtent,t=(e[0]+e[2])/2,s=(e[1]+e[3])/2,a=this.meta.associated.pointcloud,i="pointcloud="+a+"&x="+t+"&y="+s,r=this.urlPrefix+"../../web/height_map_view/height_map_view.html?"+i;console.log(this.urlPrefix),console.log(r),window.open(r,"_blank")},exportPointsPointdb:function(){console.log(this.selectedExtent);var e=this.selectedExtent,t=this.meta.associated.PointDB,s="db="+t+"&modus=ext&xmin="+e[0]+"&ymin="+e[1]+"&xmax="+e[2]+"&ymax="+e[3],a=this.urlPrefix+"../../web/point_processing/point_processing.html#/?"+s;console.log(this.urlPrefix),console.log(a),window.open(a,"_blank")},exportSurfacePointdb:function(){console.log(this.selectedExtent);var e=this.selectedExtent,t=this.meta.associated.PointDB,s="db="+t+"&modus=ext&xmin="+e[0]+"&ymin="+e[1]+"&xmax="+e[2]+"&ymax="+e[3],a=this.urlPrefix+"../../web/raster_point_processing/raster_point_processing.html#/?"+s;console.log(this.urlPrefix),console.log(a),window.open(a,"_blank")},refreshSelectedVectordb:function(){if(void 0!==this.vectordbs)if(void 0!==this.currentVectordb){var e,t=lo(this.vectordbs);try{for(t.s();!(e=t.n()).done;){var s=e.value;if(s.name===this.currentVectordb)return void(this.selectedVectordb=s)}}catch(a){t.e(a)}finally{t.f()}this.selectedVectordb=void 0}else this.selectedVectordb=null;else this.selectedVectordb=void 0}},computed:{vectordbs:function(){return this.$store.state.vectordbs.data},urlPrefix:function(){return this.$store.state.identity.urlPrefix}},watch:{vectordbs:function(){this.refreshSelectedVectordb()},currentVectordb:function(){this.refreshSelectedVectordb()},selectedVectordb:function(){this.$emit("selected-vectordb",this.selectedVectordb)}},mounted:function(){this.$store.dispatch("vectordbs/init")}},po=mo,_o=Object(p["a"])(po,no,co,!1,null,"c45e3a98",null),fo=_o.exports,ho=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"raster-export-container"},[s("h1",[e._v("Export Raster Data "),s("v-btn",{staticStyle:{maring:"0px"},attrs:{flat:"",icon:"",color:"indigo",title:"close box"},on:{click:function(t){return e.$emit("close")}}},[s("v-icon",[e._v("close")])],1)],1),void 0===e.selectedExtent?s("div",{staticStyle:{display:"inline-block","white-space":"nowrap","padding-top":"20px"}},[e._m(0),s("br"),s("br"),e._v("To Export raster data you need to first select an extent on the map. "),s("br"),s("v-btn",{staticStyle:{maring:"0px"},attrs:{title:"close box"},on:{click:function(t){return e.$emit("close")}}},[s("v-icon",[e._v("close")]),e._v("Close")],1),e._v(" export dialog and select extent: "),s("br"),e._v("Set mouse-modus to 'select' and create extent by pressing left mouse button and moving mouse. "),s("br"),s("br"),s("br"),s("v-btn",{staticStyle:{maring:"0px"},attrs:{title:"select all raster pixels in current layer"},on:{click:function(t){return e.$emit("select-full-extent")}}},[s("v-icon",[e._v("select_all")]),e._v("select full extent")],1),e._v(" "),s("b",[e._v("Note: ")]),e._v(" If the layer is large selecting full extent may not be optimal. ")],1):e._e(),void 0!==e.selectedExtent?s("div",{staticStyle:{display:"inline-block","white-space":"nowrap","padding-top":"20px"}},[s("h3",[e._v("selected extent")]),s("div",[s("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"xmin",box:""},model:{value:e.user_xmin,callback:function(t){e.user_xmin=t},expression:"user_xmin"}}),e._v(" , "),s("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"ymin",box:""},model:{value:e.user_ymin,callback:function(t){e.user_ymin=t},expression:"user_ymin"}}),e._v(" - "),s("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"xmax",box:""},model:{value:e.user_xmax,callback:function(t){e.user_xmax=t},expression:"user_xmax"}}),e._v(" , "),s("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"ymax",box:""},model:{value:e.user_ymax,callback:function(t){e.user_ymax=t},expression:"user_ymax"}}),e._v(" "),s("b",[e._v("size")]),e._v(" (coordinate units) "+e._s(e.user_xmax-e.user_xmin)+" x "+e._s(e.user_ymax-e.user_ymin)+" = "+e._s((e.user_xmax-e.user_xmin)*(e.user_ymax-e.user_ymin))+" ")],1),s("b",[e._v("Scale")]),s("br"),s("multiselect",{attrs:{options:e.scaleDivs,"show-labels":!1,allowEmpty:!1,placeholder:"scale of source raster to output"},scopedSlots:e._u([{key:"option",fn:function(t){var a=t.option;return[e._v(" 1:"+e._s(a)+" - "),1===a?s("span",[s("b",[e._v("original size")])]):e._e(),a>1?s("span",[s("b",[e._v("scaled down raster")]),e._v(" - "),s("i",[e._v("smaller file size and faster download")])]):e._e()]}},{key:"singleLabel",fn:function(t){var a=t.option;return[e._v(" 1:"+e._s(a)+" - "),1===a?s("span",[s("b",[e._v("original size")])]):e._e(),a>1?s("span",[s("b",[e._v("scaled down raster")]),e._v(" - "),s("i",[e._v("smaller file size and faster download")])]):e._e()]}}],null,!1,2442651382),model:{value:e.scaleDiv,callback:function(t){e.scaleDiv=t},expression:"scaleDiv"}}),s("b",[e._v("size")]),e._v(" "+e._s(e.xpixels)+" x "+e._s(e.ypixels)+" = "+e._s(e.pixelCountText)+" "),s("br"),s("br"),s("b",[e._v("Mode")]),s("br"),s("multiselect",{attrs:{options:e.modes,"show-labels":!1,allowEmpty:!1,placeholder:"output format","track-by":"id",label:"title"},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}}),s("br"),"direct_bands"===e.mode.id?s("div",[s("b",[e._v("Arrangement")]),s("br"),e._v(" Raster file at one time slice with (multiple) bands. "),s("br"),s("br"),s("b",[e._v("File format")]),s("br"),s("multiselect",{attrs:{options:e.outputTypes,"show-labels":!1,allowEmpty:!1,placeholder:"output format"},model:{value:e.outputType,callback:function(t){e.outputType=t},expression:"outputType"}}),s("br"),s("b",[e._v("Time slice")]),s("br"),s("multiselect",{attrs:{options:e.meta.time_slices,trackBy:"id",label:"name",searchable:!1,placeholder:"(no time slice selected)",closeOnSelect:!0},model:{value:e.selectedTimeSlice,callback:function(t){e.selectedTimeSlice=t},expression:"selectedTimeSlice"}})],1):e._e(),void 0!==e.meta&&"zip"===e.mode.id?s("div",[s("b",[e._v("Arrangement")]),s("br"),s("multiselect",{attrs:{options:e.zip_arrangements,"show-labels":!1,allowEmpty:!1,placeholder:"output format","track-by":"id",label:"title"},model:{value:e.zip_arrangement,callback:function(t){e.zip_arrangement=t},expression:"zip_arrangement"}}),s("br"),s("b",[e._v("File format of files contained in ZIP file")]),s("br"),e._v(" GeoTIFF "),s("br"),s("br"),s("b",[e._v("Time slices")]),s("br"),s("multiselect",{attrs:{multiple:"",options:e.meta.time_slices,trackBy:"id",label:"name",searchable:!1,placeholder:"(all time slices)",closeOnSelect:!1},model:{value:e.selectedTimeSlices,callback:function(t){e.selectedTimeSlices=t},expression:"selectedTimeSlices"}})],1):e._e(),s("br"),s("b",[e._v("Bands")]),s("br"),void 0!==e.meta?s("div",[s("multiselect",{attrs:{multiple:"",options:e.meta.bands,trackBy:"index",label:"index",searchable:!1,placeholder:"(all bands)",closeOnSelect:!1},scopedSlots:e._u([{key:"option",fn:function(t){var s=t.option;return[e._v(" "+e._s(s.index)+" - "+e._s(s.title)+" ")]}},{key:"singleLabel",fn:function(t){var s=t.option;return[e._v(" "+e._s(s.index)+" - "+e._s(s.title)+" ")]}}],null,!1,1139301430),model:{value:e.selectedBands,callback:function(t){e.selectedBands=t},expression:"selectedBands"}})],1):e._e(),s("br"),"direct_bands"===e.mode.id?s("div",[s("a",{staticStyle:{padding:"9px","background-color":"#f5f5f5","box-shadow":"0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)"},attrs:{title:"download as raster file",href:e.downloadLink,download:e.downloadFilename}},[s("v-icon",{staticStyle:{color:"black"}},[e._v("cloud_download")]),e._v(" Download")],1)]):e._e(),"zip"===e.mode.id?s("div",[s("b",[e._v("Compression")]),s("br"),s("multiselect",{attrs:{options:e.compressions,"show-labels":!1,allowEmpty:!1,placeholder:"output format","track-by":"id",label:"title"},model:{value:e.compression,callback:function(t){e.compression=t},expression:"compression"}}),s("br"),s("v-btn",{on:{click:function(t){return e.zip_download()}}},[s("v-icon",[e._v("cloud_download")]),e._v("Download")],1),s("a",{ref:"zip_download_link",attrs:{hidden:""}},[e._v("hidden link")])],1):e._e(),s("br"),s("br"),"direct_bands"===e.mode.id?s("admin-viewer-raster-export-format-description",{attrs:{"output-type":e.outputType}}):e._e()],1):e._e()])])},bo=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h3",[s("b",{staticStyle:{color:"red"}},[e._v("No extent selected.")])])}],go=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-expansion-panel",[s("v-expansion-panel-content",[s("div",{attrs:{slot:"header"},slot:"header"},[e._v("format description")]),s("hr"),s("h3",{class:{disabled:"GeoTIFF - data"!==e.outputType}},[e._v("GeoTIFF - data")]),s("br"),e._v(" TIFF raster file format with projection information (GeoTIFF) "),s("br"),e._v(" As this format is intended for GIS-software general image-processing"),s("br"),e._v(" applications may not be able to read that files. "),s("br"),s("br"),e._v(' For compatibility with TIFF readers (e.g. GDAL) all bands need to be of same data type, for output "biggest" data type is chosen. '),s("br"),s("br"),e._v(" Tested with: "),s("a",{attrs:{href:"http://gdal.org/"}},[e._v("GDAL")]),e._v(", "),s("a",{attrs:{href:"https://qgis.org/"}},[e._v("QGIS")]),e._v(", "),s("a",{attrs:{href:"https://cran.r-project.org/web/packages/raster/"}},[e._v("R raster")]),s("br"),s("br"),s("hr"),s("h3",{class:{disabled:"GeoTIFF - tiled data (experimental)"!==e.outputType}},[e._v("GeoTIFF - tiled data (experimental)")]),s("br"),e._v(" TIFF raster file format with projection information and tiled data (experimental). "),s("br"),e._v(" As this format is intended for GIS-software general image-processing"),s("br"),e._v(" applications may not be able to read that files. "),s("br"),s("br"),e._v(' For compatibility with TIFF readers (e.g. GDAL) all bands need to be of same data type, for output "biggest" data type is chosen. '),s("br"),s("br"),e._v(" Experimental tiled output. "),s("br"),s("br"),s("hr"),s("h3",{class:{disabled:"GeoTIFF - visualisation"!==e.outputType}},[e._v("GeoTIFF - visualisation")]),s("br"),e._v(" TIFF image file format with projection information (transparency as alpha channel, GeoTIFF) "),s("br"),e._v(" Up to three bands are rendered: "),s("ul",[s("li",[e._v("one band: raser band is rendered to one-band greyscale image (8-bit).")]),s("li",[e._v("two bands: raster bands are rendered to three band red-green-blue image (3x8 bit) with interpolated green.")]),s("li",[e._v("three or more bands: Raster data of first three bands is rendered to three band red-green-blue image (3x8 bit).")])]),s("br"),e._v(" This format is intended for visualisation only. "),s("br"),e._v(" Pixel values are mapped non-linearly to image range (0 - 255) "),s("br"),e._v("to present hight detail in resulting image. "),s("br"),s("br"),s("hr"),s("h3",{class:{disabled:"PNG - visualisation"!==e.outputType}},[e._v("PNG - visualisation")]),s("br"),e._v(" PNG image file format (transparency as alpha channel, no projection information) "),s("br"),e._v(" Files can be displayed in web browsers. "),s("br"),s("br"),e._v(" Output processing details are same as 'GeoTIFF - visualisation'. "),s("br"),s("br"),s("hr"),s("h3",{class:{disabled:"JPEG - visualisation"!==e.outputType}},[e._v("JPEG - visualisation")]),s("br"),e._v(" JPEG image file format (small file size with lossy image compression, no projection information, no transparency information) "),s("br"),e._v(" Files can be displayed in web browsers. "),s("br"),s("br"),e._v(" Output processing details are same as 'GeoTIFF - visualisation'. "),s("br"),s("br"),s("hr"),s("h3",{class:{disabled:"rDAT - data"!==e.outputType}},[e._v("rDAT - data")]),s("br"),e._v(" rDAT file format is transfer format of RSDB R-package. "),s("br"),e._v(" Extensive meta data is preserved by this format. "),s("br"),e._v("e.g. band names, wavelength "),s("br"),s("br"),e._v(' For compatibility with R rasters all bands need to be of same data type. For output "biggest" data type is chosen. '),s("br"),s("br"),e._v(" example: "),s("br"),s("i",[e._v("load file in "),s("a",{attrs:{href:"https://www.r-project.org/"}},[e._v("R")]),e._v(" as RasterLayer (one band) or as RasterStack (multiple bands) and plot it.")]),s("br"),s("br"),s("pre",[e._v('library(RSDB)\nr <- read.rdat("c:/downloads/raster.rdat")\nplot(r)\n      ')])])],1)},yo=[],xo={name:"admin-viewer-raster-export-format-description",props:["outputType"],components:{},data:function(){return{}},methods:{},computed:{},watch:{},mounted:function(){}},wo=xo,ko=(s("11d1"),Object(p["a"])(wo,go,yo,!1,null,"610c7c5a",null)),Eo=ko.exports,So={name:"admin-viewer-raster-export",props:["meta","selectedExtent","preselectedTimeSlice"],components:{Multiselect:C.a,"admin-viewer-raster-export-format-description":Eo},data:function(){return{user_xmin:void 0,user_ymin:void 0,user_xmax:void 0,user_ymax:void 0,outputTypes:["GeoTIFF - data","GeoTIFF - tiled data (experimental)","rDAT - data","PNG - visualisation","JPEG - visualisation","GeoTIFF - visualisation"],outputType:"GeoTIFF - data",modes:[{id:"zip",title:"zip file with raster files (divided into tiles for arbitrary large raster downloads)"},{id:"direct_bands",title:"raster file (for small raster downloads only)"}],mode:void 0,zip_arrangements:[{id:"multiband",title:"multiband: one tile per time slice (files with multiple bands)"},{id:"timeseries",title:"timeseries: one tile per band (files with multiple bands containing time slices)"},{id:"separate_timestamp_band",title:"separate: tiles for each time slice and each band (single band files)"},{id:"separate_band_timestamp",title:"separate: tiles for each band and each time slice (single band files)"}],zip_arrangement:{id:"multiband",title:"multiband: one tile per time slice (files with multiple bands)"},compressions:[{id:"0",title:"0 - no compression (fastest)"},{id:"1",title:"1 - compression (fast)"},{id:"2",title:"2 - compression (fast)"},{id:"3",title:"3 - compression (fast)"},{id:"4",title:"4 - compression (fast)"},{id:"5",title:"5 - compression (fast)"},{id:"6",title:"6 - compression (compromise)"},{id:"7",title:"7 - compression (slow)"},{id:"8",title:"8 - compression (slower)"},{id:"9",title:"9 - best compression (slowest)"}],compression:{id:"0",title:"0 - no compression (fastest)"},selectedBands:[],selectedTimeSlice:void 0,selectedTimeSlices:[],scaleDivs:[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768,65536],scaleDiv:1}},methods:{toQuery:function(e){var t="";for(var s in e)0==t.length?t="?":t+="&",t+=s+"="+e[s];return t},zip_download:function(){var e=this,t=this.$store.getters.apiUrl("rasterdb/"+e.meta.name+"/packages"),s={ext:[this.user_xmin,this.user_ymin,this.user_xmax,this.user_ymax],compression:e.compression.id,div:e.scaleDiv,arrangement:e.zip_arrangement.id};this.selectedTimeSlices.length>0&&(s.time_slice_ids=this.selectedTimeSlices.map((function(e){return e.id}))),e.selectedBands.length>0&&(s.bands=e.selectedBands.map((function(e){return e.index}))),I.a.post(t,{package:s}).then((function(t){var s=t.data.package;console.log(s),console.log("start");var a=e.$refs.zip_download_link;console.log(a);var i=e.urlPrefix+"../../rasterdb/"+e.meta.name+"/packages/"+s.zip_file_url;a.href=i,a.download=s.zip_file_name,a.click(),console.log(a),console.log("stop")})).catch((function(e){console.log(e)}))}},computed:{xpixels:function(){return Math.floor(Math.floor((this.user_xmax-this.user_xmin)/this.meta.ref.pixel_size.x)/this.scaleDiv)},ypixels:function(){return Math.floor(Math.floor((this.user_ymax-this.user_ymin)/this.meta.ref.pixel_size.y)/this.scaleDiv)},pixelCountText:function(){var e=this.xpixels*this.ypixels;return e>=1e11?(e/1e12).toFixed(1)+" terapixel":e>=1e8?(e/1e9).toFixed(1)+" gigapixel":e>=1e6?(e/1e6).toFixed(1)+" megapixel":e>=1e5?(e/1e6).toFixed(2)+" megapixel":e+" pixel"},urlPrefix:function(){return this.$store.state.identity.urlPrefix},downloadLink:function(){var e=this.$store.getters.apiUrl("rasterdb"),t="raster.tiff",s=[this.user_xmin,this.user_ymin,this.user_xmax,this.user_ymax].join(" "),a={ext:s};switch(void 0!==this.selectedTimeSlice&&null!==this.selectedTimeSlice&&(a.time_slice_id=this.selectedTimeSlice.id),this.outputType){case"GeoTIFF - data":t="raster.tiff";break;case"GeoTIFF - tiled data (experimental)":t="raster.tiff",a.format="tiff:banded:tiled";break;case"GeoTIFF - visualisation":t="raster.tiff",a.visualisation=!0;break;case"PNG - visualisation":t="raster.png",a.visualisation=!0;break;case"rDAT - data":t="raster.rdat";break;case"JPEG - visualisation":t="raster.jpg";break;default:throw"unknown output type"}this.selectedBands.length>0&&(a.band=this.selectedBands.map((function(e){return e.index})).join(" ")),1!==this.scaleDiv&&(a.div=this.scaleDiv);var i=e+"/"+this.meta.name+"/"+t+this.toQuery(a);return i},downloadFilename:function(){var e="";switch(this.outputType){case"GeoTIFF - data":e=".tiff";break;case"GeoTIFF - tiled data (experimental)":e=".tiff";break;case"GeoTIFF - visualisation":e=".tiff";break;case"PNG - visualisation":e=".png";break;case"rDAT - data":e=".rdat";break;case"JPEG - visualisation":e=".jpg";break;default:e=""}var t=this.meta.name;return void 0!==this.selectedTimeSlice&&null!==this.selectedTimeSlice&&(t+="__"+this.selectedTimeSlice.name.split("-").join("_").split(":").join("_").split("/").join("_").split("\\").join("_").split(".").join("_")),t+e}},watch:{selectedExtent:function(){void 0!==this.selectedExtent&&(this.user_xmin=this.selectedExtent[0],this.user_ymin=this.selectedExtent[1],this.user_xmax=this.selectedExtent[2],this.user_ymax=this.selectedExtent[3])},preselectedTimeSlice:function(){void 0!=this.preselectedTimeSlice&&null!=this.preselectedTimeSlice?(this.selectedTimeSlice=this.preselectedTimeSlice,this.selectedTimeSlices=[this.preselectedTimeSlice]):(this.selectedTimeSlice=void 0,this.selectedTimeSlices=[])}},mounted:function(){this.mode=this.modes[0]}},Oo=So,Po=(s("14a1"),Object(p["a"])(Oo,ho,bo,!1,null,"306fa530",null)),Co=Po.exports,To=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"point-export-container"},[s("h1",[e._v("Export Point Data "),s("v-btn",{staticStyle:{maring:"0px"},attrs:{flat:"",icon:"",color:"indigo",title:"close box"},on:{click:function(t){return e.$emit("close")}}},[s("v-icon",[e._v("close")])],1)],1),void 0!==e.selectedExtent?s("div",{staticStyle:{display:"inline-block","white-space":"nowrap","padding-top":"20px"}},[s("h3",[e._v("selected extent")]),s("div",[s("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"xmin",box:""},model:{value:e.user_xmin,callback:function(t){e.user_xmin=t},expression:"user_xmin"}}),e._v(" , "),s("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"ymin",box:""},model:{value:e.user_ymin,callback:function(t){e.user_ymin=t},expression:"user_ymin"}}),e._v(" - "),s("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"xmax",box:""},model:{value:e.user_xmax,callback:function(t){e.user_xmax=t},expression:"user_xmax"}}),e._v(" , "),s("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"ymax",box:""},model:{value:e.user_ymax,callback:function(t){e.user_ymax=t},expression:"user_ymax"}}),e._v(" "),s("b",[e._v("size")]),e._v(" (coordinate units) "+e._s(e.user_xmax-e.user_xmin)+" x "+e._s(e.user_ymax-e.user_ymin)+" = "+e._s((e.user_xmax-e.user_xmin)*(e.user_ymax-e.user_ymin))+" ")],1),s("br"),s("b",[e._v("File-Format")]),s("br"),s("multiselect",{attrs:{options:e.outputTypes,"show-labels":!1,allowEmpty:!1,placeholder:"output format","track-by":"name",label:"title"},model:{value:e.outputType,callback:function(t){e.outputType=t},expression:"outputType"}}),s("br"),s("a",{staticStyle:{padding:"9px","background-color":"#f5f5f5","box-shadow":"0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)"},attrs:{title:"download points as file",href:e.downloadLink,download:e.downloadFilename}},[s("v-icon",{staticStyle:{color:"black"}},[e._v("cloud_download")]),e._v(" Download")],1),s("br"),s("br"),s("br"),s("admin-viewer-point-export-format-description",{attrs:{"output-type":e.outputType}})],1):e._e()])])},jo=[],Mo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-expansion-panel",[s("v-expansion-panel-content",[s("div",{attrs:{slot:"header"},slot:"header"},[e._v("format description")]),s("hr"),s("h3",{class:{disabled:"zip"!==e.outputType.name}},[e._v("ZIP (experimantal)")]),s("br"),e._v(" ZIP file containing las files (described in section LAS) "),s("br"),s("br"),e._v("Contained las files are tiles of 1x1km size. All tiles covering the requested extent are returned. "),s("br"),e._v("Tiles are cropped by extend, so parts of tiles outside of extend are empty. "),s("br"),s("hr"),s("hr"),s("h3",{class:{disabled:"LAS"!==e.outputType.name}},[e._v("LAS")]),s("br"),e._v(" LAS point file format "),s("br"),s("br"),s("a",{attrs:{href:"https://www.asprs.org/committee-general/laser-las-file-format-exchange-activities.html"}},[e._v("LAS")]),e._v(" version 1.2 Point Data Format 0 "),s("br"),s("br"),e._v("Tested with: "),s("a",{attrs:{href:"https://www.liblas.org/"}},[e._v("libLAS")]),s("br"),s("br"),s("hr"),s("h3",{class:{disabled:"xyz"!==e.outputType.name}},[e._v("xyz")]),s("br"),e._v(" xyz text based point format. "),s("br"),s("br"),s("hr"),s("h3",{class:{disabled:"rDAT"!==e.outputType.name}},[e._v("rDAT")]),s("br"),e._v(" rDAT file format is transfer format of RSDB R-package. "),s("br"),e._v(" Extensive meta data is preserved by this format. "),s("br"),e._v("e.g. projection "),s("br"),s("br"),e._v(" example: "),s("br"),s("i",[e._v("load file in "),s("a",{attrs:{href:"https://www.r-project.org/"}},[e._v("R")]),e._v(" as data.frame and plot it.")]),s("br"),s("br"),s("pre",[e._v('library(RSDB)\ndf <- read.rdat("points.rdat")\nlibrary(rgl)\nplot3d(df$x, df$y, df$z)\n      ')])])],1)},Ro=[],$o={name:"admin-viewer-point-export-format-description",props:["outputType"],components:{},data:function(){return{}},methods:{},computed:{},watch:{},mounted:function(){}},Ao=$o,Do=(s("b7b4"),Object(p["a"])(Ao,Mo,Ro,!1,null,"98371938",null)),zo=Do.exports,No={name:"admin-viewer-point-export",props:["pointdb","pointcloud","selectedExtent"],components:{Multiselect:C.a,"admin-viewer-point-export-format-description":zo},data:function(){return{user_xmin:void 0,user_ymin:void 0,user_xmax:void 0,user_ymax:void 0,outputTypes:[{name:"zip",title:".zip - containing tiled .las files (for arbitrarily large data)"},{name:"LAS",title:".las - binary file (for small datasets only)"},{name:"xyz",title:".xyz - text file (for small datasets only)"},{name:"rDAT",title:".rDAT - binary file (for small datasets only)"}],outputType:void 0}},methods:{toQuery:function(e){var t="";for(var s in e)0==t.length?t="?":t+="&",t+=s+"="+e[s];return t}},computed:{xpixels:function(){return Math.floor(Math.floor((this.user_xmax-this.user_xmin)/1)/1)},ypixels:function(){return Math.floor(Math.floor((this.user_ymax-this.user_ymin)/1)/1)},pixelCountText:function(){var e=this.xpixels*this.ypixels;return e>=1e11?(e/1e12).toFixed(1)+" terapixel":e>=1e8?(e/1e9).toFixed(1)+" gigapixel":e>=1e6?(e/1e6).toFixed(1)+" megapixel":e>=1e5?(e/1e6).toFixed(2)+" megapixel":e+" pixel"},urlPrefix:function(){return this.$store.state.identity.urlPrefix},downloadLink:function(){if(void 0!==this.pointdb){var e=this.urlPrefix+"../../pointdb",t="unknown",s=[this.user_xmin,this.user_xmax,this.user_ymin,this.user_ymax].join(","),a={db:this.pointdb,ext:s};switch(this.outputType.name){case"LAS":t="points.las",a.format="las";break;case"xyz":t="points.xyz",a.format="xyz";break;case"rDAT":t="points.rdat",a.format="rdat";break;case"zip":t="points.zip",a.format="zip";break;default:throw a.format="unknown","unknown output type "+this.outputType.name}var i=e+"/"+t+this.toQuery(a);return i}if(void 0!==this.pointcloud){var r=this.urlPrefix+"../../pointclouds",o="unknown",n=[this.user_xmin,this.user_ymin,this.user_xmax,this.user_ymax].join(" "),c={ext:n};switch(this.outputType.name){case"LAS":o="points.las";break;case"xyz":o="points.xyz";break;case"rDAT":o="points.rdat";break;case"zip":o="points.zip";break;default:throw"unknown output type "+this.outputType.name}var l=r+"/"+this.pointcloud+"/"+o+this.toQuery(c);return l}return"error"},downloadFilename:function(){var e="";switch(this.outputType.name){case"LAS":e=".las";break;case"xyz":e=".xyz";break;case"rDAT":e=".rdat";break;case"zip":e=".zip";break;default:throw"unknown output type "+this.outputType.name}var t=void 0!==this.pointdb?this.pointdb:void 0!==this.pointcloud?this.pointcloud:"raster";return t+e}},watch:{selectedExtent:function(){void 0!==this.selectedExtent&&(this.user_xmin=this.selectedExtent[0],this.user_ymin=this.selectedExtent[1],this.user_xmax=this.selectedExtent[2],this.user_ymax=this.selectedExtent[3])}},mounted:function(){this.outputType=this.outputTypes.find((function(e){return"zip"===e.name}))}},Lo=No,Bo=(s("12f3"),Object(p["a"])(Lo,To,jo,!1,null,"e725c612",null)),Io=Bo.exports,Fo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"point-export-container"},[s("h1",[e._v("Export Raster of processed point-cloud data"),s("v-btn",{staticStyle:{maring:"0px"},attrs:{flat:"",icon:"",color:"indigo",title:"close box"},on:{click:function(t){return e.$emit("close")}}},[s("v-icon",[e._v("close")])],1)],1),void 0!==e.selectedExtent?s("div",{staticStyle:{display:"inline-block","white-space":"nowrap","padding-top":"20px"}},[s("h3",[e._v("selected extent")]),s("div",[s("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"xmin",box:""},model:{value:e.user_xmin,callback:function(t){e.user_xmin=t},expression:"user_xmin"}}),e._v(" , "),s("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"ymin",box:""},model:{value:e.user_ymin,callback:function(t){e.user_ymin=t},expression:"user_ymin"}}),e._v(" - "),s("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"xmax",box:""},model:{value:e.user_xmax,callback:function(t){e.user_xmax=t},expression:"user_xmax"}}),e._v(" , "),s("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"ymax",box:""},model:{value:e.user_ymax,callback:function(t){e.user_ymax=t},expression:"user_ymax"}}),e._v(" "),s("b",[e._v("size")]),e._v(" (coordinate units) "+e._s(e.user_xmax-e.user_xmin)+" x "+e._s(e.user_ymax-e.user_ymin)+" = "+e._s((e.user_xmax-e.user_xmin)*(e.user_ymax-e.user_ymin))+" ")],1),s("br"),s("b",[e._v("Point-cloud to raster processing type")]),s("br"),void 0!=e.raster_processing_types?s("span",[s("multiselect",{attrs:{options:e.raster_processing_types,"show-labels":!1,allowEmpty:!1,placeholder:"point-cloud to raster processing type","track-by":"name",label:"label"},model:{value:e.raster_processing_type,callback:function(t){e.raster_processing_type=t},expression:"raster_processing_type"}})],1):e._e(),void 0!=e.metaMessage?s("span",[e._v(" "+e._s(e.metaMessage)+" ")]):e._e(),s("br"),s("b",[e._v("File-Format")]),s("br"),s("multiselect",{attrs:{options:e.outputTypes,"show-labels":!1,allowEmpty:!1,placeholder:"output format","track-by":"name",label:"title"},model:{value:e.outputType,callback:function(t){e.outputType=t},expression:"outputType"}}),s("br"),s("a",{staticStyle:{padding:"9px","background-color":"#f5f5f5","box-shadow":"0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)"},attrs:{title:"download points as file",href:e.downloadLink,download:e.downloadFilename}},[s("v-icon",{staticStyle:{color:"black"}},[e._v("cloud_download")]),e._v(" Download")],1),s("br"),s("br"),s("br"),s("admin-viewer-point-raster-export-format-description",{attrs:{"output-type":e.outputType}})],1):e._e()])])},Vo=[],Go=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-expansion-panel",[s("v-expansion-panel-content",[s("div",{attrs:{slot:"header"},slot:"header"},[e._v("format description")]),s("hr"),s("h3",{class:{disabled:"zip"!==e.outputType.name}},[e._v("ZIP (experimantal)")]),s("br"),e._v(" ZIP file containing tiff files (described in section GeoTIFF - data) "),s("br"),s("br"),e._v("Contained tiff files are tiles of 1x1km size. All tiles covering the requested extent are returned. "),s("br"),e._v("Tiles are cropped by extend, so parts of tiles outside of extend are empty. "),s("br"),s("hr"),s("hr"),s("h3",{class:{disabled:"tiff"!==e.outputType.name}},[e._v("GeoTIFF - data")]),s("br"),e._v(" TIFF raster file format with projection information (GeoTIFF) "),s("br"),e._v(" As this format is intended for GIS-software general image-processing"),s("br"),e._v(" applications may not be able to read that files. "),s("br"),s("br"),e._v(' For compatibility with TIFF readers (e.g. GDAL) all bands need to be of same data type, for output "biggest" data type is chosen. '),s("br"),s("br"),e._v(" Tested with: "),s("a",{attrs:{href:"http://gdal.org/"}},[e._v("GDAL")]),e._v(", "),s("a",{attrs:{href:"https://qgis.org/"}},[e._v("QGIS")]),e._v(", "),s("a",{attrs:{href:"https://cran.r-project.org/web/packages/raster/"}},[e._v("R raster")]),s("br"),s("br"),s("hr"),s("h3",{class:{disabled:"png"!==e.outputType.name}},[e._v("PNG - visualisation")]),s("br"),e._v(" PNG image file format (transparency as alpha channel, no projection information) "),s("br"),e._v(" Files can be displayed in web browsers. "),s("br"),s("br"),e._v(" Output processing details are same as 'GeoTIFF - visualisation'. "),s("br"),s("br"),s("hr"),s("h3",{class:{disabled:"rDAT"!==e.outputType.name}},[e._v("rDAT - data")]),s("br"),e._v(" rDAT file format is transfer format of RSDB R-package. "),s("br"),e._v(" Extensive meta data is preserved by this format. "),s("br"),e._v("e.g. band names, wavelength "),s("br"),s("br"),e._v(' For compatibility with R rasters all bands need to be of same data type. For output "biggest" data type is chosen. '),s("br"),s("br"),e._v(" example: "),s("br"),s("i",[e._v("load file in "),s("a",{attrs:{href:"https://www.r-project.org/"}},[e._v("R")]),e._v(" as RasterLayer (one band) or as RasterStack (multiple bands) and plot it.")]),s("br"),s("br"),s("pre",[e._v('library(RSDB)\nr <- read.rdat("c:/downloads/raster.rdat")\nplot(r)\n      ')])])],1)},Uo=[],qo={name:"admin-viewer-point-raster-export-format-description",props:["outputType"],components:{},data:function(){return{}},methods:{},computed:{},watch:{},mounted:function(){}},Wo=qo,Ho=(s("dfaa"),Object(p["a"])(Wo,Go,Uo,!1,null,"462a4125",null)),Jo=Ho.exports,Qo={name:"admin-viewer-point-raster-export",props:["pointdb","pointcloud","selectedExtent"],components:{Multiselect:C.a,"admin-viewer-point-raster-export-format-description":Jo},data:function(){return{user_xmin:void 0,user_ymin:void 0,user_xmax:void 0,user_ymax:void 0,outputTypes:[{name:"zip",title:".zip - containing tiled .tiff files (for arbitrarily large rasters)"},{name:"tiff",title:".tiff - GeoTIFF raster file (for small rasters only)"},{name:"png",title:".png - PNG image file (for small rasters only)"},{name:"rDAT",title:".rDAT - binary file (for small rasters only)"}],outputType:void 0,valid_processing_types:["basic_raster","index_raster","multi_raster"],raster_processing_type:void 0,meta:void 0,metaMessage:"init"}},methods:{toQuery:function(e){var t="";for(var s in e)0==t.length?t="?":t+="&",t+=s+"="+e[s];return t},refreshMeta:function(){var e=this;if(void 0!==this.pointdb)this.meta=void 0,this.metaMessage="loading meta data of layer ...",I.a.get(this.urlPrefix+"../../pointdb/info.json?db="+this.pointdb+"&statistics=false").then((function(t){e.meta=t.data,e.metaMessage=void 0})).catch((function(t){e.meta=void 0,e.metaMessage="ERROR loading meta data of layer "+t}));else{if(void 0===this.pointcloud)return this.meta=void 0,void(this.metaMessage="error in meta");this.meta=void 0,this.metaMessage="loading meta data of layer ...",I.a.get(this.urlPrefix+"../../pointclouds/"+this.pointcloud).then((function(t){e.meta=t.data,e.metaMessage=void 0})).catch((function(t){e.meta=void 0,e.metaMessage="ERROR loading meta data of layer "+t}))}}},computed:{xpixels:function(){return Math.floor(Math.floor((this.user_xmax-this.user_xmin)/1)/1)},ypixels:function(){return Math.floor(Math.floor((this.user_ymax-this.user_ymin)/1)/1)},pixelCountText:function(){var e=this.xpixels*this.ypixels;return e>=1e11?(e/1e12).toFixed(1)+" terapixel":e>=1e8?(e/1e9).toFixed(1)+" gigapixel":e>=1e6?(e/1e6).toFixed(1)+" megapixel":e>=1e5?(e/1e6).toFixed(2)+" megapixel":e+" pixel"},urlPrefix:function(){return this.$store.state.identity.urlPrefix},downloadLink:function(){if(void 0!==this.pointdb&&void 0!==this.outputType&&void 0!==this.raster_processing_type){var e=this.urlPrefix+"../../pointdb",t="unknown",s=[this.user_xmin,this.user_xmax,this.user_ymin,this.user_ymax].join(","),a={db:this.pointdb,ext:s,type:this.raster_processing_type.name};switch(this.outputType.name){case"tiff":t="raster.tiff",a.format="tiff";break;case"png":t="raster.png",a.format="png";break;case"rDAT":t="raster.rDAT",a.format="rDAT";break;case"zip":t="raster.zip",a.format="zip";break;default:throw a.format="unknown","unknown output type "+this.outputType.name}var i=e+"/"+t+this.toQuery(a);return i}if(void 0!==this.pointcloud&&void 0!==this.outputType&&void 0!==this.raster_processing_type){var r=this.urlPrefix+"../../pointclouds",o="unknown",n=[this.user_xmin,this.user_ymin,this.user_xmax,this.user_ymax].join(" "),c={ext:n,type:this.raster_processing_type.name,fill:10};switch(this.outputType.name){case"tiff":o="raster.tiff",c.format="tiff";break;case"png":o="raster.png",c.format="png";break;case"rDAT":o="raster.rDAT",c.format="rDAT";break;case"zip":o="raster.zip",c.format="zip";break;default:throw c.format="unknown","unknown output type "+this.outputType.name}var l=r+"/"+this.pointcloud+"/"+o+this.toQuery(c);return l}return"error"},downloadFilename:function(){var e="";switch(this.outputType.name){case"tiff":e=".tiff";break;case"png":e=".png";break;case"rDAT":e=".rdat";break;case"zip":e=".zip";break;default:throw"unknown output type "+this.outputType.name}var t=void 0!==this.pointdb?this.pointdb:void 0!==this.pointcloud?this.pointcloud:"raster";return t+e},raster_processing_types:function(){var e=this;if(void 0!==this.meta)return void 0!==this.meta.raster_processing_types?this.meta.raster_processing_types.filter((function(t){return e.valid_processing_types.indexOf(t.data_type)>=0})).map((function(e){return{name:e.name,label:e.name+" - "+e.title}})):void 0!==this.meta.pointcloud?this.meta.pointcloud.raster_types.map((function(e){return{name:e.name,label:e.name+" - "+e.description}})):void 0}},watch:{selectedExtent:function(){void 0!==this.selectedExtent&&(this.user_xmin=this.selectedExtent[0],this.user_ymin=this.selectedExtent[1],this.user_xmax=this.selectedExtent[2],this.user_ymax=this.selectedExtent[3])},pointdb:function(){this.refreshMeta()},pointcloud:function(){this.refreshMeta()},raster_processing_types:function(){this.raster_processing_type=void 0!==this.raster_processing_types&&0!==this.raster_processing_types.length?this.raster_processing_types[0]:void 0}},mounted:function(){this.outputType=this.outputTypes.find((function(e){return"zip"===e.name})),this.refreshMeta()}},Yo=Qo,Ko=(s("453f"),Object(p["a"])(Yo,Fo,Vo,!1,null,"984b62cc",null)),Xo=Ko.exports,Zo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("vue-draggable-resizable",{attrs:{x:e.boxX,y:e.boxY}},[s("div",{staticClass:"box"},[s("div",{staticClass:"box-header"},[e._v(" Viewer Settings "),s("button",{staticClass:"close-button",on:{click:function(t){return e.$emit("close")}}},[e._v("x")])]),s("b",[e._v("Background")]),s("multiselect",{attrs:{options:e.backgroundOptions,searchable:!0,"show-labels":!1,placeholder:"pick a background",allowEmpty:!1},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var s=t.option;return[e._v(" "+e._s(s.title)+" ")]}},{key:"option",fn:function(t){var s=t.option;return[e._v(" "+e._s(s.title)+" ")]}}]),model:{value:e.selectedBackground,callback:function(t){e.selectedBackground=t},expression:"selectedBackground"}}),s("b",[e._v("Connection")]),e._v(" "),s("button",{staticClass:"button-connection-test",on:{click:e.connection_test}},[e._v("|conntection test|")]),e._v(" "+e._s(e.connectionSpeedMessage)+" "),s("multiselect",{attrs:{options:e.formatOptions,searchable:!0,"show-labels":!1,placeholder:"pick a format",allowEmpty:!1},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var s=t.option;return[e._v(" "+e._s(s.title)+" ")]}},{key:"option",fn:function(t){var s=t.option;return[e._v(" "+e._s(s.description)+" ")]}}]),model:{value:e.selectedFormat,callback:function(t){e.selectedFormat=t},expression:"selectedFormat"}}),s("div",[s("br"),s("br"),s("hr"),s("b",[e._v("Raster visualisation")]),s("div",[s("b",[e._v("Value range")]),e._v(" "),s("v-checkbox",{staticStyle:{display:"inline-block"},attrs:{"hide-details":""},model:{value:e.autoValueRange,callback:function(t){e.autoValueRange=t},expression:"autoValueRange"}}),s("span",{class:{disabled:!e.autoValueRange}},[e._v("auto")]),e._v(" "),s("span",{class:{disabled:e.autoValueRange}},[e._v(" min: "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.valueRangeMinText,expression:"valueRangeMinText"}],staticClass:"text-input",class:{"text-input-invalid":!e.autoValueRange&&isNaN(e.valueRangeMin)},attrs:{type:"text",id:"name",name:"name",maxlength:"8",size:"10",disabled:e.autoValueRange,placeholder:"minimum"},domProps:{value:e.valueRangeMinText},on:{input:function(t){t.target.composing||(e.valueRangeMinText=t.target.value)}}}),e._v(" max: "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.valueRangeMaxText,expression:"valueRangeMaxText"}],staticClass:"text-input",class:{"text-input-invalid":!e.autoValueRange&&isNaN(e.valueRangeMax)},attrs:{type:"text",id:"name",name:"name",maxlength:"8",size:"10",disabled:e.autoValueRange,placeholder:"maximum"},domProps:{value:e.valueRangeMaxText},on:{input:function(t){t.target.composing||(e.valueRangeMaxText=t.target.value)}}})])],1),s("div",[s("b",[e._v("Gamma")]),e._v(" "),s("v-checkbox",{staticStyle:{display:"inline-block"},attrs:{"hide-details":""},model:{value:e.syncBands,callback:function(t){e.syncBands=t},expression:"syncBands"}}),e._v("sync bands "),s("multiselect",{attrs:{options:e.gammas,"show-labels":!1,allowEmpty:!1,placeholder:"gamma correction"},model:{value:e.selectedGamma,callback:function(t){e.selectedGamma=t},expression:"selectedGamma"}})],1),s("div",[s("b",[e._v("Single band mapping")]),s("multiselect",{attrs:{options:e.oneBandMappings,"show-labels":!1,allowEmpty:!1,placeholder:"value to pixel mapping of one band"},model:{value:e.selectedOneBandMapping,callback:function(t){e.selectedOneBandMapping=t},expression:"selectedOneBandMapping"}})],1)]),s("div",[s("br"),s("br"),s("hr"),s("b",[e._v("Vector overlay")]),s("div",[s("v-checkbox",{staticStyle:{display:"inline-block"},attrs:{"hide-details":""},model:{value:e.showLabels,callback:function(t){e.showLabels=t},expression:"showLabels"}}),e._v("Show vector feature labels ")],1)])],1)])},en=[],tn=s("fb19"),sn=s.n(tn);function an(e,t,s,a,i,r,o){try{var n=e[r](o),c=n.value}catch(l){return void s(l)}n.done?t(c):Promise.resolve(c).then(a,i)}function rn(e){return function(){var t=this,s=arguments;return new Promise((function(a,i){var r=e.apply(t,s);function o(e){an(r,a,i,o,n,"next",e)}function n(e){an(r,a,i,o,n,"throw",e)}o(void 0)}))}}var on={name:"admin-viewer-settings",props:[],components:{Multiselect:C.a,VueDraggableResizable:sn.a},data:function(){return{boxX:0,boxY:0,backgroundOptions:[{name:"checkerboard",title:"checkerboard"},{name:"osm",title:"OpenStreetMap"},{name:"OpenTopoMap",title:"OpenTopoMap"},{name:"StamenTerrain",title:"Stamen Terrain"},{name:"black",title:"black"},{name:"grey",title:"grey"},{name:"white",title:"white"}],selectedBackground:void 0,formatOptions:[{name:"image/png:0",title:"uncompressed ",description:"uncompressed - connection > 200 MBit/s"},{name:"image/png",title:"compressed",description:"compressed (default)"},{name:"image/jpeg",title:"lossy compressed (no transparency)",description:"lossy compressed (no transparency) - connection < 50 MBit/s"}],selectedFormat:void 0,connectionSpeedMessage:"(not measured)",gammas:["auto","0.1","0.2","0.5","1.0","1.5","2.0","2.5","3.0"],selectedGamma:"auto",syncBands:!1,oneBandMappings:["grey","inferno","viridis","jet","cividis"],selectedOneBandMapping:"grey",showLabels:!0,autoValueRange:!0,valueRangeMinText:"0",valueRangeMaxText:"255"}},methods:{connection_test:function(){var e=this;return rn(Je.a.mark((function t(){var s,a,i,r,o;return Je.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("connection test start"),e.connectionSpeedMessage="measuring...",t.prev=2,s=performance.now(),t.next=6,I.a.get(e.$store.getters.apiUrl("api/connection_test"),{responseType:"arraybuffer"});case 6:a=performance.now(),i=a-s,r=(2e4/i).toFixed(0),o=(16e4/i).toFixed(0),e.connectionSpeedMessage="measured "+o+" Mbit/s ("+r+" MByte/s)",t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](2),console.log("connection test error"),e.connectionSpeedMessage="measuring error";case 17:case"end":return t.stop()}}),t,null,[[2,13]])})))()},isNumber:function(e){return void 0!==e&&""!==e&&!isNaN(e)},parseNumber:function(e){return+e}},computed:{valueRangeMin:function(){return this.autoValueRange?NaN:this.isNumber(this.valueRangeMinText)?this.parseNumber(this.valueRangeMinText):NaN},valueRangeMax:function(){return this.autoValueRange?NaN:this.isNumber(this.valueRangeMaxText)?this.parseNumber(this.valueRangeMaxText):NaN}},watch:{selectedBackground:function(){this.$emit("selected-background",this.selectedBackground)},selectedFormat:function(){this.$emit("selected-format",this.selectedFormat)},selectedGamma:function(){this.$emit("selected-gamma",this.selectedGamma)},syncBands:function(){this.$emit("sync-bands",this.syncBands)},showLabels:function(){this.$emit("show-labels",this.showLabels)},selectedOneBandMapping:{immediate:!0,handler:function(){this.$emit("selected-mapping",this.selectedOneBandMapping)}},valueRangeMin:function(){this.$emit("value-range-min",this.valueRangeMin)},valueRangeMax:function(){this.$emit("value-range-max",this.valueRangeMax)}},mounted:function(){this.selectedBackground=this.backgroundOptions[2],this.selectedFormat=this.formatOptions[1]}},nn=on,cn=(s("c445"),Object(p["a"])(nn,Zo,en,!1,null,"2b414fe4",null)),ln=cn.exports,dn=s("c810"),un=s("81bd"),vn=s("6792"),mn=s("2ef1"),pn=s("273e"),_n=s("eb48"),fn=s("3a39"),hn=s("35d8"),bn=s("8295"),gn=s("a2e1"),yn=s("f5dd"),xn=s("bc81"),wn=s("a79f");function kn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function En(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?kn(Object(s),!0).forEach((function(t){Sn(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):kn(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Sn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function On(e,t,s,a,i,r,o){try{var n=e[r](o),c=n.value}catch(l){return void s(l)}n.done?t(c):Promise.resolve(c).then(a,i)}function Pn(e){return function(){var t=this,s=arguments;return new Promise((function(a,i){var r=e.apply(t,s);function o(e){On(r,a,i,o,n,"next",e)}function n(e){On(r,a,i,o,n,"throw",e)}o(void 0)}))}}var Cn={name:"admin-viewer",props:["rasterdb","timestamp","product","vectordb"],components:{"admin-viewer-select":oo,"admin-viewer-tools":fo,"admin-viewer-raster-export":Co,"admin-viewer-point-export":Io,"admin-viewer-point-raster-export":Xo,"admin-viewer-settings":ln,Splitpanes:O["Splitpanes"],Pane:O["Pane"],RingLoader:T["a"]},data:function(){return{messages:{},messagesIndex:0,notifications:{},notificationsIndex:0,olmap:void 0,mapAliasToProj4:{},mapProj4ToAlias:{},viewOverlay:void 0,olmousePosition:void 0,layerBackgroundOSM:void 0,layerBackgroundOpenTopoMap:void 0,layerBackgroundStamenTerrain:void 0,selectedFormat:void 0,vectorSource:void 0,vectorLayer:void 0,vectorLabelLayer:void 0,sourceWMS:void 0,layerWMS:void 0,layerWMS_opacity:1,validProjection:!0,meta:void 0,selectShow:!0,selectedRasterdb:void 0,selectedTimeSlice:void 0,selectedProduct:void 0,selectedBackground:void 0,selectedGamma:"auto",syncBands:!1,selectedOneBandMapping:void 0,valueRangeMin:NaN,valueRangeMax:NaN,toolsShow:!0,toolRasterExportShow:!1,toolPointExportShow:!1,toolPointRasterExportShow:!1,selectedVectordb:void 0,showLabels:!0,settingsDialog:!1,mouseModusButtonState:"move",mouseModusKeySelect:!1,interactionExtent:void 0,selectedExtent:void 0,globalEventListeners:{},table:{attibutes:[],data:[]},featureDetailsShow:!1,selectedFeatures:[]}},methods:{addnotification:function(e){var t=this.notificationsIndex++;return a["default"].set(this.notifications,t,e),t},removeNotification:function(e){a["default"].delete(this.notifications,e)},addMessage:function(e){var t=this.messagesIndex++;return a["default"].set(this.messages,t,e),t},removeMessage:function(e){a["default"].delete(this.messages,e)},refreshMeta:function(){var e=this;return Pn(Je.a.mark((function t(){var s,a,i;return Je.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("refreshMeta"),e.meta=void 0,void 0!==e.selectedRasterdb&&null!==e.selectedRasterdb){t.next=5;break}return e.setVectorView(),t.abrupt("return");case 5:return s=e.addMessage("loading meta data of layer ..."),t.prev=6,a=e.$store.getters.apiUrl("rasterdb/"+e.selectedRasterdb.name+"/meta.json"),t.next=10,I.a.get(a);case 10:i=t.sent,e.meta=i.data,e.removeMessage(s),t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](6),e.addnotification("ERROR loading meta data of layer "+t.t0),e.removeMessage(s);case 19:case"end":return t.stop()}}),t,null,[[6,15]])})))()},getNoProjection:function(e){return new yn["a"]({code:"no-projection",units:"pixels",extent:e,axisOrientation:"enu",global:!1,metersPerUnit:1,worldExtent:e,getPointResolution:function(e){return e}})},refreshWMS:function(){var e=this;if(void 0===this.meta)return this.sourceWMS=void 0,this.layerWMS.setSource(void 0),void this.refreshLayers();var t=function(t,s){var a=e.$store.state.identity.transactionCount;t.wmsReqestCount=a,t.getImage().src=s+"&cnt="+a,e.$store.commit("identity/incrementTransactionCount")},s=this.meta.ref.extent,a="";void 0!==this.meta.ref.proj4&&""!==this.meta.ref.proj4&&(a=this.meta.ref.proj4.trim());var i=void 0;if(""!==a){var r=this.getProjectionAlias(a);i=r}void 0===i&&(i=this.getNoProjection(s));var o=this.$store.getters.apiUrl("rasterdb_wms");this.sourceWMS=new vn["a"]({url:o,params:this.wmsParams,imageLoadFunction:t,projection:i,ratio:1}),this.sourceWMS.on("imageloadstart",(function(){e.$store.commit("identity/incrementTransactionRunCount")})),this.sourceWMS.on("imageloadend",(function(){e.$store.commit("identity/decrementTransactionRunCount")})),this.sourceWMS.on("imageloaderror",(function(t){e.$store.commit("identity/decrementTransactionRunCount");var s=e.$store.state.identity.transactionCount-1;t.image.wmsReqestCount===s&&e.addnotification("ERROR loading image")})),this.layerWMS.setSource(this.sourceWMS),this.layerWMS.setExtent(s),this.setWmsView()},setWmsView:function(){if(void 0!==this.meta)if(void 0!==this.meta.ref)if(void 0!==this.meta.ref.pixel_size)if(void 0!==this.meta.ref.extent){var e=this.meta.ref.extent,t=[(e[0]+e[2])/2,(e[1]+e[3])/2],s="";void 0!==this.meta.ref.proj4&&""!==this.meta.ref.proj4&&(s=this.meta.ref.proj4.trim());var a=void 0;if(""!==s){var i=this.getProjectionAlias(s);a=i}void 0===a?(a=this.getNoProjection(e),this.validProjection=!1):this.validProjection=!0,this.olmousePosition.setProjection(a);var r=this.meta.ref.pixel_size.x<=this.meta.ref.pixel_size.y?this.meta.ref.pixel_size.x:this.meta.ref.pixel_size.y,o=e[2]-e[0],n=e[3]-e[1],c=o>=n?o:n,l=new Tr["a"]({center:t,projection:a,extent:e,constrainOnlyCenter:!0,minResolution:r/4,maxResolution:c/256});this.olmap.setView(l),l.fit(e),this.olmap.updateSize(),this.refreshLayers()}else this.refreshLayers();else this.refreshLayers();else this.refreshLayers();else this.refreshLayers()},setWebmercatorView:function(){var e="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",t=this.getProjectionAlias(e);this.olmousePosition.setProjection(t);var s=new Tr["a"]({center:[0,0],projection:t,zoom:2});this.validProjection=!0,this.olmap.setView(s),this.olmap.updateSize(),this.refreshLayers()},setVectorView:function(){if(void 0===this.meta)if(void 0!==this.vectorSource){var e="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",t=this.getProjectionAlias(e);this.olmousePosition.setProjection(t);var s=new Tr["a"]({center:[0,0],projection:t,zoom:2});this.validProjection=!0,this.olmap.setView(s);var a=this.vectorSource.getExtent();s.fit(a),this.olmap.updateSize(),this.refreshLayers()}else this.setWebmercatorView();else this.refreshLayers()},refreshRoute:function(){var e="/viewer",t={};void 0===this.selectedRasterdb?void 0!==this.rasterdb&&(e+="/"+this.rasterdb):null!==this.selectedRasterdb&&(e+="/"+this.selectedRasterdb.name),void 0===this.selectedTimeSlice?void 0!==this.timestamp&&(t.timestamp=this.timestamp):null!==this.selectedTimeSlice&&(t.timestamp=this.selectedTimeSlice.id),void 0===this.selectedProduct?void 0!==this.product&&(t.product=this.product):null!==this.selectedProduct&&("custom"===this.selectedProduct.title?t.product="custom":t.product=this.selectedProduct.name),void 0===this.selectedVectordb?void 0!==this.vectordb&&(t.vectordb=this.vectordb):null!==this.selectedVectordb&&(t.vectordb=this.selectedVectordb.name),this.$router.push({path:e,query:t})},refreshLayers:function(){var e=this.olmap.getLayers();if(e.clear(),void 0!==this.selectedBackground&&this.validProjection)switch(this.selectedBackground.name){case"osm":e.push(this.layerBackgroundOSM);break;case"OpenTopoMap":e.push(this.layerBackgroundOpenTopoMap);break;case"StamenTerrain":e.push(this.layerBackgroundStamenTerrain);break}void 0!==this.sourceWMS&&e.push(this.layerWMS),void 0!==this.vectorSource&&(e.push(this.vectorLayer),this.showLabels&&e.push(this.vectorLabelLayer))},selectFullExtent:function(){this.interactionExtent.setExtent(this.meta.ref.extent)},refreshVectordbLayer:function(){void 0!==this.selectedVectordb&&null!==this.selectedVectordb&&void 0!==this.epsgCode?(this.loadGeojson(),this.loadTable()):this.refreshVectorSource(void 0)},loadGeojson:function(){var e=this;return Pn(Je.a.mark((function t(){var s,a,i,r;return Je.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.addMessage("loading vector data of layer ..."),a=e.$store.getters.apiUrl("vectordbs/"+e.selectedVectordb.name+"/geometry.json"),t.prev=2,t.next=5,I.a.get(a,{params:{epsg:e.epsgCode,just_name_attribute:!0}});case 5:i=t.sent,r=i.data,e.removeMessage(s),e.refreshVectorSource(r),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](2),e.addnotification("ERROR vector data of layer"+t.t0),e.removeMessage(s);case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()},loadTable:function(){var e=this;return Pn(Je.a.mark((function t(){var s,a,i;return Je.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.addMessage("loading table data of layer ..."),a=e.$store.getters.apiUrl("vectordbs/"+e.selectedVectordb.name+"/table.json"),t.prev=2,t.next=5,I.a.get(a);case 5:i=t.sent,e.table=i.data,e.removeMessage(s),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](2),e.addnotification("ERROR table data of layer"),e.removeMessage(s);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))()},refreshVectorSource:function(e){if(void 0===e)return this.vectorSource=void 0,this.vectorLayer.setSource(void 0),this.vectorLabelLayer.setSource(void 0),void this.setVectorView();var t=(new gn["a"]).readFeatures(e);this.vectorSource=new Pr["a"]({features:t}),this.vectorLayer.setSource(this.vectorSource),this.vectorLabelLayer.setSource(this.vectorSource),this.setVectorView()},onSettingsDialog:function(){this.settingsDialog=!this.settingsDialog;var e=document.getElementById("split-main").getBoundingClientRect();this.$refs.settingsDialog.boxX=e.left},showFeaturesDialog:function(e){var t=this.vectorSource.getClosestFeatureToCoordinate(e.coordinate);null!==t&&(console.log("clicked "+t.getId()+"  "+e.coordinate),this.selectedFeatures=[t],this.featureDetailsShow=!0)},featureToTableEntry:function(e){if(void 0===e)return[];var t=this.table.data[e];return void 0==t?[]:t},getProjectionAlias:function(e){var t=this.mapProj4ToAlias[e];if(void 0===t){var s=1;t="WMS_VIEW_PROJECTION_"+s;while(void 0!==this.mapAliasToProj4[t])s++,t="WMS_VIEW_PROJECTION_"+s;this.mapAliasToProj4[t]=e,this.mapProj4ToAlias[e]=t,wn["a"].defs(t,e),Object(xn["a"])(wn["a"])}return t},onSplitpanesResize:function(){this.olmap.updateSize()}},computed:En(En({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}})),{},{mouseModus:function(){var e=this.mouseModusButtonState;return this.mouseModusKeySelect&&(e="select"),e},session:function(){var e=this.$store.state.identity.data;return void 0===e?void 0:e.session},transactionRunCount:function(){return this.$store.state.identity.transactionRunCount},selectedBackgroundClass:function(){if(void 0===this.selectedBackground)return"";switch(this.selectedBackground.name){case"checkerboard":return"background-checkerboard";case"black":return"background-black";case"grey":return"background-grey";case"white":return"background-white";default:return""}},wmsParams:function(){var e="color";e=void 0==this.selectedProduct||null==this.selectedProduct?void 0!==this.meta&&null!==this.meta&&void 0!==this.meta.bands&&1==this.meta.bands.length?"band"+this.meta.bands[0].index:"color":this.selectedProduct.name,"auto"!==this.selectedGamma&&(e+="@gamma"+this.selectedGamma),"undefined"!==this.selectedOneBandMapping&&"grey"!==this.selectedOneBandMapping&&(e+="@pal_"+this.selectedOneBandMapping),this.syncBands&&(e+="@sync_bands"),isNaN(this.valueRangeMin)||(e+="@min"+this.valueRangeMin),isNaN(this.valueRangeMax)||(e+="@max"+this.valueRangeMax);var t={LAYERS:this.rasterdb};return void 0!==this.selectedTimeSlice&&null!==this.selectedTimeSlice&&(t.TIME=this.selectedTimeSlice.id),""!==e&&(t.STYLES=e),void 0!==this.session&&(t.session=this.session),void 0!==this.selectedFormat&&(t.FORMAT=this.selectedFormat.name),t},epsgCode:function(){if(void 0===this.meta||void 0===this.meta.ref)return 3857;var e=this.meta.ref.code;if(void 0!==e&&e.startsWith("EPSG:")){var t=Number.parseInt(e.substring(5));return Number.isInteger(t)?t:void 0}}}),watch:{$route:function(e){console.log(e)},selectedRasterdb:function(){this.refreshMeta(),this.refreshRoute()},meta:function(){this.refreshWMS(),this.interactionExtent.setExtent();var e="unknown projection";void 0!==this.meta&&void 0!==this.meta.ref&&(void 0!==this.meta.ref.projectionTitle?e=this.meta.ref.projectionTitle:void 0!==this.meta.ref.proj4&&""!==this.meta.ref.proj4&&(e=this.meta.ref.proj4)),document.getElementById("foot-start-1").innerHTML=e},selectedTimeSlice:function(){this.refreshWMS(),this.refreshRoute()},selectedProduct:function(){this.refreshRoute()},selectedVectordb:function(){this.refreshVectordbLayer(),this.refreshRoute()},mouseModusButtonState:function(){this.mouseModusKeySelect=!1},wmsParams:function(){void 0!==this.sourceWMS&&this.sourceWMS.updateParams(this.wmsParams)},session:function(){this.refreshWMS()},selectedBackground:function(){this.refreshLayers()},validProjection:function(){this.refreshLayers()},mouseModus:function(){switch(this.viewOverlay.classList.remove("olmap-viewer-mouseModus-move"),this.viewOverlay.classList.remove("olmap-viewer-mouseModus-move-on"),this.viewOverlay.classList.remove("olmap-viewer-mouseModus-select"),this.viewOverlay.classList.remove("olmap-viewer-mouseModus-select-on"),this.mouseModus){case"select":this.interactionExtent.setActive(!0),this.viewOverlay.classList.add("olmap-viewer-mouseModus-select");break;default:this.interactionExtent.setActive(!1),this.interactionExtent.createOrUpdatePointerFeature_([NaN,NaN]),this.viewOverlay.classList.add("olmap-viewer-mouseModus-move");break}},layerWMS_opacity:function(){void 0!==this.layerWMS&&this.layerWMS.setOpacity(this.layerWMS_opacity)},epsgCode:function(){this.refreshVectordbLayer()},showLabels:function(){this.refreshLayers()}},mounted:function(){var e=this,t=this;document.getElementById("foot-start-1").innerHTML="?",document.getElementById("foot-end-1").innerHTML="",this.globalEventListeners.keydown=function(t){17==t.keyCode&&(e.mouseModusKeySelect=!0)},this.globalEventListeners.keyup=function(t){17==t.keyCode&&(e.mouseModusKeySelect=!1)},document.addEventListener("keydown",this.globalEventListeners.keydown),document.addEventListener("keyup",this.globalEventListeners.keyup),this.$store.dispatch("identity/init"),this.layerWMS=new dn["a"]({}),this.layerWMS.setOpacity(this.layerWMS_opacity),this.layerBackgroundOSM=new Or["a"]({source:new Cr["b"]}),this.layerBackgroundOpenTopoMap=new Or["a"]({title:"OpenTopoMap",type:"base",visible:!0,source:new mn["a"]({url:"https://{a-c}.tile.opentopomap.org/{z}/{x}/{y}.png",attributions:'Kartendaten: © <a href="https://openstreetmap.org/copyright">OpenStreetMap</a>-Mitwirkende, SRTM | Kartendarstellung: © <a href="http://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)',wrapX:!1})}),this.layerBackgroundStamenTerrain=new Or["a"]({source:new pn["a"]({layer:"terrain",wrapX:!1})});var s=new zr["a"]({color:"rgba(255,255,255,0.0)"}),a=new Nr["a"]({color:"rgb(95, 112, 245)",width:2}),i=new Nr["a"]({color:"rgb(200, 20, 35)",width:2});function r(){return new Lr["c"]({image:new hn["a"]({stroke:i,points:4,radius:10,radius2:0,angle:Math.PI/4}),fill:s,stroke:a})}this.vectorLayer=new un["a"]({style:r});var o=new zr["a"]({color:"rgba(255,255,255,0.6)"});function n(e){var t=new bn["a"]({font:"15px sans-serif",text:e.getProperties().name,overflow:!0,backgroundFill:o,padding:[2,2,2,2]});return new Lr["c"]({text:t})}this.vectorLabelLayer=new un["a"]({style:n,declutter:!0});var c=[new Lr["c"]({fill:new zr["a"]({color:[255,255,255,.5]})}),new Lr["c"]({stroke:new Nr["a"]({color:[50,50,50],width:1,lineDash:[10]})})];this.interactionExtent=new _n["a"]({boxStyle:c}),this.interactionExtent.on("extentchanged",(function(e){null===e.extent?t.selectedExtent=void 0:t.selectedExtent=e.extent})),this.interactionExtent.setActive(!1),this.olmousePosition=new Dr["a"]({projection:"EPSG:4326",target:"foot-end-1",coordinateFormat:function(e){return Object(Ir["j"])(e,2)}}),this.olmap=new Er["a"]({target:"olmap-viewer",controls:$r["a"]({attributionOptions:{collapsible:!1}}).extend([new Ar["a"]({}),this.olmousePosition]),interactions:fn["a"]().extend([this.interactionExtent])}),this.viewOverlay=document.querySelector(".ol-overlaycontainer-stopevent"),this.olmap.on("click",(function(t){switch(e.mouseModus){case"move":e.showFeaturesDialog(t);break}})),this.olmap.on("movestart",(function(){switch(e.viewOverlay.classList.remove("olmap-viewer-mouseModus-move"),e.viewOverlay.classList.remove("olmap-viewer-mouseModus-move-on"),e.viewOverlay.classList.remove("olmap-viewer-mouseModus-select"),e.viewOverlay.classList.remove("olmap-viewer-mouseModus-select-on"),e.mouseModus){case"select":e.viewOverlay.classList.add("olmap-viewer-mouseModus-select-on");break;default:e.viewOverlay.classList.add("olmap-viewer-mouseModus-move-on");break}})),this.olmap.on("moveend",(function(){switch(e.viewOverlay.classList.remove("olmap-viewer-mouseModus-move"),e.viewOverlay.classList.remove("olmap-viewer-mouseModus-move-on"),e.viewOverlay.classList.remove("olmap-viewer-mouseModus-select"),e.viewOverlay.classList.remove("olmap-viewer-mouseModus-select-on"),e.mouseModus){case"select":e.viewOverlay.classList.add("olmap-viewer-mouseModus-select");break;default:e.viewOverlay.classList.add("olmap-viewer-mouseModus-move");break}})),this.setWebmercatorView()},destroyed:function(){document.getElementById("foot-start-1").innerHTML="?",document.getElementById("foot-end-1").innerHTML="?",document.removeEventListener("keydown",this.globalEventListeners.keydown),document.removeEventListener("keyup",this.globalEventListeners.keyup)}},Tn=Cn,jn=(s("5896"),s("0e36"),Object(p["a"])(Tn,Yr,Kr,!1,null,"4673eb1a",null)),Mn=jn.exports,Rn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"innergrid-container"},[s("div",{staticClass:"innergrid-item-main"},["init"===e.uploadState?s("div",[s("h1",{staticStyle:{"text-align":"center"}},[e._v("Raster File Upload")]),s("uploader",{staticClass:"uploader-example",attrs:{options:e.options},on:{"file-success":function(t){e.inspectFilename=t.name,e.uploadState="done"}}},[s("uploader-unsupport"),s("uploader-drop",[s("p",[s("b",[e._v("Upload")]),e._v(" - Drop raster-file here or")]),s("uploader-btn",[s("v-icon",[e._v("cloud_upload")]),e._v("select raster-file")],1)],1),s("uploader-list")],1),s("div",{staticStyle:{padding:"50px"}},[void 0===e.identity||e.identity.secure?e._e():s("div",[s("h2",[e._v("For upload of big files you need to connect with HTTPS.")]),e._v(" You may switch to HTTPS at "),s("a",{attrs:{href:"#/tools"}},[e._v("tools-tab")]),s("br"),s("br"),s("br")]),e._m(0),e._m(1)])],1):e._e(),"done"===e.uploadState?s("div",[s("b",[e._v("raster file uploaded.")]),e._v(" "),s("v-btn",{directives:[{name:"show",rawName:"v-show",value:"done"!==e.importState,expression:"importState !== 'done'"}],on:{click:function(t){return e.cancel_upload()}}},[s("v-icon",[e._v("cancel")]),e._v(" (cancel import)")],1),e._v(" "),s("v-btn",{directives:[{name:"show",rawName:"v-show",value:"done"===e.importState,expression:"importState === 'done'"}],on:{click:function(t){return e.cancel_upload()}}},[s("v-icon",[e._v("arrow_right_alt")]),e._v(" leave and upload another file")],1),s("hr"),s("table",[s("tr",[e._m(2),s("td",[e._v(e._s(e.inspectFilename))])]),s("tr",[e._m(3),s("td",{staticStyle:{"white-space":"nowrap"}},[s("label",{attrs:{for:"checkbox"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.guessTimestamp,expression:"guessTimestamp"}],staticStyle:{width:"40px"},attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(e.guessTimestamp)?e._i(e.guessTimestamp,null)>-1:e.guessTimestamp},on:{change:function(t){var s=e.guessTimestamp,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r=null,o=e._i(s,r);a.checked?o<0&&(e.guessTimestamp=s.concat([r])):o>-1&&(e.guessTimestamp=s.slice(0,o).concat(s.slice(o+1)))}else e.guessTimestamp=i}}}),e._v(" Try to guess timestamp from filename.")])])]),s("tr",[e._m(4),s("td",[s("multiselect",{staticStyle:{"min-width":"550px"},attrs:{options:e.importStrategies,"track-by":"id",label:"title",allowEmpty:!1,searchable:!1,"show-labels":!1,placeholder:"select import strategy"},model:{value:e.importStrategy,callback:function(t){e.importStrategy=t},expression:"importStrategy"}})],1)]),"existing_add"===e.importStrategy.id||"existing_merge"===e.importStrategy.id?s("tr",[e._m(5),s("td",[s("multiselect",{attrs:{options:e.rasterdbs,"track-by":"name",label:"name",allowEmpty:!1,searchable:!1,"show-labels":!1,placeholder:"select import strategy"},model:{value:e.existingRasterdb,callback:function(t){e.existingRasterdb=t},expression:"existingRasterdb"}})],1)]):e._e()]),s("br"),s("v-btn",{attrs:{disabled:"inspecting"===e.inspectState||"importing"===e.importState||("existing_add"===e.importStrategy.id||"existing_merge"===e.importStrategy.id)&&void 0===e.existingRasterdb.name},on:{click:function(t){return e.inspect()}}},[s("v-icon",[e._v("zoom_in")]),e._v("inspect")],1),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:"done"===e.inspectState,expression:"inspectState === 'done'"}]},[s("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v(" press again to discard and reload meta data")],1),"inspecting"===e.inspectState?s("div",[s("pulse-loader"),e._v(" Inspecting file ... ")],1):e._e(),s("hr"),"done"===e.inspectState?s("div",[s("br"),s("div",[void 0!==e.specification.gdal_driver?s("span",[e._v("file type: "),s("b",[e._v(e._s(e.specification.gdal_driver))]),e._v(" ; ")]):e._e(),s("b",[e._v(e._s(e.specification.x_range)+" width")]),e._v(" x "),s("b",[e._v(e._s(e.specification.y_range)+" height")]),e._v(" ==> "),s("b",[e._v(e._s(e.specification.x_range*e.specification.y_range)+" pixels")]),e._v(" ; "),e.specification.bands.length<=1?s("span",[s("b",[e._v(e._s(e.specification.bands.length)+" band")])]):e._e(),e.specification.bands.length>1?s("span",[s("b",[e._v(e._s(e.specification.bands.length)+" bands")]),e._v(" ==> "),s("b",[e._v(e._s(e.specification.x_range*e.specification.y_range*e.specification.bands.length)+" values")])]):e._e(),s("br"),s("br"),s("span",{staticStyle:{"white-space":"nowrap",display:"inline-block"}},[s("span",{staticStyle:{"white-space":"nowrap",display:"inline-block"}},[e._v("mode ")]),e._v(" "),s("multiselect",{staticStyle:{"min-width":"550px","white-space":"nowrap",display:"inline-block"},attrs:{options:e.importModes,"track-by":"id",label:"title",allowEmpty:!1,searchable:!1,"show-labels":!1,placeholder:"select import mode"},model:{value:e.importMode,callback:function(t){e.importMode=t},expression:"importMode"}})],1),s("br"),s("br"),"simple"===e.importMode.id?s("table",[s("tr",[e._m(6),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.specification.timestamp,expression:"specification.timestamp"}],attrs:{placeholder:"timestamp"},domProps:{value:e.specification.timestamp},on:{input:function(t){t.target.composing||e.$set(e.specification,"timestamp",t.target.value)}}})]),s("td",[e._v(" "),s("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v("Format: "),s("b",[e._v("yyyy-MM-dd'T'HH:mm")]),e._v(" e.g. "),s("span",{staticStyle:{color:"grey"}},[e._v("2001-12-31T23:59")]),e._v(" or shortened forms e.g. "),s("span",{staticStyle:{color:"grey"}},[e._v("2001-12-31")]),e._v(" or "),s("span",{staticStyle:{color:"grey"}},[e._v("2001-12")]),e._v(" or "),s("span",{staticStyle:{color:"grey"}},[e._v("2001")])],1)])]):e._e()]),s("br"),e.create?s("table",[s("tr",[e._m(7),s("td",[e._v(e._s(e.specification.filename))])]),s("tr",[e._m(8),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.specification.id,expression:"specification.id"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"id"},domProps:{value:e.specification.id},on:{input:function(t){t.target.composing||e.$set(e.specification,"id",t.target.value)}}})]),e.existingID?e._e():s("td",[s("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),s("b",[e._v("Caution")]),e._v(" with existing IDs: Layer will be deleted and overwritten with imported data.")],1),e.existingID?s("td",{staticStyle:{color:"red"}},[s("v-icon",{staticStyle:{color:"red"}},[e._v("warning")]),e._v(" ID already exists: Layer will be deleted and overwritten with imported data.")],1):e._e()]),s("tr",[e._m(9),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.specification.title,expression:"specification.title"}],attrs:{placeholder:"title"},domProps:{value:e.specification.title},on:{input:function(t){t.target.composing||e.$set(e.specification,"title",t.target.value)}}})])]),s("tr",[e._m(10),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.specification.description,expression:"specification.description"}],attrs:{placeholder:"description"},domProps:{value:e.specification.description},on:{input:function(t){t.target.composing||e.$set(e.specification,"description",t.target.value)}}})])]),s("tr",[e._m(11),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.specification.acquisition_date,expression:"specification.acquisition_date"}],attrs:{placeholder:"date or range of dates"},domProps:{value:e.specification.acquisition_date},on:{input:function(t){t.target.composing||e.$set(e.specification,"acquisition_date",t.target.value)}}})])]),s("tr",[e._m(12),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.specification.corresponding_contact,expression:"specification.corresponding_contact"}],attrs:{placeholder:"e.g. user name (name@mail.com), user2 name2 (name@mail.com)"},domProps:{value:e.specification.corresponding_contact},on:{input:function(t){t.target.composing||e.$set(e.specification,"corresponding_contact",t.target.value)}}})])]),s("tr",[e._m(13),s("td",[s("multiselect",{attrs:{options:e.layer_tags,multiple:"",taggable:!0,placeholder:"select tags",tagPlaceholder:"Press enter to create a tag"},on:{tag:e.createTag},model:{value:e.specification.tags,callback:function(t){e.$set(e.specification,"tags",t)},expression:"specification.tags"}})],1)]),s("tr",[e._m(14),s("td",[s("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclRole},model:{value:e.specification.acl,callback:function(t){e.$set(e.specification,"acl",t)},expression:"specification.acl"}})],1),s("td",[s("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v(" select a role that that you "),s("i",[e._v("have")]),e._v(", to view uploaded (meta-)data (if you are not admin).")],1)]),s("tr",[e._m(15),s("td",[s("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclModRole},model:{value:e.specification.acl_mod,callback:function(t){e.$set(e.specification,"acl_mod",t)},expression:"specification.acl_mod"}})],1),s("td",[s("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v(" select a role that that you "),s("i",[e._v("have")]),e._v(", to modify uploaded (meta-)data (if you are not admin).")],1)])]):e._e(),e.create?e._e():s("table",[s("tr",[e._m(16),s("td",[e._v(e._s(e.specification.filename))])]),s("tr",[e._m(17),s("td",[e._v(e._s(e.specification.id))])]),s("tr",[e._m(18),s("td",[e._v(e._s(e.specification.title))])]),s("tr",[e._m(19),s("td",[e._v(e._s(e.specification.description))])]),s("tr",[e._m(20),s("td",[e._v(e._s(e.specification.acquisition_date))])]),s("tr",[e._m(21),s("td",[e._v(e._s(e.specification.tags))])]),s("tr",[e._m(22),s("td",[e._v(e._s(e.specification.acl))])]),s("tr",[e._m(23),s("td",[e._v(e._s(e.specification.acl_mod))])])]),e.create?s("table",[s("tr",[e._m(24),s("td",[e._v("x "+e._s(e.specification.pixel_size_x)+" y "+e._s(e.specification.pixel_size_y))])]),s("tr",[e._m(25),s("td",[e._v("x "+e._s(e.specification.rasterdb_geo_offset_x)+" y "+e._s(e.specification.rasterdb_geo_offset_y))])])]):e._e(),e.create?e._e():s("table",{staticStyle:{"text-align":"center"}},[e._m(26),s("tr",[e._m(27),s("td",[e._v(e._s(e.specification.pixel_size_x))]),s("td"),s("td",[e._v(e._s(e.specification.pixel_size_y))])]),s("tr",[e._m(28),s("td",[e._v(e._s(e.specification.file_pixel_size_x))]),s("td"),s("td",[e._v(e._s(e.specification.file_pixel_size_y))])])]),e.specification.pixel_size_x!=e.specification.file_pixel_size_x||e.specification.pixel_size_y!=e.specification.file_pixel_size_y?s("div",{staticStyle:{color:"red"}},[s("v-icon",{staticStyle:{color:"red"}},[e._v("warning")]),e._v(" Pixel size of layer raster and pixel size of file raster do seem to differ. "),s("br"),e._v("If difference is more than a very small amount pixels are inserted at wrong positions. "),s("br"),s("b",{staticStyle:{"font-size":"1.2em"}},[e._v("No reprojection will be done.")])],1):e._e(),s("br"),e.create?s("table",[s("tr",[e._m(29),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.specification.geo_code,expression:"specification.geo_code"}],attrs:{placeholder:"code"},domProps:{value:e.specification.geo_code},on:{input:function(t){t.target.composing||e.$set(e.specification,"geo_code",t.target.value)}}})]),e.validEPSG?s("td",[e._v("==> go to "),s("a",{attrs:{href:"https://epsg.io/"+e.epsg,target:"_blank"}},[e._v("epsg.io")])]):e._e(),e.validEPSG?e._e():s("td",[s("b",[e._v("no EPSG code")]),e._v(": typical geo codes start with "),s("i",[e._v("EPSG:")]),e._v(" e.g. "),s("i",[e._v("EPSG:4326")])])]),s("tr",[e._m(30),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.specification.proj4,expression:"specification.proj4"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"proj4"},domProps:{value:e.specification.proj4},on:{input:function(t){t.target.composing||e.$set(e.specification,"proj4",t.target.value)}}})]),e.proj4CompareOK?s("td",[s("b",{staticStyle:{color:"green"}},[s("v-icon",[e._v("check")])],1),e._v(" (checked on epsg.io)")]):e._e(),e.proj4CompareOK||void 0===e.proj4Compare?e._e():s("td",[s("b",[s("v-icon",[e._v("warning")]),e._v(" Does not match to epsg.io")],1),e._v(" "),s("v-btn",{on:{click:function(t){e.specification.proj4=e.proj4Compare}}},[e._v("==> adopt epsg.io")]),e._v(' "'+e._s(e.proj4Compare)+'"')],1),void 0!==e.proj4CompareError?s("td",[s("b",[e._v("ERROR")]),e._v(": could not get proj4 from epsg.io (invalid EPSG code?)")]):e._e()])]):e._e(),e.create?e._e():s("table",[s("tr",[e._m(31),s("td",[e._v(e._s(e.specification.geo_code))])]),s("tr",[e._m(32),s("td",[e._v(e._s(e.specification.file_geo_code))])]),s("tr",[e._m(33),s("td",[e._v(e._s(e.specification.proj4))])]),s("tr",[e._m(34),s("td",[e._v(e._s(e.specification.file_proj4))])])]),e.specification.geo_code!=e.specification.file_geo_code||e.specification.proj4!=e.specification.file_proj4?s("div",{staticStyle:{color:"red"}},[s("v-icon",{staticStyle:{color:"red"}},[e._v("warning")]),e._v(" Projection of layer raster and projection of file raster do seem to differ. "),s("br"),e._v("Check if this is correct. "),s("br"),s("b",{staticStyle:{"font-size":"1.2em"}},[e._v("No reprojection will be done.")])],1):e._e(),s("br"),e.create?e._e():s("div",[s("b",[e._v("existing band indices:")]),e._v(" "),s("span",{staticStyle:{"font-size":"1.5em"}},[e._v(e._s(e.specification.existing_bands.map((function(e){return e.index}))))]),s("br"),s("br")]),s("hr"),"simple"===e.importMode.id?s("div",e._l(e.specification.bands,(function(t){return s("div",{key:t.file_band_index},[s("table",[s("tr",[s("td",[s("b",[e._v("file band index "),s("span",{staticStyle:{"font-size":"1.5em"}},[e._v(e._s(t.file_band_index))]),e._v(" ==> ")])]),s("td",[s("span",[e._v("layer band index")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.rasterdb_band_index,expression:"band.rasterdb_band_index"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"band number in rasterdb. Leave empty to omit (not import) this band."},domProps:{value:t.rasterdb_band_index},on:{input:function(s){s.target.composing||e.$set(t,"rasterdb_band_index",s.target.value)}}})]),""===t.rasterdb_band_index||e.isNaturalNumber(t.rasterdb_band_index)?e._e():s("td",[s("b",{staticStyle:{color:"red"}},[e._v("Error:")]),e._v(" band index needs to be a non-negative integer number")]),""!==t.rasterdb_band_index?s("td",[s("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v(" Leave empty to omit (not import) this band.")],1):e._e(),""===t.rasterdb_band_index?s("td",[e._v("band exlcuded from import")]):e._e()]),!e.create&&e.isNaturalNumber(t.rasterdb_band_index)?s("tr",[e._m(35,!0),s("td",[s("b",[e._v(e._s(void 0===e.existing_bands_map[t.rasterdb_band_index]?"create new band":"into existing band"))])])]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?s("tr",[s("td",[s("b",[e._v("file band data type ("+e._s(t.gdal_raster_data_type)+") ==> ")])]),void 0===e.existing_bands_map[t.rasterdb_band_index]?s("td",[s("v-select",{attrs:{items:["short","float","int16"]},model:{value:t.rastedb_band_data_type,callback:function(s){e.$set(t,"rastedb_band_data_type",s)},expression:"band.rastedb_band_data_type"}})],1):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?s("td",[e._v(e._s(t.rastedb_band_data_type))]):e._e()]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?s("tr",[e._m(36,!0),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.no_data_value,expression:"band.no_data_value"}],attrs:{placeholder:"no data value"},domProps:{value:t.no_data_value},on:{input:function(s){s.target.composing||e.$set(t,"no_data_value",s.target.value)}}})])]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?s("tr",[e._m(37,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.band_name,expression:"band.band_name"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"name"},domProps:{value:t.band_name},on:{input:function(s){s.target.composing||e.$set(t,"band_name",s.target.value)}}})]):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?s("td",[e._v(e._s(t.band_name))]):e._e()]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?s("tr",[e._m(38,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.wavelength,expression:"band.wavelength"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"wavelength in nm"},domProps:{value:t.wavelength},on:{input:function(s){s.target.composing||e.$set(t,"wavelength",s.target.value)}}})]):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?s("td",[e._v(e._s(t.wavelength))]):e._e()]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?s("tr",[e._m(39,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.fwhm,expression:"band.fwhm"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"fwhm in nm"},domProps:{value:t.fwhm},on:{input:function(s){s.target.composing||e.$set(t,"fwhm",s.target.value)}}})]):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?s("td",[e._v(e._s(t.fwhm))]):e._e()]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?s("tr",[e._m(40,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?s("td",[s("v-select",{attrs:{items:["(not specified)","red","green","blue"]},model:{value:t.visualisation,callback:function(s){e.$set(t,"visualisation",s)},expression:"band.visualisation"}})],1):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?s("td",[e._v(e._s(t.visualisation))]):e._e()]):e._e()]),s("hr")])})),0):e._e(),"timeseries"===e.importMode.id?s("div",[s("br"),e._v(" "),s("admin-upload-generate-timestamps",{attrs:{specification:e.specification},on:{"timestamp-sequence":function(t){return e.fillTimestamps(t)}}}),s("br"),s("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v("timestamp format: "),s("b",[e._v("yyyy-MM-dd'T'HH:mm")]),e._v(" e.g. "),s("span",{staticStyle:{color:"grey"}},[e._v("2001-12-31T23:59")]),e._v(" or shortened forms e.g. "),s("span",{staticStyle:{color:"grey"}},[e._v("2001-12-31")]),e._v(" or "),s("span",{staticStyle:{color:"grey"}},[e._v("2001-12")]),e._v(" or "),s("span",{staticStyle:{color:"grey"}},[e._v("2001")]),s("br"),s("table",{staticStyle:{"border-collapse":"collapse"},attrs:{border:"1",bordercolor:"#aaaaaa",cellpadding:"10"}},[e._m(41),e._m(42),e._l(e.specification.bands,(function(t){return s("tr",{key:t.file_band_index},[s("td",{staticStyle:{"background-color":"rgb(244, 250, 255)"},attrs:{align:"center"}},[e._v(e._s(t.file_band_index))]),s("td",{staticStyle:{"background-color":"rgb(244, 250, 255)"},attrs:{align:"center"}},[e._v(e._s(t.gdal_raster_data_type))]),s("td",{attrs:{align:"center"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.no_data_value,expression:"band.no_data_value"}],staticStyle:{"text-align":"center","background-color":"rgb(244, 250, 255)"},attrs:{placeholder:"no data value"},domProps:{value:t.no_data_value},on:{input:function(s){s.target.composing||e.$set(t,"no_data_value",s.target.value)}}})]),s("td",{attrs:{align:"center"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.rasterdb_band_index,expression:"band.rasterdb_band_index"}],staticStyle:{"min-width":"10px","text-align":"center","background-color":"rgb(247, 255, 244)"},attrs:{placeholder:"omit"},domProps:{value:t.rasterdb_band_index},on:{input:function(s){s.target.composing||e.$set(t,"rasterdb_band_index",s.target.value)}}})]),s("td",{attrs:{align:"center"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.timestamp,expression:"band.timestamp"}],staticStyle:{"min-width":"10px","text-align":"center","background-color":"rgb(247, 255, 244)"},attrs:{placeholder:"timestamp"},domProps:{value:t.timestamp},on:{input:function(s){s.target.composing||e.$set(t,"timestamp",s.target.value)}}})])])}))],2),s("br"),s("hr"),e._l(e.specification.addBands,(function(t){return s("div",{key:t.rasterdb_band_index},[s("table",[s("tr",[s("td",[s("b",{staticStyle:{"font-size":"1.5em"}},[e._v("layer band index "),s("span",{staticStyle:{"font-size":"1.5em"}},[e._v(e._s(t.rasterdb_band_index))])])])]),!e.create&&e.isNaturalNumber(t.rasterdb_band_index)?s("tr",[e._m(43,!0),s("td",[s("b",[e._v(e._s(void 0===e.existing_bands_map[t.rasterdb_band_index]?"create new band":"into existing band"))])])]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?s("tr",[e._m(44,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?s("td",[s("v-select",{attrs:{items:["short","float"]},model:{value:t.rastedb_band_data_type,callback:function(s){e.$set(t,"rastedb_band_data_type",s)},expression:"band.rastedb_band_data_type"}})],1):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?s("td",[e._v(e._s(t.rastedb_band_data_type))]):e._e()]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?s("tr",[e._m(45,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.band_name,expression:"band.band_name"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"name"},domProps:{value:t.band_name},on:{input:function(s){s.target.composing||e.$set(t,"band_name",s.target.value)}}})]):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?s("td",[e._v(e._s(t.band_name))]):e._e()]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?s("tr",[e._m(46,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.wavelength,expression:"band.wavelength"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"wavelength in nm"},domProps:{value:t.wavelength},on:{input:function(s){s.target.composing||e.$set(t,"wavelength",s.target.value)}}})]):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?s("td",[e._v(e._s(t.wavelength))]):e._e()]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?s("tr",[e._m(47,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.fwhm,expression:"band.fwhm"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"fwhm in nm"},domProps:{value:t.fwhm},on:{input:function(s){s.target.composing||e.$set(t,"fwhm",s.target.value)}}})]):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?s("td",[e._v(e._s(t.fwhm))]):e._e()]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?s("tr",[e._m(48,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?s("td",[s("v-select",{attrs:{items:["(not specified)","red","green","blue"]},model:{value:t.visualisation,callback:function(s){e.$set(t,"visualisation",s)},expression:"band.visualisation"}})],1):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?s("td",[e._v(e._s(t.visualisation))]):e._e()]):e._e()]),s("hr")])}))],2):e._e(),s("br"),s("v-checkbox",{attrs:{label:"update pyramid"},model:{value:e.specification.update_pyramid,callback:function(t){e.$set(e.specification,"update_pyramid",t)},expression:"specification.update_pyramid"}}),s("v-checkbox",{attrs:{label:"update catalog"},model:{value:e.specification.update_catalog,callback:function(t){e.$set(e.specification,"update_catalog",t)},expression:"specification.update_catalog"}}),!e.create||void 0!==e.specification&&void 0!==e.specification.acl&&0!==e.specification.acl.length?e._e():s("div",{staticStyle:{color:"red"}},[s("v-icon",{staticStyle:{color:"red"}},[e._v("warning")]),e._v(" No access role specified. ==> Only admin can view imported raster. ")],1),!e.create||void 0!==e.specification&&void 0!==e.specification.acl_mod&&0!==e.specification.acl_mod.length?e._e():s("div",{staticStyle:{color:"red"}},[s("v-icon",{staticStyle:{color:"red"}},[e._v("warning")]),e._v(" No modify role specified. ==> Only admin can modify imported raster and reimport raster with same id. ")],1),s("br"),s("v-btn",{attrs:{disabled:"importing"===e.importState||!e.create&&"init"!==e.importState},on:{click:function(t){return e.start_import()}}},[s("v-icon",[e._v("cloud_upload")]),e._v(" >> import <<")],1),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:"done"===e.importState&&e.create,expression:"importState === 'done' && create"}]},[s("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v(" press again to reimport (e.g. with changed meta data)")],1),void 0!==e.remote_task?s("div",[e._v(" "+e._s((e.remote_task.runtime/1e3).toFixed(0))+" s "),s("br"),s("span",{staticStyle:{color:"grey"}},[e._v(e._s(e.remote_task.message))])]):e._e(),"init"===e.importState?s("div",[e._v(" Import not started. Press 'import' to start. ")]):e._e(),"importing"===e.importState?s("div",[s("pulse-loader"),e._v(" Import is running ... ")],1):e._e(),"error"===e.importState?s("div",[s("v-icon",{staticStyle:{color:"red"}},[e._v("error")]),e._v(" "),s("b",[e._v("Import error")]),s("br"),e._v(e._s(e.importErrorStatus)+" : "+e._s(e.importErrorStatusText)+" "),s("br"),s("br"),e._v(e._s(e.importErrorStatusMessage)+" ")],1):e._e(),"done"===e.importState?s("div",[s("v-icon",{staticStyle:{color:"green"}},[e._v("cloud_done")]),e._v(" Import done. "),s("br"),s("br"),e._v("view meta data: "),s("a",{attrs:{href:"#/layers/rasterdbs/"+e.specification.id}},[e._v(e._s(e.specification.id))]),s("br"),s("br"),e._v("view layer: "),s("a",{attrs:{href:"#/viewer/"+e.specification.id}},[e._v(e._s(e.specification.id))])],1):e._e()],1):e._e(),s("br"),s("br"),s("br")],1):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:Object.keys(e.messages).length>0,expression:"Object.keys(messages).length > 0"}],staticClass:"message_box"},e._l(e.messages,(function(t,a){return s("div",{key:a},[e._v(e._s(t))])})),0),e._l(e.notifications,(function(t,a){return s("v-snackbar",{key:a,attrs:{value:"true"}},[e._v(" "+e._s(t)),s("v-btn",{attrs:{flat:"",color:"pink"},nativeOn:{click:function(t){return e.removeNotification(a)}}},[e._v("Close")])],1)}))],2)])},$n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",[s("b",[e._v("Procedure of raster file-import:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[e._v("user uploads a raster-file")]),s("li",[e._v("remote sensing database inspects raster-file")]),s("li",[e._v("remote sensing database prefills import-form")]),s("li",[e._v("user completes import-form")]),s("li",[e._v("remote sensing database imports raster-file based on import-form")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("filename:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("timestamp:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",{staticStyle:{"min-width":"150px"}},[s("b",[e._v("strategy:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("existing raster layer id:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[e._v("(optional) "),s("b",[e._v("timestamp")]),e._v(" of inserted data within this layer ")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("filename:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("ID")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("title")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("description")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("informal acquisition date")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("corresponding contact")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("tags")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("access roles")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("modify roles")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("filename:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("ID")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("title")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("description")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("acquisition date")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("tags")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("access roles")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("modify roles")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("pixel size:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("offset:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("tr",[s("td"),s("td",[s("b",[e._v("x")])]),s("td"),s("td",[s("b",[e._v("y")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("layer pixel size ")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("file pixel size ")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("code:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("proj4:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("layer code:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("file code:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("layer proj4:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("file proj4:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("import")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("file no data value: ")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("band name:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("wavelength (nm):")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("fwhm (nm):")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("visualisation:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("tr",[s("td",{staticStyle:{"background-color":"rgb(196, 205, 213)"},attrs:{colspan:"3",align:"center"}},[s("b",[e._v("file")])]),s("td",{staticStyle:{"background-color":"rgb(189, 206, 184)"},attrs:{colspan:"2",align:"center"}},[s("b",[e._v("layer")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("tr",[s("td",{staticStyle:{"background-color":"#dee7ef"},attrs:{align:"center"}},[s("b",[e._v("band")])]),s("td",{staticStyle:{"background-color":"#dee7ef"},attrs:{align:"center"}},[s("b",[e._v("type")])]),s("td",{staticStyle:{"background-color":"#dee7ef"},attrs:{align:"center"}},[s("b",[e._v("NA-value")])]),s("td",{staticStyle:{"background-color":"rgb(211, 230, 205)"},attrs:{align:"center"}},[s("b",[e._v("band")])]),s("td",{staticStyle:{"background-color":"rgb(211, 230, 205)"},attrs:{align:"center"}},[s("b",[e._v("timestamp")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("import")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("layer band data type")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("band name:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("wavelength (nm):")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("fwhm (nm):")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("visualisation:")])])}],An=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",title:"generate sequence of timestamps"},slot:"activator"},[s("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("generate timestamps ")],1),s("v-card",[s("v-card-title",[s("div",{staticClass:"headline"},[e._v("generate sequence of timestamps ("+e._s(e.bandCount)+")")])]),s("span",{staticStyle:{color:"grey"}},[s("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v(" Click "),s("i",[e._v("apply")]),e._v("-button to commit generated timestamps. (You may need to scroll down.)")],1),s("br"),s("br"),s("multiselect",{attrs:{options:e.modes,"track-by":"id",label:"title",allowEmpty:!1,searchable:!1,"show-labels":!1,placeholder:"select mode"},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}}),s("br"),e._v(" first timestamp year (e.g. 2001) "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.first_year,expression:"first_year"}],staticStyle:{"background-color":"aliceblue"},attrs:{placeholder:"year"},domProps:{value:e.first_year},on:{input:function(t){t.target.composing||(e.first_year=t.target.value)}}}),"month"===e.mode.id?s("span",[e._v(" month (e.g. 12) "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.first_month,expression:"first_month"}],staticStyle:{"background-color":"aliceblue"},attrs:{placeholder:"month"},domProps:{value:e.first_month},on:{input:function(t){t.target.composing||(e.first_month=t.target.value)}}})]):e._e(),s("br"),s("br"),s("hr"),s("div",{staticStyle:{"background-color":"#e4ebf54d"}},[s("div",{staticStyle:{color:"red"}},[e._v(" "+e._s(e.inputError)+" ")]),void 0===e.inputError?s("table",[s("tr",[s("th",{attrs:{align:"center"}},[e._v("band")]),s("th",{attrs:{align:"center"}},[e._v("timestamp")])]),e._l(e.timestamps,(function(t,a){return s("tr",{key:t},[s("td",{attrs:{align:"center"}},[s("b",[e._v(e._s(a+1))])]),s("td",{attrs:{align:"center"}},[e._v(e._s(t))])])}))],2):e._e()]),s("hr"),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"grey--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),s("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat",disabled:e.timestamps.length!==e.bandCount},nativeOn:{click:function(t){return e.execute()}}},[e._v("Apply")])],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},Dn=[],zn={name:"admin-upload-generate-timestamps",props:["specification"],components:{Multiselect:C.a},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,bandCount:0,modes:[{id:"month",title:"sequence of months"},{id:"year",title:"sequence of years"}],mode:{id:"month",title:"sequence of months"},first_year:"2001",first_month:"12",inputError:void 0}},methods:{refresh:function(){this.bandCount=this.specification.bands.length},execute:function(){this.$emit("timestamp-sequence",this.timestamps),this.dialog=!1},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)}},computed:{timestamps:function(){var e=this;e.inputError="unknown error";var t=[],s=parseInt(this.first_year);if("year"===this.mode.id)if(s>=1e3&&s<=9999){s+=0;for(var a=0;a<this.bandCount;a++)t.push(s),s++;e.inputError=void 0}else e.inputError="not valid input";else if("month"===this.mode.id){var i=parseInt(this.first_month);if(s>=1e3&&s<=9999&&i>=1&&i<=12){s+=0,i+=0;for(var r=0;r<this.bandCount;r++){var o=i<=9?"0"+i:i,n=s+"-"+o;t.push(n),12==i?(s++,i=1):i++}e.inputError=void 0}else e.inputError="not valid input"}return t}},watch:{specification:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},Nn=zn,Ln=(s("5b47"),Object(p["a"])(Nn,An,Dn,!1,null,"39570e7c",null)),Bn=Ln.exports;function In(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Fn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?In(Object(s),!0).forEach((function(t){Vn(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):In(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Vn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Gn(e){return e.slice().sort((function(e,t){return e-t})).filter((function(e,t,s){return!t||e!=s[t-1]}))}a["default"].use(Ba.a);var Un={name:"admin-upload",props:[],components:{PulseLoader:jt["a"],Multiselect:C.a,"admin-upload-generate-timestamps":Bn},data:function(){return{messages:{},messagesIndex:0,notifications:{},notificationsIndex:0,options:{target:this.$store.getters.apiUrl("api/upload"),testChunks:!1,chunkSize:10485760,simultaneousUploads:1},uploadState:"init",inspectState:"init",inspectFilename:void 0,guessTimestamp:!0,importStrategies:[{id:"create",title:"create new layer"},{id:"existing_add",title:"insert into existing layer with new (added) bands"},{id:"existing_merge",title:"insert into existing layer and (preferably) into exisiting bands"}],importStrategy:{},importModes:[{id:"simple",title:"simple (file represents one point in time)"},{id:"timeseries",title:"timeseries (bands of file represent multiple points in time)"}],importMode:{},existingRasterdb:{},specification:void 0,proj4Compare:void 0,proj4CompareError:void 0,createdTags:[],createdAclRoles:[],importState:"init",importResult:void 0,importErrorStatus:void 0,importErrorStatusText:void 0,importErrorStatusMessage:void 0,presetBands:[],presetTimestamp:void 0,remote_task:void 0}},methods:{createTag:function(e){this.createdTags.push(e),this.specification.tags.push(e)},createAclRole:function(e){this.createdAclRoles.push(e),this.specification.acl.push(e)},createAclModRole:function(e){this.createdAclRoles.push(e),this.specification.acl_mod.push(e)},addnotification:function(e){var t=this.notificationsIndex++;return a["default"].set(this.notifications,t,e),t},removeNotification:function(e){a["default"].delete(this.notifications,e)},addMessage:function(e){var t=this.messagesIndex++;return a["default"].set(this.messages,t,e),t},removeMessage:function(e){a["default"].delete(this.messages,e)},cancel_upload:function(){this.uploadState="init",this.inspectState="init",this.inspectFilename=void 0,this.specification=void 0,this.proj4Compare=void 0,this.proj4CompareError=void 0,this.importState="init",this.importResult=void 0},inspect:function(){var e=this;this.importState="init",this.remote_task=void 0,e.inspectState="inspecting",e.specification=void 0;var t={filename:this.inspectFilename,strategy:this.importStrategy.id};"existing_add"!=this.importStrategy.id&&"existing_merge"!=this.importStrategy.id||(t.rasterdb=this.existingRasterdb.name),this.guessTimestamp&&(t.guess_timestamp=!0),I.a.get(this.urlPrefix+"../../api/inspect",{params:t}).then((function(t){e.inspectState="done",e.specification=t.data.specification,e.presetBands=JSON.parse(JSON.stringify(e.specification.bands)),e.setPresetBands(),e.presetTimestamp=e.specification.timestamp})).catch((function(t){e.inspectState="error",e.addnotification("ERROR "+t)}))},start_import:function(){var e=this;this.remote_task=void 0;var t=this.$store.getters.apiUrl("api/import");e.importState="importing",I.a.post(t,{specification:e.specification}).then((function(t){console.log(t.data.remote_task),e.remote_task=t.data.remote_task,e.query_remote_task()})).catch((function(t){e.importState="error",e.importErrorStatus="unknown",e.importErrorStatusText="unknown",e.importErrorStatusMessage="unknown",void 0!==t.response?(void 0!==t.response.status&&(e.importErrorStatus=t.response.status),void 0!==t.response.statusText&&(e.importErrorStatusText=t.response.statusText),void 0!==t.response.data&&(e.importErrorStatusMessage=t.response.data)):e.importErrorStatusMessage=e.errorToText(t),console.log("1------"),console.log(JSON.stringify(t)),console.log("2------"),console.log(e.errorToText(t)),console.log("3------"),e.setError=!0,e.setErrorMessage="Error setting property: "+e.errorToText(t),console.log(t),e.refreshAfterImport()}))},refreshAfterImport:function(){this.$store.dispatch("layer_tags/refresh"),this.$store.dispatch("acl_roles/refresh"),this.$store.dispatch("rasterdbs/refresh")},isNaturalNumber:function(e){e=e.toString();var t=Math.abs(e),s=parseInt(e,10);return!isNaN(t)&&s===t&&t.toString()===e},setBand:function(e){var t=this.existing_bands_map[this.specification.bands[e].rasterdb_band_index];this.specification.bands[e].rastedb_band_data_type=t.type,this.specification.bands[e].band_name=t.name,this.specification.bands[e].wavelength=t.wavelength,this.specification.bands[e].fwhm=t.fwhm,this.specification.bands[e].visualisation=t.visualisation},clearBand:function(e){this.specification.bands[e].rastedb_band_data_type=this.presetBands[e].rastedb_band_data_type,this.specification.bands[e].band_name=this.presetBands[e].band_name,this.specification.bands[e].wavelength=this.presetBands[e].wavelength,this.specification.bands[e].fwhm=this.presetBands[e].fwhm,this.specification.bands[e].visualisation=this.presetBands[e].visualisation},setPresetBands:function(){console.log(this.specification),console.log(this.specification.bands);var e=this.specification.bands.length;if(!(e<1))if("simple"===this.importMode.id)for(var t=0;t<e;t++)this.specification.bands[t].rasterdb_band_index=this.presetBands[t].rasterdb_band_index,this.specification.bands[t].rastedb_band_data_type=this.presetBands[t].rastedb_band_data_type,this.specification.bands[t].band_name=this.presetBands[t].band_name,this.specification.bands[t].wavelength=this.presetBands[t].wavelength,this.specification.bands[t].fwhm=this.presetBands[t].fwhm,this.specification.bands[t].visualisation=this.presetBands[t].visualisation,this.specification.bands[t].no_data_value=this.presetBands[t].no_data_value,this.specification.bands[t].visualisation=this.presetBands[t].visualisation;else if("timeseries"===this.importMode.id)for(t=0;t<e;t++)this.specification.bands[t].rasterdb_band_index=this.presetBands[0].rasterdb_band_index,this.specification.bands[t].rastedb_band_data_type=this.presetBands[0].rastedb_band_data_type,this.specification.bands[t].band_name=this.presetBands[0].band_name,this.specification.bands[t].wavelength=this.presetBands[0].wavelength,this.specification.bands[t].fwhm=this.presetBands[0].fwhm,this.specification.bands[t].visualisation=this.presetBands[0].visualisation,this.specification.bands[t].no_data_value=this.presetBands[0].no_data_value,this.specification.bands[t].visualisation=this.presetBands[0].visualisation;else console.log("error")},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data},query_remote_task:function(){var e=this;I.a.get(this.urlPrefix+"../../api/remote_tasks/"+this.remote_task.id).then((function(t){console.log(t.data.remote_task),e.remote_task=t.data.remote_task,e.remote_task.active?window.setTimeout((function(){e.query_remote_task()}),1e3):("DONE"===e.remote_task.status?e.importState="done":e.importState="error",console.log(t),e.refreshAfterImport())})).catch((function(t){e.importState="error",e.importErrorStatus="unknown",e.importErrorStatusText="unknown",e.importErrorStatusMessage="unknown",void 0!==t.response?(void 0!==t.response.status&&(e.importErrorStatus=t.response.status),void 0!==t.response.statusText&&(e.importErrorStatusText=t.response.statusText),void 0!==t.response.data&&(e.importErrorStatusMessage=t.response.data)):e.importErrorStatusMessage=e.errorToText(t),console.log("1------"),console.log(JSON.stringify(t)),console.log("2------"),console.log(e.errorToText(t)),console.log("3------"),e.setError=!0,e.setErrorMessage="Error setting property: "+e.errorToText(t),console.log(t),e.refreshAfterImport()}))},updateAddBands:function(){var e=this;if("simple"!==this.importMode.id){void 0===this.specification.addBands&&(this.specification.addBands=[]),this.specification.addBands=this.specification.addBands.filter((function(t){return e.selectedRasterDbBandIndicesUnique.includes(t.rasterdb_band_index)}));var t=e.selectedRasterDbBandIndicesUnique.filter((function(t){for(var s=0;s<e.specification.addBands.length;s++)if(t===e.specification.addBands[s].rasterdb_band_index)return!1;return!0}));console.log("toAddIndices"),console.log(t);var s=t.map((function(t){for(var s={},a=0;a<e.specification.bands.length;a++)if(e.specification.bands[a].rasterdb_band_index===t){console.log("found!"),s=e.specification.bands[a];break}return{rasterdb_band_index:t,band_name:s.band_name,fwhm:s.fwhm,rastedb_band_data_type:s.rastedb_band_data_type,visualisation:s.visualisation,wavelength:s.wavelength}}));this.specification.addBands=this.specification.addBands.concat(s)}else void 0!==this.specification&&(this.specification.addBands=void 0)},fillTimestamps:function(e){for(var t=0;t<e.length;t++)console.log("set"+e[t]),this.specification.bands[t].timestamp=e[t]}},computed:Fn(Fn({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}})),{},{validEPSG:function(){return void 0!==this.specification&&void 0!==this.specification.geo_code&&this.specification.geo_code.startsWith("EPSG:")},epsg:function(){return this.validEPSG?this.specification.geo_code.substr(5):void 0},proj4CompareOK:function(){return this.specification.proj4===this.proj4Compare},layer_tags:function(){return void 0===this.$store.state.layer_tags.data?this.createdTags:this.$store.state.layer_tags.data.concat(this.createdTags)},acl_roles:function(){return void 0===this.$store.state.acl_roles.data?this.createdAclRoles:this.$store.state.acl_roles.data.concat(this.createdAclRoles)},rasterdbs:function(){return void 0===this.$store.state.rasterdbs.data?[]:this.$store.state.rasterdbs.data},existingID:function(){return void 0!==this.specification&&void 0!==this.specification.id&&void 0!==this.rasterdbs&&this.rasterdbs.some((function(e){return e.name===this.specification.id}),this)},create:function(){return"create"===this.importStrategy.id},existing_bands_map:function(){return void 0===this.specification.existing_bands?{}:this.specification.existing_bands.reduce((function(e,t){return e[t.index]=t,e}),{})},selectedRasterDbBandIndices:function(){return void 0===this.specification?[]:this.specification.bands.map((function(e){return e.rasterdb_band_index}))},selectedRasterDbBandIndicesUnique:function(){return Gn(this.selectedRasterDbBandIndices)},identity:function(){return this.$store.state.identity.data}}),watch:{epsg:function(){var e=this;this.proj4Compare=void 0,this.proj4CompareError=void 0,void 0!==this.epsg&&I.a.get("https://epsg.io/"+this.epsg+".proj4").then((function(t){e.proj4Compare=t.data})).catch((function(t){console.log(t),e.proj4CompareError=JSON.stringify(t)}))},importStrategy:function(){this.inspectState="init",this.specification=void 0},existingRasterdb:function(){this.inspectState="init",this.specification=void 0},selectedRasterDbBandIndices:function(e,t){console.log(t),console.log(e);for(var s=e.length,a=0;a<s;a++)if(this.isNaturalNumber(e[a])){if(e[a]!==t[a]){var i=this.existing_bands_map[e[a]];if(void 0!==i)this.setBand(a);else{var r=this.existing_bands_map[t[a]];void 0!==r&&this.clearBand(a)}}}else void 0!==this.existing_bands_map[t[a]]&&this.clearBand(a)},remote_task:function(){},importMode:function(){var e=this;if(void 0!==this.specification)if(this.setPresetBands(),"simple"===this.importMode.id){e.specification.timestamp=e.presetTimestamp;for(var t=0;t<this.specification.bands.length;t++)this.specification.bands[t].timestamp=void 0}else"timeseries"===this.importMode.id&&(e.specification.timestamp=void 0);this.updateAddBands()},selectedRasterDbBandIndicesUnique:function(){this.updateAddBands()}},mounted:function(){this.$store.dispatch("layer_tags/init"),this.$store.dispatch("acl_roles/init"),this.$store.dispatch("rasterdbs/init"),this.$store.dispatch("identity/init"),this.importStrategy=this.importStrategies[0],this.importMode=this.importModes[0];var e=this;window.injectFile=function(t){e.inspectFilename=t}}},qn=Un,Wn=(s("1c5a"),Object(p["a"])(qn,Rn,$n,!1,null,"3e21aee9",null)),Hn=Wn.exports,Jn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"innergrid-container"},[s("div",{staticClass:"innergrid-item-main"},[s("v-layout",[s("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[s("v-card",[s("h3",{staticClass:"headline mb-0"},[e._v("Accounts "),s("v-btn",{attrs:{flat:"",icon:"",color:"green",title:"reload accounts from source and refresh view"},on:{click:function(t){return e.refresh()}}},[s("v-icon",[e._v("refresh")])],1)],1),s("v-divider"),void 0!=e.accounts?s("v-data-table",{attrs:{headers:e.headers,items:e.accounts,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[s("td",{class:{admin:e.accountIsAdmin(t.item),empty:0==t.item.roles.length}},[e.accountIsAdmin(t.item)?s("v-icon",[e._v("admin_panel_settings")]):s("v-icon",[e._v("account_box")]),s("span",{staticClass:"user-list"},[e._v(e._s(t.item.name))])],1),s("td",[e._l(t.item.roles,(function(t){return s("span",{key:t},[s("span",{staticClass:"role-list"},[e._v(e._s(t))])])})),0===t.item.roles.length?s("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)]}}],null,!1,2824354931)}):e._e(),s("v-divider"),s("v-divider"),s("br"),s("h3",{staticClass:"headline mb-0"},[e._v("Roles")]),s("v-divider"),void 0!=e.acl_roles?s("v-data-table",{attrs:{headers:e.roles_headers,items:e.roles,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[s("td",[s("v-icon",[e._v("vpn_key")]),s("span",{staticClass:"role-list"},[e._v(e._s(t.item.role))])],1),s("td",e._l(t.item.users,(function(t){return s("span",{key:t},[s("span",{staticClass:"user-list"},[e._v(e._s(t))])])})),0)]}}],null,!1,2449912759)}):e._e(),s("v-divider")],1)],1)],1),s("v-snackbar",{attrs:{top:!0},model:{value:e.accountsError,callback:function(t){e.accountsError=t},expression:"accountsError"}},[e._v(" "+e._s(e.accountsErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.accountsError=!1}}},[e._v("Close")])],1)],1)])},Qn=[];function Yn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Kn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Yn(Object(s),!0).forEach((function(t){Xn(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Yn(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Xn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Zn={name:"admin-overview",data:function(){return{accounts:void 0,accountsError:!1,accountsErrorMessage:void 0,headers:[{text:"user",value:"name"},{text:"roles",value:"roles"}],roles_headers:[{text:"role",value:"role"},{text:"users",value:"users"}]}},methods:{refresh:function(){var e=this;I.a.get(this.urlPrefix+"../../api/accounts").then((function(t){e.accounts=t.data.accounts})).catch((function(t){console.log(t),e.accountsError=!0,e.accountsErrorMessage="ERROR getting accounts: "+t}))},accountIsAdmin:function(e){return e.roles.indexOf("admin")>=0}},computed:Kn(Kn({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}})),{},{acl_roles:function(){return this.$store.state.acl_roles.data},roles:function(){var e=this;if(void 0!==this.acl_roles){var t=this.acl_roles.map((function(t){var s=[];return void 0!==e.accounts&&(s=e.accounts.filter((function(e){return e.roles.some((function(e){return e===t}))})).map((function(e){return e.name}))),{role:t,users:s}}));return t}}}),mounted:function(){this.$store.dispatch("acl_roles/init"),this.refresh()}},ec=Zn,tc=(s("3a4b"),s("904f"),Object(p["a"])(ec,Jn,Qn,!1,null,"42802d92",null)),sc=tc.exports,ac=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"tools-grid-container"},[s("v-tabs",{staticClass:"sub-tab-bar",attrs:{color:"grey lighten-1","slider-color":"yellow","show-arrows":""}},[s("v-tab",{attrs:{to:"/tools/info"}},[s("v-icon",[e._v("view_compact")]),e._v(" Info")],1),s("v-tab",{attrs:{to:"/tools/status"}},[s("v-icon",[e._v("pending_actions")]),e._v(" Task Status")],1),s("v-tab",{attrs:{to:"/tools/task"}},[s("v-icon",[e._v("card_travel")]),e._v(" Task Creation")],1),e.isAdmin?s("v-tab",{attrs:{to:"/tools/accounts"}},[s("v-icon",[e._v("contact_mail")]),e._v(" Accounts")],1):e._e()],1),s("router-view",{staticClass:"tools-grid-item-content"})],1)},ic=[];function rc(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function oc(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?rc(Object(s),!0).forEach((function(t){nc(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):rc(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function nc(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var cc={name:"admin-tools",components:{},data:function(){return{}},methods:{},computed:oc({},Object(c["b"])({isAdmin:"identity/isAdmin"})),mounted:function(){}},lc=cc,dc=(s("9801"),Object(p["a"])(lc,ac,ic,!1,null,"523f2141",null)),uc=dc.exports,vc=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"innergrid-container"},[s("div",{staticClass:"innergrid-item-main"},[s("v-layout",[s("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[s("v-card",[s("h3",{staticClass:"headline mb-0"},[e._v("Remote Sensing Database Administration "),s("v-btn",{attrs:{flat:"",icon:"",color:"green",title:"refresh layers"},on:{click:function(t){return e.refresh()}}},[s("v-icon",[e._v("refresh")])],1)],1),s("v-divider"),void 0!=e.identity?s("v-card-title",[s("div",[s("div",[s("b",[e._v("identity")]),e._v(": "+e._s(e.identity.user))]),s("div",[s("b",[e._v("roles")]),e._v(": "+e._s(e.identity.roles.join(", ")))]),s("div",[s("b",[e._v("connection")]),e._v(": "+e._s(e.identity.secure?"secure":"plain"))]),s("div",[s("b",[e._v("ip")]),e._v(": "+e._s(e.identity.ip))]),s("div",[s("b",[e._v("authentication")]),e._v(": "+e._s(e.identity.auth_method))]),void 0===e.identity||"DIGEST"!==e.identity.auth_method&&"BASIC"!==e.identity.auth_method?e._e():s("div",[s("br"),s("a",{attrs:{href:e.logout_url}},[s("v-icon",[e._v("call_end")]),e._v(" logout")],1),"DIGEST"===e.identity.auth_method?s("span",{staticStyle:{"font-size":"0.8em"}},[e._v("(HTTP "+e._s(e.identity.auth_method)+" authentication)")]):e._e(),"BASIC"===e.identity.auth_method?s("span",{staticStyle:{"font-size":"0.8em"}},[e._v("(HTTPS "+e._s(e.identity.auth_method)+" authentication)")]):e._e()]),void 0!==e.identity&&"jws"===e.identity.auth_method?s("div",[s("br"),s("a",{attrs:{href:e.logout_jws_url}},[s("v-icon",[e._v("call_end")]),e._v(" logout")],1),e._v(" "),s("span",{staticStyle:{"font-size":"0.8em"}},[e._v("(JWS authentication)")])]):e._e()])]):e._e()],1)],1)],1),"init"===e.identityMode||"load"===e.identityMode?s("div",[s("ring-loader",{staticStyle:{display:"inline-block"},attrs:{color:"#000000",size:"20px"}}),e._v(" loading... ")],1):e._e(),"error"===e.identityMode?s("div",[s("v-icon",[e._v("error")]),e._v(" "+e._s(e.identityMessage)+" ")],1):e._e()],1)])},mc=[],pc={name:"admin-tools-info",components:{RingLoader:T["a"]},data:function(){return{}},methods:{refresh:function(){this.$store.dispatch("identity/refresh")}},computed:{identity:function(){return this.$store.state.identity.data},identityMode:function(){return this.$store.state.identity.mode},identityMessage:function(){return this.$store.state.identity.message},logout_url:function(){var e=window.location.protocol+"//";e+="logout:logout@",e+=window.location.host;var t=window.location.pathname;return t.endsWith("/")&&(t=t.substring(0,t.length-1)),e+=t,e},http_url:function(){var e=this.identity.http_port,t=window.location.host,s=t.indexOf(":");return s>=0&&(t=t.slice(0,s)),t=t+":"+e,"http://"+t+window.location.pathname},https_url:function(){var e=this.identity.https_port,t=window.location.host,s=t.indexOf(":");return s>=0&&(t=t.slice(0,s)),t=t+":"+e,"https://"+t+window.location.pathname},jws_url:function(){var e=this.identity.jws_protocol,t=this.identity.jws_port,s=window.location.host,a=s.indexOf(":");return a>=0&&(s=s.slice(0,a)),s=s+":"+t,e+"//"+s+window.location.pathname},logout_jws_url:function(){var e=window.location.protocol,t=window.location.host,s=window.location.pathname,a="?jws=logout";return e+"//"+t+s+a}},mounted:function(){this.refresh()}},_c=pc,fc=(s("fcb8"),Object(p["a"])(_c,vc,mc,!1,null,"90ec81e0",null)),hc=fc.exports,bc=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"innergrid-container"},[s("div",{staticClass:"innergrid-item-main"},[s("v-btn",{staticStyle:{display:"inline-block"},attrs:{disabled:e.autoRefresh,flat:"",icon:"",color:"green",title:"refresh status"},on:{click:function(t){return e.refresh()}}},[s("v-icon",[e._v("refresh")])],1),s("v-switch",{staticStyle:{display:"inline-block"},attrs:{label:"auto refresh"},model:{value:e.autoRefresh,callback:function(t){e.autoRefresh=t},expression:"autoRefresh"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:void 0==e.data,expression:"data == undefined"}]},[s("b",[e._v("--- [task info not loaded] ---")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:void 0!=e.data&&0===e.data.length,expression:"data != undefined && data.length === 0"}]},[s("b",[e._v("--- [no tasks submitted] ---")])]),void 0!=e.data&&e.data.length>0?s("table",{staticClass:"table-status"},[e._m(0),s("tbody",e._l(e.data,(function(t){return s("tr",{key:t.id},[s("td",[e._v(e._s(t.id))]),s("td",[e._v(e._s(t.name))]),s("td",["READY"===t.status?s("v-icon",{attrs:{color:"yellow"}},[e._v("directions_walk")]):e._e(),"RUNNING"===t.status?s("v-icon",{attrs:{color:"black"}},[e._v("directions_run")]):e._e(),"DONE"===t.status?s("v-icon",{attrs:{color:"green"}},[e._v("done")]):e._e(),"ERROR"===t.status?s("v-icon",{attrs:{color:"red"}},[e._v("error")]):e._e(),e._v(" "+e._s(t.status)+" ")],1),s("td",[e._v(e._s(t.message))]),s("td",[e._v(e._s((t.runtime/1e3).toFixed(3))+"s")]),"READY"!==t.status&&"RUNNING"!==t.status||t.canceled||!t.cancelable?e._e():s("td",[s("v-btn",{attrs:{icon:""},on:{click:function(s){return e.cancel(t.id)}}},[s("v-icon",[e._v("cancel")])],1)],1),t.canceled||t.cancelable?e._e():s("td",[e._v("---")]),t.canceled?s("td",[e._v("cancel requested")]):e._e()])})),0)]):e._e(),s("transition",{attrs:{name:"fade"}},["init"===e.mode||"load"===e.mode?s("div",[s("ring-loader",{staticStyle:{display:"inline-block"},attrs:{color:"#000000",size:"20px"}}),e._v(" loading... ")],1):e._e()]),"error"===e.mode?s("div",[s("v-icon",[e._v("error")]),e._v(" "+e._s(e.message)+" ")],1):e._e()],1)])},gc=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("ID")]),s("th",[e._v("Name")]),s("th",[e._v("Status")]),s("th",[e._v("Message")]),s("th",[e._v("Runtime")]),s("th",[e._v("Cancel")])])])}];function yc(e,t,s,a,i,r,o){try{var n=e[r](o),c=n.value}catch(l){return void s(l)}n.done?t(c):Promise.resolve(c).then(a,i)}function xc(e){return function(){var t=this,s=arguments;return new Promise((function(a,i){var r=e.apply(t,s);function o(e){yc(r,a,i,o,n,"next",e)}function n(e){yc(r,a,i,o,n,"throw",e)}o(void 0)}))}}var wc={name:"admin-tools-status",components:{RingLoader:T["a"]},data:function(){return{data:void 0,mode:"init",message:"",messageActive:!1,autoRefresh:!1,autoRefreshTimer:void 0}},methods:{refresh:function(){var e=this;this.mode="load";var t=this.$store.getters.apiUrl("api/remote_tasks");I.a.get(t).then((function(t){e.data=t.data.remote_tasks,e.mode="ready"})).catch((function(t){e.mode="error",e.message=e.interpretError(t),e.messageActive=!0}))},interpretError:function(e){return e.response?e.response.data?e.response.data:e.response:e.request?"network error":e.message?e.message:e},cancel:function(e){var t=this;return xc(Je.a.mark((function s(){var a;return Je.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,console.log(e),a=t.$store.getters.apiUrl("api/remote_tasks/"+e+"/cancel"),s.next=5,I.a.post(a);case 5:t.refresh(),s.next=13;break;case 8:s.prev=8,s.t0=s["catch"](0),t.mode="error",t.message=t.interpretError(s.t0),t.messageActive=!0;case 13:return s.prev=13,s.finish(13);case 15:case"end":return s.stop()}}),s,null,[[0,8,13,15]])})))()},updateAutoRefresh:function(){var e=this;void 0!==this.autoRefreshTimer&&(window.clearInterval(this.autoRefreshTimer),this.autoRefreshTimer=void 0),this.autoRefresh&&(this.autoRefreshTimer=window.setInterval((function(){e.refresh()}),1e3))}},computed:{},watch:{autoRefresh:function(){this.updateAutoRefresh()}},mounted:function(){this.refresh(),this.updateAutoRefresh()}},kc=wc,Ec=(s("6264"),Object(p["a"])(kc,bc,gc,!1,null,"57c9df20",null)),Sc=Ec.exports,Oc=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"innergrid-container"},[s("div",{staticClass:"innergrid-item-main"},[e._m(0),void 0!==e.data?s("multiselect",{staticStyle:{display:"inline-block","max-width":"200px"},attrs:{options:e.data,"track-by":"category",allowEmpty:!1,searchable:!1,"show-labels":!1,placeholder:"select category"},scopedSlots:e._u([{key:"singleLabel",fn:function(t){return[e._v(e._s(e.categoryToTitle(t.option.category)))]}},{key:"option",fn:function(t){return[e._v(e._s(e.categoryToTitle(t.option.category)))]}}],null,!1,2563334390),model:{value:e.selectedCategory,callback:function(t){e.selectedCategory=t},expression:"selectedCategory"}}):e._e(),e._m(1),void 0!==e.selectedCategory?s("multiselect",{staticStyle:{display:"inline-block","max-width":"300px"},attrs:{options:e.selectedCategory.remote_task_entries,"track-by":"name",allowEmpty:!1,searchable:!1,"show-labels":!1,placeholder:"select task"},scopedSlots:e._u([{key:"singleLabel",fn:function(t){return[e._v(e._s(t.option.name))]}},{key:"option",fn:function(t){return[e._v(e._s(t.option.name))]}}],null,!1,1766883606),model:{value:e.selectedRemoteTaskEntry,callback:function(t){e.selectedRemoteTaskEntry=t},expression:"selectedRemoteTaskEntry"}}):e._e(),s("v-btn",{attrs:{flat:"",icon:"",color:"green",title:"refresh layers"},on:{click:function(t){return e.refreshLayers()}}},[s("v-icon",[e._v("refresh")])],1),void 0!==e.selectedRemoteTaskEntry?s("div",[void 0!==e.selectedRemoteTaskEntry.description?s("div",[s("br"),s("b",[e._v("Description: ")]),e._v(e._s(e.selectedRemoteTaskEntry.description)+" ")]):e._e(),s("div",[s("br"),s("div",[s("hr"),s("b",[e._v("Task Parameters")]),s("table",[e._m(2),e._l(e.selectedRemoteTaskEntry.params,(function(t){return s("tr",{key:t.name},[s("td",{class:[t.required?"param-required":"param-optional",!t.required||void 0!==t.value&&""!==t.value?"":"param-required-missing"]},[e._v(e._s(t.name)+e._s(t.required?"*":""))]),"rasterdb"===t.type?s("td",[s("multiselect",{staticStyle:{"min-width":"600px"},attrs:{options:e.rasterdbs,searchable:!0,"show-labels":!1,placeholder:"pick a rasterdb",allowEmpty:!1},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var s=t.option;return[e._v(" "+e._s(s)+" ")]}},{key:"option",fn:function(t){var s=t.option;return[e._v(" "+e._s(s)+" ")]}}],null,!0),model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"param.value"}})],1):"pointdb"===t.type?s("td",[s("multiselect",{staticStyle:{"min-width":"600px"},attrs:{options:e.pointdbs,searchable:!0,"show-labels":!1,placeholder:"pick a pointdb",allowEmpty:!1},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var s=t.option;return[e._v(" "+e._s(s)+" ")]}},{key:"option",fn:function(t){var s=t.option;return[e._v(" "+e._s(s)+" ")]}}],null,!0),model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"param.value"}})],1):"pointcloud"===t.type?s("td",[s("multiselect",{staticStyle:{"min-width":"600px"},attrs:{options:e.pointclouds,searchable:!0,"show-labels":!1,placeholder:"pick a pointcloud",allowEmpty:!1},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var s=t.option;return[e._v(" "+e._s(s)+" ")]}},{key:"option",fn:function(t){var s=t.option;return[e._v(" "+e._s(s)+" ")]}}],null,!0),model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"param.value"}})],1):"vectordb"===t.type?s("td",[s("multiselect",{staticStyle:{"min-width":"600px"},attrs:{options:e.vectordbs,searchable:!0,"show-labels":!1,placeholder:"pick a vectordb",allowEmpty:!1},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var s=t.option;return[e._v(" "+e._s(s)+" ")]}},{key:"option",fn:function(t){var s=t.option;return[e._v(" "+e._s(s)+" ")]}}],null,!0),model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"param.value"}})],1):"string"===t.type||"layer_id"===t.type?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"param.value"}],class:[!t.required||void 0!==t.value&&""!==t.value?"":"param-required-missing"],attrs:{placeholder:"(empty)"},domProps:{value:t.value},on:{input:function(s){s.target.composing||e.$set(t,"value",s.target.value)}}})]):"string_array"===t.type?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"param.value"}],class:[e.isParamRequiredOrNotEmpty(t)&&!e.isStringArray(t.value)?"param-required-missing":""],attrs:{placeholder:"(empty)"},domProps:{value:t.value},on:{input:function(s){s.target.composing||e.$set(t,"value",s.target.value)}}})]):"number"===t.type?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"param.value"}],class:[e.isParamRequiredOrNotEmpty(t)&&!e.isNumber(t.value)?"param-required-missing":""],attrs:{placeholder:"(empty)"},domProps:{value:t.value},on:{input:function(s){s.target.composing||e.$set(t,"value",s.target.value)}}})]):"number_array"===t.type?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"param.value"}],class:[e.isParamRequiredOrNotEmpty(t)&&!e.isNumberArray(t.value)?"param-required-missing":""],attrs:{placeholder:"(empty)"},domProps:{value:t.value},on:{input:function(s){s.target.composing||e.$set(t,"value",s.target.value)}}})]):"number_rect"===t.type?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"param.value"}],class:[e.isParamRequiredOrNotEmpty(t)&&!e.isNumberRect(t.value)?"param-required-missing":""],attrs:{placeholder:"(empty)"},domProps:{value:t.value},on:{input:function(s){s.target.composing||e.$set(t,"value",s.target.value)}}})]):"integer"===t.type?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"param.value"}],class:[e.isParamRequiredOrNotEmpty(t)&&!e.isInteger(t.value)?"param-required-missing":""],attrs:{placeholder:"(empty)"},domProps:{value:t.value},on:{input:function(s){s.target.composing||e.$set(t,"value",s.target.value)}}})]):"integer_array"===t.type?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"param.value"}],class:[e.isParamRequiredOrNotEmpty(t)&&!e.isIntegerArray(t.value)?"param-required-missing":""],attrs:{placeholder:"(empty)"},domProps:{value:t.value},on:{input:function(s){s.target.composing||e.$set(t,"value",s.target.value)}}})]):"boolean"===t.type?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"param.value"}],class:[e.isParamRequiredOrNotEmpty(t)&&!e.isBoolean(t.value)?"param-required-missing":""],attrs:{placeholder:"(empty)"},domProps:{value:t.value},on:{input:function(s){s.target.composing||e.$set(t,"value",s.target.value)}}})]):s("td",[e._v("["+e._s(t.type)+"] unknown parameter type")]),s("td",{staticClass:"param-desc"},[e._v(e._s(t.desc))]),s("td",{staticClass:"param-format"},[e._v(e._s(t.format))]),void 0!==t.example&&""!==t.example?s("td",{staticClass:"param-example"},[e._v(e._s(t.example))]):e._e()])}))],2),e._m(3),s("hr")]),s("br"),s("b",[e._v("resulting task")]),s("div",{staticStyle:{"background-color":"white"}},[e._v(" "+e._s(e.taskJSON)+" ")])]),s("br"),s("div",[s("v-btn",{attrs:{disabled:!e.isValidTask},on:{click:e.submit_task}},[s("v-icon",[e._v("input")]),e._v(" submit")],1),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.isValidTask,expression:"!isValidTask"}],staticStyle:{color:"#ff3f01e6"}},[e._v("some missing required parameters")])],1)]):e._e(),"init"===e.mode||"load"===e.mode?s("div",[s("ring-loader",{staticStyle:{display:"inline-block"},attrs:{color:"#000000",size:"20px"}}),e._v(" loading... ")],1):e._e(),"error"===e.mode?s("div",[s("v-icon",[e._v("error")]),e._v(" "+e._s(e.message)+" ")],1):e._e()],1),s("admin-task-console",{attrs:{id:e.remote_task_id}}),s("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),s("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},Pc=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("b",[e._v("Category")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("b",[e._v("Task")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("tr",[s("th",[e._v("Parameter")]),s("th",[e._v("Value")]),s("th",[e._v("Description")]),s("th",[e._v("Format")]),s("th",[e._v("Example")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticStyle:{"font-size":"0.8em",color:"#6c6c6c"}},[s("br"),s("b",[e._v("*")]),e._v(" marked parameters are required. Red marked parameter values are not valid.")])}],Cc={name:"admin-tools-task",components:{RingLoader:T["a"],Multiselect:C.a,"admin-task-console":at},data:function(){return{data:void 0,mode:"init",message:"",messageActive:!1,selectedCategory:void 0,selectedRemoteTaskEntry:void 0,remote_task_id:void 0,setError:!1,setErrorMessage:void 0}},methods:{refresh:function(){var e=this;this.mode="load";var t=this.$store.getters.apiUrl("api/remote_task_entries");I.a.get(t).then((function(t){e.data=t.data.remote_task_categories,e.mode="ready"})).catch((function(t){e.mode="error",e.message=e.interpretError(t),e.messageActive=!0})),this.$store.dispatch("rasterdbs/init"),this.$store.dispatch("pointdbs/init"),this.$store.dispatch("pointclouds/init"),this.$store.dispatch("vectordbs/init")},interpretError:function(e){return e.response?e.response.data?e.response.data:e.response:e.request?"network error":e.message?e.message:e},categoryToTitle:function(e){switch(e){case"task_rasterdb":return"RasterDB";case"task_pointdb":return"PointDB";case"task_pointcloud":return"PointCloud";case"task_vectordb":return"VectorDB";case"task_voxeldb":return"VoxelDB";default:return e}},submit_task:function(){var e=this;e.remote_task_id=void 0;var t=this.$store.getters.apiUrl("api/remote_tasks");I.a.post(t,{remote_task:e.taskJSON}).then((function(t){console.log(t);var s=t.data.remote_task;e.remote_task_id=s.id})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t)}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data},isParamRequiredOrNotEmpty:function(e){return e.required||!this.isEmpty(e.value)},isEmpty:function(e){return void 0===e||""===e.trim()},isNumber:function(e){return void 0!==e&&""!==e&&!isNaN(e)},isInteger:function(e){return void 0!==e&&""!==e&&!isNaN(e)&&Number.isInteger(+e)},isBoolean:function(e){return"true"===e||"false"==e},isStringArray:function(e){return this.parseStringArray(e).length>0},isNumberArray:function(e){return this.parseNumberArray(e).length>0},isNumberRect:function(e){return 4===this.parseNumberArray(e).length},parseNumber:function(e){return+e},parseInteger:function(e){return Number.parseInt(e)},isIntegerArray:function(e){return this.parseIntegerArray(e).length>0},parseBoolean:function(e){return"true"===e||"false"!=e&&void 0},parseStringArray:function(e){return void 0===e||""===e?[]:e.split(",").map((function(e){return e.trim()})).filter((function(e){return""!==e}))},parseNumberArray:function(e){var t=this,s=this.parseStringArray(e);return s.every((function(e){return t.isNumber(e)}))?s.map((function(e){return t.parseNumber(e)})):[]},parseNumberRect:function(e){return this.parseNumberArray(e)},parseIntegerArray:function(e){var t=this,s=this.parseStringArray(e);return s.every((function(e){return t.isInteger(e)}))?s.map((function(e){return t.parseInteger(e)})):[]},refreshLayers:function(){this.$store.dispatch("rasterdbs/refresh"),this.$store.dispatch("pointdbs/refresh"),this.$store.dispatch("pointclouds/refresh"),this.$store.dispatch("vectordbs/refresh"),this.$store.dispatch("poi_groups/refresh"),this.$store.dispatch("roi_groups/refresh"),this.$store.dispatch("layer_tags/refresh")}},computed:{taskJSON:function(){var e=this;if(void 0!==this.selectedCategory&&void 0!==this.selectedRemoteTaskEntry){var t={};return t[this.selectedCategory.category]=this.selectedRemoteTaskEntry.name,this.selectedRemoteTaskEntry.params.forEach((function(s){if(!e.isEmpty(s.value))switch(s.type){case"string_array":e.isStringArray(s.value)&&(t[s.name]=e.parseStringArray(s.value));break;case"number":e.isNumber(s.value)&&(t[s.name]=e.parseNumber(s.value));break;case"number_array":e.isNumberArray(s.value)&&(t[s.name]=e.parseNumberArray(s.value));break;case"number_rect":e.isNumberRect(s.value)&&(t[s.name]=e.parseNumberRect(s.value));break;case"integer":e.isInteger(s.value)&&(t[s.name]=e.parseInteger(s.value));break;case"integer_array":e.isIntegerArray(s.value)&&(t[s.name]=e.parseIntegerArray(s.value));break;case"boolean":e.isBoolean(s.value)&&(t[s.name]=e.parseBoolean(s.value));break;default:t[s.name]=s.value}})),t}},isValidTask:function(){var e=this;return this.selectedRemoteTaskEntry.params.filter((function(e){return e.required})).every((function(t){return void 0!==e.taskJSON[t.name]}))},rasterdbs:function(){if(void 0===this.$store.state.rasterdbs.data)return[];var e=this.$store.state.rasterdbs.data.map((function(e){return e.name}));return void 0===e?[]:e.slice().sort((function(e,t){return e.localeCompare(t)}))},pointdbs:function(){if(void 0===this.$store.state.pointdbs.data)return[];var e=this.$store.state.pointdbs.data.map((function(e){return e.name}));return void 0===e?[]:e.slice().sort((function(e,t){return e.localeCompare(t)}))},pointclouds:function(){if(void 0===this.$store.state.pointclouds.data)return[];var e=this.$store.state.pointclouds.data.map((function(e){return e.name}));return void 0===e?[]:e.slice().sort((function(e,t){return e.localeCompare(t)}))},vectordbs:function(){if(void 0===this.$store.state.vectordbs.data)return[];var e=this.$store.state.vectordbs.data.map((function(e){return e.name}));return void 0===e?[]:e.slice().sort((function(e,t){return e.localeCompare(t)}))}},watch:{data:function(){void 0===this.selectedCategory&&void 0!==this.data&&this.data.length>0&&(this.selectedCategory=this.data[0])},selectedCategory:function(){void 0!==this.selectedCategory&&this.selectedCategory.remote_task_entries.length>0?this.selectedRemoteTaskEntry=this.selectedCategory.remote_task_entries[0]:this.selectedRemoteTaskEntry=void 0}},mounted:function(){this.refresh()}},Tc=Cc,jc=(s("4f4e"),Object(p["a"])(Tc,Oc,Pc,!1,null,"cb192dfe",null)),Mc=jc.exports,Rc=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"innergrid-container"},[s("iframe",{staticClass:"innergrid-item-main",attrs:{src:e.urlPrefix+"../../files/",frameborder:"0"}})])},$c=[],Ac={name:"admin-files",data:function(){return{}},methods:{refresh:function(){}},computed:{urlPrefix:function(){return this.$store.state.identity.urlPrefix}},mounted:function(){this.refresh()}},Dc=Ac,zc=(s("9883"),Object(p["a"])(Dc,Rc,$c,!1,null,"62e595ea",null)),Nc=zc.exports,Lc=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"main"},[s("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"olmap-vectorviewer"}}),s("div",{staticClass:"innergrid-container",class:[e.filter_focus?"innergrid-item-nav-fill":"innergrid-item-nav-compact"]},[s("v-list",{staticClass:"innergrid-item-nav"},[s("v-list-tile",[void 0!==e.vectordbs?s("multiselect",{attrs:{options:e.vectordbs,"track-by":"name",allowEmpty:!1,searchable:!1,"show-labels":!1,placeholder:"select vectordb"},on:{open:function(t){e.filter_focus=!0},close:function(t){e.filter_focus=!1}},scopedSlots:e._u([{key:"singleLabel",fn:function(t){return[e._v(e._s(void 0===t.option.title?t.option.name:t.option.title))]}},{key:"option",fn:function(t){return[e._v(e._s(void 0===t.option.title?t.option.name:t.option.title))]}}],null,!1,133643734),model:{value:e.selectedVectordb,callback:function(t){e.selectedVectordb=t},expression:"selectedVectordb"}}):e._e()],1),void 0!==e.selectedVectordb&&null!==e.selectedVectordb?s("v-list-tile",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.showLabels,expression:"showLabels"}],attrs:{type:"checkbox",id:"labels"},domProps:{checked:Array.isArray(e.showLabels)?e._i(e.showLabels,null)>-1:e.showLabels},on:{change:function(t){var s=e.showLabels,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r=null,o=e._i(s,r);a.checked?o<0&&(e.showLabels=s.concat([r])):o>-1&&(e.showLabels=s.slice(0,o).concat(s.slice(o+1)))}else e.showLabels=i}}}),s("label",{attrs:{for:"labels"}},[e._v("Show Labels")])]):e._e(),void 0!==e.selectedVectordb&&null!==e.selectedVectordb?s("a",{attrs:{href:e.urlPrefix+"../../vectordbs/"+e.selectedVectordb.name+"/package.zip",download:e.selectedVectordb.name+".zip",title:"download as ZIP-file"}},[s("v-icon",{attrs:{color:"blue"}},[e._v("cloud_download")]),e._v("(download vector layer)")],1):e._e()],1)],1),s("v-dialog",{attrs:{value:e.featureDetailsShow,lazy:"",persistent:"","max-width":"500px"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[e._v("Attributes")]),s("v-card-text",e._l(e.selectedFeatures,(function(t){return s("table",{key:t.getId()},e._l(e.table.attributes,(function(a,i){return s("tr",{key:i},[s("td",[s("b",[e._v(e._s(a))])]),s("td",[e._v(e._s(e.table.data[t.getId()][i]))])])})),0)})),0),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"green darken-1",flat:"flat"},nativeOn:{click:function(t){e.featureDetailsShow=!1}}},[e._v("Close")])],1)],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:Object.keys(e.messages).length>0,expression:"Object.keys(messages).length > 0"}],staticClass:"message_box"},e._l(e.messages,(function(t,a){return s("div",{key:a},[s("ring-loader",{staticStyle:{display:"inline-block"},attrs:{color:"#000000",size:"25px"}}),e._v(" "+e._s(t)+" ")],1)})),0),e._l(e.notifications,(function(t,a){return s("v-snackbar",{key:a,attrs:{value:"true"}},[e._v(" "+e._s(t)),s("v-btn",{attrs:{flat:"",color:"pink"},nativeOn:{click:function(t){return e.removeNotification(a)}}},[e._v("Close")])],1)}))],2)])},Bc=[];function Ic(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Fc(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ic(Object(s),!0).forEach((function(t){Vc(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ic(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Vc(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Gc=function(){var e=(new Intl.Collator).compare;return function(t,s){return e(void 0===t.title?t.name:t.title,void 0===s.title?s.name:s.title)}}(),Uc={name:"admin-vectorviewer",props:["vectordb"],components:{RingLoader:T["a"],Multiselect:C.a},data:function(){return{messages:{},messagesIndex:0,notifications:{},notificationsIndex:0,olmap:void 0,vectorSource:void 0,vectorLayer:void 0,vectorLabelLayer:void 0,filter_focus:!1,geojson:void 0,table:{attibutes:[],data:[]},selectedVectordb:void 0,showLabels:!0,featureDetailsShow:!1,selectedFeatures:[]}},methods:{addnotification:function(e){var t=this.notificationsIndex++;return a["default"].set(this.notifications,t,e),t},removeNotification:function(e){a["default"].delete(this.notifications,e)},addMessage:function(e){var t=this.messagesIndex++;return a["default"].set(this.messages,t,e),t},removeMessage:function(e){a["default"].delete(this.messages,e)},loadGeojson:function(){var e=this,t=this.addMessage("loading vector data of layer ..."),s=this.$store.getters.apiUrl("vectordbs/"+this.selectedVectordb.name+"/geometry.json?epsg=3857");I.a.get(s).then((function(s){e.geojson=s.data,e.removeMessage(t),e.refreshVectorSource()})).catch((function(){e.addnotification("ERROR vector data of layer"),e.removeMessage(t)}))},loadTable:function(){var e=this,t=this.addMessage("loading table data of layer ..."),s=this.$store.getters.apiUrl("vectordbs/"+this.selectedVectordb.name+"/table.json");I.a.get(s).then((function(s){e.table=s.data,e.removeMessage(t)})).catch((function(){e.addnotification("ERROR table data of layer"),e.removeMessage(t)}))},refreshVectorSource:function(){var e=void 0===this.geojson?[]:(new gn["a"]).readFeatures(this.geojson);if(this.vectorSource=new Pr["a"]({features:e}),this.vectorLayer.setSource(this.vectorSource),this.vectorLabelLayer.setSource(this.vectorSource),e.length>0){var t=this.vectorSource.getExtent();this.olmap.getView().fit(t)}},refreshRoute:function(){void 0===this.selectedVectordb?this.$router.push({path:"/vectorviewer"}):this.$router.push({path:"/vectorviewer/"+this.selectedVectordb.name})},updateSelectedVectordb:function(){var e=this;if(void 0!==e.vectordbs&&void 0!==e.vectordb){var t=e.vectordbs.find((function(t){return t.name===e.vectordb}));void 0===t&&this.addnotification("vectordb not found: "+e.vectordb),e.selectedVectordb=t}}},computed:Fc(Fc({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}})),{},{vectordbs:function(){var e=this.$store.state.vectordbs.data;return void 0===e?void 0:e.slice().sort(Gc)},vectordbsError:{get:function(){return"error"===this.$store.state.vectordbs.mode&&this.$store.state.vectordbs.messageActive},set:function(e){0==e&&this.$store.commit("vectordbs/closeMessage")}},vectordbsErrorMessage:function(){return this.$store.state.vectordbs.message},urlPrefix:function(){return this.$store.state.identity.urlPrefix}}),watch:{vectordbs:function(){this.updateSelectedVectordb()},selectedVectordb:function(){void 0!==this.selectedVectordb?(this.loadGeojson(),this.loadTable()):(this.geojson=void 0,this.table={attibutes:[],data:[]},this.refreshVectorSource()),this.refreshRoute()},vectordb:function(){this.updateSelectedVectordb()},showLabels:function(){this.vectorLabelLayer.setVisible(this.showLabels)}},mounted:function(){var e=this;this.$store.dispatch("vectordbs/init"),document.getElementById("foot-start-1").innerHTML="WGS 84/Pseudo-Mercator",document.getElementById("foot-end-1").innerHTML="";var t=new zr["a"]({color:"rgba(255,255,255,0.0)"}),s=new Nr["a"]({color:"rgb(95, 112, 245)",width:2}),a=new Nr["a"]({color:"rgb(200, 20, 35)",width:2});function i(){return new Lr["c"]({image:new hn["a"]({stroke:a,points:4,radius:10,radius2:0,angle:Math.PI/4}),fill:t,stroke:s})}this.vectorLayer=new un["a"]({style:i});var r=new zr["a"]({color:"rgba(255,255,255,0.6)"});function o(e){var t=new bn["a"]({font:"15px sans-serif",text:e.getProperties().name,overflow:!0,backgroundFill:r,padding:[2,2,2,2]});return new Lr["c"]({text:t})}this.vectorLabelLayer=new un["a"]({style:o,declutter:!0,renderMode:"image"});var n=new Cr["b"]({});e.olmap=new Er["a"]({target:"olmap-vectorviewer",layers:[new Or["a"]({source:n}),this.vectorLayer,this.vectorLabelLayer],view:new Tr["a"]({center:jr["h"]([11,20.82]),zoom:3}),controls:$r["a"]({attributionOptions:{collapsible:!1}}).extend([new Ar["a"],new Dr["a"]({projection:"EPSG:4326",target:"foot-end-1",coordinateFormat:function(e){return Object(Ir["j"])(e,4)}})])}),e.olmap.on("click",(function(t){var s=e.vectorSource.getClosestFeatureToCoordinate(t.coordinate);e.selectedFeatures=[s],e.featureDetailsShow=!0})),this.refreshVectorSource()},destroyed:function(){document.getElementById("foot-start-1").innerHTML="?",document.getElementById("foot-end-1").innerHTML="?"}},qc=Uc,Wc=(s("e937"),s("799c"),Object(p["a"])(qc,Lc,Bc,!1,null,"17956afc",null)),Hc=Wc.exports;a["default"].use(h["a"]);var Jc=new h["a"]({routes:[{path:"/",component:k},{path:"/layers",component:A,children:[{path:"overview",component:ee},{path:"rasterdbs/:rasterdb",component:Nt,props:!0},{path:"pointdbs/:pointdb",component:Ki,props:!0},{path:"pointclouds/:pointcloud",component:Rs,props:!0},{path:"voxeldbs/:voxeldb",component:Pa,props:!0},{path:"vectordbs/:vectordb",component:Vi,props:!0},{path:"poi_groups/:poi_group",component:or,props:!0},{path:"roi_groups/:roi_group",component:_r,props:!0},{path:"*",redirect:"overview"},{path:"",redirect:"overview"}]},{path:"/explorer",component:Qr},{path:"/viewer/:rasterdb?",component:Mn,props:function(e){return{rasterdb:e.params.rasterdb,timestamp:e.query.timestamp,product:e.query.product,vectordb:e.query.vectordb}}},{path:"/upload",component:Hn},{path:"/tools",component:uc,children:[{path:"info",component:hc},{path:"status",component:Sc},{path:"task",component:Mc},{path:"accounts",component:sc},{path:"vectorviewer/:vectordb?",component:Hc,props:!0},{path:"*",redirect:"info"},{path:"",redirect:"info"}]},{path:"/files",component:Nc},{path:"/vectorviewer/:vectordb?",redirect:function(e){return console.log(e),{path:"/viewer",query:{vectordb:e.params.vectordb}}}},{path:"*",redirect:"/"}]}),Qc={data:void 0,mode:"init",message:"",messageActive:!1},Yc={names:function(e){return void 0===e.data?[]:e.data.map((function(e){return e.name}))}},Kc={init:function(e){var t=e.state,s=e.dispatch,a=t.mode;"init"!==a&&"error"!==a||s("refresh")},refresh:function(e){var t=e.state,s=e.commit,a=e.rootState;t.mode="load",I.a.get(a.identity.urlPrefix+"../../rasterdbs.json?vuex").then((function(e){t.data=e.data.rasterdbs,t.mode="ready"})).catch((function(e){t.mode="error",s("setMessage",e)}))}},Xc={setMessage:function(e,t){e.message=t,e.messageActive=!0},closeMessage:function(e){e.messageActive=!1}},Zc={namespaced:!0,state:Qc,getters:Yc,actions:Kc,mutations:Xc},el={data:void 0,mode:"init",message:"",messageActive:!1},tl={names:function(e){return void 0===e.data?[]:e.data.map((function(e){return e.name}))}},sl={init:function(e){var t=e.state,s=e.dispatch,a=t.mode;"init"!==a&&"error"!==a||s("refresh")},refresh:function(e){var t=e.state,s=e.commit,a=e.rootState;t.mode="load",I.a.get(a.identity.urlPrefix+"../../pointclouds?vuex").then((function(e){t.data=e.data.pointclouds,t.mode="ready"})).catch((function(e){t.mode="error",s("setMessage",e)}))}},al={setMessage:function(e,t){e.message=t,e.messageActive=!0},closeMessage:function(e){e.messageActive=!1}},il={namespaced:!0,state:el,getters:tl,actions:sl,mutations:al},rl={data:void 0,mode:"init",message:"",messageActive:!1},ol={names:function(e){return void 0===e.data?[]:e.data.map((function(e){return e.name}))}},nl={init:function(e){var t=e.state,s=e.dispatch,a=t.mode;"init"!==a&&"error"!==a||s("refresh")},refresh:function(e){var t=e.state,s=e.commit,a=e.rootState;t.mode="load",I.a.get(a.identity.urlPrefix+"../../voxeldbs?vuex").then((function(e){t.data=e.data.voxeldbs,t.mode="ready"})).catch((function(e){t.mode="error",s("setMessage",e)}))}},cl={setMessage:function(e,t){e.message=t,e.messageActive=!0},closeMessage:function(e){e.messageActive=!1}},ll={namespaced:!0,state:rl,getters:ol,actions:nl,mutations:cl},dl={data:void 0,mode:"init",message:"",messageActive:!1},ul={},vl={init:function(e){var t=e.state,s=e.dispatch,a=t.mode;"init"!==a&&"error"!==a||s("refresh")},refresh:function(e){var t=e.state,s=e.commit,a=e.rootState;t.mode="load",I.a.get(a.identity.urlPrefix+"../../vectordbs?vuex").then((function(e){t.data=e.data.vectordbs,t.mode="ready"})).catch((function(e){t.mode="error",s("setMessage",e)}))}},ml={setMessage:function(e,t){e.message=t,e.messageActive=!0},closeMessage:function(e){e.messageActive=!1}},pl={namespaced:!0,state:dl,getters:ul,actions:vl,mutations:ml},_l={data:void 0,mode:"init",message:"",messageActive:!1},fl={names:function(e){return void 0===e.data?[]:e.data.map((function(e){return e.name}))}},hl={init:function(e){var t=e.state,s=e.dispatch,a=t.mode;"init"!==a&&"error"!==a||s("refresh")},refresh:function(e){var t=e.state,s=e.commit,a=e.rootState;t.mode="load",I.a.get(a.identity.urlPrefix+"../../pointdbs?vuex").then((function(e){t.data=e.data.pointdbs,t.mode="ready"})).catch((function(e){t.mode="error",s("setMessage",e)}))}},bl={setMessage:function(e,t){e.message=t,e.messageActive=!0},closeMessage:function(e){e.messageActive=!1}},gl={namespaced:!0,state:_l,getters:fl,actions:hl,mutations:bl},yl=!1,xl={data:void 0,mode:"init",message:"",messageActive:!1,transactionCount:0,transactionRunCount:0,urlPrefix:yl?"http://127.0.0.1:8081/":""},wl={isAdmin:function(e){return void 0!==e.data&&(void 0!==e.data.roles&&e.data.roles.includes("admin"))}},kl={closeMessage:function(e){e.messageActive=!1},incrementTransactionCount:function(e){e.transactionCount++},incrementTransactionRunCount:function(e){e.transactionRunCount++},decrementTransactionRunCount:function(e){e.transactionRunCount--},setUrlPrefix:function(e,t){e.urlPrefix=t},setData:function(e,t){e.data=t,e.mode="ready"},setError:function(e,t){e.message=t,e.messageActive=!0,e.mode="error"}},El={init:function(e){var t=e.state,s=e.dispatch,a=t.mode;"init"!==a&&"error"!==a||s("refresh")},refresh:function(e){var t=e.state,s=e.commit,a=e.rootState;t.mode="load",I.a.get(a.identity.urlPrefix+"../../api/identity").then((function(e){s("setData",e.data)})).catch((function(e){s("setError",Sl(e))}))}};function Sl(e){return e.response?e.response.data?e.response.data:e.response:e.request?"network error":e.message?e.message:e}var Ol={namespaced:!0,state:xl,getters:wl,mutations:kl,actions:El},Pl={data:void 0,mode:"init",message:"",messageActive:!1},Cl={names:function(e){return void 0===e.data?[]:e.data.map((function(e){return e.name}))}},Tl={init:function(e){var t=e.state,s=e.dispatch,a=t.mode;"init"!==a&&"error"!==a||s("refresh")},refresh:function(e){var t=e.state,s=e.commit,a=e.rootState;t.mode="load",I.a.get(a.identity.urlPrefix+"../../poi_groups?vuex").then((function(e){t.data=e.data.poi_groups,t.mode="ready"})).catch((function(e){t.mode="error",s("setMessage",e)}))}},jl={setMessage:function(e,t){e.message=t,e.messageActive=!0},closeMessage:function(e){e.messageActive=!1}},Ml={namespaced:!0,state:Pl,getters:Cl,actions:Tl,mutations:jl},Rl={data:void 0,mode:"init",message:"",messageActive:!1},$l={names:function(e){return void 0===e.data?[]:e.data.map((function(e){return e.name}))}},Al={init:function(e){var t=e.state,s=e.dispatch,a=t.mode;"init"!==a&&"error"!==a||s("refresh")},refresh:function(e){var t=e.state,s=e.commit,a=e.rootState;t.mode="load",I.a.get(a.identity.urlPrefix+"../../roi_groups?vuex").then((function(e){t.data=e.data.roi_groups,t.mode="ready"})).catch((function(e){t.mode="error",s("setMessage",e)}))}},Dl={setMessage:function(e,t){e.message=t,e.messageActive=!0},closeMessage:function(e){e.messageActive=!1}},zl={namespaced:!0,state:Rl,getters:$l,actions:Al,mutations:Dl},Nl={data:void 0,mode:"init",message:"",messageActive:!1},Ll={},Bl={init:function(e){var t=e.state,s=e.dispatch,a=t.mode;"init"!==a&&"error"!==a||s("refresh")},refresh:function(e){var t=e.state,s=e.commit,a=e.rootState;t.mode="load",I.a.get(a.identity.urlPrefix+"../../api/layer_tags?vuex").then((function(e){t.data=e.data.layer_tags,t.mode="ready"})).catch((function(e){t.mode="error",s("setMessage",e)}))}},Il={setMessage:function(e,t){e.message=t,e.messageActive=!0},closeMessage:function(e){e.messageActive=!1}},Fl={namespaced:!0,state:Nl,getters:Ll,actions:Bl,mutations:Il},Vl={data:void 0,mode:"init",message:"",messageActive:!1},Gl={},Ul={setMessage:function(e,t){e.message=t,e.messageActive=!0},closeMessage:function(e){e.messageActive=!1},setData:function(e,t){e.data=t,e.mode="ready"},setError:function(e,t){e.message=t,e.messageActive=!0,e.mode="error"}},ql={init:function(e){var t=e.state,s=e.dispatch,a=t.mode;"init"!==a&&"error"!==a||s("refresh")},refresh:function(e){var t=e.state,s=e.commit,a=e.rootState;t.mode="load",I.a.get(a.identity.urlPrefix+"../../api/roles").then((function(e){s("setData",e.data.roles)})).catch((function(e){s("setError",Wl(e))}))}};function Wl(e){return e.response?e.response.data?e.response.data:e.response:e.request?"network error":e.message?e.message:e}var Hl={namespaced:!0,state:Vl,getters:Gl,mutations:Ul,actions:ql};a["default"].use(c["a"]);var Jl=!1,Ql={rasterdbs:Zc,pointclouds:il,voxeldbs:ll,vectordbs:pl,pointdbs:gl,identity:Ol,poi_groups:Ml,roi_groups:zl,layer_tags:Fl,acl_roles:Hl},Yl={},Kl={apiUrl:function(){return function(e){return Jl?"http://127.0.0.1:8081/"+e:"../../"+e}}},Xl={init:function(e){var t=e.dispatch;t("identity/init")}},Zl={},ed=new c["a"].Store({modules:Ql,state:Yl,getters:Kl,actions:Xl,mutations:Zl});function td(e){while(void 0!==e&&null!==e){if(e.classList.contains("uploader-drop"))return!0;e=e.parentElement}return!1}a["default"].config.productionTip=!1,window.addEventListener("dragenter",(function(e){td(e.target)||(e.preventDefault(),e.dataTransfer.effectAllowed="none",e.dataTransfer.dropEffect="none")}),!1),window.addEventListener("dragover",(function(e){td(e.target)||(e.preventDefault(),e.dataTransfer.effectAllowed="none",e.dataTransfer.dropEffect="none")})),window.addEventListener("drop",(function(e){td(e.target)||(e.preventDefault(),e.dataTransfer.effectAllowed="none",e.dataTransfer.dropEffect="none")})),window.addEventListener("dragstart",(function(e){e.preventDefault(),e.dataTransfer.effectAllowed="none",e.dataTransfer.dropEffect="none"})),new a["default"]({router:Jc,store:ed,render:function(e){return e(f)}}).$mount("#app")},5896:function(e,t,s){"use strict";var a=s("bf44"),i=s.n(a);i.a},"5b47":function(e,t,s){"use strict";var a=s("df69"),i=s.n(a);i.a},6264:function(e,t,s){"use strict";var a=s("2c83"),i=s.n(a);i.a},6541:function(e,t,s){"use strict";var a=s("3d53"),i=s.n(a);i.a},"65d4":function(e,t,s){},"6b77":function(e,t,s){"use strict";var a=s("9ff6"),i=s.n(a);i.a},"6c52":function(e,t,s){},"6c90":function(e,t,s){"use strict";var a=s("4cd6"),i=s.n(a);i.a},"6cd6":function(e,t,s){},"6f24":function(e,t,s){"use strict";var a=s("1e89"),i=s.n(a);i.a},"6fcf":function(e,t,s){},7103:function(e,t,s){"use strict";var a=s("cc42"),i=s.n(a);i.a},7120:function(e,t,s){"use strict";var a=s("8d4b"),i=s.n(a);i.a},"712e":function(e,t,s){"use strict";var a=s("831a"),i=s.n(a);i.a},"772a":function(e,t,s){},"799c":function(e,t,s){"use strict";var a=s("8101"),i=s.n(a);i.a},"7ac7":function(e,t,s){"use strict";var a=s("6c52"),i=s.n(a);i.a},"7e5a":function(e,t,s){},8101:function(e,t,s){},"822c":function(e,t,s){},8246:function(e,t,s){"use strict";var a=s("9059"),i=s.n(a);i.a},"831a":function(e,t,s){},"85ec":function(e,t,s){},8890:function(e,t,s){"use strict";var a=s("c7e8"),i=s.n(a);i.a},"8d4b":function(e,t,s){},"8fde":function(e,t,s){},"904f":function(e,t,s){"use strict";var a=s("6fcf"),i=s.n(a);i.a},9059:function(e,t,s){},"913e":function(e,t,s){},9801:function(e,t,s){"use strict";var a=s("7e5a"),i=s.n(a);i.a},9883:function(e,t,s){"use strict";var a=s("2b55"),i=s.n(a);i.a},9985:function(e,t,s){},"9ed1":function(e,t,s){},"9ff6":function(e,t,s){},a28d:function(e,t,s){},a330:function(e,t,s){"use strict";var a=s("6cd6"),i=s.n(a);i.a},adfc:function(e,t,s){"use strict";var a=s("a28d"),i=s.n(a);i.a},ae68:function(e,t,s){},b7b4:function(e,t,s){"use strict";var a=s("e845"),i=s.n(a);i.a},ba66:function(e,t,s){"use strict";var a=s("4e42"),i=s.n(a);i.a},bf44:function(e,t,s){},bfd8:function(e,t,s){},c445:function(e,t,s){"use strict";var a=s("26d7"),i=s.n(a);i.a},c7e8:function(e,t,s){},cb36:function(e,t,s){"use strict";var a=s("4c5a"),i=s.n(a);i.a},cc42:function(e,t,s){},d3b5:function(e,t,s){"use strict";var a=s("8fde"),i=s.n(a);i.a},d57c:function(e,t,s){},deb3:function(e,t,s){"use strict";var a=s("913e"),i=s.n(a);i.a},df69:function(e,t,s){},dfaa:function(e,t,s){"use strict";var a=s("1d7a"),i=s.n(a);i.a},e673:function(e,t,s){},e7b2:function(e,t,s){"use strict";var a=s("65d4"),i=s.n(a);i.a},e845:function(e,t,s){},e937:function(e,t,s){"use strict";var a=s("4dd6"),i=s.n(a);i.a},ea1d:function(e,t,s){"use strict";var a=s("22ec"),i=s.n(a);i.a},eaa4:function(e,t,s){"use strict";var a=s("2b14"),i=s.n(a);i.a},f45c:function(e,t,s){},f622:function(e,t,s){},fcb8:function(e,t,s){"use strict";var a=s("ae68"),i=s.n(a);i.a}});